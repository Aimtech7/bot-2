const _0x48c482=_0x3600;(function(_0x145d7a,_0x1ccd24){const _0x1605c4=_0x3600,_0x2fb7e1=_0x145d7a();while(!![]){try{const _0x2935ec=-parseInt(_0x1605c4(0x1e5))/(0x933*0x3+0x366*0xa+-0x3d94)*(-parseInt(_0x1605c4(0x236))/(-0x2126+-0x1*-0x4de+0x1*0x1c4a))+parseInt(_0x1605c4(0x1c4))/(-0xdc6+0x6bd+0x70c)*(-parseInt(_0x1605c4(0x1e1))/(0x155d+-0x250e+-0x1*-0xfb5))+parseInt(_0x1605c4(0x213))/(0x18d5+-0x4e2*-0x3+0x13bb*-0x2)+parseInt(_0x1605c4(0x27b))/(-0x67a+0x7b*0x37+0x1*-0x13ed)*(-parseInt(_0x1605c4(0x26b))/(-0x3e9+0x977*-0x4+0x6b*0x64))+parseInt(_0x1605c4(0x230))/(0xd4*-0xb+0x3*0x757+-0x1*0xce1)+parseInt(_0x1605c4(0x274))/(-0x1656+-0x977+-0xfeb*-0x2)*(parseInt(_0x1605c4(0x1f9))/(-0x11f*0x3+0xe1c+-0xab5))+-parseInt(_0x1605c4(0x231))/(0x2640+0xc98+-0x11*0x2fd);if(_0x2935ec===_0x1ccd24)break;else _0x2fb7e1['push'](_0x2fb7e1['shift']());}catch(_0x4e0bf1){_0x2fb7e1['push'](_0x2fb7e1['shift']());}}}(_0x2fdd,0xa6487*0x1+0xb64f8+-0xaa027*0x1));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getBotJid}from'../utils/bot-state.js';import{userjid}from'../utils/sudo.js';import{getSenderForMsg}from'./sudonumber.js';export const name='edit-logge'+'r';export const version=_0x48c482(0x1ed);export const priority=-0x873*0x1+0x1291*-0x2+0x2dc7;let botInstance=null,cleanupInterval=null;const FALLBACKS={'EDIT_WINDOW_MINUTES':0xf,'CLEANUP_INTERVAL_MS':(0x5ac*0x4+-0x26e8+0x1074)*(0x11*0x148+-0x38f*-0x9+-0x31e7),'MAX_SEND_RETRIES':0x3,'INITIAL_BACKOFF_MS':0x1f4};let EDIT_WINDOW_MINUTES=FALLBACKS[_0x48c482(0x1db)+_0x48c482(0x26f)],CLEANUP_INTERVAL_MS=FALLBACKS[_0x48c482(0x20a)+_0x48c482(0x279)],MAX_SEND_RETRIES=FALLBACKS['MAX_SEND_R'+'ETRIES'],INITIAL_BACKOFF_MS=FALLBACKS[_0x48c482(0x25b)+_0x48c482(0x275)];async function ensureTable(){const _0x3f720e=_0x48c482;await db[_0x3f720e(0x241)](_0x3f720e(0x1f7)+'LE\x20IF\x20NOT\x20'+_0x3f720e(0x1c9)+_0x3f720e(0x1cc)+_0x3f720e(0x23d)+_0x3f720e(0x222)+_0x3f720e(0x1c1)+_0x3f720e(0x205)+_0x3f720e(0x26a)+_0x3f720e(0x233)+_0x3f720e(0x1ff)+_0x3f720e(0x229)+_0x3f720e(0x260)+_0x3f720e(0x268)+_0x3f720e(0x1de)+'\x20created_f'+_0x3f720e(0x1e9)+'NTEGER\x20DEF'+_0x3f720e(0x23c)+_0x3f720e(0x24a)+_0x3f720e(0x26e)+_0x3f720e(0x261));}function _0x2fdd(){const _0x436e10=[')\x0a\x20\x20\x20\x20\x20VAL','chat','ponseMessa','ttonId','oldMessage','PRIMARY\x20KE','UES\x20(?,\x20?,','videoMessa','\x0a```','nd.','length','oldText','T,\x0a\x20\x20\x20\x20tex','ze\x20require','wId','d\x20to\x20messa','NT(*)\x20AS\x20c','ener','jid','9533592tSzyvL','28149638GXvBpZ','M\x20edits\x20WH','XT,\x0a\x20\x20\x20\x20ch','map','SELECT\x20id,','7796bmbcEx','n,\x20created','t\x20in\x20cache','_from_edit','get','field','AULT\x200,\x0a\x20\x20','d\x20INTEGER\x20','listRespon','\x20(edited\x20','\x20WHERE\x20sav','exec','ext,\x20raw_j','r\x20error:\x20','filter','\x20error:\x20','rows','extendedTe','from','message.ed','\x20\x20saved_at','r]\x20unexpec','ND\x20created','originalMe','\x20<\x20?','âœï¸\x20*Edited\x20','old_text','\x20old\x20edit\x20','r]\x20attache','To:*\x0a```\x0a','OldEditsSa','r]\x20DB\x20init','ue\x20FROM\x20de','string','ized','ge.edit','text','INITIAL_BA','old_messag','ctReply','hat_jid,\x20t','r]\x20failed\x20','t\x20TEXT,\x0a\x20\x20','\x20);','remoteJid','removeList','@g.us','sg_id,\x20cha','findings','tempt\x20','\x20\x20raw_json','ERE\x20id\x20IN\x20','\x20msg_id\x20TE','7AeEPpR','SELECT\x20val','conversati','\x20INTEGER\x0a\x20','W_MINUTES','fe\x20error:\x20','ata','function','sender_pn','783225LYyozp','CKOFF_MS','\x20=\x201','time','r]\x20cleaned','TERVAL_MS','age\x20missin','480288SriwRt','groupMetad','\x20Edited*\x0a\x0a','SELECT\x20id\x20','isArray','Y\x20AUTOINCR','selectedBu','sender_jid','3oTinpS','SELECT\x20COU','join','t_pn','it,\x20saved_','EXISTS\x20edi','msg_id','new_messag','ts\x20(\x0a\x20\x20\x20\x20i','sender_num','(unknown)','indexOf','ESC\x20LIMIT\x20','sendMessag','[Original\x20','\x20failed:\x20','OT\x20NULL\x20AN','DELETE\x20FRO','push','subject','\x20FROM\x20edit','msgId','tAlt','EDIT_WINDO','[EditLogge','r]\x20cleanup','\x20TEXT,\x0a\x20\x20\x20','slice','floor','3318964dkAJsM','g_id\x20=\x20?\x20A','\x20ORDER\x20BY\x20','catch','330KgnfxA','chatId','sock','status','rom_edit\x20I','endsWith','run','ed_from_ed','1.7.0','object','ed_at\x20IS\x20N','ber','caption','buttonsRes','rate','e.sendMess','ðŸ”\x20*Origina','t_jid,\x20tex','CREATE\x20TAB','newText','80BfFnXr','replace','t,\x20raw_jso','newMessage','message\x20no','new_text','at_jid\x20TEX','l\x20Message:','remoteJidA','âœï¸\x20*Message','\x20?,\x20?,\x20?,\x20','MAX_SEND_R','EMENT,\x0a\x20\x20\x20','INSERT\x20INT','includes','imageMessa','O\x20edits\x20(m','CLEANUP_IN','value','ailable;\x20d','message','botInstanc','now','singleSele','saved_at\x20D','\x20msg_id,\x20c','5130440kDTXPQ','=\x27target_j','msg_id\x20=\x20?','r]\x20initial','key','selectedRo','seMessage','id\x27','number','*\x0a```\x0a'];_0x2fdd=function(){return _0x436e10;};return _0x2fdd();}function nowSeconds(){const _0x170ab2=_0x48c482;return Math[_0x170ab2(0x1e0)](Date[_0x170ab2(0x20f)]()/(-0x91e+0x50c+0x7fa));}async function insertEditVersion(_0x103f36,_0x82caba,_0x3e2c4e,_0x111e35,_0x206129=0x212*-0x11+-0x1e7*-0x8+0x13fb){const _0x35bc7a=_0x48c482,_0x10e362=nowSeconds();await db[_0x35bc7a(0x1eb)](_0x35bc7a(0x206)+_0x35bc7a(0x209)+_0x35bc7a(0x265)+_0x35bc7a(0x1f6)+_0x35bc7a(0x1fb)+_0x35bc7a(0x237)+_0x35bc7a(0x239)+',\x20saved_at'+_0x35bc7a(0x21d)+_0x35bc7a(0x223)+_0x35bc7a(0x203)+'?)',[_0x103f36||null,_0x82caba||null,_0x3e2c4e||'',_0x111e35||null,_0x206129?0x1c74+-0x10a3+-0xbd0:-0x4*0xf2+0x1*0x1265+-0xe9d,_0x10e362]);}async function fetchLatestEditForMsg(_0x1a35cf){const _0xbe7c9=_0x48c482;if(!_0x1a35cf)return null;const _0x2cfa1f=await db['get'](_0xbe7c9(0x235)+_0xbe7c9(0x212)+_0xbe7c9(0x25e)+_0xbe7c9(0x242)+'son,\x20creat'+_0xbe7c9(0x1ec)+_0xbe7c9(0x1c8)+'at\x20FROM\x20ed'+'its\x20WHERE\x20'+_0xbe7c9(0x215)+_0xbe7c9(0x1e3)+_0xbe7c9(0x211)+_0xbe7c9(0x1d0)+'1',[_0x1a35cf]);return _0x2cfa1f||null;}async function countEditsForMsg(_0x1cee17){const _0x4fe0f1=_0x48c482;if(!_0x1cee17)return 0xf81+-0x788+-0x7f9;const _0x3f7ebb=await db[_0x4fe0f1(0x23a)](_0x4fe0f1(0x1c5)+_0x4fe0f1(0x22d)+_0x4fe0f1(0x1d8)+'s\x20WHERE\x20ms'+_0x4fe0f1(0x1e2)+_0x4fe0f1(0x24c)+_0x4fe0f1(0x239)+_0x4fe0f1(0x276),[_0x1cee17]);return _0x3f7ebb&&typeof _0x3f7ebb['c']===_0x4fe0f1(0x21b)?_0x3f7ebb['c']:0x2*0xbb1+-0x1270+-0x1*0x4f2;}async function cleanupOldEdits(){const _0x3551bc=_0x48c482,_0x4908a1=nowSeconds()-Number(EDIT_WINDOW_MINUTES||FALLBACKS[_0x3551bc(0x1db)+'W_MINUTES'])*(0x13b6+-0x1f3+-0x1187),_0x1cae15=await db['all'](_0x3551bc(0x27e)+'FROM\x20edits'+_0x3551bc(0x240)+_0x3551bc(0x1ef)+_0x3551bc(0x1d4)+'D\x20saved_at'+_0x3551bc(0x24e),[_0x4908a1]);if(!_0x1cae15||_0x1cae15[_0x3551bc(0x227)]===-0x119*0x5+0xad7+-0x2*0x2ad)return;const _0x1f8813=_0x1cae15[_0x3551bc(0x234)](_0x8e8083=>_0x8e8083['id']),_0x4b5007=-0x15ff+-0x130c+0xdf1*0x3;for(let _0x12f041=-0x71e*-0x4+-0x49*0x2b+-0x1035;_0x12f041<_0x1f8813[_0x3551bc(0x227)];_0x12f041+=_0x4b5007){const _0x49cbf2=_0x1f8813[_0x3551bc(0x1df)](_0x12f041,_0x12f041+_0x4b5007),_0x457ca9=_0x49cbf2[_0x3551bc(0x234)](()=>'?')['join'](',');await db['run'](_0x3551bc(0x1d5)+_0x3551bc(0x232)+_0x3551bc(0x269)+'('+_0x457ca9+')',_0x49cbf2);}info(_0x3551bc(0x1dc)+_0x3551bc(0x278)+'\x20'+_0x1cae15[_0x3551bc(0x227)]+(_0x3551bc(0x251)+_0x3551bc(0x246)));}async function cleanupOldEditsSafe(){const _0x4ac59f=_0x48c482;try{await cleanupOldEdits();}catch(_0x2502d4){warn('[EditLogge'+_0x4ac59f(0x1dd)+_0x4ac59f(0x254)+_0x4ac59f(0x270)+(_0x2502d4?.[_0x4ac59f(0x20d)]||_0x2502d4));}}function _0x3600(_0xd42832,_0x36f238){const _0x24c541=_0x2fdd();return _0x3600=function(_0x2560cb,_0x25db1a){_0x2560cb=_0x2560cb-(0x5*0x4fc+0x36f+0x1*-0x1a9b);let _0x45fc33=_0x24c541[_0x2560cb];return _0x45fc33;},_0x3600(_0xd42832,_0x36f238);}function extractText(_0x3de94e,_0xb2ff48=!![]){const _0x2f0a50=_0x48c482;if(!_0x3de94e)return'';if(_0xb2ff48){if(typeof _0x3de94e[_0x2f0a50(0x1f8)]==='string')return _0x3de94e[_0x2f0a50(0x1f8)];if(typeof _0x3de94e[_0x2f0a50(0x1fe)]===_0x2f0a50(0x257))return _0x3de94e[_0x2f0a50(0x1fe)];}else{if(typeof _0x3de94e[_0x2f0a50(0x228)]===_0x2f0a50(0x257))return _0x3de94e[_0x2f0a50(0x228)];if(typeof _0x3de94e[_0x2f0a50(0x250)]==='string')return _0x3de94e[_0x2f0a50(0x250)];}const _0x5d6d61=_0xb2ff48?_0x3de94e[_0x2f0a50(0x1fc)]||_0x3de94e['message']||_0x3de94e[_0x2f0a50(0x1cb)+'e']:_0x3de94e[_0x2f0a50(0x221)]||_0x3de94e['message']||_0x3de94e[_0x2f0a50(0x25c)+'e'];if(_0x5d6d61&&typeof _0x5d6d61===_0x2f0a50(0x1ee)){if(_0x5d6d61[_0x2f0a50(0x26d)+'on'])return _0x5d6d61['conversati'+'on'];if(_0x5d6d61[_0x2f0a50(0x247)+'xtMessage']?.[_0x2f0a50(0x25a)])return _0x5d6d61[_0x2f0a50(0x247)+'xtMessage'][_0x2f0a50(0x25a)];if(_0x5d6d61['imageMessa'+'ge']?.['caption'])return _0x5d6d61[_0x2f0a50(0x208)+'ge'][_0x2f0a50(0x1f1)];if(_0x5d6d61[_0x2f0a50(0x224)+'ge']?.[_0x2f0a50(0x1f1)])return _0x5d6d61[_0x2f0a50(0x224)+'ge'][_0x2f0a50(0x1f1)];if(_0x5d6d61[_0x2f0a50(0x1f2)+_0x2f0a50(0x21f)+'ge']?.[_0x2f0a50(0x1c2)+_0x2f0a50(0x220)])return _0x5d6d61[_0x2f0a50(0x1f2)+'ponseMessa'+'ge'][_0x2f0a50(0x1c2)+'ttonId'];if(_0x5d6d61['listRespon'+_0x2f0a50(0x219)]?.[_0x2f0a50(0x210)+_0x2f0a50(0x25d)]?.[_0x2f0a50(0x218)+_0x2f0a50(0x22b)])return _0x5d6d61[_0x2f0a50(0x23e)+_0x2f0a50(0x219)]['singleSele'+_0x2f0a50(0x25d)]['selectedRo'+'wId'];}if(typeof _0x3de94e[_0x2f0a50(0x25a)]===_0x2f0a50(0x257))return _0x3de94e[_0x2f0a50(0x25a)];return'';}function numberFromRawJid(_0x367761){const _0x2366cd=_0x48c482;if(!_0x367761)return'';try{const _0x2b8eac=String(_0x367761),_0x17e33d=_0x2b8eac[_0x2366cd(0x1cf)]('@'),_0x435bf5=_0x17e33d===-(0x173d+0x149+0x1*-0x1885)?_0x2b8eac:_0x2b8eac[_0x2366cd(0x1df)](0x3*-0x656+-0x1*-0x20cb+-0xdc9,_0x17e33d),_0x289693=_0x435bf5['indexOf'](':'),_0x3ec6dd=_0x289693===-(0x127b+0x2*0xf0e+-0x3096*0x1)?_0x435bf5:_0x435bf5[_0x2366cd(0x1df)](-0xc4b*-0x2+-0x186f*-0x1+-0x3105*0x1,_0x289693);return _0x3ec6dd[_0x2366cd(0x1fa)](/^\+/,'');}catch{return'';}}function isGroupJid(_0x17c58b){const _0x44b13e=_0x48c482;return typeof _0x17c58b===_0x44b13e(0x257)&&_0x17c58b[_0x44b13e(0x1ea)](_0x44b13e(0x264));}async function sendWithRetry(_0x5d7634,_0x196f21){const _0x5452d0=_0x48c482,_0x53f643=Number(MAX_SEND_RETRIES||FALLBACKS[_0x5452d0(0x204)+'ETRIES']);let _0x44b481=-0x2*0x43+0xdce+-0xd48,_0x34627e=Number(INITIAL_BACKOFF_MS||FALLBACKS[_0x5452d0(0x25b)+_0x5452d0(0x275)]);const _0x5086e8=[];if(_0x196f21)_0x5086e8[_0x5452d0(0x1d6)](_0x196f21);try{const _0x3f615d=await db[_0x5452d0(0x23a)](_0x5452d0(0x26c)+_0x5452d0(0x256)+'lete_prefs'+'\x20WHERE\x20key'+_0x5452d0(0x214)+_0x5452d0(0x21a));if(_0x3f615d&&_0x3f615d['value'])_0x5086e8['push'](String(_0x3f615d[_0x5452d0(0x20b)]));}catch{}const _0x1987d5=getBotJid();if(_0x1987d5)_0x5086e8['push'](_0x1987d5);const _0x334155=Array[_0x5452d0(0x248)](new Set(_0x5086e8[_0x5452d0(0x244)](Boolean)));if(_0x334155[_0x5452d0(0x227)]===-0x5*0x6d1+-0xe1*0x24+0x41b9)return warn('[EditLogge'+'r]\x20no\x20send'+'\x20target\x20av'+_0x5452d0(0x20c)+'ropping\x20se'+_0x5452d0(0x226)),![];const _0x945e1c=_0x334155[-0x63*-0x41+0x23*0x9f+0x1f4*-0x18];while(_0x44b481<_0x53f643){_0x44b481++;try{if(!botInstance||typeof botInstance[_0x5452d0(0x1d1)+'e']!==_0x5452d0(0x272))throw new Error(_0x5452d0(0x20e)+_0x5452d0(0x1f4)+_0x5452d0(0x27a)+'g');return await botInstance[_0x5452d0(0x1d1)+'e'](_0x945e1c,_0x5d7634),!![];}catch(_0x27f9c3){warn(_0x5452d0(0x1dc)+'r]\x20send\x20at'+_0x5452d0(0x267)+_0x44b481+_0x5452d0(0x1d3)+(_0x27f9c3?.[_0x5452d0(0x20d)]||_0x27f9c3));const _0x7c98ac=String(_0x27f9c3?.[_0x5452d0(0x20d)]||'')['toLowerCas'+'e']()[_0x5452d0(0x207)](_0x5452d0(0x1f3))||_0x27f9c3?.[_0x5452d0(0x1e8)]===0x1805+-0x26a3+0x1*0x104b;if(_0x44b481>=_0x53f643||!_0x7c98ac)return![];await new Promise(_0x55faf9=>setTimeout(_0x55faf9,_0x34627e)),_0x34627e*=-0x9*0x3f9+-0xf98+0x1*0x335b;}}return![];}async function buildAndSendLog({chatJid:_0x248193,msgId:_0x535a70,originalText:_0x5233c5,newText:_0x250325,senderNumber:_0x17d99b,editCount:_0x3f8634}){const _0x17af87=_0x48c482;let _0x16bdc1=null;if(isGroupJid(_0x248193)&&botInstance?.[_0x17af87(0x1e7)]?.[_0x17af87(0x27c)+_0x17af87(0x271)])try{const _0x279279=await botInstance['sock'][_0x17af87(0x27c)+_0x17af87(0x271)](_0x248193);if(_0x279279?.[_0x17af87(0x1d7)])_0x16bdc1=_0x279279[_0x17af87(0x1d7)];}catch{}const _0x248d07=_0x17af87(0x202)+_0x17af87(0x27d),_0x28a69b='ðŸ‘¤\x20*User:*\x20'+'@'+(_0x17d99b||''),_0x1bbf55='ðŸ’¬\x20*Chat:*\x20'+(_0x16bdc1?_0x16bdc1+'\x20('+_0x248193+')':_0x248193||_0x17af87(0x1ce)),_0x36a7b1='ðŸ†”\x20*Message'+'\x20ID:*\x20'+(_0x535a70||_0x17af87(0x1ce)),_0x3c33d0=typeof _0x3f8634===_0x17af87(0x21b)&&_0x3f8634>-0x1e9f+0x1a*0x59+0x1595?_0x17af87(0x23f)+_0x3f8634+'\x20'+(_0x3f8634===0xaf9+-0x1ba4+0x10ac?_0x17af87(0x277):'times')+')':'',_0x201362=_0x17af87(0x1f5)+_0x17af87(0x200)+_0x3c33d0+_0x17af87(0x21c)+(_0x5233c5||_0x17af87(0x1d2)+_0x17af87(0x1fd)+_0x17af87(0x238)+']')+'\x0a```',_0x2b0330=_0x17af87(0x24f)+_0x17af87(0x253)+(_0x250325||'')+_0x17af87(0x225),_0x25d252=[_0x248d07,_0x28a69b,_0x1bbf55,_0x36a7b1,'',_0x201362,'',_0x2b0330][_0x17af87(0x1c6)]('\x0a');return await sendWithRetry({'text':_0x25d252},null);}async function handleMessageEdit(_0x3650c6){const _0x47d110=_0x48c482;try{if(!_0x3650c6)return;let _0x20f2f0=[],_0x215965=null;try{const _0x467f9e=userjid(_0x3650c6);_0x20f2f0=_0x467f9e?.[_0x47d110(0x266)]||[],_0x215965=_0x467f9e?.['id']||null;}catch(_0x2f3071){}let _0x16929b=_0x215965||_0x3650c6[_0x47d110(0x24d)+'ssageId']||_0x3650c6[_0x47d110(0x1d9)]||_0x3650c6[_0x47d110(0x1ca)]||_0x3650c6['id']||_0x3650c6[_0x47d110(0x20d)]?.[_0x47d110(0x217)]?.['id']||null,_0x1060b6=_0x3650c6[_0x47d110(0x1e6)]||_0x3650c6[_0x47d110(0x21e)]||_0x3650c6[_0x47d110(0x20d)]?.[_0x47d110(0x217)]?.[_0x47d110(0x262)]||null,_0x522848='';try{if(_0x16929b){const _0x5401d9=await getSenderForMsg(_0x16929b);_0x5401d9&&(_0x522848=_0x5401d9['sender_num'+'ber']&&String(_0x5401d9[_0x47d110(0x1cd)+_0x47d110(0x1f0)])['trim']()?String(_0x5401d9[_0x47d110(0x1cd)+_0x47d110(0x1f0)])['trim']():numberFromRawJid(_0x5401d9[_0x47d110(0x1c3)]));}}catch(_0x525f52){}if(!_0x522848&&Array[_0x47d110(0x1c0)](_0x20f2f0)&&_0x20f2f0[_0x47d110(0x227)]){const _0xab3ee1=[_0x47d110(0x201)+'lt',_0x47d110(0x273),'participan'+_0x47d110(0x1da),'participan'+_0x47d110(0x1c7)];let _0x63bfaa=null;for(const _0x3db743 of _0xab3ee1){_0x63bfaa=_0x20f2f0['find'](_0x2a9f4c=>_0x2a9f4c[_0x47d110(0x23b)]===_0x3db743&&typeof _0x2a9f4c[_0x47d110(0x22f)]===_0x47d110(0x257));if(_0x63bfaa)break;}if(!_0x63bfaa)_0x63bfaa=_0x20f2f0[-0x139*-0x2+0xd4f*0x1+0xfc1*-0x1];_0x63bfaa&&_0x63bfaa['jid']&&(_0x522848=numberFromRawJid(_0x63bfaa[_0x47d110(0x22f)]));}const _0x5efac4=extractText(_0x3650c6,!![])||'',_0x374ac5=_0x16929b?await fetchLatestEditForMsg(_0x16929b):null,_0x2c6777=_0x374ac5&&typeof _0x374ac5[_0x47d110(0x25a)]===_0x47d110(0x257)&&_0x374ac5[_0x47d110(0x25a)][_0x47d110(0x227)]?_0x374ac5[_0x47d110(0x25a)]:extractText(_0x3650c6,![])||_0x47d110(0x1d2)+_0x47d110(0x1fd)+'t\x20in\x20cache'+']',_0x35c9fe=_0x16929b?await countEditsForMsg(_0x16929b):-0xc55+0xd01+0x4*-0x2b,_0x340826=await buildAndSendLog({'chatJid':_0x1060b6,'msgId':_0x16929b,'originalText':_0x2c6777,'newText':_0x5efac4,'senderNumber':_0x522848,'editCount':_0x35c9fe}),_0x43a15c=((()=>{const _0xa086a8=_0x47d110;try{return JSON['stringify'](_0x3650c6)[_0xa086a8(0x1df)](-0x1d45+0x1*-0x1671+0x1*0x33b6,0x3002*0xe+-0x1*-0x1bb36+-0x2*0x16a59);}catch{return null;}})());return await insertEditVersion(_0x16929b,_0x1060b6,_0x5efac4,_0x43a15c,0x2bd*-0x3+0x1*0x1322+-0x1*0xaea),_0x340826;}catch(_0x200a5b){warn('[EditLogge'+_0x47d110(0x24b)+'ted\x20handle'+_0x47d110(0x243)+(_0x200a5b?.[_0x47d110(0x20d)]||_0x200a5b));}}export function initialize(_0x22b284){const _0x277499=_0x48c482;if(!_0x22b284)throw new Error('edit-logge'+'r\x20initiali'+_0x277499(0x22a)+'s\x20bot\x20arg');botInstance=_0x22b284,ensureTable()[_0x277499(0x1e4)](_0x577050=>{const _0x2716ee=_0x277499;error(_0x577050,_0x2716ee(0x1dc)+_0x2716ee(0x255)+_0x2716ee(0x1d3)+(_0x577050?.['message']||_0x577050));throw _0x577050;});try{botInstance['on'](_0x277499(0x249)+'it',handleMessageEdit),info(_0x277499(0x1dc)+_0x277499(0x252)+_0x277499(0x22c)+_0x277499(0x259));}catch(_0x31c5dc){warn('[EditLogge'+_0x277499(0x25f)+'to\x20attach\x20'+_0x277499(0x249)+'it:\x20'+(_0x31c5dc?.[_0x277499(0x20d)]||_0x31c5dc));}if(cleanupInterval)clearInterval(cleanupInterval);cleanupInterval=setInterval(cleanupOldEditsSafe,Number(CLEANUP_INTERVAL_MS||FALLBACKS['CLEANUP_IN'+_0x277499(0x279)])),info(_0x277499(0x1dc)+_0x277499(0x216)+_0x277499(0x258));}export function cleanup(){const _0x32fd78=_0x48c482;try{if(botInstance&&typeof botInstance[_0x32fd78(0x263)+'ener']===_0x32fd78(0x272))botInstance[_0x32fd78(0x263)+_0x32fd78(0x22e)]('message.ed'+'it',handleMessageEdit);if(cleanupInterval)clearInterval(cleanupInterval);cleanupInterval=null;}catch(_0x5bef92){warn(_0x32fd78(0x1dc)+_0x32fd78(0x1dd)+_0x32fd78(0x245)+(_0x5bef92?.['message']||_0x5bef92));}finally{botInstance=null;}}export default{'name':name,'version':version,'priority':priority,'initialize':initialize,'cleanup':cleanup};