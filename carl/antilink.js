const _0x144c3c=_0x4471;(function(_0x1190ca,_0x51c94a){const _0x271928=_0x4471,_0x3b53d8=_0x1190ca();while(!![]){try{const _0x72c77d=parseInt(_0x271928(0x26e))/(-0x166c+0x1*0x245+0x1428)+-parseInt(_0x271928(0x1bc))/(0x20e+-0x1d*-0xcb+-0x859*0x3)*(parseInt(_0x271928(0x25a))/(0x1*0xe1d+-0x1794+0x97a))+-parseInt(_0x271928(0x1c0))/(0x1*0x1a14+-0x185*-0x10+0xd0*-0x3e)*(parseInt(_0x271928(0x1e5))/(-0x6*0x353+0x1b93+-0x79c))+-parseInt(_0x271928(0x1e8))/(0x136c+-0x250e+0x11a8)+-parseInt(_0x271928(0x24a))/(0x178e*0x1+0x3fa*-0x1+-0x138d)*(parseInt(_0x271928(0x1eb))/(-0x488*-0x1+-0x13f9*0x1+0xe9*0x11))+-parseInt(_0x271928(0x26f))/(-0x1*-0x1ea1+0x381*0x1+-0x2219*0x1)*(parseInt(_0x271928(0x206))/(-0x1a22+0x15f1+0x43b))+parseInt(_0x271928(0x1c1))/(0x1*0x9eb+0xcfb+-0x16db*0x1)*(parseInt(_0x271928(0x258))/(0x255+-0x7*0x4ca+-0x2d7*-0xb));if(_0x72c77d===_0x51c94a)break;else _0x3b53d8['push'](_0x3b53d8['shift']());}catch(_0xa83224){_0x3b53d8['push'](_0x3b53d8['shift']());}}}(_0x1643,0x2a55*0x5+-0x2659+0x52934));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import*as _0x21fd58 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import _0x919ece from'linkify-it';function _0x1643(){const _0x5752ad=['\x20cleaned\x20u','filter','in\x20check\x20f',',\x20?)\x0a\x20\x20\x20\x20\x20','stringify','eleted\x20lin','e\x20failed','RY_COUNT','ðŸš«\x20*Antilin','n/bot\x20mess','cing\x20on\x20ad','ror:\x20','MAX','fromMe','endsWith','any\x20target','elist\x20=\x20ex','catch','rnings}','39095xJvPvT','[antilink]','Unknown\x20Gr','1367844nsfoeP','groupMetad','\x20sendWarni','992YTzJMz','REMOVE_ON_','\x20schema\x20cr','etting\x20err','```','ðŸ‘¤\x20*User:*\x20','XT\x20PRIMARY','ENABLED','videoMessa','participan','ðŸ”—\x20PM\x20Usage','remoteJid','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','MAX_WARNS','subject','cluded.whi','run','DISABLED','\x20\x20enabled\x20','r\x20\x27','ng\x20admin-c','ids','imageMessa','from','rnings\x20{wa','\x20group(s).','l\x20Message:','70afwquc','ðŸ”—\x20{user},\x20','\x20WHERE\x20key','ate','eation\x20fai','trim','length','remove','tus>\x20(use\x20','list\x20TEXT\x20','test','ANTILINK','sendWarnin','xtMessage','findings','whitelist','lt\x20connect','bled,\x20whit','toLowerCas','D_LINKS','hRetry\x20fai','\x20forward\x20d','SSAGE','gp:<alias|','heck\x20faile','nly.','nt\x20group\x20o','\x20\x20\x20\x20\x20\x20\x20\x20ON','forEach','all','maining\x20wa','@g.us','groupParti','ata','hat_jid\x20TE','t_jid\x20=\x20?','\x20initializ',',\x20whitelis','get','text','INSERT\x20INT','\x20deleteWit','extendedTe','Admin\x20chec','âœ…\x20ON','ue\x20FROM\x20de','\x20Failed\x20to','status','ðŸ’¬\x20*Chat:*\x20','(?,\x20?)\x0a\x20\x20\x20','exec','SELECT\x20val','SELECT\x20ena','push','\x20VALUES\x20(?','ailed\x20for\x20','âŒ\x20OFF','\x20\x20\x20\x20\x20);\x0a\x20\x20','t)\x20VALUES\x20','isCommand','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','ðŸ”—\x20*Antilin','resolveNam','parse','includes','ssage\x20(def','\x20KEY,\x0a\x20\x20\x20\x20','\x20Database\x20','25711tfjxbw','chat_jid)\x20','\x20\x20\x20\x20\x20white','mediate\x20er','delete','normalizeT','{warnings}','\x20WHERE\x20cha','replace','antilink','E\x20SET\x20whit','INTEGER\x20DE','sock','count','24VcQedX','ðŸ”—\x20Usage:\x20.','15Zptbbp','\x20Applying\x20','ured.','Unknown','T(chat_jid',',\x20enabled)','lete_prefs','g\x20for\x20admi','has','\x20enforceme','antilink\x20<','off','led','age.','d|all>','\x20increment','\x20setGroupE','\x20the\x20curre','_jid\x27','\x20groups\x20fo','274498Avszeu','196569DWayWC','telist;','ðŸ”—\x20Antilink','antilinkwl','\x20module\x20in','\x20remove\x20pa','value','DEDUPE_TTL','index','set','or\x20for\x20','d:\x20','k\x20Status*\x0a','3.6.4','^/?','\x20Not\x20enfor','ON\x20CONFLIC','sendMessag','OT\x20EXISTS\x20','caption','DELETE_RET','\x20(chat_jid','\x20Skipping\x20','oUserJid','led:\x20','conversati',')\x20DO\x20UPDAT','message','cipantsUpd','(immediate','warning\x20in','ion\x20found.','getUniqueJ','enabled','\x20for\x20','isArray','max','131578fCsCrC','min/bot\x20me',':\x20.antilin','nabled\x20fai','16FMUHna','7175476WnKIKZ','match','\x20setGroupW','map','\x20\x20\x20CREATE\x20','ensive).','status>\x20gp','k\x20failed:\x20',':<alias|ji','\x20=\x20\x27target','ailed:\x20','\x20getGroupS','on|off|sta','jid','split','ettings','key'];_0x1643=function(){return _0x5752ad;};return _0x1643();}import{createRequire}from'module';const require=createRequire(import.meta['url']),tlds=require('tlds');export const name=_0x144c3c(0x253);export const version=_0x144c3c(0x1a4);export const priority=-0x1*0x16a3+-0x79d+0x1ea4;export const commands=[_0x144c3c(0x253),_0x144c3c(0x272)];const TABLE_SETTINGS='antilink_s'+_0x144c3c(0x1d0);let botRef=null,shuttingDown=![],config={};const linkify=_0x919ece();linkify['tlds'](tlds);const processedMessageIds=new Map(),perUserWarnings=new Map();function refreshConfig(){const _0x164a32=_0x144c3c,_0x34dd62=getConfig()||{};config={'MAX_WARNS':0x3,'REMOVE_ON_MAX':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x164a32(0x207)+'links\x20are\x20'+'not\x20allowe'+'d\x20here.\x20Re'+_0x164a32(0x224)+_0x164a32(0x203)+_0x164a32(0x1e4),'VALIDATION_TIMEOUT_MS':0xfa0,'LOG_DELETED_LINKS':!![],'GLOBAL_CONCURRENCY':0x2,'DELETE_RETRY_COUNT':0x2,'DEDUPE_TTL_MS':0x1388,..._0x34dd62[_0x164a32(0x211)]||{}};}function setupApi(_0x274401){botRef=_0x274401;}async function ensureSchema(){const _0x252bee=_0x144c3c;try{await db[_0x252bee(0x238)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x252bee(0x1c5)+'TABLE\x20IF\x20N'+_0x252bee(0x1a9)+TABLE_SETTINGS+(_0x252bee(0x242)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+_0x252bee(0x228)+_0x252bee(0x1f1)+_0x252bee(0x248)+_0x252bee(0x1f7)+_0x252bee(0x1fd)+_0x252bee(0x255)+'FAULT\x200,\x0a\x20'+_0x252bee(0x1f7)+_0x252bee(0x24c)+_0x252bee(0x20f)+'DEFAULT\x20\x27['+']\x27\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x252bee(0x23f)+'\x20\x20\x20\x20\x20\x20')),info(_0x252bee(0x1e6)+_0x252bee(0x249)+'schema\x20ens'+_0x252bee(0x25c));}catch(_0x3527ef){error(_0x3527ef,'[antilink]'+_0x252bee(0x1ed)+_0x252bee(0x20a)+_0x252bee(0x266));throw _0x3527ef;}}async function getGroupSetting(_0x4b6bc0){const _0x5a89fd=_0x144c3c;try{const _0x51ab3b=await db['get'](_0x5a89fd(0x23a)+_0x5a89fd(0x217)+'elist\x20FROM'+'\x20'+TABLE_SETTINGS+(_0x5a89fd(0x251)+_0x5a89fd(0x229)),[_0x4b6bc0]);return{'enabled':!!_0x51ab3b?.['enabled'],'whitelist':_0x51ab3b?JSON[_0x5a89fd(0x245)](_0x51ab3b[_0x5a89fd(0x215)]||'[]'):[]};}catch(_0x5e70e2){return warn(_0x5a89fd(0x1e6)+_0x5a89fd(0x1cc)+_0x5a89fd(0x1ee)+_0x5a89fd(0x1a1)+_0x4b6bc0+':\x20'+(_0x5e70e2?.['message']||_0x5e70e2)),{'enabled':![],'whitelist':[]};}}async function setGroupEnabled(_0x1cae46,_0x2423c1){const _0xa1ea99=_0x144c3c;try{return await db[_0xa1ea99(0x1fb)](_0xa1ea99(0x22e)+'O\x20'+TABLE_SETTINGS+(_0xa1ea99(0x1ac)+_0xa1ea99(0x25f)+_0xa1ea99(0x23c)+_0xa1ea99(0x1d5)+_0xa1ea99(0x221)+'\x20CONFLICT('+_0xa1ea99(0x24b)+'DO\x20UPDATE\x20'+'SET\x20enable'+'d\x20=\x20exclud'+'ed.enabled'+';'),[_0x1cae46,_0x2423c1?-0x670*-0x6+0xb96+-0x3235:-0xcc1+0x1f0+0x39b*0x3]),!![];}catch(_0x5e3ce3){return error(_0x5e3ce3,_0xa1ea99(0x1e6)+_0xa1ea99(0x26a)+_0xa1ea99(0x1bf)+'led\x20for\x20'+_0x1cae46),![];}}async function setGroupWhitelist(_0x20376e,_0x173d17){const _0x55db6c=_0x144c3c;try{const _0x3b5646=Array[_0x55db6c(0x202)](new Set((_0x173d17||[])[_0x55db6c(0x1c4)](String)[_0x55db6c(0x1d3)](Boolean)));return await db[_0x55db6c(0x1fb)](_0x55db6c(0x22e)+'O\x20'+TABLE_SETTINGS+(_0x55db6c(0x1ac)+_0x55db6c(0x22b)+_0x55db6c(0x240)+_0x55db6c(0x237)+_0x55db6c(0x1f7)+_0x55db6c(0x1a7)+_0x55db6c(0x25e)+_0x55db6c(0x1b1)+_0x55db6c(0x254)+_0x55db6c(0x1e2)+_0x55db6c(0x1fa)+_0x55db6c(0x270)),[_0x20376e,JSON[_0x55db6c(0x1d6)](_0x3b5646)]),!![];}catch(_0x172225){return error(_0x172225,_0x55db6c(0x1e6)+_0x55db6c(0x1c3)+'hitelist\x20f'+_0x55db6c(0x23d)+_0x20376e),![];}}function extractTextFromMessage(_0x57fb93){const _0x23280b=_0x144c3c;if(!_0x57fb93||!_0x57fb93[_0x23280b(0x1b2)])return'';const _0x459068=_0x57fb93['message'];return _0x459068[_0x23280b(0x1b0)+'on']||_0x459068[_0x23280b(0x230)+_0x23280b(0x213)]?.['text']||_0x459068[_0x23280b(0x201)+'ge']?.[_0x23280b(0x1aa)]||_0x459068[_0x23280b(0x1f3)+'ge']?.[_0x23280b(0x1aa)]||'';}function _0x4471(_0x19f6a3,_0x889c62){const _0x585978=_0x1643();return _0x4471=function(_0x2692ef,_0x140f13){_0x2692ef=_0x2692ef-(0x26d+-0x7*0x92+0x331);let _0x26655b=_0x585978[_0x2692ef];return _0x26655b;},_0x4471(_0x19f6a3,_0x889c62);}function messageContainsLinkLocal(_0x18d18b){const _0x17e196=_0x144c3c,_0x11b730=extractTextFromMessage(_0x18d18b);if(!_0x11b730)return![];const _0x634b7d=linkify[_0x17e196(0x1c2)](_0x11b730);if(_0x634b7d&&_0x634b7d[_0x17e196(0x20c)]>0x61b+-0x7b7*0x2+0x4d*0x1f)return!![];const _0x7fc4d6=/(?:https?:\/\/)?(?:www\.)?[a-z0-9\-]{1,63}\.(?:[a-z]{2,63})(?:[\/:\?\#\s]|$)/i;if(_0x7fc4d6[_0x17e196(0x210)](_0x11b730))return!![];return![];}function getMessageKey(_0xb4937f){const _0x5982ce=_0x144c3c;if(!_0xb4937f?.[_0x5982ce(0x1d1)]?.['id'])return null;return _0xb4937f[_0x5982ce(0x1d1)][_0x5982ce(0x1f6)]+':'+_0xb4937f[_0x5982ce(0x1d1)]['id'];}async function isCtxFromAdmin(_0x2d4f09){const _0x9de26b=_0x144c3c;try{if(!_0x2d4f09)return![];if(_0x2d4f09[_0x9de26b(0x1d1)]?.[_0x9de26b(0x1df)])return!![];return!!await isadmin(botRef,_0x2d4f09);}catch(_0x3b57f1){return warn('[antilink]'+'\x20isCtxFrom'+_0x9de26b(0x231)+_0x9de26b(0x1c8)+(_0x3b57f1?.['message']||_0x3b57f1)),!![];}}async function deleteWithRetry(_0x2bf01c){const _0x42d59a=_0x144c3c,_0x538062=Math[_0x42d59a(0x1bb)](-0xfd0+-0x289*0x4+0x3*0x8a7,config[_0x42d59a(0x1ab)+_0x42d59a(0x1d9)]||-0x657+-0x2a*0x7+0x77e),_0x507dee=_0x2bf01c[_0x42d59a(0x1d1)]?.[_0x42d59a(0x1f6)];if(!_0x507dee)return![];for(let _0x1cbc09=0x1bc1+0x2e*0x83+-0x334a;_0x1cbc09<=_0x538062;_0x1cbc09++){try{const _0x437f51=botRef?.[_0x42d59a(0x256)]||botRef;return await _0x437f51['sendMessag'+'e'](_0x507dee,{'delete':_0x2bf01c[_0x42d59a(0x1d1)]}),!![];}catch(_0x4edaa2){if(_0x1cbc09<_0x538062){await new Promise(_0x354b39=>setTimeout(_0x354b39,(0x20*-0x4c+-0x870+0x131c)*_0x1cbc09));continue;}return warn(_0x42d59a(0x1e6)+_0x42d59a(0x22f)+_0x42d59a(0x21a)+_0x42d59a(0x1af)+(_0x4edaa2?.[_0x42d59a(0x1b2)]||_0x4edaa2)),![];}}return![];}async function getLogTargetJid(){const _0x4ba21a=_0x144c3c;try{const _0x24ae80=await db[_0x4ba21a(0x22c)](_0x4ba21a(0x239)+_0x4ba21a(0x233)+_0x4ba21a(0x260)+_0x4ba21a(0x208)+_0x4ba21a(0x1ca)+_0x4ba21a(0x26c));return _0x24ae80?.[_0x4ba21a(0x275)]||getBotJid();}catch(_0xfe4a6c){return getBotJid();}}async function forwardDeletedLink(_0x166156){const _0x4f451f=_0x144c3c;if(!config['LOG_DELETE'+_0x4f451f(0x219)])return;try{if(await isCtxFromAdmin(_0x166156))return;const _0x16efef=await getLogTargetJid();if(!_0x16efef)return;const _0x1ea5e6=_0x166156[_0x4f451f(0x1d1)]?.[_0x4f451f(0x1f4)+'t']||_0x166156[_0x4f451f(0x1d1)]?.[_0x4f451f(0x1f6)]||_0x4f451f(0x25d),_0x453186=_0x166156['key']?.[_0x4f451f(0x1f6)],_0x5496a6=extractTextFromMessage(_0x166156);let _0x38bc7c='PM';try{if(_0x453186&&_0x453186[_0x4f451f(0x1e0)](_0x4f451f(0x225))){const _0xde1c5e=await(botRef?.['sock']||botRef)[_0x4f451f(0x1e9)+_0x4f451f(0x227)](_0x453186);_0x38bc7c=_0xde1c5e[_0x4f451f(0x1f9)];}}catch(_0xc91e9f){_0x38bc7c=_0x4f451f(0x1e7)+'oup';}const _0x1002bb=_0x4f451f(0x1da)+'k\x20Deletion'+'*\x0a\x0a'+(_0x4f451f(0x1f0)+'@'+String(_0x1ea5e6)[_0x4f451f(0x1cf)]('@')[0xe5f*0x1+0x1d83+0x29*-0x112]+'\x0a')+(_0x4f451f(0x236)+_0x38bc7c+'\x20('+_0x453186+')\x0a')+('ðŸ”—\x20*Origina'+_0x4f451f(0x205)+'*\x0a```'+_0x5496a6+_0x4f451f(0x1ef));await(botRef?.[_0x4f451f(0x256)]||botRef)['sendMessag'+'e'](_0x16efef,{'text':_0x1002bb,'mentions':[_0x1ea5e6]});}catch(_0x422735){warn(_0x4f451f(0x1e6)+_0x4f451f(0x234)+_0x4f451f(0x21b)+_0x4f451f(0x1d7)+'k:\x20'+_0x422735[_0x4f451f(0x1b2)]);}}function userKey(_0x3c09da,_0x30aca3){return _0x3c09da+'::'+_0x30aca3;}async function incrementWarningAndMaybeRemove(_0x2ad043){const _0x292390=_0x144c3c;try{if(await isCtxFromAdmin(_0x2ad043))return info('[antilink]'+_0x292390(0x1ad)+_0x292390(0x1b5)+'crement\x20fo'+'r\x20admin/bo'+'t\x20message\x20'+'(defensive'+').'),{'count':0x0,'removed':![]};const _0x5127ea=_0x2ad043['key']?.['remoteJid'],_0x3156dc=_0x2ad043[_0x292390(0x1d1)]?.[_0x292390(0x1f4)+'t']||_0x2ad043[_0x292390(0x1d1)]?.[_0x292390(0x1f6)]||'';if(!_0x5127ea||!_0x3156dc)return{'count':0x0,'removed':![]};const _0x4ba715=userKey(_0x5127ea,_0x3156dc),_0x44f933=perUserWarnings[_0x292390(0x22c)](_0x4ba715)||{'count':0x0};_0x44f933[_0x292390(0x257)]++,perUserWarnings[_0x292390(0x1a0)](_0x4ba715,_0x44f933);if(config[_0x292390(0x1ec)+_0x292390(0x1de)]&&_0x44f933[_0x292390(0x257)]>=config[_0x292390(0x1f8)]){const _0x45cb50=botRef?.[_0x292390(0x256)]||botRef;try{await _0x45cb50[_0x292390(0x226)+_0x292390(0x1b3)+_0x292390(0x209)](_0x5127ea,[_0x3156dc],_0x292390(0x20d));}catch(_0x31b03c){warn(_0x292390(0x1e6)+'\x20Could\x20not'+_0x292390(0x274)+'rticipant\x20'+_0x3156dc+':\x20'+(_0x31b03c?.[_0x292390(0x1b2)]||_0x31b03c));}return perUserWarnings[_0x292390(0x24e)](_0x4ba715),{'count':_0x44f933[_0x292390(0x257)],'removed':!![]};}return{'count':_0x44f933['count'],'removed':![]};}catch(_0x1de451){return warn(_0x292390(0x1e6)+_0x292390(0x269)+'Warning\x20er'+'ror:\x20'+(_0x1de451?.[_0x292390(0x1b2)]||_0x1de451)),{'count':0x0,'removed':![]};}}async function sendWarning(_0x3b7c68,_0x45723b){const _0x36b798=_0x144c3c;try{if(await isCtxFromAdmin(_0x3b7c68)){info(_0x36b798(0x1e6)+_0x36b798(0x1ad)+_0x36b798(0x212)+_0x36b798(0x261)+_0x36b798(0x1db)+_0x36b798(0x267));return;}}catch(_0x50dfbb){warn(_0x36b798(0x1e6)+_0x36b798(0x1ea)+_0x36b798(0x1ff)+_0x36b798(0x21e)+_0x36b798(0x1a2)+(_0x50dfbb?.[_0x36b798(0x1b2)]||_0x50dfbb));return;}if(!config['SEND_WARNI'+'NG'])return;try{const _0x5b9286=_0x3b7c68[_0x36b798(0x1d1)]?.['participan'+'t']||_0x3b7c68[_0x36b798(0x1d1)]?.[_0x36b798(0x1f6)]||'',_0x2faa46=Math[_0x36b798(0x1bb)](0x9fd+0x7a6+-0x11a3,config[_0x36b798(0x1f8)]-_0x45723b),_0x269c28=config['WARNING_ME'+_0x36b798(0x21c)][_0x36b798(0x252)]('{user}','@'+_0x5b9286['split']('@')[0x9ae+0x1f*0xd9+0x731*-0x5])[_0x36b798(0x252)](_0x36b798(0x250),String(_0x2faa46)),_0x1ea41c=_0x3b7c68['key']['remoteJid'],_0x3a893a=botRef?.[_0x36b798(0x256)]||botRef;await _0x3a893a[_0x36b798(0x1a8)+'e'](_0x1ea41c,{'text':_0x269c28,'mentions':[_0x5b9286]});}catch(_0x5395a8){warn(_0x36b798(0x1e6)+_0x36b798(0x1ea)+'ng\x20failed:'+'\x20'+(_0x5395a8?.[_0x36b798(0x1b2)]||_0x5395a8));}}async function enforceImmediate(_0x2ccc1b){const _0x2c14fa=_0x144c3c;try{const _0x200e9d=getMessageKey(_0x2ccc1b);if(!_0x200e9d)return;if(processedMessageIds[_0x2c14fa(0x262)](_0x200e9d))return;processedMessageIds['set'](_0x200e9d,setTimeout(()=>processedMessageIds['delete'](_0x200e9d),config[_0x2c14fa(0x276)+'_MS']||-0x924+0x1e4c+-0x2*0xd0));if(await isCtxFromAdmin(_0x2ccc1b)){info('[antilink]'+_0x2c14fa(0x1a6)+_0x2c14fa(0x1dc)+_0x2c14fa(0x1bd)+_0x2c14fa(0x247)+_0x2c14fa(0x1c6));return;}const _0xb279a1=await deleteWithRetry(_0x2ccc1b);if(!_0xb279a1)return;await forwardDeletedLink(_0x2ccc1b);const {count:_0xdc7594,removed:_0x668127}=await incrementWarningAndMaybeRemove(_0x2ccc1b);!_0x668127&&await sendWarning(_0x2ccc1b,_0xdc7594);}catch(_0x2afc7a){warn(_0x2c14fa(0x1e6)+'\x20enforceIm'+_0x2c14fa(0x24d)+_0x2c14fa(0x1dd)+(_0x2afc7a?.[_0x2c14fa(0x1b2)]||_0x2afc7a));}}function splitRestForGp(_0x413acf){const _0x32fc54=_0x144c3c;if(!_0x413acf)return{'left':'','gp':null};const _0x298857=_0x413acf[_0x32fc54(0x1c2)](/\bgp[:\s]+(.+)$/i);if(_0x298857)return{'left':_0x413acf['slice'](-0x822+-0x445+0x19*0x7f,_0x298857[_0x32fc54(0x277)])[_0x32fc54(0x20b)](),'gp':_0x298857[0x369*-0x7+0x2*-0xa6f+-0x775*-0x6][_0x32fc54(0x20b)]()};return{'left':_0x413acf[_0x32fc54(0x20b)](),'gp':null};}async function resolveTargetsForGroupAdmin(_0x405153){const _0x5e59cb=_0x144c3c,_0x109e99=await getDefault(_0x405153)[_0x5e59cb(0x1e3)](()=>null);if(!_0x109e99)return[];const _0x5da768=Array['isArray'](_0x109e99)?_0x109e99:[_0x109e99];let _0x53f0ea=[];for(const _0x23b0d0 of _0x5da768){const _0x2a5838=await getConnection(_0x23b0d0)['catch'](()=>null);if(Array[_0x5e59cb(0x1ba)](_0x2a5838))_0x53f0ea[_0x5e59cb(0x23b)](..._0x2a5838);else{if(_0x2a5838)_0x53f0ea['push'](String(_0x2a5838));}}return Array[_0x5e59cb(0x202)](new Set(_0x53f0ea));}async function resolveTargetsForSudo(_0x49900c){const _0x21d9ed=_0x144c3c;if(!_0x49900c)return[];if(_0x49900c['toLowerCas'+'e']()===_0x21d9ed(0x223))return await _0x21fd58[_0x21d9ed(0x1b7)+_0x21d9ed(0x200)]();const _0x20a232=await _0x21fd58[_0x21d9ed(0x244)+'e'](_0x49900c);if(_0x20a232)return[_0x20a232];if(_0x49900c[_0x21d9ed(0x246)]('@'))return[_0x21fd58[_0x21d9ed(0x24f)+_0x21d9ed(0x1ae)](_0x49900c)];return[];}async function findStoredMatchFromFindings(_0x22cc08=[]){const _0x485199=_0x144c3c;try{const _0x296c91=await listSudo();if(!_0x296c91?.[_0x485199(0x20c)])return null;const _0x544973=new Set(_0x296c91['map'](String));for(const _0x406a01 of _0x22cc08||[]){if(_0x406a01?.['jid']&&_0x544973[_0x485199(0x262)](normalizeToJid(_0x406a01[_0x485199(0x1ce)])))return normalizeToJid(_0x406a01['jid']);}return null;}catch(_0x428f32){return null;}}export async function initialize(_0x139ad9){const _0xe220dd=_0x144c3c;try{setupApi(_0x139ad9),await ensureSchema(),refreshConfig(),shuttingDown=![],info(_0xe220dd(0x1e6)+_0xe220dd(0x273)+'itialized\x20'+_0xe220dd(0x1b4)+_0xe220dd(0x263)+'nt).');}catch(_0x5d729e){error(_0x5d729e,_0xe220dd(0x1e6)+_0xe220dd(0x22a)+_0xe220dd(0x1d8));throw _0x5d729e;}}export async function onMessage(_0x5ad881){const _0x199eac=_0x144c3c;if(!_0x5ad881?.[_0x199eac(0x1d1)]?.[_0x199eac(0x1f6)]||!_0x5ad881['message']||shuttingDown)return;const _0x3fa39e=_0x5ad881[_0x199eac(0x1d1)][_0x199eac(0x1f6)],_0x259879=_0x3fa39e[_0x199eac(0x1e0)]('@g.us'),_0x1e502d=_0x5ad881[_0x199eac(0x1d1)][_0x199eac(0x1f4)+'t']||_0x5ad881[_0x199eac(0x1d1)][_0x199eac(0x1f6)],_0x261267=extractTextFromMessage(_0x5ad881),_0x3ca810=(_0x5ad881[_0x199eac(0x22d)]||_0x261267)[_0x199eac(0x20b)](),_0x28fc27=_0x5ad881[_0x199eac(0x241)]&&_0x3ca810?_0x3ca810[_0x199eac(0x1cf)](/\s+/)[-0x26c1+-0x6f*-0x13+0x1e84][_0x199eac(0x218)+'e']()[_0x199eac(0x252)]('/',''):null;if(_0x5ad881[_0x199eac(0x241)]&&commands['includes'](_0x28fc27)){let _0x12832c=_0x3fa39e,_0x44e039=![],_0x4fa36b=![];if(_0x259879){if(await isadmin(botRef,_0x5ad881))_0x44e039=!![];}else{if(_0x5ad881[_0x199eac(0x1d1)][_0x199eac(0x1df)])_0x44e039=!![],_0x4fa36b=!![],_0x12832c=getBotJid()||_0x3fa39e;else{if(await isSudo(botRef,_0x5ad881)){_0x44e039=!![],_0x4fa36b=!![];const _0x52e7ea=await userJidFromCtx(_0x5ad881)||{'findings':[]};_0x12832c=await findStoredMatchFromFindings(_0x52e7ea[_0x199eac(0x214)])||_0x3fa39e;}}}if(!_0x44e039)return;if(_0x28fc27===_0x199eac(0x253)){const _0x5bfc82=_0x3ca810['replace'](new RegExp(_0x199eac(0x1a5)+_0x28fc27+'\x5cb','i'),'')['trim'](),{left:_0x486dda,gp:_0x41b638}=splitRestForGp(_0x5bfc82),_0x48f95d=_0x486dda[_0x199eac(0x1cf)](/[, ]+/)[-0x1*0xdb7+-0x1*0x2239+0x4*0xbfc]?.[_0x199eac(0x218)+'e']();if(!_0x48f95d||!['on',_0x199eac(0x265),_0x199eac(0x235)][_0x199eac(0x246)](_0x48f95d))return(botRef?.[_0x199eac(0x256)]||botRef)[_0x199eac(0x1a8)+'e'](_0x12832c,{'text':_0x199eac(0x259)+_0x199eac(0x264)+_0x199eac(0x1cd)+_0x199eac(0x20e)+_0x199eac(0x21d)+'jid|all>\x20i'+'n\x20PM).'});let _0x3fdd01=[];const _0x32453e=(_0x1e502d||'')['split']('@')[0x6af*-0x2+-0x29*-0x11+0xaa5];if(_0x4fa36b){if(!_0x41b638)return(botRef?.[_0x199eac(0x256)]||botRef)[_0x199eac(0x1a8)+'e'](_0x12832c,{'text':_0x199eac(0x1f5)+_0x199eac(0x1be)+'k\x20<on|off|'+_0x199eac(0x1c7)+_0x199eac(0x1c9)+_0x199eac(0x268)});_0x3fdd01=await resolveTargetsForSudo(_0x41b638);if(!_0x3fdd01[_0x199eac(0x20c)])return(botRef?.[_0x199eac(0x256)]||botRef)[_0x199eac(0x1a8)+'e'](_0x12832c,{'text':'ðŸ”—\x20Could\x20no'+'t\x20resolve\x20'+_0x199eac(0x1e1)+_0x199eac(0x26d)+_0x199eac(0x1fe)+_0x41b638+'\x27.'});}else _0x3fdd01=await resolveTargetsForGroupAdmin(_0x32453e),!_0x3fdd01[_0x199eac(0x20c)]&&(_0x3fdd01=[_0x3fa39e],await(botRef?.[_0x199eac(0x256)]||botRef)[_0x199eac(0x1a8)+'e'](_0x12832c,{'text':'ðŸ”—\x20No\x20defau'+_0x199eac(0x216)+_0x199eac(0x1b6)+_0x199eac(0x25b)+'command\x20to'+_0x199eac(0x26b)+_0x199eac(0x220)+_0x199eac(0x21f)}));if(_0x48f95d==='on'||_0x48f95d==='off'){const _0x4deafb=_0x48f95d==='on';let _0x35026b=-0x21b3+0x3*-0xb83+0x443c;for(const _0x2d9891 of _0x3fdd01){await setGroupEnabled(_0x2d9891,_0x4deafb)&&_0x35026b++;}await(botRef?.['sock']||botRef)[_0x199eac(0x1a8)+'e'](_0x12832c,{'text':_0x199eac(0x271)+'\x20'+(_0x4deafb?_0x199eac(0x1f2):_0x199eac(0x1fc))+_0x199eac(0x1b9)+_0x35026b+'/'+_0x3fdd01[_0x199eac(0x20c)]+_0x199eac(0x204)});}else{if(_0x48f95d===_0x199eac(0x235)){let _0x599e44=_0x199eac(0x243)+_0x199eac(0x1a3)+'\x0a';for(const _0x39a936 of _0x3fdd01){const {enabled:_0x6bfeb0}=await getGroupSetting(_0x39a936);_0x599e44+=_0x39a936+':\x20'+(_0x6bfeb0?_0x199eac(0x232):_0x199eac(0x23e))+'\x0a';}await(botRef?.[_0x199eac(0x256)]||botRef)[_0x199eac(0x1a8)+'e'](_0x12832c,{'text':_0x599e44});}}}return;}try{if(_0x259879){if(_0x5ad881[_0x199eac(0x1d1)][_0x199eac(0x1df)])return;if(await isadmin(botRef,_0x5ad881))return;}else{if(_0x5ad881[_0x199eac(0x1d1)][_0x199eac(0x1df)])return;}}catch(_0x38048c){warn(_0x199eac(0x1e6)+'\x20Early\x20adm'+_0x199eac(0x1d4)+_0x199eac(0x1cb)+(_0x38048c?.[_0x199eac(0x1b2)]||_0x38048c));return;}if(_0x259879){const _0x5d60f4=await getGroupSetting(_0x3fa39e);if(!_0x5d60f4[_0x199eac(0x1b8)])return;const _0x58d7af=extractTextFromMessage(_0x5ad881);let _0x29668b=![];for(const _0x408b09 of _0x5d60f4[_0x199eac(0x215)]){if(_0x408b09[_0x199eac(0x246)]('@')&&_0x408b09===_0x1e502d){_0x29668b=!![];break;}if(!_0x408b09[_0x199eac(0x246)]('@')&&_0x58d7af[_0x199eac(0x246)](_0x408b09)){_0x29668b=!![];break;}}if(_0x29668b)return;messageContainsLinkLocal(_0x5ad881)&&await enforceImmediate(_0x5ad881);}}export async function cleanup(){const _0x535c7f=_0x144c3c;shuttingDown=!![],processedMessageIds[_0x535c7f(0x222)](_0xa79729=>clearTimeout(_0xa79729)),processedMessageIds['clear'](),perUserWarnings['clear'](),botRef=null,info('[antilink]'+_0x535c7f(0x1d2)+'p.');}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};