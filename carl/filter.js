function _0x1675(_0x276e85,_0x1467bd){const _0x2def1b=_0x2273();return _0x1675=function(_0x2d5faf,_0x55b6a5){_0x2d5faf=_0x2d5faf-(-0x16bc+0x205f+-0x81d);let _0x253eef=_0x2def1b[_0x2d5faf];return _0x253eef;},_0x1675(_0x276e85,_0x1467bd);}const _0x3c5232=_0x1675;(function(_0x2ebcd3,_0x233634){const _0x4da630=_0x1675,_0x2df918=_0x2ebcd3();while(!![]){try{const _0xe2e0f6=parseInt(_0x4da630(0x264))/(0x9fd*0x1+0x1e5a+-0x2856)+parseInt(_0x4da630(0x25f))/(-0x730+-0x94c+0x107e)*(-parseInt(_0x4da630(0x21d))/(0x1939+-0x107c*-0x2+-0x3a2e))+-parseInt(_0x4da630(0x265))/(0x25e3+-0x2581+-0x2f*0x2)+-parseInt(_0x4da630(0x1f4))/(-0xb8d*0x1+0x1*0x2306+-0x1774)*(-parseInt(_0x4da630(0x2fb))/(-0x1c*-0x65+0x2480+0x4f*-0x9a))+-parseInt(_0x4da630(0x29d))/(0x2532+-0x1*0x146f+-0x10bc)*(-parseInt(_0x4da630(0x2d3))/(-0x67*-0x5+0xa9d+-0xc98))+-parseInt(_0x4da630(0x24d))/(0x1f1c+0xf7*0x1+-0x200a)*(-parseInt(_0x4da630(0x226))/(0x23ee+-0x1742+-0xca2))+-parseInt(_0x4da630(0x1ba))/(-0x1299+-0x1*-0x943+0x7*0x157);if(_0xe2e0f6===_0x233634)break;else _0x2df918['push'](_0x2df918['shift']());}catch(_0x1543aa){_0x2df918['push'](_0x2df918['shift']());}}}(_0x2273,0x102f4+-0x926cf+0x3b*0x435b));function _0x2273(){const _0x2bfcdf=['gger2\x20[gp:','Deleted\x20','jid','30hIBChF','er\x20TEXT\x20NO','QUE\x20INDEX\x20','ger\x20FROM\x20f','LE\x20IF\x20NOT\x20','simulateTy','fault\x20conn','\x20to\x20add\x20al','ENT','489150TfynkQ','run','function','SELECT\x20nam','ters_new\x20(','replies','object','E\x20filters\x20','singleSele','default):\x0a','glistfilte','phrase','getAutomat','esponses\x20=','chatid','join','d\x20IN\x20(?,\x20?','gger)\x20DO\x20U','L\x20DEFAULT\x20','DELETE\x20FRO','isArray','-\x20performi','name','s|all>','?,\x20?,\x200,\x20?','n(s).\x20Use\x20','\x20=\x20?','gdelfilter','from\x20datab','y\x20include\x20','map','(chat_jid,','ensureSche','\x20excluded.','resolveNam','shift','lters_new\x20','exec','Usage:\x20gde','144BwDtBv','floor','\x20TEXT\x20DEFA','\x20fatal','\x20<group-ji','fter\x20reply','lowerToOri','>]\x0aOr:\x20gde','GLOBAL\x20(al','\x22\x20->\x20','\x20=\x20?\x20LIMIT','\x20\x20\x20\x20\x20\x20);','a\x20line\x20`gp','o\x20backup','pickRespon','ALUES\x20(?,\x20','\x20\x20\x20\x20\x20ON\x20CO','Saved\x20','86040tlKKpc','PRAGMA\x20for','includes','our\x20defaul','ULT\x20\x27\x27,\x0a\x20\x20','300592XLvPop','1814220sGfLeR','xtMessage','\x20\x20\x20\x20\x20\x20chat','FAULT\x200','heck\x20/setd','eated_at;','d\x20for\x20conf','RESPONSE_M','ue\x20ON\x20filt','ase.\x20Rows\x20','STS\x20idx_fi','SELECT\x20res','\x20created_b','slice','\x22\x20-\x20','delete\x20all','post-swap\x20','2\x0aOptional','=\x20ON;','ctReply','key','DB)','changes','failed\x20for','ailed\x20to\x20','ttonId','created\x20fi','@g.us','new\x20(trigg','PRAGMA\x20tab','\x20renamed\x20t','startsWith','\x20\x20\x20\x20\x20trigg','ters(chat_','\x20\x20\x20\x20\x20\x20);\x0a\x20','every','has',',\x0a\x20\x20','toLowerCas','parse','ALTER\x20TABL','s\x20a\x20full\x20J','CREATE\x20IND','replace','composing','sendText\x20f','\x0a!response','\x20filters:\x20','next','ters\x20from\x20','ID.','M\x20filters\x20','\x20rr_index,','all','ES\x20ALL\x20fil','\x20failed:\x20','98VdcPBg','remoteJid','malizeExis','\x20detected\x20','caption','ema)','r_index\x20=\x20','no\x20sendApi','\x27[]\x27,\x0a\x20\x20\x20\x20','ceUpdate','entries','sendPresen','sponses\x20TE','\x20old\x20table','string','output','keys','create','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','o\x20restrict','\x20for\x20','fromMe','or\x20','EMENT,\x0a\x20\x20\x20','saved\x20filt','\x20trigger)\x0a','removed:\x20','ailed:\x20','bot-state\x20','getUniqueJ','REATE\x20TABL','seAndAdvan','WHERE\x20chat','created\x20ne','test','build','ADD\x20COLUMN','finalize','Could\x20not\x20','ckup_','isCommand','isFinite','_jid\x20TEXT\x20','l\x20groups)','argets','!response1','for\x20','Y\x20AUTOINCR','now','ex\x20INTEGER','(\x0a\x20\x20\x20\x20\x20\x20\x20\x20','getBotJid(','(rr_index\x20','swap\x20table','59720ieBIpu','delete','\x20\x20UNIQUE(c','imageMessa','lfilter\x20tr','migration\x20','chat_id','sock','splice','lfilter\x20al','rsForChat\x20','\x20filter\x20en','FILTERS','\x20failure\x20a','TEXT\x20DEFAU','Unknown\x20gp','word','eign_keys\x20','normalizeT','extendedTe','error:\x20','invalid\x20st','chat','substring','hat\x20ON\x20fil','R\x20BY\x20trigg','ses,\x20rr_in','E\x20filters_','find','LT\x200\x0a\x20\x20\x20\x20\x20','\x20\x20\x20\x20rr_ind','selectedRo','malized\x20ro','MatchFromF','EXISTS\x20fil','\x0a\x20gfilter\x20','e=\x27table\x27\x20','ror:\x20','get','added\x20miss','3358158mvAQAJ','\x20\x20\x20\x20UNIQUE','\x20connectio','s\x20failed:\x20','NOT\x20NULL,\x0a','index','Usage\x20(PM)','\x20first.','alled\x20with','ias\x20or\x20pas','created_by','findStored','trigger','fallback\x20b','gfilter','\x0a\x20\x20\x20\x20\x20\x20\x20\x20i','EX\x20IF\x20NOT\x20','indings\x20er','nodes','\x20\x20\x20\x20\x20\x20\x20\x20re','trimStart','ly\x20include',',\x20?)','RENAME\x20TO\x20','2.2.0','random','listRespon','resolve\x20yo','IMARY\x20KEY\x20','wId','from','multiple\x20t','\x0aOptionall','INTEGER\x20PR','y.remoteJi','CREATE\x20TAB','tableExist','jid);','participan','catch','ULL','w\x20filters\x20','loaded\x20','t\x20connecti','\x20\x20\x20\x20\x20\x20crea','upsertFilt','sendMessag','SELECT\x20*\x20F','id,\x20trigge','reply','\x20WHERE\x20typ','Deleted\x20AL','umn\x20','timestamp',':\x20<alias|j','values','l>]\x0aOr:\x20gd','_by\x20=\x20excl','setdefault','[gfilter]\x20','clear','chat_jid','er:\x20\x22','lters_uniq','PRIMARY\x20KE','responses','igger\x20=\x20?','\x5cw*','split','nexpected\x20','idx:\x20','O\x20filters_','tries\x20to\x20y','\x20\x20\x20\x20\x20\x20\x20\x20\x20r','\x20);','TINCT\x20trig','trigger2>\x0a','tries\x20acro','id|all>`\x20t','ite_master','r);','\x20to\x20','ids','p-jid|alia','rigger2>\x0a!','responses,','rom\x20','SELECT\x20DIS','\x20alias/jid','s\x20table','T\x20NULL,\x0a\x20\x20','keyword','are\x20send\x20a','ma\x20fatal','search','IF\x20NOT\x20EXI','AND\x20name=?','author','add','s\x20error:\x20','\x22.\x20Use\x20gro','conversati',':\x20\x22','pingAndWai','AhoCorasic','could\x20not\x20','d|alias|al','response1\x0a','gdelf','prepare',')\x20returned','stringify','push','\x20filter(s)','ters\x20table','!response2','Handler\x20er','M\x20filters','insert\x20nor','unique\x20idx','completed;','dex,\x20creat','global\x20by\x20',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','irmation','concat','L\x20filters\x20','Failed\x20to\x20','oUserJid','without\x20UN','ND\x20trigger','4177910qZwbsM','\x20to\x20ctx.ke','INSERT\x20INT','ODE','endsWith','hat_jid,\x20t','initialize','\x20empty;\x20fa','lso\x20failed','d\x20INTEGER\x20','mentions','CREATE\x20UNI','findings','n(s):\x20','\x200,\x0a\x20\x20\x20\x20\x20\x20','INTEGER\x20DE','r\x20for\x20','response','t_jid,\x20tri','message','g\x20globally','created_at','ted_at\x20INT','(trigger,\x20','triggers','ters\x20SET\x20r','creator','ed_by,\x0a\x20\x20\x20','er\x20failed\x20','Usage\x20(PM\x20','d\x20=\x20?\x20ORDE','k\x20matching','seMessage','text','fail','EXISTS\x20idx','ers(chat_j','keywords','regex:','table\x20(can','deleted\x20','max','_MS','\x20filters\x20f','_filters_c','onForChat\x20','sendText\x20c','match','roundrobin','lumns\x20erro','set','length','readAndNor','\x20@\x20','ups\x20helper','tingFilter',':\x20gdelfilt','+\x201)\x20WHERE','5sPpLrk','filter','ilters\x20WHE','<trigger1,','le_info(','up\x20admin):','paused','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','PDATE\x20SET\x0a','sendText\x20u','ng\x20safe\x20mi','\x20chat_jid\x20','LT\x20\x27\x27','_at)\x0a\x20\x20\x20\x20\x20','ection(s):','cleaned\x20up','ponses,\x20rr','ponseMessa','lling\x20back','t\x20error:\x20','efault\x20val','xcluded.cr','filters','and\x20GLOBAL','trim','ers\x20failed','chat_jid,\x20','sort','RE\x20chat_ji','e\x20FROM\x20sql','EGER\x20DEFAU','time','ss\x20your\x20de','NFLICT(cha','\x20\x20\x20created','tries\x20from','TEXT\x20NOT\x20N','uded.creat'];_0x2273=function(){return _0x2bfcdf;};return _0x2273();}import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0xfe9507 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x3c5232(0x309);export const version=_0x3c5232(0x313);export const priority=0x447*-0x2+-0x15d0+-0x1ed6*-0x1;export const configKeys=[_0x3c5232(0x2df)];export const commands=[_0x3c5232(0x309),_0x3c5232(0x230)+'r',_0x3c5232(0x241),'gdelfilter'+'s',_0x3c5232(0x1a3)];function clampTypingMs(_0x4c77af){const _0x9af2e5=_0x3c5232,_0x24c011=Number(_0x4c77af);if(!Number[_0x9af2e5(0x2c6)](_0x24c011)||isNaN(_0x24c011))return-0xff4+0x137f+0x38b*-0x1;if(_0x24c011<=0xab*-0x14+-0x1d6b*-0x1+-0x100f)return-0x1a3e+0x8e7*0x2+0x870;if(_0x24c011>-0xa0a+-0x265+0x273*0x1d)return 0x737e+-0x338c*0x1+-0x55a;return Math[_0x9af2e5(0x24e)](_0x24c011);}function sleep(_0x1e5ad2){return new Promise(_0x713b16=>setTimeout(_0x713b16,_0x1e5ad2));}async function simulateTypingAndWait(_0x16fce9,_0x32b33c,_0x206aba){const _0x2da8b8=_0x3c5232;if(!_0x206aba||_0x206aba<=-0x35*-0x9d+-0x74c*-0x1+-0x27cd)return;try{if(_0x16fce9&&typeof _0x16fce9['sendPresen'+_0x2da8b8(0x2a6)]===_0x2da8b8(0x228))try{await _0x16fce9[_0x2da8b8(0x2a8)+'ceUpdate'](_0x2da8b8(0x291),_0x32b33c);}catch(_0x320455){}}catch(_0x4d2634){}try{await sleep(_0x206aba);}catch(_0x5dd004){}try{if(_0x16fce9&&typeof _0x16fce9[_0x2da8b8(0x2a8)+_0x2da8b8(0x2a6)]===_0x2da8b8(0x228))try{await _0x16fce9[_0x2da8b8(0x2a8)+_0x2da8b8(0x2a6)](_0x2da8b8(0x1fa),_0x32b33c);}catch(_0x177578){}}catch(_0x2d8d5f){}}function ensureArray(_0x3e72c5){const _0x4b258a=_0x3c5232;if(!_0x3e72c5)return[];if(Array[_0x4b258a(0x23a)](_0x3e72c5))return _0x3e72c5;return[String(_0x3e72c5)];}function uniqArray(_0x4b0dbb){const _0x53c33b=_0x3c5232,_0x1eccd9=new Set(),_0x6dde4f=[];for(const _0x1173e9 of _0x4b0dbb){const _0x50cd05=String(_0x1173e9||'')[_0x53c33b(0x20c)]();if(!_0x50cd05)continue;!_0x1eccd9[_0x53c33b(0x289)](_0x50cd05)&&(_0x1eccd9['add'](_0x50cd05),_0x6dde4f[_0x53c33b(0x1a7)](_0x50cd05));}return _0x6dde4f;}function escapeRegex(_0x5d4022){const _0x4bc0cf=_0x3c5232;return _0x5d4022[_0x4bc0cf(0x290)](/[.*+?^${}()|[\]\\]/g,'\x5c$&');}function wildcardToRegexPattern(_0x41b21b){const _0x29069c=_0x3c5232,_0x17cef7=_0x41b21b['split']('*')['map'](_0x3bc6df=>escapeRegex(_0x3bc6df));return'\x5cb'+_0x17cef7[_0x29069c(0x235)](_0x29069c(0x33e))+'\x5cb';}function clampConfigTypingMs(){const _0x35b635=_0x3c5232;try{const _0x331330=getConfig()||{},_0xe84d15=_0x331330['FILTERS']&&typeof _0x331330[_0x35b635(0x2df)]==='object'?_0x331330[_0x35b635(0x2df)]:{};return clampTypingMs(_0xe84d15['TYPING_SIM'+_0x35b635(0x1e4)]);}catch(_0x436c34){return 0x1b1a*0x1+-0x2*-0x91c+-0x2d52*0x1;}}let botRef=null,sendApi=null;async function sendText(_0xf5904d,_0x313303,_0xf36aa5,_0x558cd0){const _0x2ee465=_0x3c5232;let _0x435c41=null,_0x4dfa52=null,_0x471ed1=null,_0x2014d8=[];_0xf5904d&&typeof _0xf5904d===_0x2ee465(0x22c)&&_0xf5904d['key']&&_0xf5904d[_0x2ee465(0x1cd)]?(_0x435c41=_0xf5904d,_0x4dfa52=_0x313303,_0x471ed1=_0xf36aa5,_0x2014d8=Array[_0x2ee465(0x23a)](_0x558cd0)?_0x558cd0:[]):(_0x4dfa52=_0xf5904d,_0x471ed1=_0x313303,_0x2014d8=Array[_0x2ee465(0x23a)](_0xf36aa5)?_0xf36aa5:[]);if(!_0x471ed1)return;if(!_0x4dfa52){warn(_0x2ee465(0x336)+_0x2ee465(0x1e8)+_0x2ee465(0x303)+'out\x20target'+'Jid');return;}const _0x29f750={'text':String(_0x471ed1)};if(Array[_0x2ee465(0x23a)](_0x2014d8)&&_0x2014d8[_0x2ee465(0x1ed)])_0x29f750['mentions']=_0x2014d8;try{if(!sendApi){warn(_0x2ee465(0x336)+_0x2ee465(0x2a4)+'\x20available');return;}const _0x45e251=clampConfigTypingMs();if(_0x45e251>0x7cd*-0x4+0x1*0xe70+0x10c4)try{await simulateTypingAndWait(botRef?.[_0x2ee465(0x2da)],_0x4dfa52,_0x45e251);}catch(_0x1bd4f6){warn(_0x2ee465(0x336)+_0x2ee465(0x222)+_0x2ee465(0x19e)+_0x2ee465(0x207)+(_0x1bd4f6?.[_0x2ee465(0x1cd)]||_0x1bd4f6));}if(_0x435c41&&typeof _0x435c41['reply']==='function')try{await _0x435c41[_0x2ee465(0x32c)]({'text':String(_0x471ed1),'mentions':_0x29f750[_0x2ee465(0x1c4)]||[]});return;}catch(_0x33af56){try{await sendApi(_0x4dfa52,_0x29f750);return;}catch(_0x285bc3){warn('[gfilter]\x20'+_0x2ee465(0x308)+_0x2ee465(0x193)+_0x2ee465(0x252)+_0x2ee465(0x2e0)+_0x2ee465(0x1c2)+':\x20'+(_0x285bc3?.[_0x2ee465(0x1cd)]||_0x285bc3));return;}}try{await sendApi(_0x4dfa52,_0x29f750);}catch(_0x379ad5){warn(_0x2ee465(0x336)+_0x2ee465(0x292)+_0x2ee465(0x27d)+_0x4dfa52+':\x20'+(_0x379ad5?.['message']||_0x379ad5));}}catch(_0x3bfbd6){warn('[gfilter]\x20'+_0x2ee465(0x1fd)+_0x2ee465(0x340)+_0x2ee465(0x2e7)+(_0x3bfbd6?.['message']||_0x3bfbd6));}}async function tableExists(_0x245306){const _0x531bc3=_0x3c5232;try{const _0xe7cff0=await db[_0x531bc3(0x2f9)](_0x531bc3(0x229)+_0x531bc3(0x211)+_0x531bc3(0x186)+_0x531bc3(0x32d)+_0x531bc3(0x2f7)+_0x531bc3(0x197),[_0x245306]);return!!_0xe7cff0;}catch(_0x59200d){return warn(_0x531bc3(0x336)+_0x531bc3(0x31f)+_0x531bc3(0x19a)+(_0x59200d?.[_0x531bc3(0x1cd)]||_0x59200d)),![];}}async function getTableColumns(_0x22376c){const _0x55c3ff=_0x3c5232;try{const _0x1f92b3=await db[_0x55c3ff(0x29a)](_0x55c3ff(0x282)+_0x55c3ff(0x1f8)+_0x22376c+')');return(_0x1f92b3||[])[_0x55c3ff(0x244)](_0x40fe30=>_0x40fe30[_0x55c3ff(0x23c)]);}catch(_0x130928){return warn(_0x55c3ff(0x336)+'getTableCo'+_0x55c3ff(0x1eb)+_0x55c3ff(0x1ca)+_0x22376c+':\x20'+(_0x130928?.['message']||_0x130928)),[];}}function resolveChatJidFromRow(_0x52156d){const _0x2753b1=_0x3c5232,_0x4e83e4=[_0x2753b1(0x338),_0x2753b1(0x234),_0x2753b1(0x2d9),_0x2753b1(0x21c),_0x2753b1(0x2e9),'room'];for(const _0x59f8cc of _0x4e83e4)if(_0x59f8cc in _0x52156d&&_0x52156d[_0x59f8cc])return String(_0x52156d[_0x59f8cc]);for(const _0x2e9c20 of Object[_0x2753b1(0x2ad)](_0x52156d)){const _0x33fa2f=_0x52156d[_0x2e9c20];if(typeof _0x33fa2f==='string'&&_0x33fa2f[_0x2753b1(0x261)]('@'))return _0x33fa2f;}return null;}function resolveTriggerFromRow(_0xb28645){const _0x490bf9=_0x3c5232,_0x47b651=[_0x490bf9(0x307),'trig',_0x490bf9(0x192),_0x490bf9(0x2e3),_0x490bf9(0x231)];for(const _0x53de91 of _0x47b651)if(_0x53de91 in _0xb28645&&_0xb28645[_0x53de91])return String(_0xb28645[_0x53de91]);for(const _0x15866f of Object[_0x490bf9(0x2ad)](_0xb28645)){const _0x3e4519=_0xb28645[_0x15866f];if(typeof _0x3e4519===_0x490bf9(0x2ab)&&!_0x3e4519[_0x490bf9(0x261)]('@')&&_0x3e4519[_0x490bf9(0x1ed)]<-0x2*0x34b+-0x188e+0x5e*0x58)return _0x3e4519;}return null;}function resolveResponsesFromRow(_0x690ade){const _0x437583=_0x3c5232,_0x5c8a88=[_0x437583(0x33c),_0x437583(0x1cb),_0x437583(0x32c),_0x437583(0x22b),'body','value',_0x437583(0x1cd)];for(const _0x542371 of _0x5c8a88)if(_0x542371 in _0x690ade&&_0x690ade[_0x542371]!=null)return _0x690ade[_0x542371];for(const _0x295db8 of Object[_0x437583(0x2ad)](_0x690ade)){const _0x463461=_0x690ade[_0x295db8];if(typeof _0x463461===_0x437583(0x2ab)&&(_0x463461[_0x437583(0x20c)]()['startsWith']('!')||_0x463461[_0x437583(0x20c)]()[_0x437583(0x261)]('\x0a')||_0x463461['trim']()[_0x437583(0x284)]('[')))return _0x463461;}return null;}async function readAndNormalizeExistingFilters(){const _0x56db72=_0x3c5232;try{const _0x168c28=await db[_0x56db72(0x29a)](_0x56db72(0x32a)+'ROM\x20filter'+'s'),_0x1e225d=new Map();for(const _0xf4a177 of _0x168c28||[]){const _0x55fde1=resolveTriggerFromRow(_0xf4a177)||'',_0x9885db=resolveChatJidFromRow(_0xf4a177)||'';if(!_0x55fde1||!_0x9885db)continue;const _0x4a1058=resolveResponsesFromRow(_0xf4a177),_0x897113=normalizeResponseValue(_0x4a1058),_0x388cc2=_0xf4a177[_0x56db72(0x305)]||_0xf4a177[_0x56db72(0x1d4)]||_0xf4a177[_0x56db72(0x198)]||'';let _0x3119a1=Number(_0xf4a177[_0x56db72(0x1cf)]||_0xf4a177['ts']||_0xf4a177[_0x56db72(0x330)]||_0xf4a177[_0x56db72(0x213)]||-0x1651+-0x46+0x1697);if(!_0x3119a1)_0x3119a1=Math[_0x56db72(0x24e)](Date[_0x56db72(0x2cd)]()/(-0x26f2+-0xbd*0x15+0x3a5b*0x1));const _0x441a4d=_0x9885db+'||'+_0x55fde1;if(!_0x1e225d['has'](_0x441a4d))_0x1e225d[_0x56db72(0x1ec)](_0x441a4d,{'trigger':_0x55fde1,'chat_jid':_0x9885db,'responses':_0x897113['slice'](),'created_by':_0x388cc2,'created_at':_0x3119a1});else{const _0x12bc3c=_0x1e225d['get'](_0x441a4d);_0x12bc3c['responses']=uniqArray(_0x12bc3c[_0x56db72(0x33c)][_0x56db72(0x1b4)](_0x897113)),_0x12bc3c[_0x56db72(0x305)]=_0x12bc3c[_0x56db72(0x305)]||_0x388cc2,_0x12bc3c[_0x56db72(0x1cf)]=Math[_0x56db72(0x1e3)](_0x12bc3c[_0x56db72(0x1cf)]||0x99b+0x2026+-0x29c1,_0x3119a1||0x1a2a+-0x120+0x502*-0x5);}}return Array[_0x56db72(0x319)](_0x1e225d[_0x56db72(0x332)]());}catch(_0x35f95a){return warn('[gfilter]\x20'+_0x56db72(0x1ee)+_0x56db72(0x29f)+_0x56db72(0x1f1)+_0x56db72(0x2fe)+(_0x35f95a?.[_0x56db72(0x1cd)]||_0x35f95a)),[];}}async function ensureSchema(){const _0x477d14=_0x3c5232,_0x55a70e={'id':_0x477d14(0x31c)+_0x477d14(0x317)+'AUTOINCREM'+_0x477d14(0x225),'trigger':_0x477d14(0x218)+_0x477d14(0x323),'chat_jid':_0x477d14(0x218)+_0x477d14(0x323),'responses':'TEXT\x20NOT\x20N'+'ULL\x20DEFAUL'+'T\x20\x27[]\x27','rr_index':'INTEGER\x20DE'+_0x477d14(0x268),'created_by':_0x477d14(0x2e1)+_0x477d14(0x200),'created_at':_0x477d14(0x1c9)+_0x477d14(0x268)};try{const _0x15eccb=await tableExists('filters');if(!_0x15eccb){const _0x423e91=Object[_0x477d14(0x2a7)](_0x55a70e)[_0x477d14(0x244)](([_0x45230a,_0x584023])=>_0x45230a+'\x20'+_0x584023)[_0x477d14(0x235)](_0x477d14(0x28a));await db[_0x477d14(0x24b)](_0x477d14(0x1fb)+_0x477d14(0x2bb)+_0x477d14(0x22d)+_0x477d14(0x2cf)+'\x20\x20'+_0x423e91+(',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x477d14(0x2d5)+_0x477d14(0x1bf)+'rigger)\x0a\x20\x20'+_0x477d14(0x287)+'\x20\x20\x20\x20\x20'));try{await db[_0x477d14(0x24b)](_0x477d14(0x28f)+'EX\x20IF\x20NOT\x20'+_0x477d14(0x1dd)+_0x477d14(0x1e6)+'hat\x20ON\x20fil'+_0x477d14(0x286)+_0x477d14(0x320));}catch(_0x24cf34){}try{await db[_0x477d14(0x24b)](_0x477d14(0x1c5)+_0x477d14(0x21f)+'IF\x20NOT\x20EXI'+_0x477d14(0x26f)+'lters_uniq'+_0x477d14(0x26d)+_0x477d14(0x1de)+'id,\x20trigge'+'r);');}catch(_0x1866d3){}info(_0x477d14(0x336)+_0x477d14(0x2be)+_0x477d14(0x324)+_0x477d14(0x1e1)+'onical\x20sch'+_0x477d14(0x2a2));return;}const _0x5c2b73=await getTableColumns(_0x477d14(0x20a)),_0x1eabe1=[];for(const _0x33adce of Object[_0x477d14(0x2ad)](_0x55a70e)){if(!_0x5c2b73[_0x477d14(0x261)](_0x33adce))_0x1eabe1[_0x477d14(0x1a7)](_0x33adce);}if(_0x1eabe1[_0x477d14(0x1ed)]===0x2146+-0x4f*-0x1f+-0x3e5*0xb){try{await db[_0x477d14(0x24b)]('CREATE\x20IND'+_0x477d14(0x30b)+_0x477d14(0x1dd)+_0x477d14(0x1e6)+_0x477d14(0x2eb)+_0x477d14(0x286)+'jid);');}catch(_0x2b9a32){warn(_0x477d14(0x336)+'idx\x20create'+':\x20'+(_0x2b9a32?.[_0x477d14(0x1cd)]||_0x2b9a32));}try{await db[_0x477d14(0x24b)]('CREATE\x20UNI'+'QUE\x20INDEX\x20'+_0x477d14(0x196)+_0x477d14(0x26f)+_0x477d14(0x33a)+_0x477d14(0x26d)+'ers(chat_j'+_0x477d14(0x32b)+'r);');}catch(_0xecd4a4){warn('[gfilter]\x20'+_0x477d14(0x1ae)+':\x20'+(_0xecd4a4?.[_0x477d14(0x1cd)]||_0xecd4a4));}return;}const _0x3dd0fb=_0x1eabe1[_0x477d14(0x288)](_0x274b55=>!['id','trigger','chat_jid']['includes'](_0x274b55));if(_0x3dd0fb){for(const _0x19ee0b of _0x1eabe1){try{const _0x329ec8=_0x55a70e[_0x19ee0b],_0x4194a6=_0x329ec8[_0x477d14(0x33f)]('\x20')[_0x477d14(0x272)](-0x483*0x1+0x981+-0x4fd*0x1)[_0x477d14(0x235)]('\x20');await db[_0x477d14(0x24b)]('ALTER\x20TABL'+'E\x20filters\x20'+_0x477d14(0x2c1)+'\x20'+_0x19ee0b+'\x20'+_0x4194a6),info(_0x477d14(0x336)+_0x477d14(0x2fa)+'ing\x20column'+'\x20'+_0x19ee0b+('\x20to\x20filter'+_0x477d14(0x190)));}catch(_0x1120ce){warn(_0x477d14(0x336)+'adding\x20col'+_0x477d14(0x32f)+_0x19ee0b+_0x477d14(0x29c)+(_0x1120ce?.[_0x477d14(0x1cd)]||_0x1120ce));}}try{await db[_0x477d14(0x24b)](_0x477d14(0x28f)+_0x477d14(0x30b)+_0x477d14(0x1dd)+_0x477d14(0x1e6)+'hat\x20ON\x20fil'+_0x477d14(0x286)+_0x477d14(0x320));}catch(_0x4597e0){warn(_0x477d14(0x336)+'idx\x20create'+':\x20'+(_0x4597e0?.[_0x477d14(0x1cd)]||_0x4597e0));}try{await db[_0x477d14(0x24b)](_0x477d14(0x1c5)+_0x477d14(0x21f)+_0x477d14(0x196)+_0x477d14(0x26f)+_0x477d14(0x33a)+_0x477d14(0x26d)+_0x477d14(0x1de)+'id,\x20trigge'+_0x477d14(0x187));}catch(_0x538d20){warn(_0x477d14(0x336)+_0x477d14(0x1ae)+':\x20'+(_0x538d20?.['message']||_0x538d20));}return;}info(_0x477d14(0x336)+'legacy\x20fil'+_0x477d14(0x1a9)+_0x477d14(0x2a0)+_0x477d14(0x23b)+_0x477d14(0x1fe)+'gration');const _0x5ac3b9=await readAndNormalizeExistingFilters();await db[_0x477d14(0x24b)](_0x477d14(0x260)+_0x477d14(0x2e4)+'=\x20OFF;');try{await db['exec'](_0x477d14(0x31e)+'LE\x20IF\x20NOT\x20'+'EXISTS\x20fil'+'ters_new\x20('+_0x477d14(0x30a)+_0x477d14(0x1c3)+_0x477d14(0x33b)+_0x477d14(0x2cc)+_0x477d14(0x2b4)+'\x20\x20\x20\x20\x20trigg'+'er\x20TEXT\x20NO'+_0x477d14(0x191)+_0x477d14(0x267)+'_jid\x20TEXT\x20'+'NOT\x20NULL,\x0a'+_0x477d14(0x30e)+_0x477d14(0x2a9)+'XT\x20NOT\x20NUL'+_0x477d14(0x238)+_0x477d14(0x2a5)+_0x477d14(0x2f1)+_0x477d14(0x2ce)+'\x20DEFAULT\x200'+_0x477d14(0x1b2)+'created_by'+_0x477d14(0x24f)+_0x477d14(0x263)+_0x477d14(0x327)+_0x477d14(0x1d0)+_0x477d14(0x212)+'LT\x200,\x0a\x20\x20\x20\x20'+_0x477d14(0x2fc)+_0x477d14(0x245)+_0x477d14(0x2b6)+_0x477d14(0x258));}catch(_0x59b996){await db[_0x477d14(0x24b)](_0x477d14(0x31e)+_0x477d14(0x221)+_0x477d14(0x2f5)+_0x477d14(0x22a)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+_0x477d14(0x1c3)+'PRIMARY\x20KE'+'Y\x20AUTOINCR'+'EMENT,\x0a\x20\x20\x20'+_0x477d14(0x285)+_0x477d14(0x21e)+_0x477d14(0x191)+_0x477d14(0x267)+_0x477d14(0x2c7)+_0x477d14(0x2ff)+_0x477d14(0x30e)+_0x477d14(0x2a9)+'XT\x20NOT\x20NUL'+_0x477d14(0x238)+_0x477d14(0x2a5)+'\x20\x20\x20\x20rr_ind'+'ex\x20INTEGER'+'\x20DEFAULT\x200'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x477d14(0x305)+_0x477d14(0x24f)+'ULT\x20\x27\x27,\x0a\x20\x20'+_0x477d14(0x327)+_0x477d14(0x1d0)+_0x477d14(0x212)+_0x477d14(0x2f0)+_0x477d14(0x345)),warn(_0x477d14(0x336)+_0x477d14(0x27f)+_0x477d14(0x24a)+_0x477d14(0x1b8)+'IQUE\x20as\x20fa'+'llback');}const _0x18733c=await db[_0x477d14(0x1a4)](_0x477d14(0x1bc)+_0x477d14(0x342)+_0x477d14(0x281)+'er,\x20chat_j'+'id,\x20respon'+_0x477d14(0x2ed)+_0x477d14(0x1b0)+'ed_by,\x20cre'+'ated_at)\x20V'+_0x477d14(0x25c)+_0x477d14(0x23e)+_0x477d14(0x311));try{for(const _0x341334 of _0x5ac3b9){const _0x24f643=JSON['stringify'](ensureArray(_0x341334['responses']||[]));try{await _0x18733c[_0x477d14(0x227)](_0x341334[_0x477d14(0x307)],_0x341334['chat_jid'],_0x24f643,_0x341334[_0x477d14(0x305)]||'',Number(_0x341334['created_at']||Math[_0x477d14(0x24e)](Date['now']()/(-0x1c8f+-0x5ca+-0x577*-0x7))));}catch(_0xb490b0){warn(_0x477d14(0x336)+_0x477d14(0x1a0)+_0x477d14(0x1ad)+_0x477d14(0x2f3)+'w\x20'+_0x341334['chat_jid']+'@'+_0x341334[_0x477d14(0x307)]+':\x20'+(_0xb490b0?.[_0x477d14(0x1cd)]||_0xb490b0));}}}finally{try{await _0x18733c[_0x477d14(0x2c2)]();}catch(_0x84c254){}}try{const _0x4c4e99='filters_ba'+_0x477d14(0x2c4)+Math[_0x477d14(0x24e)](Date['now']()/(0xa8d+-0x6b*-0x35+-0x13*0x184));await db[_0x477d14(0x24b)]('ALTER\x20TABL'+_0x477d14(0x22d)+_0x477d14(0x312)+_0x4c4e99+';'),await db[_0x477d14(0x24b)](_0x477d14(0x28d)+_0x477d14(0x2ee)+'new\x20RENAME'+'\x20TO\x20filter'+'s;');try{await db[_0x477d14(0x24b)](_0x477d14(0x28f)+'EX\x20IF\x20NOT\x20'+_0x477d14(0x1dd)+'_filters_c'+_0x477d14(0x2eb)+_0x477d14(0x286)+'jid);');}catch(_0x2b30ff){warn(_0x477d14(0x336)+_0x477d14(0x275)+_0x477d14(0x341)+(_0x2b30ff?.[_0x477d14(0x1cd)]||_0x2b30ff));}try{await db[_0x477d14(0x24b)](_0x477d14(0x1c5)+'QUE\x20INDEX\x20'+_0x477d14(0x196)+_0x477d14(0x26f)+_0x477d14(0x33a)+_0x477d14(0x26d)+'ers(chat_j'+'id,\x20trigge'+'r);');}catch(_0x2b4dea){warn(_0x477d14(0x336)+_0x477d14(0x275)+'unique\x20idx'+':\x20'+(_0x2b4dea?.[_0x477d14(0x1cd)]||_0x2b4dea));}info(_0x477d14(0x336)+_0x477d14(0x2d8)+_0x477d14(0x1af)+_0x477d14(0x2aa)+_0x477d14(0x283)+_0x477d14(0x25a));}catch(_0x234532){warn(_0x477d14(0x336)+_0x477d14(0x2d2)+_0x477d14(0x2fe)+(_0x234532?.['message']||_0x234532));throw _0x234532;}finally{await db[_0x477d14(0x24b)](_0x477d14(0x260)+_0x477d14(0x2e4)+_0x477d14(0x277));}}catch(_0x12dd00){error(_0x12dd00,_0x477d14(0x336)+_0x477d14(0x246)+_0x477d14(0x194));throw _0x12dd00;}}function normalizeResponseValue(_0x5aeea6){const _0x4daa45=_0x3c5232;if(_0x5aeea6==null)return[];if(Array['isArray'](_0x5aeea6))return uniqArray(_0x5aeea6);if(typeof _0x5aeea6===_0x4daa45(0x2ab)){let _0x77a0fe=_0x5aeea6[_0x4daa45(0x290)](/\r/g,'');const _0x4dc258=_0x77a0fe['trim']();if(_0x4dc258['startsWith']('['))try{const _0x5207c7=JSON[_0x4daa45(0x28c)](_0x4dc258);if(Array['isArray'](_0x5207c7))return uniqArray(_0x5207c7[_0x4daa45(0x244)](_0x4a544a=>String(_0x4a544a||'')));}catch(_0x17be6f){}_0x77a0fe=_0x77a0fe[_0x4daa45(0x290)](/^\s*\n+/,'')[_0x4daa45(0x290)](/\n+\s*$/,'');const _0x4f9820=_0x77a0fe[_0x4daa45(0x33f)]('\x0a'),_0x4d4430=_0x4f9820['some'](_0x4c9d4c=>_0x4c9d4c[_0x4daa45(0x30f)]()['startsWith']('!'));if(_0x4d4430){const _0x545323=[];let _0x564402=null;for(const _0x3e19f0 of _0x4f9820){if(_0x3e19f0['trimStart']()[_0x4daa45(0x284)]('!')){const _0x2a9785=_0x3e19f0[_0x4daa45(0x290)](/^\s*!/,''),_0x373c3f=_0x2a9785[_0x4daa45(0x290)](/\s+$/,'');_0x564402=_0x373c3f,_0x545323[_0x4daa45(0x1a7)](_0x564402);}else{const _0xa02e59=_0x3e19f0[_0x4daa45(0x290)](/\s+$/,'');if(_0x564402===null)_0x564402=_0xa02e59,_0x545323[_0x4daa45(0x1a7)](_0x564402);else{const _0x695460=_0x545323['length']-(0x1*-0x1997+0x5f2+0x2*0x9d3);_0x545323[_0x695460]=_0x545323[_0x695460]+'\x0a'+_0xa02e59,_0x564402=_0x545323[_0x695460];}}}return uniqArray(_0x545323[_0x4daa45(0x244)](_0xa2e7cf=>String(_0xa2e7cf||'')[_0x4daa45(0x20c)]()));}else{const _0x5b9db0=_0x4f9820['map'](_0x1b17e9=>_0x1b17e9['replace'](/\s+$/,''))[_0x4daa45(0x235)]('\x0a')[_0x4daa45(0x20c)]();if(!_0x5b9db0)return[];return[_0x5b9db0];}}return[];}async function upsertFilterRow(_0x5b4b73,_0x1f60c1,_0x5860c5,_0x1f81ef){const _0x4663c8=_0x3c5232;try{const _0x17c550=Math[_0x4663c8(0x24e)](Date[_0x4663c8(0x2cd)]()/(-0x149*-0x12+0x3*0x4ef+0x2207*-0x1)),_0xce0912=JSON[_0x4663c8(0x1a6)](uniqArray(ensureArray(_0x5860c5)['map'](_0xf5db3b=>String(_0xf5db3b)[_0x4663c8(0x20c)]())[_0x4663c8(0x1f5)](Boolean)));await db[_0x4663c8(0x227)](_0x4663c8(0x1bc)+'O\x20filters\x20'+_0x4663c8(0x1d1)+_0x4663c8(0x20e)+_0x4663c8(0x18c)+_0x4663c8(0x299)+_0x4663c8(0x271)+'y,\x20created'+_0x4663c8(0x201)+'\x20\x20VALUES\x20('+'?,\x20?,\x20?,\x200'+',\x20?,\x20?)\x0a\x20\x20'+_0x4663c8(0x25d)+_0x4663c8(0x215)+_0x4663c8(0x1cc)+_0x4663c8(0x237)+_0x4663c8(0x1fc)+_0x4663c8(0x344)+_0x4663c8(0x233)+_0x4663c8(0x247)+_0x4663c8(0x18c)+_0x4663c8(0x2af)+'rr_index\x20='+_0x4663c8(0x1c8)+_0x4663c8(0x216)+_0x4663c8(0x334)+_0x4663c8(0x219)+_0x4663c8(0x1d5)+_0x4663c8(0x327)+'ted_at\x20=\x20e'+_0x4663c8(0x209)+_0x4663c8(0x26a),[_0x1f60c1,_0x5b4b73,_0xce0912,_0x1f81ef||'',_0x17c550]);try{automatonCache[_0x4663c8(0x337)]();}catch(_0x5e94a3){}return info(_0x4663c8(0x336)+_0x4663c8(0x2b5)+_0x4663c8(0x339)+_0x1f60c1+_0x4663c8(0x256)+_0x5b4b73),!![];}catch(_0x1e90b4){return error(_0x1e90b4,'[gfilter]\x20'+_0x4663c8(0x328)+_0x4663c8(0x1d6)+_0x4663c8(0x2cb)+_0x1f60c1+'\x20@\x20'+_0x5b4b73),![];}}async function deleteFilters(_0x222730,_0x308449){const _0x367a95=_0x3c5232;if(!Array[_0x367a95(0x23a)](_0x308449)||_0x308449[_0x367a95(0x1ed)]===0x1*0x18b9+0x1*-0x1bd1+0x318)return-0xb*-0x2c1+-0xd89+0x861*-0x2;try{let _0x11303d=-0x1ee3+0x2137+-0x4*0x95;for(const _0xfe9655 of _0x308449){const _0x4b056b=await db[_0x367a95(0x227)](_0x367a95(0x239)+_0x367a95(0x298)+_0x367a95(0x2bd)+'_jid\x20=\x20?\x20A'+_0x367a95(0x1b9)+_0x367a95(0x240),[_0x222730,_0xfe9655]);if(_0x4b056b?.[_0x367a95(0x27b)])_0x11303d+=_0x4b056b[_0x367a95(0x27b)];info(_0x367a95(0x336)+_0x367a95(0x1e2)+_0xfe9655+_0x367a95(0x1ef)+_0x222730);}try{automatonCache[_0x367a95(0x337)]();}catch(_0x163791){}return _0x11303d;}catch(_0x35b415){return error(_0x35b415,_0x367a95(0x336)+'deleteFilt'+_0x367a95(0x20d)+_0x367a95(0x2b1)+_0x222730),0x721+0x1929+-0x1025*0x2;}}async function listTriggersForChat(_0xa51a43){const _0x31f0df=_0x3c5232;try{const _0x5b3ca6=await db['all'](_0x31f0df(0x18e)+_0x31f0df(0x346)+_0x31f0df(0x220)+'ilters\x20WHE'+'RE\x20chat_ji'+_0x31f0df(0x1d8)+_0x31f0df(0x2ec)+'er',[_0xa51a43]);return(_0x5b3ca6||[])[_0x31f0df(0x244)](_0x3f6b53=>_0x3f6b53[_0x31f0df(0x307)]);}catch(_0x1f5c27){return warn(_0x1f5c27,_0x31f0df(0x336)+'listTrigge'+_0x31f0df(0x2dd)+_0x31f0df(0x27c)+'\x20'+_0xa51a43),[];}}async function pickResponseAndAdvance(_0xbc9050,_0x568879,_0x2fc285=_0x3c5232(0x1ea)){const _0x20fe96=_0x3c5232;try{const _0x14ca3f=await db[_0x20fe96(0x2f9)](_0x20fe96(0x270)+_0x20fe96(0x204)+'_index\x20FRO'+_0x20fe96(0x298)+_0x20fe96(0x2bd)+'_jid\x20=\x20?\x20A'+_0x20fe96(0x1b9)+_0x20fe96(0x257)+'\x201',[_0xbc9050,_0x568879]);if(!_0x14ca3f)return null;let _0x4f1a86=[];try{_0x4f1a86=JSON['parse'](_0x14ca3f['responses']||'[]');}catch{_0x4f1a86=ensureArray(_0x14ca3f['responses']);}_0x4f1a86=ensureArray(_0x4f1a86);if(!_0x4f1a86[_0x20fe96(0x1ed)])return null;if((_0x2fc285||'')['toLowerCas'+'e']()===_0x20fe96(0x314)){const _0x3d73af=Math[_0x20fe96(0x24e)](Math['random']()*_0x4f1a86[_0x20fe96(0x1ed)]);return _0x4f1a86[_0x3d73af];}const _0x1b8d85=Number(_0x14ca3f['rr_index']||-0x16a2*-0x1+0x3c4*0x1+-0x1a66),_0x43be55=_0x4f1a86[_0x1b8d85%_0x4f1a86[_0x20fe96(0x1ed)]];try{await db[_0x20fe96(0x227)]('UPDATE\x20fil'+_0x20fe96(0x1d3)+_0x20fe96(0x2a3)+_0x20fe96(0x2d1)+_0x20fe96(0x1f3)+_0x20fe96(0x1ff)+'=\x20?\x20AND\x20tr'+_0x20fe96(0x33d),[_0xbc9050,_0x568879]);}catch(_0x2e3016){warn(_0x20fe96(0x336)+'rr_index\x20i'+'ncrement\x20f'+_0x20fe96(0x2b8)+(_0x2e3016?.[_0x20fe96(0x1cd)]||_0x2e3016));}return _0x43be55;}catch(_0x33d236){return warn('[gfilter]\x20'+_0x20fe96(0x25b)+_0x20fe96(0x2bc)+'ce\x20error:\x20'+(_0x33d236?.[_0x20fe96(0x1cd)]||_0x33d236)),null;}}function parseFilterCommandText(_0x226939){const _0x5d65e8=_0x3c5232;if(!_0x226939)return null;const _0x42430f=_0x226939['split'](/\r?\n/)[_0x5d65e8(0x244)](_0x8793bd=>_0x8793bd[_0x5d65e8(0x290)](/\r/g,''));if(!_0x42430f['length'])return null;let _0x47002b=(_0x42430f[0xff*0x7+-0x19+-0x6e0]||'')[_0x5d65e8(0x20c)](),_0x2ddb90=_0x42430f[_0x5d65e8(0x272)](-0x137f*0x1+-0xbde*0x2+0x4*0xacf),_0x36e0e4=null;const _0x55a591=_0x47002b[_0x5d65e8(0x1e9)](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);_0x55a591&&(_0x47002b=(_0x55a591[-0xc1c+-0x29*-0xe3+-0x6b*0x3a]||'')[_0x5d65e8(0x20c)](),_0x36e0e4=(_0x55a591[-0x9*-0xb6+-0x6f5+0x91]||'')[_0x5d65e8(0x20c)]());if(!_0x36e0e4&&_0x2ddb90&&_0x2ddb90[_0x5d65e8(0x1ed)]){let _0xa9d3a5=-(-0xcd7+-0x2*-0x7ab+-0x27e);for(let _0x1f8e38=_0x2ddb90[_0x5d65e8(0x1ed)]-(0x14f7+0x13*0x1c9+-0x36e1);_0x1f8e38>=0x3*0xa95+0x70b*-0x1+0x44*-0x5d;_0x1f8e38--){if(String(_0x2ddb90[_0x1f8e38]||'')[_0x5d65e8(0x20c)]()[_0x5d65e8(0x1ed)]>-0x9b7+0x2*-0x58d+0x1*0x14d1){_0xa9d3a5=_0x1f8e38;break;}}if(_0xa9d3a5>=0xc53*0x1+0x1cc9+-0x3*0xdb4){const _0x59db2b=String(_0x2ddb90[_0xa9d3a5]||'')[_0x5d65e8(0x20c)](),_0x309de1=_0x59db2b[_0x5d65e8(0x1e9)](/^gp[:\s]*([^\s,]+)\s*$/i);_0x309de1&&(_0x36e0e4=(_0x309de1[0xdd8+0x1155+-0x1f2c]||'')['trim'](),_0x2ddb90[_0x5d65e8(0x2db)](_0xa9d3a5,-0x454*-0x8+-0xbea+-0x16b5));}}let _0x5a70b2=_0x47002b[_0x5d65e8(0x20c)]()[_0x5d65e8(0x33f)](/\s+/)[_0x5d65e8(0x1f5)](Boolean);if(_0x5a70b2['length']&&_0x5a70b2[-0x307*0xb+-0x1507+-0x6*-0x90e]['toLowerCas'+'e']()===_0x5d65e8(0x309))_0x5a70b2['shift']();const _0x272de9=_0x5a70b2[_0x5d65e8(0x235)]('\x20')[_0x5d65e8(0x20c)]();let _0x14ea0f=[];_0x272de9&&(_0x272de9[_0x5d65e8(0x261)](',')?_0x14ea0f=_0x272de9[_0x5d65e8(0x33f)](',')[_0x5d65e8(0x244)](_0x27fae9=>_0x27fae9['trim']())[_0x5d65e8(0x1f5)](Boolean):_0x14ea0f=_0x272de9[_0x5d65e8(0x33f)](/\s+/)['map'](_0x9c441b=>_0x9c441b['trim']())[_0x5d65e8(0x1f5)](Boolean));const _0x258b42=_0x2ddb90;if(!_0x258b42[_0x5d65e8(0x1ed)])return{'triggers':_0x14ea0f,'responses':[],'gp':_0x36e0e4};const _0x1e561d=_0x258b42[_0x5d65e8(0x235)]('\x0a'),_0x14988e=normalizeResponseValue(_0x1e561d);return{'triggers':_0x14ea0f,'responses':_0x14988e,'gp':_0x36e0e4};}function getMessageText(_0x38e6b5){const _0x448689=_0x3c5232;if(!_0x38e6b5||!_0x38e6b5[_0x448689(0x1cd)])return'';const _0x2cb3ed=_0x38e6b5['message'];if(_0x2cb3ed[_0x448689(0x19c)+'on'])return _0x2cb3ed[_0x448689(0x19c)+'on'];if(_0x2cb3ed[_0x448689(0x2e6)+_0x448689(0x266)]?.[_0x448689(0x1db)])return _0x2cb3ed[_0x448689(0x2e6)+_0x448689(0x266)][_0x448689(0x1db)];if(_0x2cb3ed[_0x448689(0x2d6)+'ge']?.[_0x448689(0x2a1)])return _0x2cb3ed[_0x448689(0x2d6)+'ge'][_0x448689(0x2a1)];if(_0x2cb3ed['videoMessa'+'ge']?.[_0x448689(0x2a1)])return _0x2cb3ed['videoMessa'+'ge'][_0x448689(0x2a1)];if(_0x2cb3ed['buttonsRes'+_0x448689(0x205)+'ge']?.['selectedBu'+_0x448689(0x27e)])return _0x2cb3ed['buttonsRes'+'ponseMessa'+'ge']['selectedBu'+_0x448689(0x27e)];if(_0x2cb3ed[_0x448689(0x315)+_0x448689(0x1da)]?.['singleSele'+_0x448689(0x278)]?.[_0x448689(0x2f2)+_0x448689(0x318)])return _0x2cb3ed[_0x448689(0x315)+_0x448689(0x1da)][_0x448689(0x22e)+_0x448689(0x278)][_0x448689(0x2f2)+'wId'];return'';}const processedMessageKeys=new Map(),DEDUPE_TTL=(0x23d2+0x165c*0x1+-0x10*0x3a1)*(-0x662*-0x4+0x13d*0x11+0x1b5*-0x19);function makeDedupeKey(_0x59a608){const _0x9f1507=_0x3c5232,_0x13c345=_0x59a608?.[_0x9f1507(0x279)];if(!_0x13c345)return null;const _0x480d85=_0x13c345['id']||_0x13c345?.[_0x9f1507(0x321)+'t']||'',_0x2be00b=_0x13c345[_0x9f1507(0x29e)]||'';return _0x2be00b+'::'+_0x480d85;}function isMsgProcessed(_0x182bf6){const _0x27c052=_0x3c5232;return _0x182bf6&&processedMessageKeys[_0x27c052(0x289)](_0x182bf6);}function markMsgProcessed(_0x4d5b0e){const _0x3f320a=_0x3c5232;if(!_0x4d5b0e)return;processedMessageKeys[_0x3f320a(0x289)](_0x4d5b0e)&&clearTimeout(processedMessageKeys['get'](_0x4d5b0e));const _0x597526=setTimeout(()=>processedMessageKeys[_0x3f320a(0x2d4)](_0x4d5b0e),DEDUPE_TTL);processedMessageKeys[_0x3f320a(0x1ec)](_0x4d5b0e,_0x597526);}class Aho{constructor(){const _0x468f15=_0x3c5232;this[_0x468f15(0x30d)]=[{'next':Object[_0x468f15(0x2ae)](null),'fail':0x0,'output':[]}];}[_0x3c5232(0x2c0)](_0x34fc63){const _0x1c5d6d=_0x3c5232;this[_0x1c5d6d(0x30d)]=[{'next':Object[_0x1c5d6d(0x2ae)](null),'fail':0x0,'output':[]}];for(const _0x10d521 of _0x34fc63){let _0x11d82c=0x347*0x7+0x2057+0x1ba4*-0x2;for(let _0x20ca93=0xc54*-0x2+-0x1*0xf59+0x3a3*0xb;_0x20ca93<_0x10d521['length'];_0x20ca93++){const _0x1d521d=_0x10d521[_0x20ca93];!this[_0x1c5d6d(0x30d)][_0x11d82c][_0x1c5d6d(0x295)][_0x1d521d]&&(this[_0x1c5d6d(0x30d)][_0x11d82c]['next'][_0x1d521d]=this[_0x1c5d6d(0x30d)][_0x1c5d6d(0x1ed)],this['nodes'][_0x1c5d6d(0x1a7)]({'next':Object[_0x1c5d6d(0x2ae)](null),'fail':0x0,'output':[]})),_0x11d82c=this[_0x1c5d6d(0x30d)][_0x11d82c][_0x1c5d6d(0x295)][_0x1d521d];}this[_0x1c5d6d(0x30d)][_0x11d82c][_0x1c5d6d(0x2ac)][_0x1c5d6d(0x1a7)](_0x10d521);}const _0x307917=[];for(const _0x51ab45 in this[_0x1c5d6d(0x30d)][0x2233+-0x27a*-0x5+-0x5*0x951][_0x1c5d6d(0x295)]){const _0x2be80f=this['nodes'][-0x9*0x365+-0xefb+0x178*0x1f][_0x1c5d6d(0x295)][_0x51ab45];this[_0x1c5d6d(0x30d)][_0x2be80f][_0x1c5d6d(0x1dc)]=0x1f87+-0x1*0x116f+-0xe18,_0x307917['push'](_0x2be80f);}while(_0x307917[_0x1c5d6d(0x1ed)]){const _0x3e6854=_0x307917[_0x1c5d6d(0x249)]();for(const _0x1e3ef0 in this['nodes'][_0x3e6854][_0x1c5d6d(0x295)]){const _0x1d8d22=this[_0x1c5d6d(0x30d)][_0x3e6854][_0x1c5d6d(0x295)][_0x1e3ef0];let _0x9c66a4=this[_0x1c5d6d(0x30d)][_0x3e6854]['fail'];while(_0x9c66a4&&!this['nodes'][_0x9c66a4][_0x1c5d6d(0x295)][_0x1e3ef0])_0x9c66a4=this[_0x1c5d6d(0x30d)][_0x9c66a4][_0x1c5d6d(0x1dc)];if(this['nodes'][_0x9c66a4][_0x1c5d6d(0x295)][_0x1e3ef0])this[_0x1c5d6d(0x30d)][_0x1d8d22][_0x1c5d6d(0x1dc)]=this[_0x1c5d6d(0x30d)][_0x9c66a4]['next'][_0x1e3ef0];else this[_0x1c5d6d(0x30d)][_0x1d8d22][_0x1c5d6d(0x1dc)]=0x430*-0x2+-0x6b*-0x53+0x1a51*-0x1;this[_0x1c5d6d(0x30d)][_0x1d8d22]['output'][_0x1c5d6d(0x1a7)](...this[_0x1c5d6d(0x30d)][this[_0x1c5d6d(0x30d)][_0x1d8d22]['fail']][_0x1c5d6d(0x2ac)]),_0x307917[_0x1c5d6d(0x1a7)](_0x1d8d22);}}}[_0x3c5232(0x195)](_0x1c0cb5){const _0x5cf7cc=_0x3c5232,_0x44ae7f=[];let _0x379a69=-0x24b*-0x9+-0x21e6+-0x1*-0xd43;for(let _0x3945fd=-0x2670+0x11*0x47+0x21b9*0x1;_0x3945fd<_0x1c0cb5[_0x5cf7cc(0x1ed)];_0x3945fd++){const _0x1b945e=_0x1c0cb5[_0x3945fd];while(_0x379a69&&!this['nodes'][_0x379a69][_0x5cf7cc(0x295)][_0x1b945e])_0x379a69=this[_0x5cf7cc(0x30d)][_0x379a69][_0x5cf7cc(0x1dc)];if(this[_0x5cf7cc(0x30d)][_0x379a69][_0x5cf7cc(0x295)][_0x1b945e])_0x379a69=this['nodes'][_0x379a69][_0x5cf7cc(0x295)][_0x1b945e];else _0x379a69=0xde9+-0xa0a+-0x3df;if(this['nodes'][_0x379a69][_0x5cf7cc(0x2ac)][_0x5cf7cc(0x1ed)])for(const _0x24b429 of this[_0x5cf7cc(0x30d)][_0x379a69]['output']){_0x44ae7f[_0x5cf7cc(0x1a7)]({'keyword':_0x24b429,'index':_0x3945fd-_0x24b429[_0x5cf7cc(0x1ed)]+(0x6f0*-0x5+0x5a*-0x33+0x349f*0x1)});}}return _0x44ae7f;}}const automatonCache=new Map();async function getAutomatonForChat(_0x39e7f9){const _0xd98440=_0x3c5232;if(!_0x39e7f9)return null;if(automatonCache['has'](_0x39e7f9))return automatonCache[_0xd98440(0x2f9)](_0x39e7f9);try{const _0x2de1a0=await db[_0xd98440(0x29a)](_0xd98440(0x18e)+'TINCT\x20trig'+_0xd98440(0x220)+'ilters\x20WHE'+_0xd98440(0x210)+_0xd98440(0x236)+')',[_0x39e7f9,'*']),_0x16005e=(_0x2de1a0||[])['map'](_0x482eb5=>String(_0x482eb5['trigger']||'')['trim']())[_0xd98440(0x1f5)](Boolean),_0x59e517=_0x16005e[_0xd98440(0x1f5)](_0x55e352=>{const _0x54d6b6=_0xd98440,_0x455c6e=String(_0x55e352)[_0x54d6b6(0x20c)]()[_0x54d6b6(0x28b)+'e']();if(_0x455c6e[_0x54d6b6(0x284)]('regex:'))return![];if(_0x55e352[_0x54d6b6(0x261)]('*'))return![];return!![];}),_0x3c3a1a=_0x59e517[_0xd98440(0x244)](_0xaa528a=>_0xaa528a[_0xd98440(0x28b)+'e']()),_0x1bc748=new Map();for(let _0x852fe3=0x15b*0x11+0x2a9*-0xd+-0x1*-0xb8a;_0x852fe3<_0x59e517[_0xd98440(0x1ed)];_0x852fe3++){_0x1bc748['set'](_0x3c3a1a[_0x852fe3],_0x59e517[_0x852fe3]);}const _0x14027d=new Aho();if(_0x3c3a1a['length'])_0x14027d[_0xd98440(0x2c0)](_0x3c3a1a);const _0x55702c={'ac':_0x14027d,'keywords':_0x3c3a1a,'lowerToOrig':_0x1bc748};return automatonCache['set'](_0x39e7f9,_0x55702c),_0x55702c;}catch(_0xa549ba){return warn('[gfilter]\x20'+_0xd98440(0x232)+_0xd98440(0x1e7)+_0xd98440(0x27c)+'\x20'+_0x39e7f9+':\x20'+(_0xa549ba?.['message']||_0xa549ba)),null;}}async function findStoredMatchFromFindings(_0x1a701b=[]){const _0x4e1eb5=_0x3c5232;try{const _0x3e2dbd=await listSudo();if(!Array[_0x4e1eb5(0x23a)](_0x3e2dbd)||_0x3e2dbd[_0x4e1eb5(0x1ed)]===0xa39*0x2+0x8e9+0x5df*-0x5)return null;const _0x384d22=new Set(_0x3e2dbd['map'](String));for(const _0x57d9d9 of _0x1a701b||[]){if(!_0x57d9d9||typeof _0x57d9d9['jid']!==_0x4e1eb5(0x2ab))continue;const _0x1ec37d=normalizeToJid(_0x57d9d9[_0x4e1eb5(0x21c)]);if(_0x1ec37d&&_0x384d22['has'](_0x1ec37d))return _0x1ec37d;if(_0x384d22[_0x4e1eb5(0x289)](_0x57d9d9['jid']))return _0x57d9d9[_0x4e1eb5(0x21c)];const _0x2390a1=String(_0x57d9d9[_0x4e1eb5(0x21c)])[_0x4e1eb5(0x33f)]('@')[0x9*0xac+-0x5c7*-0x1+-0xbd3][_0x4e1eb5(0x33f)](':')[-0x2c6*0x1+-0x2b4+0x57a];if(_0x2390a1)for(const _0x1802f8 of _0x3e2dbd){const _0x17249f=String(_0x1802f8)[_0x4e1eb5(0x33f)]('@')[0x2*0x79f+0x1ae3+-0x2a21];if(_0x17249f&&_0x17249f===_0x2390a1)return _0x1802f8;}}return null;}catch(_0x33d7ce){return warn('[gfilter]\x20'+_0x4e1eb5(0x306)+_0x4e1eb5(0x2f4)+_0x4e1eb5(0x30c)+_0x4e1eb5(0x2f8)+(_0x33d7ce?.[_0x4e1eb5(0x1cd)]||_0x33d7ce)),null;}}export async function initialize(_0x448b31){const _0x1d3995=_0x3c5232;botRef=_0x448b31;if(botRef){if(typeof botRef[_0x1d3995(0x329)+'e']===_0x1d3995(0x228))sendApi=async(_0x268352,_0x4fa12e)=>await botRef[_0x1d3995(0x329)+'e'](_0x268352,_0x4fa12e);else botRef[_0x1d3995(0x2da)]&&typeof botRef[_0x1d3995(0x2da)][_0x1d3995(0x329)+'e']===_0x1d3995(0x228)?sendApi=async(_0x286af6,_0x4aa196)=>await botRef['sock'][_0x1d3995(0x329)+'e'](_0x286af6,_0x4aa196):sendApi=null;}try{await ensureSchema(),info(_0x1d3995(0x336)+_0x1d3995(0x1c0)+'d\x20(sudo\x20+\x20'+_0x1d3995(0x2b9)+'integrated'+')');}catch(_0x2a97b2){error(_0x2a97b2,_0x1d3995(0x336)+'initialize'+_0x1d3995(0x250));throw _0x2a97b2;}}function detectCommandNameFromCmdText(_0x2661c0){const _0x2e8502=_0x3c5232;if(!_0x2661c0)return null;const _0x38e824=_0x2661c0[_0x2e8502(0x20c)]();if(!_0x38e824)return null;return _0x38e824['split'](/\s+/)[-0x2057*0x1+0x1839+0x81e][_0x2e8502(0x28b)+'e']();}export async function onMessage(_0x49c9a1){const _0x1516f5=_0x3c5232;try{if(!_0x49c9a1||!_0x49c9a1[_0x1516f5(0x279)]||!_0x49c9a1[_0x1516f5(0x1cd)])return;const _0x284795=makeDedupeKey(_0x49c9a1);if(!_0x284795)return;if(isMsgProcessed(_0x284795))return;markMsgProcessed(_0x284795);const _0x41756d=getMessageText(_0x49c9a1);if(!_0x41756d)return;const _0x2d6d6d=_0x49c9a1[_0x1516f5(0x279)][_0x1516f5(0x29e)],_0x5f5167=typeof _0x2d6d6d==='string'&&_0x2d6d6d[_0x1516f5(0x1be)](_0x1516f5(0x280)),_0x4c67de=_0x49c9a1[_0x1516f5(0x279)]&&(_0x49c9a1['key']['participan'+'t']||_0x49c9a1[_0x1516f5(0x279)][_0x1516f5(0x319)]||_0x49c9a1[_0x1516f5(0x279)][_0x1516f5(0x29e)])||'',_0x3fded8=(_0x4c67de||'')[_0x1516f5(0x33f)]('@')[0xe70+-0x2*0x426+-0x624];let _0x3978c4=![];if(_0x5f5167)try{_0x3978c4=await isadmin(botRef,_0x49c9a1);}catch(_0x40b777){_0x3978c4=![];}if(_0x49c9a1[_0x1516f5(0x2c5)]){const _0x2f0ad1=typeof _0x49c9a1[_0x1516f5(0x1db)]===_0x1516f5(0x2ab)&&_0x49c9a1['text'][_0x1516f5(0x20c)]()[_0x1516f5(0x1ed)]?_0x49c9a1[_0x1516f5(0x1db)][_0x1516f5(0x20c)]():_0x41756d[_0x1516f5(0x20c)](),_0x32e0f0=detectCommandNameFromCmdText(_0x2f0ad1);if(!_0x32e0f0)return;if(!_0x32e0f0['startsWith']('g'))return;if(!_0x5f5167){const _0x5b6a75=Boolean(_0x49c9a1['key'][_0x1516f5(0x2b2)]);let _0x330c95=null;if(_0x5b6a75){const _0x34f9ad=getBotJid();!_0x34f9ad?(warn(_0x1516f5(0x336)+_0x1516f5(0x2d0)+_0x1516f5(0x1a5)+_0x1516f5(0x1c1)+_0x1516f5(0x206)+_0x1516f5(0x1bb)+_0x1516f5(0x31d)+_0x1516f5(0x26b)+_0x1516f5(0x1b3)),_0x330c95=_0x49c9a1['key'][_0x1516f5(0x29e)]):_0x330c95=_0x34f9ad;}else{let _0x4e869a=![];try{_0x4e869a=await isSudo(botRef,_0x49c9a1);}catch(_0x233dca){_0x4e869a=![];}if(!_0x4e869a)return;const _0xaa23e9=userJidFromCtx(_0x49c9a1)||{'findings':[]},_0x5f0972=await findStoredMatchFromFindings(_0xaa23e9[_0x1516f5(0x1c6)]||[]);if(!_0x5f0972)return;_0x330c95=_0x5f0972;}const _0x4fdbcb=parseFilterCommandText(_0x2f0ad1||_0x41756d);if(_0x32e0f0===_0x1516f5(0x309)){if(!_0x4fdbcb||!_0x4fdbcb[_0x1516f5(0x1d2)][_0x1516f5(0x1ed)]||!_0x4fdbcb['responses']['length']){await sendText(_0x49c9a1,_0x330c95,_0x1516f5(0x1d7)+_0x1516f5(0x1b1)+_0x1516f5(0x22f)+'\x20gfilter\x20<'+'trigger1,t'+_0x1516f5(0x18b)+_0x1516f5(0x1a2)+_0x1516f5(0x1aa)+_0x1516f5(0x31b)+_0x1516f5(0x243)+_0x1516f5(0x259)+_0x1516f5(0x331)+_0x1516f5(0x349)+_0x1516f5(0x2b0)+'\x20target\x20gr'+'oup(s).');return;}let _0x866df4=[];if(_0x4fdbcb['gp']){const _0x2f4982=_0x4fdbcb['gp'][_0x1516f5(0x20c)]();if(_0x2f4982[_0x1516f5(0x28b)+'e']()===_0x1516f5(0x29a))_0x866df4=await _0xfe9507[_0x1516f5(0x2ba)+_0x1516f5(0x189)]();else{const _0x35eb6d=await _0xfe9507[_0x1516f5(0x248)+'e'](_0x2f4982);if(_0x35eb6d)_0x866df4=[_0x35eb6d];else{if(_0x2f4982[_0x1516f5(0x261)]('@'))_0x866df4=[_0xfe9507[_0x1516f5(0x2e5)+_0x1516f5(0x1b7)](_0x2f4982)];else{await sendText(_0x49c9a1,_0x330c95,_0x1516f5(0x2e2)+_0x1516f5(0x18f)+':\x20\x22'+_0x2f4982+(_0x1516f5(0x19b)+_0x1516f5(0x1f0)+_0x1516f5(0x224)+_0x1516f5(0x304)+_0x1516f5(0x28e)+_0x1516f5(0x297)));return;}}}}else _0x866df4=['*'];let _0x235d55=-0x2555+-0x4e*-0x10+0x2075;for(const _0x4c872e of uniqArray(_0x866df4)){for(const _0x51e2e9 of _0x4fdbcb[_0x1516f5(0x1d2)]){const _0x25fe67=await upsertFilterRow(_0x4c872e,_0x51e2e9,_0x4fdbcb[_0x1516f5(0x33c)],_0x4c67de||'');if(_0x25fe67)_0x235d55++;}}await sendText(_0x49c9a1,_0x330c95,_0x1516f5(0x25e)+_0x235d55+(_0x1516f5(0x1a8)+_0x1516f5(0x188))+(_0x866df4[_0x1516f5(0x1ed)]===0x6a1*0x5+0xc*0x1bb+0x32*-0x114?_0x866df4[-0x11*-0x1f7+-0x7*-0x4f7+-0x4428]:_0x1516f5(0x31a)+_0x1516f5(0x2c9)));return;}if(_0x32e0f0===_0x1516f5(0x230)+'r'){const _0x1ba4f6=(parseFilterCommandText(_0x2f0ad1||_0x41756d)||{})['gp'],_0x4727e7=_0x1ba4f6?_0x1ba4f6['toLowerCas'+'e']()===_0x1516f5(0x29a)?'*':await _0xfe9507[_0x1516f5(0x248)+'e'](_0x1ba4f6)||_0xfe9507[_0x1516f5(0x2e5)+_0x1516f5(0x1b7)](_0x1ba4f6):'*',_0x5d002c=await listTriggersForChat(_0x4727e7);await sendText(_0x49c9a1,_0x330c95,_0x1516f5(0x336)+_0x5d002c[_0x1516f5(0x1ed)]+(_0x1516f5(0x1e5)+_0x1516f5(0x2b3))+(_0x4727e7==='*'?_0x1516f5(0x255)+_0x1516f5(0x2c8):_0x4727e7));if(!_0x5d002c[_0x1516f5(0x1ed)])return;let _0x214357='';for(const _0x3e2ad6 of _0x5d002c){const _0x3c28b6='â€¢\x20'+_0x3e2ad6+'\x0a';(_0x214357+_0x3c28b6)[_0x1516f5(0x1ed)]>0x125c+0xc7*0x2b+0x1*-0x2ded&&(await sendText(_0x49c9a1,_0x330c95,_0x214357[_0x1516f5(0x20c)]()),_0x214357=''),_0x214357+=_0x3c28b6;}if(_0x214357[_0x1516f5(0x20c)]())await sendText(_0x49c9a1,_0x330c95,_0x214357['trim']());return;}if(_0x32e0f0===_0x1516f5(0x241)||_0x32e0f0===_0x1516f5(0x241)+'s'||_0x32e0f0===_0x1516f5(0x1a3)){const _0x179c44=(_0x41756d||'')[_0x1516f5(0x33f)](/\r?\n/)[_0x1516f5(0x244)](_0x31b987=>_0x31b987[_0x1516f5(0x20c)]());let _0x39404b=null;if(_0x179c44['length']>0x1*0x985+-0x233c+-0x1*-0x19b8&&!_0x179c44[0x563*0x3+-0x1974+-0x14*-0x77]['toLowerCas'+'e']()[_0x1516f5(0x284)]('gp'))_0x39404b=_0x179c44[-0x4*0x4ba+-0xb5*0x2b+-0x10*-0x315];else{const _0x4f307e=_0x2f0ad1[_0x1516f5(0x20c)]()['split'](/\s+/);_0x4f307e['shift'](),_0x39404b=_0x4f307e['join']('\x20')['trim']();}const _0xa265f4=_0x179c44['slice'](0x14b8+-0x622+-0xe95*0x1)[_0x1516f5(0x2ef)](_0x313725=>/^gp[:\s]/i['test'](_0x313725));let _0x142825=_0xa265f4?_0xa265f4[_0x1516f5(0x290)](/^gp[:\s]+/i,'')[_0x1516f5(0x20c)]():null;const _0x3ca2a3=(_0x39404b||'')[_0x1516f5(0x33f)](',')[_0x1516f5(0x244)](_0x42e50e=>_0x42e50e['trim']())[_0x1516f5(0x1f5)](Boolean);if(!_0x3ca2a3['length']){await sendText(_0x49c9a1,_0x330c95,_0x1516f5(0x301)+_0x1516f5(0x1f2)+'er\x20trigger'+'1,trigger2'+'\x20[gp:\x20<ali'+'as|jid|all'+_0x1516f5(0x254)+_0x1516f5(0x2dc)+'l\x20(deletes'+'\x20everythin'+_0x1516f5(0x1ce)+')');return;}if(_0x3ca2a3[_0x1516f5(0x1ed)]===0x1d1*-0xb+0x27*0xd0+-0xbb4&&_0x3ca2a3[0x535+0x2520+0x1*-0x2a55][_0x1516f5(0x28b)+'e']()==='all')try{const _0xbfe6c6=await db[_0x1516f5(0x227)](_0x1516f5(0x239)+_0x1516f5(0x1ac)),_0x10637d=_0xbfe6c6?.[_0x1516f5(0x27b)]||-0x1*-0x2229+-0x6*-0x25c+-0x3051;try{automatonCache[_0x1516f5(0x337)]();}catch(_0x19e967){}await sendText(_0x49c9a1,_0x330c95,_0x1516f5(0x32e)+'L\x20filters\x20'+'from\x20datab'+'ase.\x20Rows\x20'+_0x1516f5(0x2b7)+_0x10637d);return;}catch(_0x59c2c6){await sendText(_0x49c9a1,_0x330c95,_0x1516f5(0x1b6)+'delete\x20all'+_0x1516f5(0x294)+(_0x59c2c6?.[_0x1516f5(0x1cd)]||_0x59c2c6));return;}let _0x20f054=[];if(_0x142825){if(_0x142825[_0x1516f5(0x28b)+'e']()==='all')_0x20f054=await _0xfe9507[_0x1516f5(0x2ba)+_0x1516f5(0x189)]();else{const _0x5be91f=await _0xfe9507[_0x1516f5(0x248)+'e'](_0x142825);if(_0x5be91f)_0x20f054=[_0x5be91f];else{if(_0x142825[_0x1516f5(0x261)]('@'))_0x20f054=[_0xfe9507[_0x1516f5(0x2e5)+_0x1516f5(0x1b7)](_0x142825)];else{await sendText(_0x49c9a1,_0x330c95,'Unknown\x20gp'+_0x1516f5(0x18f)+':\x20\x22'+_0x142825+'\x22.');return;}}}}else _0x20f054=['*'];let _0x1e7d67=-0x252f+-0x2*0x11a5+0x1*0x4879;for(const _0x2a8e1e of uniqArray(_0x20f054)){const _0x165eb3=await deleteFilters(_0x2a8e1e,_0x3ca2a3);_0x1e7d67+=_0x165eb3;}await sendText(_0x49c9a1,_0x330c95,_0x1516f5(0x21b)+_0x1e7d67+(_0x1516f5(0x2de)+_0x1516f5(0x217)+'\x20')+(_0x20f054[_0x1516f5(0x1ed)]===0x6b*-0x21+0xaaa+0x191*0x2?_0x20f054[0x5*-0x1cc+0x1ba5+-0x12a9]:_0x1516f5(0x31a)+_0x1516f5(0x2c9)));return;}return;}if(_0x5f5167){if(!_0x3978c4)return;const _0x4a175e=typeof _0x49c9a1[_0x1516f5(0x1db)]==='string'&&_0x49c9a1[_0x1516f5(0x1db)][_0x1516f5(0x20c)]()[_0x1516f5(0x1ed)]?_0x49c9a1[_0x1516f5(0x1db)][_0x1516f5(0x20c)]():_0x41756d['trim'](),_0x2c9e67=detectCommandNameFromCmdText(_0x4a175e);if(!_0x2c9e67)return;let _0x2565d1;try{_0x2565d1=await getDefault(_0x3fded8)[_0x1516f5(0x322)](()=>null);}catch(_0x294f48){_0x2565d1=null;}if(!_0x2565d1||Array[_0x1516f5(0x23a)](_0x2565d1)&&_0x2565d1[_0x1516f5(0x1ed)]===0x1*0x1094+0x1179+0x1*-0x220d){await sendText(_0x49c9a1,_0x2d6d6d,_0x1516f5(0x2c3)+_0x1516f5(0x316)+'ur\x20default'+_0x1516f5(0x2fd)+_0x1516f5(0x23f)+_0x1516f5(0x335)+_0x1516f5(0x302));return;}const _0x264240=Array[_0x1516f5(0x23a)](_0x2565d1)?_0x2565d1:[_0x2565d1];let _0x330d54=[];for(const _0x402b0a of _0x264240){try{const _0x541fdf=await getConnection(_0x402b0a)[_0x1516f5(0x322)](()=>null);if(Array[_0x1516f5(0x23a)](_0x541fdf))_0x330d54['push'](..._0x541fdf);else{if(_0x541fdf)_0x330d54[_0x1516f5(0x1a7)](String(_0x541fdf));}}catch(_0x76553f){}}_0x330d54=uniqArray(_0x330d54);if(!_0x330d54[_0x1516f5(0x1ed)]){await sendText(_0x49c9a1,_0x2d6d6d,'Could\x20not\x20'+_0x1516f5(0x316)+'ur\x20default'+_0x1516f5(0x2fd)+_0x1516f5(0x1c7)+_0x264240[_0x1516f5(0x235)](',\x20')+('.\x20Please\x20c'+_0x1516f5(0x269)+_0x1516f5(0x208)+'ue(s).'));return;}if(_0x2c9e67===_0x1516f5(0x309)){const _0x31a0d5=parseFilterCommandText(_0x4a175e||_0x41756d);if(!_0x31a0d5||!_0x31a0d5[_0x1516f5(0x1d2)]['length']||!_0x31a0d5[_0x1516f5(0x33c)]['length']){await sendText(_0x49c9a1,_0x2d6d6d,'Usage\x20(gro'+_0x1516f5(0x1f9)+_0x1516f5(0x2f6)+_0x1516f5(0x1f7)+_0x1516f5(0x347)+_0x1516f5(0x2ca)+_0x1516f5(0x293)+_0x1516f5(0x276)+_0x1516f5(0x310)+'\x20gp:\x20<grou'+_0x1516f5(0x18a)+_0x1516f5(0x23d));return;}if(_0x31a0d5['gp']){let _0x52ffb0=[];const _0x525224=_0x31a0d5['gp'][_0x1516f5(0x20c)]();if(_0x525224['toLowerCas'+'e']()==='all')_0x52ffb0=await _0xfe9507[_0x1516f5(0x2ba)+_0x1516f5(0x189)]();else{const _0x3f2426=await _0xfe9507[_0x1516f5(0x248)+'e'](_0x525224);if(_0x3f2426)_0x52ffb0=[_0x3f2426];else{if(_0x525224[_0x1516f5(0x261)]('@'))_0x52ffb0=[_0xfe9507[_0x1516f5(0x2e5)+'oUserJid'](_0x525224)];else{await sendText(_0x49c9a1,_0x2d6d6d,_0x1516f5(0x2e2)+_0x1516f5(0x18f)+':\x20\x22'+_0x525224+'\x22.');return;}}}let _0x538252=-0x103a+0xe3d+-0x1fd*-0x1;for(const _0x2a2a16 of uniqArray(_0x52ffb0)){for(const _0x29c2fb of _0x31a0d5['triggers']){const _0x10da2f=await upsertFilterRow(_0x2a2a16,_0x29c2fb,_0x31a0d5[_0x1516f5(0x33c)],_0x4c67de||'');if(_0x10da2f)_0x538252++;}}await sendText(_0x49c9a1,_0x2d6d6d,_0x1516f5(0x25e)+_0x538252+('\x20filter(s)'+'\x20to\x20')+(_0x52ffb0[_0x1516f5(0x1ed)]===-0x20c5+0xac6*0x2+0xb3a?_0x52ffb0[-0x1b61*0x1+0x21*0xfb+-0x4fa]:_0x1516f5(0x31a)+_0x1516f5(0x2c9)));return;}let _0x433684=0x1d*0xaf+0x1*0xe89+-0xc*0x2dd;for(const _0x436d17 of _0x330d54){for(const _0x1a1c8c of _0x31a0d5['triggers']){const _0x48f44c=await upsertFilterRow(_0x436d17,_0x1a1c8c,_0x31a0d5[_0x1516f5(0x33c)],_0x4c67de||'');if(_0x48f44c)_0x433684++;}}await sendText(_0x49c9a1,_0x2d6d6d,'Saved\x20'+_0x433684+(_0x1516f5(0x2de)+_0x1516f5(0x343)+_0x1516f5(0x262)+_0x1516f5(0x326)+'on(s):\x20')+_0x330d54[_0x1516f5(0x235)](',\x20'));return;}if(_0x2c9e67===_0x1516f5(0x230)+'r'){const _0x5c2804=new Set();for(const _0x16252f of _0x330d54){const _0x518fc9=await listTriggersForChat(_0x16252f);for(const _0x32d119 of _0x518fc9)_0x5c2804[_0x1516f5(0x199)](_0x32d119);}const _0x13ccde=await listTriggersForChat('*');for(const _0x4b1acf of _0x13ccde||[])_0x5c2804['add'](_0x4b1acf);const _0x59faae=Array[_0x1516f5(0x319)](_0x5c2804)[_0x1516f5(0x20f)]();await sendText(_0x49c9a1,_0x2d6d6d,_0x1516f5(0x336)+_0x1516f5(0x325)+_0x59faae['length']+('\x20filters\x20f'+'or\x20your\x20de'+_0x1516f5(0x223)+'ection(s)\x20'+_0x1516f5(0x20b)));if(!_0x59faae['length'])return;let _0x464354='';for(const _0x3eaa28 of _0x59faae){const _0x57f28f='â€¢\x20'+_0x3eaa28+'\x0a';(_0x464354+_0x57f28f)[_0x1516f5(0x1ed)]>-0xe27*0x2+0x1455+0xdd5&&(await sendText(_0x49c9a1,_0x2d6d6d,_0x464354[_0x1516f5(0x20c)]()),_0x464354=''),_0x464354+=_0x57f28f;}if(_0x464354['trim']())await sendText(_0x49c9a1,_0x2d6d6d,_0x464354['trim']());return;}if(_0x2c9e67===_0x1516f5(0x241)||_0x2c9e67===_0x1516f5(0x241)+'s'||_0x2c9e67===_0x1516f5(0x1a3)){const _0x64bc2c=(_0x41756d||'')[_0x1516f5(0x33f)](/\r?\n/)[_0x1516f5(0x244)](_0x2347a0=>_0x2347a0[_0x1516f5(0x20c)]());let _0x171b2b=null;if(_0x64bc2c[_0x1516f5(0x1ed)]>-0x4e9+-0x15a6+0x1a90&&!_0x64bc2c[-0xe5c+-0x1e3*-0x1+0x2*0x63d][_0x1516f5(0x28b)+'e']()[_0x1516f5(0x284)]('gp'))_0x171b2b=_0x64bc2c[0x2*-0xa95+-0x6d*-0x1+0x2d*0x76];else{const _0x22829d=(_0x4a175e||_0x41756d)[_0x1516f5(0x20c)]()[_0x1516f5(0x33f)](/\s+/);_0x22829d[_0x1516f5(0x249)](),_0x171b2b=_0x22829d['join']('\x20')[_0x1516f5(0x20c)]();}const _0x30f320=_0x64bc2c[_0x1516f5(0x272)](0x8db+-0x1fe3+0x1709)[_0x1516f5(0x2ef)](_0x594233=>/^gp[:\s]/i[_0x1516f5(0x2bf)](_0x594233));let _0x3c9fd1=_0x30f320?_0x30f320[_0x1516f5(0x290)](/^gp[:\s]+/i,'')[_0x1516f5(0x20c)]():null;const _0x48392a=(_0x171b2b||'')[_0x1516f5(0x33f)](',')[_0x1516f5(0x244)](_0x1c7185=>_0x1c7185[_0x1516f5(0x20c)]())[_0x1516f5(0x1f5)](Boolean);if(!_0x48392a[_0x1516f5(0x1ed)]){await sendText(_0x49c9a1,_0x2d6d6d,_0x1516f5(0x24c)+_0x1516f5(0x2d7)+'igger1,tri'+_0x1516f5(0x21a)+_0x1516f5(0x251)+_0x1516f5(0x1a1)+_0x1516f5(0x333)+'elfilter\x20a'+'ll\x20\x20\x20(ERAS'+_0x1516f5(0x29b)+_0x1516f5(0x296)+_0x1516f5(0x27a));return;}if(_0x48392a[_0x1516f5(0x1ed)]===0x139c+-0x1*0x155d+0x1c2&&_0x48392a[0x2111+-0x26fe+0x5ed]['toLowerCas'+'e']()===_0x1516f5(0x29a))try{const _0x670492=await db[_0x1516f5(0x227)]('DELETE\x20FRO'+_0x1516f5(0x1ac)),_0xff2c4c=_0x670492?.['changes']||0x1826+-0x2*-0xa4b+-0x2cbc;try{automatonCache[_0x1516f5(0x337)]();}catch(_0x709425){}await sendText(_0x49c9a1,_0x2d6d6d,_0x1516f5(0x32e)+_0x1516f5(0x1b5)+_0x1516f5(0x242)+_0x1516f5(0x26e)+_0x1516f5(0x2b7)+_0xff2c4c);return;}catch(_0x2f30cc){await sendText(_0x49c9a1,_0x2d6d6d,'Failed\x20to\x20'+_0x1516f5(0x274)+'\x20filters:\x20'+(_0x2f30cc?.['message']||_0x2f30cc));return;}if(_0x3c9fd1){let _0x20b574=[];if(_0x3c9fd1[_0x1516f5(0x28b)+'e']()===_0x1516f5(0x29a))_0x20b574=await _0xfe9507[_0x1516f5(0x2ba)+_0x1516f5(0x189)]();else{const _0xa59f1a=await _0xfe9507['resolveNam'+'e'](_0x3c9fd1);if(_0xa59f1a)_0x20b574=[_0xa59f1a];else{if(_0x3c9fd1[_0x1516f5(0x261)]('@'))_0x20b574=[_0xfe9507[_0x1516f5(0x2e5)+_0x1516f5(0x1b7)](_0x3c9fd1)];else{await sendText(_0x49c9a1,_0x2d6d6d,'Unknown\x20gp'+_0x1516f5(0x18f)+_0x1516f5(0x19d)+_0x3c9fd1+'\x22.');return;}}}let _0x1f7917=-0x1ea2+0xb9b*-0x2+0x35d8;for(const _0x5ca49c of uniqArray(_0x20b574)){const _0x15f984=await deleteFilters(_0x5ca49c,_0x48392a);_0x1f7917+=_0x15f984;}await sendText(_0x49c9a1,_0x2d6d6d,_0x1516f5(0x21b)+_0x1f7917+(_0x1516f5(0x1e5)+_0x1516f5(0x18d))+(_0x20b574[_0x1516f5(0x1ed)]===0x1fef+-0x4*-0x36c+-0x2d9e?_0x20b574[0x24a1*-0x1+0x94*-0xa+0x4d*0x8d]:'multiple\x20t'+_0x1516f5(0x2c9)));return;}else{let _0x44f708=-0x1079+-0x9f3*-0x3+-0xd60;for(const _0x4ea9d3 of _0x330d54){const _0x1c2145=await deleteFilters(_0x4ea9d3,_0x48392a);_0x44f708+=_0x1c2145;}await sendText(_0x49c9a1,_0x2d6d6d,'Deleted\x20'+_0x44f708+('\x20filter\x20en'+_0x1516f5(0x348)+_0x1516f5(0x214)+_0x1516f5(0x223)+_0x1516f5(0x202)+'\x20')+_0x330d54[_0x1516f5(0x235)](',\x20'));return;}}return;}}if(_0x5f5167){if(_0x49c9a1[_0x1516f5(0x279)][_0x1516f5(0x2b2)])return;const _0x1aac08=_0x2d6d6d,_0xb8ec1d=getMessageText(_0x49c9a1);if(!_0xb8ec1d)return;const _0x118a8c=String(_0xb8ec1d||''),_0x3ea86b=await db[_0x1516f5(0x29a)](_0x1516f5(0x18e)+'TINCT\x20trig'+_0x1516f5(0x220)+_0x1516f5(0x1f6)+_0x1516f5(0x210)+_0x1516f5(0x236)+')',[_0x1aac08,'*']);if(!_0x3ea86b||_0x3ea86b[_0x1516f5(0x1ed)]===-0x2041*-0x1+-0x519+-0xd94*0x2)return;const _0x430d0a=(_0x3ea86b||[])[_0x1516f5(0x244)](_0x1b37ae=>String(_0x1b37ae[_0x1516f5(0x307)]||'')[_0x1516f5(0x20c)]())[_0x1516f5(0x1f5)](Boolean),_0x3a920c=[],_0x234d76=[],_0x16073c=[];for(const _0x355cb5 of _0x430d0a){const _0xa70a66=String(_0x355cb5)['trim']()[_0x1516f5(0x28b)+'e']();if(_0xa70a66[_0x1516f5(0x284)](_0x1516f5(0x1e0))){_0x16073c[_0x1516f5(0x1a7)](_0x355cb5[_0x1516f5(0x2ea)](-0x221f+-0x6*0x617+-0x149*-0x37));continue;}if(_0x355cb5['includes']('*')){_0x234d76[_0x1516f5(0x1a7)](_0x355cb5);continue;}_0x3a920c[_0x1516f5(0x1a7)](_0x355cb5);}const _0x14f920=new Set(),_0x1a6229=getConfig()||{},_0x2c11bb=_0x1a6229[_0x1516f5(0x2df)]&&typeof _0x1a6229[_0x1516f5(0x2df)]===_0x1516f5(0x22c)?_0x1a6229[_0x1516f5(0x2df)]:{},_0x5218f1=(_0x2c11bb[_0x1516f5(0x26c)+_0x1516f5(0x1bd)]||_0x1516f5(0x1ea))[_0x1516f5(0x28b)+'e']();let _0x5ae43f=null;if(_0x3a920c['length']>0x102*0x16+-0x3*-0x23b+-0x1cdd)try{const _0x591eba=await getAutomatonForChat(_0x1aac08);if(_0x591eba&&_0x591eba['ac']&&_0x591eba['keywords']&&_0x591eba[_0x1516f5(0x1df)][_0x1516f5(0x1ed)]){const _0xe78710=_0x118a8c[_0x1516f5(0x28b)+'e'](),_0x3b030e=_0x591eba['ac']['search'](_0xe78710);for(const _0x1dd035 of _0x3b030e){const _0x4bbdff=_0x1dd035[_0x1516f5(0x192)],_0x1239f4=_0x1dd035[_0x1516f5(0x300)],_0xbe088c=_0x1239f4+_0x4bbdff[_0x1516f5(0x1ed)],_0x4c55b9=_0x1239f4===0x9fe*0x1+0x12e*0xc+-0x2*0xc13||!/\w/['test'](_0xe78710[_0x1239f4-(-0x22ae+0x223b+-0x2*-0x3a)]),_0x2f054e=_0xbe088c===_0xe78710[_0x1516f5(0x1ed)]||!/\w/['test'](_0xe78710[_0xbe088c]);if(_0x4c55b9&&_0x2f054e){const _0x403f04=_0x591eba[_0x1516f5(0x253)+'g'][_0x1516f5(0x2f9)](_0x4bbdff)||null;if(_0x403f04){_0x5ae43f=_0x403f04;break;}}}}else for(const _0x57c1a5 of _0x3a920c){const _0x4f95b7=new RegExp('\x5cb'+escapeRegex(String(_0x57c1a5))+'\x5cb','i');if(_0x4f95b7[_0x1516f5(0x2bf)](_0x118a8c)){_0x5ae43f=_0x57c1a5;break;}}}catch(_0x20c48b){warn(_0x1516f5(0x336)+_0x1516f5(0x19f)+_0x1516f5(0x1d9)+_0x1516f5(0x29c)+(_0x20c48b?.[_0x1516f5(0x1cd)]||_0x20c48b));for(const _0x1cf880 of _0x3a920c){try{const _0x54f003=new RegExp('\x5cb'+escapeRegex(String(_0x1cf880))+'\x5cb','i');if(_0x54f003['test'](_0x118a8c)){_0x5ae43f=_0x1cf880;break;}}catch(_0x5893ab){}}}if(!_0x5ae43f&&_0x234d76['length']>0xdf*0x19+-0x1725+0x5*0x46)for(const _0x1fd102 of _0x234d76){try{const _0x934ada=new RegExp(wildcardToRegexPattern(_0x1fd102),'i');if(_0x934ada[_0x1516f5(0x2bf)](_0x118a8c)){_0x5ae43f=_0x1fd102;break;}}catch(_0xe61e58){if(_0x118a8c[_0x1516f5(0x28b)+'e']()[_0x1516f5(0x261)](_0x1fd102['replace'](/\*/g,'')[_0x1516f5(0x28b)+'e']())){_0x5ae43f=_0x1fd102;break;}}}if(!_0x5ae43f&&_0x16073c[_0x1516f5(0x1ed)]>-0xa7*-0x11+0x1*0x10cb+0x1*-0x1be2)for(const _0x2141d1 of _0x16073c){try{const _0x19ad5d=new RegExp(_0x2141d1,'i');if(_0x19ad5d[_0x1516f5(0x2bf)](_0x118a8c)){_0x5ae43f=_0x1516f5(0x1e0)+_0x2141d1;break;}}catch(_0x3db0ee){warn(_0x1516f5(0x336)+_0x1516f5(0x2e8)+'ored\x20regex'+'\x20for\x20chat\x20'+_0x1aac08+_0x1516f5(0x19d)+_0x2141d1+_0x1516f5(0x273)+(_0x3db0ee?.['message']||_0x3db0ee));}}if(_0x5ae43f){let _0x39df32=await pickResponseAndAdvance(_0x1aac08,_0x5ae43f,_0x5218f1);if(!_0x39df32)_0x39df32=await pickResponseAndAdvance('*',_0x5ae43f,_0x5218f1);if(!_0x39df32)return;if(_0x14f920[_0x1516f5(0x289)](_0x39df32))return;await sendText(_0x49c9a1,_0x1aac08,_0x39df32),_0x14f920[_0x1516f5(0x199)](_0x39df32);}}}catch(_0x215493){error(_0x215493,_0x1516f5(0x336)+_0x1516f5(0x1ab)+_0x1516f5(0x2f8)+(_0x215493?.[_0x1516f5(0x1cd)]||_0x215493));}}export async function cleanup(){const _0x5de0b9=_0x3c5232;for(const _0x59e884 of processedMessageKeys[_0x5de0b9(0x332)]())try{clearTimeout(_0x59e884);}catch(_0x4cbcca){}processedMessageKeys[_0x5de0b9(0x337)](),automatonCache[_0x5de0b9(0x337)](),botRef=null,sendApi=null,info(_0x5de0b9(0x336)+_0x5de0b9(0x203));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};