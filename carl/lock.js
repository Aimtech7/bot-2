const _0x4b08e3=_0x417d;(function(_0x359e8c,_0x2faa45){const _0x58944a=_0x417d,_0x23546d=_0x359e8c();while(!![]){try{const _0x4057c0=-parseInt(_0x58944a(0x140))/(-0xd64*-0x1+-0x9+0x6ad*-0x2)*(parseInt(_0x58944a(0x1d9))/(-0x1dff+-0x1a82+0x3883))+parseInt(_0x58944a(0x1b9))/(0x157*-0xd+-0x1*-0x9a0+0x9*0xde)*(parseInt(_0x58944a(0x15e))/(0x97c*0x4+-0x914+-0x1cd8))+parseInt(_0x58944a(0x128))/(-0x1973*-0x1+-0x3e5*0x3+-0xdbf)*(parseInt(_0x58944a(0x31b))/(-0x1b37*-0x1+-0x373+-0x17be))+-parseInt(_0x58944a(0x2d8))/(-0x6*-0x567+-0x1f0c+-0x157)+-parseInt(_0x58944a(0x2aa))/(0xee3*0x1+0x604+-0x14df)+-parseInt(_0x58944a(0x2f8))/(0x124f*-0x1+-0xfe*0x20+0x190c*0x2)+parseInt(_0x58944a(0x32d))/(0x1839+-0x5e*0x43+-0x6b*-0x1)*(parseInt(_0x58944a(0x1fd))/(0x2ab*0x5+-0x19c0+0xc74));if(_0x4057c0===_0x2faa45)break;else _0x23546d['push'](_0x23546d['shift']());}catch(_0x521606){_0x23546d['push'](_0x23546d['shift']());}}}(_0x1ff8,-0x50ba8+-0x15675+0x693*0x1b9));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x1f455d from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x4b08e3(0x1c6);export const version=_0x4b08e3(0x2e5);export const priority=0xe43+-0x4a*-0x73+-0x2f09;export const configKeys=[_0x4b08e3(0x1c8)];export const commands=[_0x4b08e3(0x173),_0x4b08e3(0x11b),'unlockall',_0x4b08e3(0x211),_0x4b08e3(0x305),_0x4b08e3(0x13b),'delall',_0x4b08e3(0x1eb),_0x4b08e3(0x28a)];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x4b08e3(0x25a)+_0x4b08e3(0x326)+'is\x20not\x20all'+'owed.','WARNING_TTL_MS':0x1388,'PER_CHAT_QUEUE_LIMIT':0x1f4,'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x1f4,'GLOBAL_CONCURRENCY':0x3,'NORMALIZE_REMOVE_DIACRITICS':![]};let CFG={...DEFAULTS};function uniqArray(_0x25b5af){const _0x55d56e=_0x4b08e3;if(!_0x25b5af)return[];const _0x46fe00=new Set(),_0x3429c7=[];for(const _0x2c1bff of _0x25b5af){const _0x18d598=_0x2c1bff===undefined||_0x2c1bff===null?'':String(_0x2c1bff)[_0x55d56e(0x2d6)]();if(!_0x18d598)continue;!_0x46fe00[_0x55d56e(0x134)](_0x18d598)&&(_0x46fe00['add'](_0x18d598),_0x3429c7['push'](_0x18d598));}return _0x3429c7;}const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=0x1b1*0x1+0x1d9b+-0x1f4c,shuttingDown=![];const processedMessageKeys=new Map(),DEDUPE_TTL_MS=(-0x2b6*-0xa+0x21eb+-0x3ccb)*(0x1b69+0x1*-0x1feb+-0x435*-0x2);function markProcessed(_0x10bdbe){const _0x2a3842=_0x4b08e3;if(!_0x10bdbe)return;if(processedMessageKeys[_0x2a3842(0x134)](_0x10bdbe))try{clearTimeout(processedMessageKeys[_0x2a3842(0x26c)](_0x10bdbe));}catch(_0x5aaaa2){}const _0x4487c7=setTimeout(()=>processedMessageKeys[_0x2a3842(0x17c)](_0x10bdbe),DEDUPE_TTL_MS);processedMessageKeys[_0x2a3842(0x148)](_0x10bdbe,_0x4487c7);}function isProcessed(_0x253411){const _0x38d425=_0x4b08e3;return _0x253411&&processedMessageKeys[_0x38d425(0x134)](_0x253411);}const sleep=_0xe5e819=>new Promise(_0xc5f82f=>setTimeout(_0xc5f82f,_0xe5e819));function nowSec(){const _0x4bab94=_0x4b08e3;return Math[_0x4bab94(0x22b)](Date['now']()/(-0x4a*0x6d+-0x1*-0x80e+0x19c*0x11));}function _0x417d(_0x4ee108,_0x2a722f){const _0x18f055=_0x1ff8();return _0x417d=function(_0x411839,_0x5842e8){_0x411839=_0x411839-(-0x13c3+-0x2*0x7ae+0x487*0x8);let _0x296492=_0x18f055[_0x411839];return _0x296492;},_0x417d(_0x4ee108,_0x2a722f);}function escapeRegex(_0x33bb80){const _0x576544=_0x4b08e3;return String(_0x33bb80||'')[_0x576544(0x25f)](/[.*+?^${}()|[\]\\]/g,'\x5c$&');}function normalizeForMatch(_0x4a8b71){const _0x5e13db=_0x4b08e3;let _0x4521dd=String(_0x4a8b71||'');try{_0x4521dd=_0x4521dd[_0x5e13db(0x28f)](_0x5e13db(0x163));}catch(_0x33398b){}if(CFG[_0x5e13db(0x25e)+_0x5e13db(0x29f)+_0x5e13db(0x28b)])try{_0x4521dd=_0x4521dd['normalize'](_0x5e13db(0x257))[_0x5e13db(0x25f)](/\p{M}/gu,'')['normalize'](_0x5e13db(0x163));}catch(_0xfef0e7){}return _0x4521dd[_0x5e13db(0x281)+'e']();}class AhoCorasick{constructor(_0x5c8d66=[]){const _0x4a49ca=_0x4b08e3;this[_0x4a49ca(0x170)]=[{'next':{},'fail':0x0,'output':[]}];if(_0x5c8d66&&_0x5c8d66[_0x4a49ca(0x13a)])this[_0x4a49ca(0x119)](_0x5c8d66);}[_0x4b08e3(0x119)](_0xc2752b){const _0x538b8f=_0x4b08e3;this[_0x538b8f(0x170)]=[{'next':{},'fail':0x0,'output':[]}];for(const _0x5a0c96 of _0xc2752b){let _0xd126c0=-0x195b+-0x5c*-0x49+-0xe1;for(const _0x8d1395 of _0x5a0c96){const _0xad3529=_0x8d1395;!this[_0x538b8f(0x170)][_0xd126c0][_0x538b8f(0x265)][_0xad3529]&&(this[_0x538b8f(0x170)][_0xd126c0][_0x538b8f(0x265)][_0xad3529]=this[_0x538b8f(0x170)][_0x538b8f(0x13a)],this[_0x538b8f(0x170)][_0x538b8f(0x124)]({'next':{},'fail':0x0,'output':[]})),_0xd126c0=this['nodes'][_0xd126c0]['next'][_0xad3529];}this[_0x538b8f(0x170)][_0xd126c0][_0x538b8f(0x340)][_0x538b8f(0x124)](_0x5a0c96);}const _0xb798eb=[];for(const _0x250479 in this['nodes'][-0x1ff3+0x10*0x1c6+-0x131*-0x3][_0x538b8f(0x265)]){const _0x5552ef=this['nodes'][0x25a0+0xa7*-0x28+0x2*-0x5c4][_0x538b8f(0x265)][_0x250479];this[_0x538b8f(0x170)][_0x5552ef][_0x538b8f(0x1f7)]=0x1*-0x157a+-0x1a46+0x2fc0,_0xb798eb[_0x538b8f(0x124)](_0x5552ef);}while(_0xb798eb[_0x538b8f(0x13a)]){const _0x4846cf=_0xb798eb[_0x538b8f(0x258)]();for(const _0x57d9e6 in this[_0x538b8f(0x170)][_0x4846cf]['next']){const _0x255a38=this[_0x538b8f(0x170)][_0x4846cf][_0x538b8f(0x265)][_0x57d9e6];let _0xa87b6c=this[_0x538b8f(0x170)][_0x4846cf][_0x538b8f(0x1f7)];while(_0xa87b6c&&!this[_0x538b8f(0x170)][_0xa87b6c]['next'][_0x57d9e6])_0xa87b6c=this[_0x538b8f(0x170)][_0xa87b6c][_0x538b8f(0x1f7)];if(this[_0x538b8f(0x170)][_0xa87b6c]['next'][_0x57d9e6])this[_0x538b8f(0x170)][_0x255a38][_0x538b8f(0x1f7)]=this[_0x538b8f(0x170)][_0xa87b6c]['next'][_0x57d9e6];else this[_0x538b8f(0x170)][_0x255a38][_0x538b8f(0x1f7)]=-0x3b*-0x7d+0x1b3d+-0x1*0x380c;this[_0x538b8f(0x170)][_0x255a38][_0x538b8f(0x340)]['push'](...this[_0x538b8f(0x170)][this[_0x538b8f(0x170)][_0x255a38][_0x538b8f(0x1f7)]][_0x538b8f(0x340)]),_0xb798eb[_0x538b8f(0x124)](_0x255a38);}}}['search'](_0x30de97){const _0x4c6a22=_0x4b08e3,_0x22d3fe=[];let _0xaeb35a=0x1*0x145d+0x2560+0xd*-0x471;for(let _0x5a25c3=-0x1*0x1dd7+0x1e95*-0x1+0x3c6c;_0x5a25c3<_0x30de97[_0x4c6a22(0x13a)];_0x5a25c3++){const _0x2f1347=_0x30de97[_0x5a25c3];while(_0xaeb35a&&!this[_0x4c6a22(0x170)][_0xaeb35a]['next'][_0x2f1347])_0xaeb35a=this[_0x4c6a22(0x170)][_0xaeb35a][_0x4c6a22(0x1f7)];if(this[_0x4c6a22(0x170)][_0xaeb35a][_0x4c6a22(0x265)][_0x2f1347])_0xaeb35a=this[_0x4c6a22(0x170)][_0xaeb35a][_0x4c6a22(0x265)][_0x2f1347];else _0xaeb35a=-0x537+-0x7*0x261+0x6*0x3a5;if(this[_0x4c6a22(0x170)][_0xaeb35a][_0x4c6a22(0x340)][_0x4c6a22(0x13a)])for(const _0x43a3b1 of this[_0x4c6a22(0x170)][_0xaeb35a]['output']){_0x22d3fe['push']({'keyword':_0x43a3b1,'index':_0x5a25c3-_0x43a3b1[_0x4c6a22(0x13a)]+(0x145e+-0x1026+-0x437)});}}return _0x22d3fe;}}const ahoCache=new Map();function wholeWordRegexForPhrase(_0x2d4008){const _0x53882d=_0x4b08e3,_0x524b41=String(_0x2d4008||'')[_0x53882d(0x2d6)](),_0x36e0b0=escapeRegex(_0x524b41);try{const _0x10615b=_0x53882d(0x206)+'\x5cp{N}_])'+_0x36e0b0+(_0x53882d(0x314)+_0x53882d(0x151));return new RegExp(_0x10615b,'iu');}catch(_0x2ee9b9){try{return new RegExp('\x5cb'+_0x36e0b0+'\x5cb','i');}catch(_0x583a34){return new RegExp(_0x36e0b0,'i');}}}function wildcardToRegex(_0x50e220){const _0x39b6ff=_0x4b08e3,_0x41c545=String(_0x50e220||'')[_0x39b6ff(0x2d6)](),_0x39420a=_0x41c545['replace'](/\*/g,'')[_0x39b6ff(0x13a)]>-0x1854+-0x1e17+0x366b*0x1;if(!_0x39420a)throw new Error(_0x39b6ff(0x1a2)+'ust\x20contai'+_0x39b6ff(0x1be)+'rs\x20besides'+'\x20*');const _0x184d63=_0x41c545['split']('*')[_0x39b6ff(0x300)](_0x38942b=>escapeRegex(_0x38942b)),_0xbcbcc0=_0x184d63['join'](_0x39b6ff(0x205)+_0x39b6ff(0x252));try{const _0x9883c6=_0x39b6ff(0x206)+'\x5cp{N}_])'+_0xbcbcc0+('(?![\x5cp{L}\x5c'+_0x39b6ff(0x151));return new RegExp(_0x9883c6,'iu');}catch(_0x191ef6){const _0x5e1fad=_0x184d63[_0x39b6ff(0x337)]('.*');try{return new RegExp(''+_0x5e1fad,'i');}catch(_0x346ec5){return new RegExp(_0x184d63['join'](''),'i');}}}function setupSendApi(){const _0x5a5934=_0x4b08e3;if(!botRef)return;if(typeof botRef[_0x5a5934(0x208)+'e']===_0x5a5934(0x2b6))sendApi=async(_0x10a022,_0x5960e3)=>await botRef[_0x5a5934(0x208)+'e'](_0x10a022,_0x5960e3);else botRef[_0x5a5934(0x132)]&&typeof botRef[_0x5a5934(0x132)][_0x5a5934(0x208)+'e']===_0x5a5934(0x2b6)?sendApi=async(_0x17a706,_0x4eb7e4)=>await botRef[_0x5a5934(0x132)][_0x5a5934(0x208)+'e'](_0x17a706,_0x4eb7e4):sendApi=null;}async function sendText(_0x5a93b0,_0x52427c,_0x20dc77=[]){const _0x1a0102=_0x4b08e3;if(!_0x52427c||!_0x5a93b0)return;const _0x4652a8={'text':String(_0x52427c)};if(Array['isArray'](_0x20dc77)&&_0x20dc77[_0x1a0102(0x13a)])_0x4652a8[_0x1a0102(0x220)]=_0x20dc77;try{if(!sendApi){warn(_0x1a0102(0x187)+_0x1a0102(0x202)+_0x1a0102(0x26b));return;}await sendApi(_0x5a93b0,_0x4652a8);}catch(_0x594230){warn('[lock]\x20sen'+_0x1a0102(0x236)+_0x1a0102(0x14f)+_0x5a93b0+':\x20'+(_0x594230?.['message']||_0x594230));}}async function tableExists(_0x4d2116){const _0x4d1daf=_0x4b08e3;try{const _0x1135b6=await db[_0x4d1daf(0x26c)]('SELECT\x20nam'+_0x4d1daf(0x269)+_0x4d1daf(0x2a8)+'\x20WHERE\x20typ'+_0x4d1daf(0x30e)+'AND\x20name=?',[_0x4d2116]);return!!_0x1135b6;}catch(_0x410adb){return warn('[lock]\x20tab'+_0x4d1daf(0x18b)+_0x4d1daf(0x2d9)+(_0x410adb?.[_0x4d1daf(0x21b)]||_0x410adb)),![];}}async function getTableColumns(_0x11e22a){const _0x4e0ddb=_0x4b08e3;try{const _0x4ee127=await db['all']('PRAGMA\x20tab'+_0x4e0ddb(0x1ec)+_0x11e22a+')');return(_0x4ee127||[])['map'](_0x321b0d=>_0x321b0d['name']);}catch(_0xd02548){return warn(_0x4e0ddb(0x246)+_0x4e0ddb(0x212)+_0x4e0ddb(0x138)+'or\x20'+_0x11e22a+':\x20'+(_0xd02548?.[_0x4e0ddb(0x21b)]||_0xd02548)),[];}}async function readAndNormalizeExistingLocks(){const _0x3a7127=_0x4b08e3;try{const _0x4d6e7e=await db[_0x3a7127(0x308)](_0x3a7127(0x222)+_0x3a7127(0x290)),_0x47d2b2=new Map();for(const _0x382735 of _0x4d6e7e||[]){const _0x447024=[_0x3a7127(0x347),'chatid',_0x3a7127(0x19e),_0x3a7127(0x2d4),_0x3a7127(0x24f)],_0x4b3015=[_0x3a7127(0x34e),_0x3a7127(0x233),_0x3a7127(0x1b7),_0x3a7127(0x1df),_0x3a7127(0x2a7),_0x3a7127(0x143),'message'];let _0x37a944=null;for(const _0x523f1c of _0x447024)if(_0x523f1c in _0x382735&&_0x382735[_0x523f1c]){_0x37a944=String(_0x382735[_0x523f1c]);break;}let _0x44d6fa=null;for(const _0x2053ec of _0x4b3015)if(_0x2053ec in _0x382735&&_0x382735[_0x2053ec]){_0x44d6fa=String(_0x382735[_0x2053ec]);break;}if(!_0x37a944||!_0x44d6fa)for(const _0x21c7fa of Object['keys'](_0x382735)){const _0x5a3469=_0x382735[_0x21c7fa];if(!_0x37a944&&typeof _0x5a3469===_0x3a7127(0x2c7)&&_0x5a3469[_0x3a7127(0x294)]('@'))_0x37a944=_0x5a3469;if(!_0x44d6fa&&typeof _0x5a3469==='string'&&_0x5a3469['length']<-0xda*0x7+0x3c9*-0x1+0xb4f&&!_0x5a3469[_0x3a7127(0x294)]('@'))_0x44d6fa=_0x5a3469;}if(!_0x37a944||!_0x44d6fa)continue;let _0x27d0d4=_0x44d6fa['trim'](),_0xf0b3e=_0x3a7127(0x15a);if(_0x27d0d4[_0x3a7127(0x281)+'e']()[_0x3a7127(0x188)]('regex:'))_0xf0b3e=_0x3a7127(0x249),_0x27d0d4=_0x27d0d4[_0x3a7127(0x328)](-0x19aa+0x59*0x57+-0x1*0x48f)[_0x3a7127(0x2d6)]();else{if(_0x27d0d4[_0x3a7127(0x294)]('*'))_0xf0b3e=_0x3a7127(0x1c1);else _0xf0b3e=_0x3a7127(0x15a);}const _0x21cb09=_0x382735[_0x3a7127(0x334)]||_0x382735[_0x3a7127(0x32f)]||_0x382735[_0x3a7127(0x35b)]||_0x382735[_0x3a7127(0x343)]||'',_0x35ff55=Number(_0x382735[_0x3a7127(0x283)]||_0x382735['ts']||_0x382735['timestamp']||-0x1*0x169e+-0x1e54+0x12*0x2f1)||nowSec(),_0x129cce=_0x37a944+'||'+_0x27d0d4;if(!_0x47d2b2[_0x3a7127(0x134)](_0x129cce))_0x47d2b2[_0x3a7127(0x148)](_0x129cce,{'chat_jid':_0x37a944,'phrase':_0x27d0d4,'type':_0xf0b3e,'created_by':_0x21cb09,'created_at':_0x35ff55,'hit_count':Number(_0x382735['hit_count']||0x4fe+0x1*0x5cf+0x4f*-0x23)});else{const _0x18d15c=_0x47d2b2[_0x3a7127(0x26c)](_0x129cce);_0x18d15c[_0x3a7127(0x283)]=Math['min'](_0x18d15c[_0x3a7127(0x283)]||_0x35ff55,_0x35ff55),_0x18d15c[_0x3a7127(0x1b5)]=(_0x18d15c[_0x3a7127(0x1b5)]||-0x83*0x39+0xa3d*-0x1+0x2768)+(Number(_0x382735['hit_count'])||-0x8dc*-0x3+-0x1*-0x238f+0x3e23*-0x1);}}return Array[_0x3a7127(0x20d)](_0x47d2b2[_0x3a7127(0x21f)]());}catch(_0x4e51e4){return warn(_0x3a7127(0x251)+_0x3a7127(0x1de)+'izeExistin'+_0x3a7127(0x141)+_0x3a7127(0x351)+(_0x4e51e4?.['message']||_0x4e51e4)),[];}}async function ensureSchema(){const _0x1e638d=_0x4b08e3,_0x605bfd={'id':_0x1e638d(0x32b)+_0x1e638d(0x312)+_0x1e638d(0x1dd)+_0x1e638d(0x2e1),'chat_jid':_0x1e638d(0x12d)+_0x1e638d(0x174),'phrase':_0x1e638d(0x12d)+_0x1e638d(0x174),'type':'TEXT\x20DEFAU'+_0x1e638d(0x34d)+'\x27','created_by':_0x1e638d(0x33f)+_0x1e638d(0x12f),'created_at':'INTEGER\x20DE'+_0x1e638d(0x13d),'hit_count':_0x1e638d(0x19b)+_0x1e638d(0x13d),'is_valid_regex':_0x1e638d(0x19b)+_0x1e638d(0x26e)};try{const _0x406813=await tableExists('locks');if(!_0x406813){const _0x372cac=Object[_0x1e638d(0x32c)](_0x605bfd)[_0x1e638d(0x300)](([_0x2463b0,_0x31258d])=>_0x2463b0+'\x20'+_0x31258d)['join'](_0x1e638d(0x320));await db[_0x1e638d(0x14d)](_0x1e638d(0x286)+_0x1e638d(0x147)+_0x1e638d(0x1c3)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x372cac+(_0x1e638d(0x1b2)+_0x1e638d(0x2f7)+_0x1e638d(0x23b)+_0x1e638d(0x19f)+_0x1e638d(0x15c)+_0x1e638d(0x330)));try{await db[_0x1e638d(0x14d)]('CREATE\x20IND'+_0x1e638d(0x21a)+'EXISTS\x20idx'+_0x1e638d(0x287)+'t\x20ON\x20locks'+_0x1e638d(0x268)+';');}catch(_0x3c4aaf){}try{await db[_0x1e638d(0x14d)]('CREATE\x20UNI'+_0x1e638d(0x153)+'IF\x20NOT\x20EXI'+_0x1e638d(0x304)+'cks_unique'+_0x1e638d(0x120)+'chat_jid,\x20'+'phrase);');}catch(_0x2ebae8){}info(_0x1e638d(0x1a8)+_0x1e638d(0x353)+_0x1e638d(0x14a)+'nonical)');try{await db['exec']('CREATE\x20TAB'+_0x1e638d(0x272)+'EXISTS\x20loc'+_0x1e638d(0x2b4)+_0x1e638d(0x319)+_0x1e638d(0x2cf)+'\x20KEY,\x20noti'+'fy\x20INTEGER'+_0x1e638d(0x2ed)+');');}catch(_0x4702c0){}return;}const _0x369752=await getTableColumns(_0x1e638d(0x31f)),_0x5cded8=_0x369752[_0x1e638d(0x294)](_0x1e638d(0x347)),_0x3d0a6f=_0x369752['includes'](_0x1e638d(0x34e)),_0x5dfda9=_0x369752[_0x1e638d(0x294)](_0x1e638d(0x30d));if(_0x5cded8&&_0x3d0a6f&&_0x5dfda9){if(!_0x369752[_0x1e638d(0x294)](_0x1e638d(0x33b)+_0x1e638d(0x29a)))try{await db[_0x1e638d(0x14d)](_0x1e638d(0x2e4)+'E\x20locks\x20AD'+_0x1e638d(0x27a)+_0x1e638d(0x27b)+_0x1e638d(0x31a)+_0x1e638d(0x296)+'1;'),info(_0x1e638d(0x1f8)+'ed\x20is_vali'+_0x1e638d(0x142)+_0x1e638d(0x1ef)+_0x1e638d(0x30f));}catch(_0x568b41){warn(_0x1e638d(0x2ea)+_0x1e638d(0x1a6)+_0x1e638d(0x14e)+_0x1e638d(0x2b9)+_0x1e638d(0x22a)+(_0x568b41?.[_0x1e638d(0x21b)]||_0x568b41));}try{await db['exec']('CREATE\x20IND'+_0x1e638d(0x21a)+_0x1e638d(0x2c0)+'_locks_cha'+_0x1e638d(0x2fe)+_0x1e638d(0x268)+';');}catch(_0x353366){}try{await db[_0x1e638d(0x14d)](_0x1e638d(0x2db)+_0x1e638d(0x153)+_0x1e638d(0x2ae)+_0x1e638d(0x304)+_0x1e638d(0x293)+_0x1e638d(0x120)+_0x1e638d(0x336)+'phrase);');}catch(_0x44204d){}try{await db[_0x1e638d(0x14d)](_0x1e638d(0x339)+_0x1e638d(0x272)+'EXISTS\x20loc'+'k_prefs\x20(c'+_0x1e638d(0x319)+'XT\x20PRIMARY'+_0x1e638d(0x1e3)+_0x1e638d(0x2bb)+_0x1e638d(0x2ed)+');');}catch(_0x3300ce){}info(_0x1e638d(0x32e)+'ks\x20table\x20a'+_0x1e638d(0x250)+_0x1e638d(0x168)+'sured\x20indi'+_0x1e638d(0x2ad)+'mns)');return;}info(_0x1e638d(0x223)+_0x1e638d(0x230)+_0x1e638d(0x1c4)+'cted\x20->\x20pe'+_0x1e638d(0x21d)+_0x1e638d(0x1d7)+'ion');const _0x5750d9=await readAndNormalizeExistingLocks();await db[_0x1e638d(0x14d)](_0x1e638d(0x356)+_0x1e638d(0x1f0)+_0x1e638d(0x23e));try{await db[_0x1e638d(0x14d)](_0x1e638d(0x339)+_0x1e638d(0x272)+'EXISTS\x20loc'+_0x1e638d(0x1fe)+_0x1e638d(0x24c)+_0x1e638d(0x32b)+'IMARY\x20KEY\x20'+_0x1e638d(0x1dd)+'ENT,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20chat_ji'+_0x1e638d(0x192)+_0x1e638d(0x16c)+_0x1e638d(0x26f)+'e\x20TEXT\x20NOT'+_0x1e638d(0x16c)+_0x1e638d(0x2f3)+_0x1e638d(0x33f)+_0x1e638d(0x34d)+'\x27,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x1e638d(0x247)+'y\x20TEXT\x20DEF'+'AULT\x20\x27\x27,\x0a\x20'+_0x1e638d(0x214)+_0x1e638d(0x2e2)+_0x1e638d(0x2b3)+_0x1e638d(0x159)+_0x1e638d(0x1b1)+'ount\x20INTEG'+_0x1e638d(0x285)+_0x1e638d(0x1e9)+_0x1e638d(0x1e1)+_0x1e638d(0x2bd)+'EGER\x20DEFAU'+_0x1e638d(0x218)+_0x1e638d(0x12a)+_0x1e638d(0x22f)+'\x20phrase)\x0a\x20'+_0x1e638d(0x145));}catch(_0x31e794){await db['exec'](_0x1e638d(0x339)+'LE\x20IF\x20NOT\x20'+_0x1e638d(0x2c3)+_0x1e638d(0x1fe)+'\x20\x20\x20\x20\x20\x20\x20id\x20'+'INTEGER\x20PR'+_0x1e638d(0x312)+'AUTOINCREM'+'ENT,\x0a\x20\x20\x20\x20\x20'+_0x1e638d(0x354)+'d\x20TEXT\x20NOT'+'\x20NULL,\x0a\x20\x20\x20'+_0x1e638d(0x26f)+_0x1e638d(0x33e)+_0x1e638d(0x16c)+'\x20\x20\x20\x20\x20type\x20'+_0x1e638d(0x33f)+_0x1e638d(0x34d)+_0x1e638d(0x149)+_0x1e638d(0x247)+_0x1e638d(0x275)+_0x1e638d(0x2c8)+_0x1e638d(0x214)+_0x1e638d(0x2e2)+_0x1e638d(0x2b3)+_0x1e638d(0x159)+_0x1e638d(0x1b1)+_0x1e638d(0x2ab)+_0x1e638d(0x285)+'\x200,\x0a\x20\x20\x20\x20\x20\x20'+_0x1e638d(0x1e1)+_0x1e638d(0x2bd)+_0x1e638d(0x2bf)+_0x1e638d(0x23a)+_0x1e638d(0x240)),warn(_0x1e638d(0x1a8)+_0x1e638d(0x353)+_0x1e638d(0x2d7)+'ut\x20UNIQUE\x20'+_0x1e638d(0x137)+'k');}const _0x1ab95c=await db['prepare'](_0x1e638d(0x2e6)+_0x1e638d(0x238)+_0x1e638d(0x349)+_0x1e638d(0x2e8)+_0x1e638d(0x2ca)+_0x1e638d(0x21e)+'reated_at,'+_0x1e638d(0x155)+_0x1e638d(0x241)+_0x1e638d(0x302)+_0x1e638d(0x18a)+_0x1e638d(0x2c2)+_0x1e638d(0x2dd));try{for(const _0x29c06d of _0x5750d9){try{let _0x4e144e=0x13e3+0x13*-0x42+-0x2*0x77e;if(_0x29c06d[_0x1e638d(0x30d)]===_0x1e638d(0x249))try{new RegExp(_0x29c06d[_0x1e638d(0x34e)]);}catch(_0x3fb232){_0x4e144e=0x1*-0x7a3+-0x9*-0x3a0+-0x18fd*0x1;}await _0x1ab95c['run'](_0x29c06d[_0x1e638d(0x347)],_0x29c06d[_0x1e638d(0x34e)],_0x29c06d[_0x1e638d(0x30d)]||_0x1e638d(0x15a),_0x29c06d[_0x1e638d(0x334)]||'',Number(_0x29c06d[_0x1e638d(0x283)]||nowSec()),Number(_0x29c06d['hit_count']||0x158*0xa+0x2419+-0x3189),_0x4e144e);}catch(_0x228c78){warn(_0x1e638d(0x17b)+_0x1e638d(0x27e)+_0x1e638d(0x2f5)+_0x1e638d(0x11f)+_0x29c06d[_0x1e638d(0x347)]+'@'+_0x29c06d[_0x1e638d(0x34e)]+':\x20'+(_0x228c78?.['message']||_0x228c78));}}}finally{try{await _0x1ab95c[_0x1e638d(0x2a0)]();}catch(_0x4d64d5){}}try{const _0x43d63f=_0x1e638d(0x162)+_0x1e638d(0x28d)+Math[_0x1e638d(0x22b)](Date[_0x1e638d(0x24d)]()/(0x24d*0x1+0x190f+-0x2*0xbba));await db[_0x1e638d(0x14d)](_0x1e638d(0x2e4)+_0x1e638d(0x35a)+_0x1e638d(0x352)+_0x43d63f+';'),await db['exec'](_0x1e638d(0x2e4)+_0x1e638d(0x23c)+_0x1e638d(0x16e)+_0x1e638d(0x199));try{await db['exec'](_0x1e638d(0x1ba)+_0x1e638d(0x21a)+_0x1e638d(0x2c0)+'_locks_cha'+_0x1e638d(0x2fe)+_0x1e638d(0x268)+';');}catch(_0x33bffc){}try{await db[_0x1e638d(0x14d)](_0x1e638d(0x2db)+_0x1e638d(0x153)+_0x1e638d(0x2ae)+_0x1e638d(0x304)+'cks_unique'+'\x20ON\x20locks('+'chat_jid,\x20'+_0x1e638d(0x1a3));}catch(_0x1ba654){}try{await db[_0x1e638d(0x14d)](_0x1e638d(0x339)+_0x1e638d(0x272)+'EXISTS\x20loc'+'k_prefs\x20(c'+_0x1e638d(0x319)+_0x1e638d(0x2cf)+'\x20KEY,\x20noti'+_0x1e638d(0x2bb)+_0x1e638d(0x2ed)+');');}catch(_0x26b447){}info(_0x1e638d(0x17b)+_0x1e638d(0x227)+'plete;\x20old'+_0x1e638d(0x323)+_0x1e638d(0x2f1)+_0x1e638d(0x122));}catch(_0xba2f0e){warn(_0x1e638d(0x17b)+_0x1e638d(0x282)+'p\x20failed:\x20'+(_0xba2f0e?.[_0x1e638d(0x21b)]||_0xba2f0e));throw _0xba2f0e;}finally{await db['exec'](_0x1e638d(0x356)+_0x1e638d(0x1f0)+_0x1e638d(0x2a5));}return;}catch(_0x1f90b1){error(_0x1f90b1,_0x1e638d(0x277)+_0x1e638d(0x344)+_0x1e638d(0x274));throw _0x1f90b1;}}async function addLock(_0x183656,_0x1ccba5,_0x92dd68){const _0x46a1cd=_0x4b08e3;try{if(!_0x183656||!_0x1ccba5)return![];let _0x40f6f2=String(_0x1ccba5)[_0x46a1cd(0x2d6)]();if(!_0x40f6f2)return![];let _0x4ebd9a=_0x46a1cd(0x15a),_0x258cff=0x1664+-0x11d6+-0x48d;if(_0x40f6f2[_0x46a1cd(0x281)+'e']()['startsWith'](_0x46a1cd(0x2e0))){_0x4ebd9a=_0x46a1cd(0x249),_0x40f6f2=_0x40f6f2[_0x46a1cd(0x328)](-0x14c8+0xab5*0x1+0xa19)[_0x46a1cd(0x2d6)]();try{new RegExp(_0x40f6f2),_0x258cff=0xa88*-0x1+0xd39+-0x2b0;}catch(_0x4f954b){_0x258cff=0x1027+-0x1*0xd5+-0xf52,warn('[lock]\x20add'+_0x46a1cd(0x318)+_0x46a1cd(0x331)+_0x46a1cd(0x342)+_0x40f6f2);}}else _0x40f6f2[_0x46a1cd(0x294)]('*')?_0x4ebd9a=_0x46a1cd(0x1c1):_0x4ebd9a='normal';try{const _0x47d18d=await db[_0x46a1cd(0x25d)](_0x46a1cd(0x2e6)+_0x46a1cd(0x298)+_0x46a1cd(0x23b)+'hrase,\x20typ'+_0x46a1cd(0x190)+_0x46a1cd(0x123)+'ed_at,\x20hit'+_0x46a1cd(0x15f)+_0x46a1cd(0x1d4)+_0x46a1cd(0x284)+_0x46a1cd(0x1bb)+'(?,\x20?,\x20?,\x20'+_0x46a1cd(0x30c)+_0x46a1cd(0x229)+'\x20ON\x20CONFLI'+_0x46a1cd(0x154)+_0x46a1cd(0x22d)+_0x46a1cd(0x2f6)+_0x46a1cd(0x263)+_0x46a1cd(0x2d0)+_0x46a1cd(0x125)+'d.type,\x0a\x20\x20'+_0x46a1cd(0x2f2)+_0x46a1cd(0x357)+_0x46a1cd(0x185)+_0x46a1cd(0x2c9)+_0x46a1cd(0x1e0)+_0x46a1cd(0x1d3)+_0x46a1cd(0x1c5)+'luded.crea'+_0x46a1cd(0x11a)+_0x46a1cd(0x191)+_0x46a1cd(0x27b)+_0x46a1cd(0x178)+_0x46a1cd(0x1ff)+_0x46a1cd(0x213),[_0x183656,_0x40f6f2,_0x4ebd9a,_0x92dd68||'',nowSec(),_0x258cff]);return ahoCache[_0x46a1cd(0x17c)](_0x183656),info(_0x46a1cd(0x1f8)+_0x46a1cd(0x358)+_0x40f6f2+_0x46a1cd(0x28c)+_0x183656+'\x20(type='+_0x4ebd9a+',\x20valid='+_0x258cff+')'),!![];}catch(_0x42e2bb){warn(_0x46a1cd(0x299)+'CONFLICT\x20i'+'nsert\x20fail'+'ed\x20(fallba'+_0x46a1cd(0x2e3)+(_0x42e2bb?.[_0x46a1cd(0x21b)]||_0x42e2bb));try{const _0x25ce29=await db['get'](_0x46a1cd(0x1b3)+_0x46a1cd(0x2b1)+_0x46a1cd(0x2de)+_0x46a1cd(0x2ff)+_0x46a1cd(0x278)+_0x46a1cd(0x1a5),[_0x183656,_0x40f6f2]);return _0x25ce29?await db[_0x46a1cd(0x25d)](_0x46a1cd(0x232)+_0x46a1cd(0x217)+_0x46a1cd(0x359)+'ated_by\x20=\x20'+_0x46a1cd(0x172)+_0x46a1cd(0x32a)+'s_valid_re'+_0x46a1cd(0x2ce)+_0x46a1cd(0x193),[_0x4ebd9a,_0x92dd68||'',nowSec(),_0x258cff,_0x25ce29['id']]):await db[_0x46a1cd(0x25d)](_0x46a1cd(0x2e6)+_0x46a1cd(0x298)+_0x46a1cd(0x23b)+_0x46a1cd(0x18e)+_0x46a1cd(0x190)+_0x46a1cd(0x123)+'ed_at,\x20hit'+_0x46a1cd(0x15f)+'_valid_reg'+'ex)\x20VALUES'+_0x46a1cd(0x160)+'\x20?,\x20?,\x200,\x20'+'?)',[_0x183656,_0x40f6f2,_0x4ebd9a,_0x92dd68||'',nowSec(),_0x258cff]),ahoCache['delete'](_0x183656),!![];}catch(_0x1a7cd2){return error(_0x1a7cd2,_0x46a1cd(0x1f8)+_0x46a1cd(0x234)+_0x46a1cd(0x355)+_0x46a1cd(0x11f)+_0x40f6f2+_0x46a1cd(0x1cf)+_0x183656),![];}}}catch(_0x1204aa){return error(_0x1204aa,_0x46a1cd(0x1f8)+_0x46a1cd(0x2fc)+_0x46a1cd(0x1f5)+_0x1ccba5+_0x46a1cd(0x1cf)+_0x183656),![];}}async function deleteLockByPhrase(_0xc5a3a0,_0x27302b){const _0x37bb46=_0x4b08e3;try{if(!_0xc5a3a0||!_0x27302b)return 0x1e2+-0x2182+0x1fa0;const _0x258da9=String(_0x27302b||'')[_0x37bb46(0x2d6)]();if(!_0x258da9)return-0x2342+0x3*0x376+-0x638*-0x4;if(_0x258da9[_0x37bb46(0x281)+'e']()['startsWith'](_0x37bb46(0x2e0))){const _0x51fde3=_0x258da9[_0x37bb46(0x328)](0x201c+0x160*0x2+-0x22d6)[_0x37bb46(0x2d6)](),_0x49ff09=await db[_0x37bb46(0x25d)](_0x37bb46(0x12c)+'M\x20locks\x20WH'+_0x37bb46(0x2c5)+_0x37bb46(0x1d2)+_0x37bb46(0x288)+_0x37bb46(0x16a)+_0x37bb46(0x204),[_0xc5a3a0,_0x51fde3]);if(_0x49ff09?.[_0x37bb46(0x1ab)])ahoCache[_0x37bb46(0x17c)](_0xc5a3a0);return _0x49ff09?.['changes']||-0x485*0x1+0x3da+0xab;}let _0x1921a5=await db['run'](_0x37bb46(0x12c)+'M\x20locks\x20WH'+'ERE\x20chat_j'+_0x37bb46(0x1d2)+_0x37bb46(0x17d)+'?',[_0xc5a3a0,_0x258da9]);if(_0x1921a5?.['changes'])return ahoCache['delete'](_0xc5a3a0),_0x1921a5[_0x37bb46(0x1ab)];return 0xca1*0x2+-0x1f0d+0x5cb;}catch(_0x3f3abd){return warn(_0x37bb46(0x219)+_0x37bb46(0x224)+'hrase\x20erro'+_0x37bb46(0x171)+(_0x3f3abd?.['message']||_0x3f3abd)),-0x11be+-0x7f6*-0x3+0xc*-0x83;}}async function deleteLockById(_0x29dae9,_0x1dc0d7){const _0x37a2bc=_0x4b08e3;try{const _0x374fe0=await db[_0x37a2bc(0x25d)](_0x37a2bc(0x12c)+_0x37a2bc(0x1d8)+_0x37a2bc(0x2c5)+_0x37a2bc(0x1d2)+_0x37a2bc(0x2cb),[_0x29dae9,_0x1dc0d7]);if(_0x374fe0?.[_0x37a2bc(0x1ab)])ahoCache[_0x37a2bc(0x17c)](_0x29dae9);return _0x374fe0?.['changes']||-0x668+0x1*0x2584+0x7c7*-0x4;}catch(_0x5456fe){return warn('[lock]\x20del'+_0x37a2bc(0x2a2)+_0x37a2bc(0x16d)+(_0x5456fe?.[_0x37a2bc(0x21b)]||_0x5456fe)),0x1cab+0x10e2+-0x2d8d;}}async function deleteAllLocksForChat(_0x535557){const _0x52be00=_0x4b08e3;try{const _0x16763b=await db[_0x52be00(0x25d)]('DELETE\x20FRO'+_0x52be00(0x1d8)+'ERE\x20chat_j'+_0x52be00(0x209),[_0x535557]);if(_0x16763b?.[_0x52be00(0x1ab)])ahoCache[_0x52be00(0x17c)](_0x535557);return _0x16763b?.[_0x52be00(0x1ab)]||-0xf15+0x1*-0x1841+0x2756;}catch(_0x3c5e5a){return warn(_0x52be00(0x219)+_0x52be00(0x338)+'sForChat\x20e'+_0x52be00(0x2d9)+(_0x3c5e5a?.[_0x52be00(0x21b)]||_0x3c5e5a)),-0x1829+-0x3d*0x2f+0x235c;}}async function listLocksForChat(_0x1d1619){const _0x5b0427=_0x4b08e3;try{const _0x27ec22=await db[_0x5b0427(0x308)]('SELECT\x20id,'+_0x5b0427(0x31d)+_0x5b0427(0x2a6)+'ed_by,\x20cre'+_0x5b0427(0x2b2)+_0x5b0427(0x1c7)+_0x5b0427(0x33b)+_0x5b0427(0x1f2)+'locks\x20WHER'+_0x5b0427(0x2e7)+_0x5b0427(0x270)+'\x20BY\x20id',[_0x1d1619]);return _0x27ec22||[];}catch(_0x1fd4df){return warn(_0x1fd4df,_0x5b0427(0x196)+_0x5b0427(0x1a9)+_0x5b0427(0x17e)+_0x5b0427(0x1a4)+_0x1d1619+':\x20'+(_0x1fd4df?.[_0x5b0427(0x21b)]||_0x1fd4df)),[];}}async function setLockNotify(_0x4d983a,_0xe1fe50){const _0x2961da=_0x4b08e3;try{if(!_0x4d983a)return![];return await db['run'](_0x2961da(0x2e6)+_0x2961da(0x333)+_0x2961da(0x1b0)+_0x2961da(0x346)+_0x2961da(0x169)+'?,\x20?)\x0a\x20\x20\x20\x20'+_0x2961da(0x29d)+_0x2961da(0x156)+_0x2961da(0x33c)+'DATE\x20SET\x20n'+'otify\x20=\x20ex'+_0x2961da(0x165)+_0x2961da(0x306),[_0x4d983a,_0xe1fe50?-0x7*0x20e+-0x11e2+0xb*0x2ef:0x167f+-0xb42*-0x3+0x3845*-0x1]),!![];}catch(_0x165bb1){return warn(_0x2961da(0x2fb)+_0x2961da(0x19d)+_0x2961da(0x2f4)+'r\x20'+_0x4d983a+':\x20'+(_0x165bb1?.[_0x2961da(0x21b)]||_0x165bb1)),![];}}function _0x1ff8(){const _0x37b16f=['gp\x20alias/j','[lock]\x20ens','AND\x20phrase','ires\x20bot\x20i','D\x20COLUMN\x20i','s_valid_re','conversati','igger1,tri','ration\x20ins','findings','ion(s):\x20','toLowerCas','ration\x20swa','created_at','ex)\x0a\x20\x20\x20\x20\x20\x20','ER\x20DEFAULT','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','_locks_cha','\x20type\x20=\x20\x27r','\x20lock\x20entr','locknotify','CRITICS','\x22\x20@\x20','up_','jid|all>','normalize','ROM\x20locks','index','nstance','cks_unique','includes','isInteger','R\x20DEFAULT\x20','ude\x20gp\x20in\x20','O\x20locks\x20(c','[lock]\x20ON\x20','egex','available','status:\x0a','\x20\x20\x20ON\x20CONF','tatus:\x20loc','REMOVE_DIA','finalize','\x20=\x20\x27target','eteLockByI','s).','_count\x20=\x20h','=\x20ON;','ype,\x20creat','value','ite_master','SSAGE','4170040dkRZwd','ount\x20INTEG','alidation\x20','ces\x20&\x20colu','IF\x20NOT\x20EXI','_jid\x27','ble','FROM\x20locks','ated_at,\x20h','TEGER\x20DEFA','k_prefs\x20(c','ng\x20default','function','max','BATCH_DELA','regex\x20colu','id:\x20\x22','fy\x20INTEGER','chFromFind','_regex\x20INT','gp:<alias|','EGER\x20DEFAU','EXISTS\x20idx','\x20locknotif',',\x20?,\x20?,\x20?,','EXISTS\x20loc','se,comma-s','ERE\x20chat_j','participan','string','AULT\x20\x27\x27,\x0a\x20','.created_b','\x20type,\x20cre','\x20id\x20=\x20?','your\x20defau','unlockall','gex\x20=\x20?\x20WH','XT\x20PRIMARY','\x20\x20\x20\x20\x20\x20type','PER_CHAT_Q','isArray','tal','jid','s|jid|all>','trim','_new\x20witho','1001581sRmqPB','rror:\x20','quested\x20ta','CREATE\x20UNI','catch','\x20?,\x20?)','\x20WHERE\x20cha','❌\x20PM:\x20incl','regex:','ENT','ated_at\x20IN','ck):\x20','ALTER\x20TABL','2.3.2','INSERT\x20INT','E\x20chat_jid','d,\x20phrase,','ine\x20usage:','[lock]\x20fai','ABLED','text','\x20DEFAULT\x200','d|all>','❌\x20Usage\x20(g','roup-only)','amed\x20to\x20ba','\x20\x20\x20\x20\x20\x20\x20\x20\x20c','\x20\x20\x20\x20\x20type\x20','\x20failed\x20fo','ert\x20failed','\x20DO\x20UPDATE','\x20\x20UNIQUE(c','3076551azNfKG','notify','orcement\x20f','[lock]\x20set','Lock\x20faile','Y_MS','t\x20ON\x20locks','t_jid\x20=\x20?\x20','map','{user}','_regex)\x20VA','toISOStrin','STS\x20idx_lo','delock','ify;','\x20lock(s)\x20f','all','efault\x20val','ocks\x20for\x20y','<alias|jid','?,\x20?,\x200,\x20?','type','e=\x27table\x27\x20','cks\x20table','@g.us',':\x20lock\x20tri','IMARY\x20KEY\x20','aho','(?![\x5cp{L}\x5c','\x20phrase\x20FR','❌\x20PM:\x20one-','dWarning:\x20','Lock:\x20inva','hat_jid\x20TE','gex\x20INTEGE','2912988pwAYsN','\x20default\x20c','\x20phrase,\x20t','\x20set\x20for\x20','locks',',\x0a\x20\x20','.\x20Please\x20c','[lock]\x20unl','\x20table\x20ren',':\x20listlock','❌\x20Could\x20no','that\x20word\x20','fy\x20on|off\x0a','slice','fig\x20load\x20f','_at\x20=\x20?,\x20i','INTEGER\x20PR','entries','43550cnyOPh','[lock]\x20loc','creator','\x20\x20\x20\x20','lid\x20regex\x20','OM\x20locks\x20W','O\x20lock_pre','created_by','xtMessage','chat_jid,\x20','join','eteAllLock','CREATE\x20TAB','d\x20locknoti','is_valid_r','jid)\x20DO\x20UP','[lock]\x20val','e\x20TEXT\x20NOT','TEXT\x20DEFAU','output','lt\x20connect','provided:\x20','user','ureSchema\x20','ias','id,\x20notify','chat_jid','HERE\x20type\x20','w\x20(chat_ji','\x22:\x20','key','dStoredMat','LT\x20\x27normal','phrase','[lock]\x20cle','To\x20query\x20s','led:\x20','NAME\x20TO\x20','ated\x20locks','\x20\x20\x20chat_ji','ack\x20failed','PRAGMA\x20for','reated_by\x20','ed\x20lock\x20\x22','e\x20=\x20?,\x20cre','E\x20locks\x20RE','author','build','ted_at,\x0a\x20\x20','unlock','clear','tialize\x20fa','getUniqueJ','\x20for\x20','\x20ON\x20locks(','test','ckup','_by,\x20creat','push','\x20=\x20exclude',':\x20locknoti','gex','5lCTTTF','\x20locks\x20for','\x20\x20\x20\x20UNIQUE','splice','DELETE\x20FRO','TEXT\x20NOT\x20N','gger1,trig','LT\x20\x27\x27','lock.initi','_jid\x20=\x20?','sock','size','has','add','heck\x20/setd','as\x20fallbac','ns\x20error\x20f','r\x20default\x20','length','unlocklock','REGEX)','FAULT\x200','[lock]\x20fin','=\x20\x27regex\x27\x20','2311icDtMc','gLocks\x20fai','d_regex\x20co','body','s\x20for\x20your','\x20\x20\x20\x20\x20);','oaded\x20','REATE\x20TABL','set','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','\x20table\x20(ca','WARNING_ME','imageMessa','exec','\x20is_valid_','ed\x20to\x20','extendedTe','p{N}_])','alize\x20requ','QUE\x20INDEX\x20','CT(chat_ji','\x20hit_count','LICT(chat_','eparated>\x20',':\x20unlock\x20<','ULT\x200,\x0a\x20\x20\x20','normal','eue\x20fail:\x20','\x20\x20\x20\x20\x20);\x0a\x20\x20','fy\x20','520096aHyPhN','_count,\x20is','\x20(?,\x20?,\x20?,','ed:\x20','locks_back','NFKC','lete_prefs','cluded.not','[lock]\x20res','\x20your\x20defa','onical\x20(en',')\x20VALUES\x20(','egex\x27\x20AND\x20','|jid|all>','\x20NULL,\x0a\x20\x20\x20','d\x20error:\x20','w\x20RENAME\x20T','ger2','nodes','r:\x20','?,\x20created','listlock','ULL','CURRENCY','❌\x20PM\x20one-l','nection\x20','gex\x20=\x20excl','GLOBAL_CON','same\x20line.','[lock]\x20mig','delete','\x20phrase\x20=\x20','hat\x20error\x20','ocknotify\x20','olving\x20con','UEUE_LIMIT','✔️\x20[lock]\x20l','knotify\x20ch','find','=\x20excluded','delall','[lock]\x20sen','startsWith','knotify\x20gp','LUES\x20(?,\x20?','leExists\x20e','rgets.','WARNING_TT','hrase,\x20typ','unlock\x201,2','e,\x20created','\x20\x20\x20\x20\x20\x20\x20\x20\x20i','d\x20TEXT\x20NOT','ERE\x20id\x20=\x20?','\x20&\x20regex\x20v','videoMessa','[lock]\x20lis','l\x20gp:<alia','line\x20usage','O\x20locks;','it_count\x20+','INTEGER\x20DE','endsWith','LockNotify','chat_id','hrase)\x0a\x20\x20\x20','ks\x20SET\x20is_','[lock]\x20isa','Wildcard\x20m','phrase);','for\x20','\x20=\x20?','led\x20to\x20add','cessChatQu','[lock]\x20cre','tLocksForC','[lock]\x20pro','changes','ry:\x20sendAp','x\x20=\x201\x20WHER','ockall\x20fai','ard\x20for\x20id','fs\x20(chat_j','\x20\x20\x20\x20\x20hit_c',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','SELECT\x20id\x20','[lock]\x20inv','hit_count','selectedBu','trigger','lock\x20bad1,','6mJRlYt','CREATE\x20IND','\x20\x20\x20VALUES\x20','\x201\x20WHERE\x20i','eue\x20item\x20e','n\x20characte','✔️\x20Locknoti','ock_prefs\x20','wildcard','(s):\x20','E\x20locks\x20(\x0a','table\x20dete','d_at\x20=\x20exc','lock','it_count,\x20','LOCKS','resolveNam','alid\x20wildc','x\x20=\x200\x20WHER','[lock]\x20enf','OFF','our\x20defaul','\x20@\x20','filter','BATCH_SIZE','id\x20=\x20?\x20AND','\x20\x20\x20\x20create','_valid_reg','valid_rege','\x20failed','afe\x20migrat','M\x20locks\x20WH','508jjUuMK','[lock]\x20Mat','ailed:\x20','❌\x20Unknown\x20','AUTOINCREM','dAndNormal','keyword','y,\x0a\x20\x20\x20\x20\x20\x20\x20','\x20\x20is_valid','led\x20for\x20','\x20KEY,\x20noti','egex\x27','dler\x20error','SELECT\x20not','efault\x20con','E\x20id\x20=\x20?','\x200,\x0a\x20\x20\x20\x20\x20\x20','fy\x20message','clearlocks','le_info(','|jid|all>\x0a','dWarning\x20f','lumn\x20to\x20lo','eign_keys\x20','o\x20delete\x20l','egex\x20FROM\x20','normalizeT','eck\x20failed','d\x20for\x20','id-or-phra','fail','[lock]\x20add','d\x20=\x20?','nection(s)','off','ry\x20failed:','2959HidLqJ','ks_new\x20(\x0a\x20','uded.is_va','✔️\x20Deleted\x20','buttonsRes','dApi\x20not\x20a','DEFAULT_EN','phrase\x20=\x20?','[\x5cp{L}\x5cp{N','(?<![\x5cp{L}','\x20regex\x20id=','sendMessag','id\x20=\x20?','DB\x20ensured',':\x20lock\x20<tr','\x20failed:\x20','from','This\x20toggl','\x20gp:<alias','SELECT\x20val','dellock','TableColum','lid_regex;','\x20\x20\x20\x20\x20\x20\x20cre','\x20lock(s).','[lock]\x20Aho','ks\x20SET\x20typ','LT\x201,\x0a\x20\x20\x20\x20','[lock]\x20del','EX\x20IF\x20NOT\x20','message','split','rforming\x20s','ated_by,\x20c','values','mentions','chatJid','SELECT\x20*\x20F','[lock]\x20leg','eteLockByP','i\x20unavaila','ttonId','ration\x20com','SEND_WARNI',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20','mn:\x20','floor','search','d,\x20phrase)','aned\x20up','(chat_jid,','acy\x20locks\x20','t\x20resolve\x20','UPDATE\x20loc','word','Lock\x20fallb','ify\x20FROM\x20l','dText\x20fail','rom\x20your\x20d','O\x20locks_ne','serialized','LT\x201\x0a\x20\x20\x20\x20\x20','hat_jid,\x20p','E\x20locks_ne','tification','=\x20OFF;','eteWithRet','\x20);',',\x20is_valid','\x0aMatched:\x20',':\x20unlockal','❌\x20Failed\x20t','bad2\x20gp:al','[lock]\x20get','\x20created_b','[lock]\x20ini','regex','[lock]\x20con','✔️\x20Saved\x20','\x20\x20\x20\x20\x20\x20\x20id\x20','now','L_MS','chat','lready\x20can','[lock]\x20rea','}_]*','ck\x20phrase1','✔️\x20[lock]\x20','remoteJid','on(s):\x20','NFD','shift','alid\x20store','⚠️\x20{user},\x20','OR\x20type\x20=\x20','ponseMessa','run','NORMALIZE_','replace','oUserJid','\x20Example:\x20','\x20phrase=\x22','\x20SET\x0a\x20\x20\x20\x20\x20','fromMe','next','\x20target(s)','ings\x20error','(chat_jid)','e\x20FROM\x20sql','ids','vailable','get',',2\x20OR\x20unlo','FAULT\x201','\x20\x20\x20\x20\x20phras','\x20=\x20?\x20ORDER','caption','LE\x20IF\x20NOT\x20','tialized\x20(','fatal','y\x20TEXT\x20DEF'];_0x1ff8=function(){return _0x37b16f;};return _0x1ff8();}async function getLockNotify(_0x57381c){const _0x1816b2=_0x4b08e3;try{if(!_0x57381c)return-0x134c+-0x1751*-0x1+0x31*-0x15;const _0x1c33d7=await db[_0x1816b2(0x26c)](_0x1816b2(0x1e6)+_0x1816b2(0x235)+_0x1816b2(0x1c0)+'WHERE\x20chat'+_0x1816b2(0x131),[_0x57381c]);return _0x1c33d7?Number(_0x1c33d7[_0x1816b2(0x2f9)])?-0x1e5a+0x2*0x34+-0x2b9*-0xb:-0xb*-0x1ee+-0xe83+-0x9*0xbf:-0x2068+0x2*0xd64+0x5a0*0x1;}catch(_0x261c74){return warn('[lock]\x20get'+_0x1816b2(0x19d)+'\x20failed\x20fo'+'r\x20'+_0x57381c+':\x20'+(_0x261c74?.[_0x1816b2(0x21b)]||_0x261c74)),-0x12cc+0x202a+-0x6af*0x2;}}async function deleteWithRetry(_0xde4b41,_0x4ed609=-0x16f4+-0x15a0+0x2c96,_0x395b30=0x26ed+-0x9e3+-0x2*0xdef){const _0x114ee9=_0x4b08e3,_0x21af17=_0xde4b41[_0x114ee9(0x34b)]?.[_0x114ee9(0x255)];if(!_0x21af17)return![];let _0x64e5dc=_0x395b30;for(let _0x22be01=-0x4be+-0x1a75+0x1f34;_0x22be01<=Math[_0x114ee9(0x2b7)](-0x2674+-0xda3+0x3418,_0x4ed609);_0x22be01++){try{if(!sendApi)return warn(_0x114ee9(0x219)+_0x114ee9(0x23f)+_0x114ee9(0x1ac)+_0x114ee9(0x225)+_0x114ee9(0x2b0)),![];return await sendApi(_0x21af17,{'delete':_0xde4b41[_0x114ee9(0x34b)]}),!![];}catch(_0x25642f){if(_0x22be01<_0x4ed609){await sleep(_0x64e5dc),_0x64e5dc*=0x6*0xcd+-0xadf+0x613;continue;}return warn(_0x114ee9(0x219)+'eteWithRet'+_0x114ee9(0x1fc)+'\x20'+(_0x25642f?.[_0x114ee9(0x21b)]||_0x25642f)),![];}}return![];}async function sendWarningAndMaybeDelete(_0x26d584){const _0x528ffb=_0x4b08e3;if(!CFG[_0x528ffb(0x228)+'NG'])return;try{const _0x3ed337=_0x26d584[_0x528ffb(0x34b)]?.[_0x528ffb(0x2c6)+'t']||_0x26d584[_0x528ffb(0x34b)]?.[_0x528ffb(0x20d)]||'',_0x5afdc2=_0x26d584[_0x528ffb(0x34b)][_0x528ffb(0x255)],_0x1b948e=_0x3ed337?'@'+String(_0x3ed337)[_0x528ffb(0x21c)]('@')[-0x1*-0x14d7+0x1039+-0x8*0x4a2]:_0x528ffb(0x301),_0xac603c=String(CFG['WARNING_ME'+_0x528ffb(0x2a9)]||DEFAULTS[_0x528ffb(0x14b)+'SSAGE'])[_0x528ffb(0x25f)](/\{user\}/gi,_0x1b948e);if(!sendApi){warn(_0x528ffb(0x187)+_0x528ffb(0x317)+'sendApi\x20un'+_0x528ffb(0x29b));return;}const _0x10beb4=await sendApi(_0x5afdc2,{'text':_0xac603c,'mentions':_0x3ed337?[_0x3ed337]:[]});_0x10beb4?.[_0x528ffb(0x34b)]&&CFG['WARNING_TT'+_0x528ffb(0x24e)]&&CFG[_0x528ffb(0x18d)+_0x528ffb(0x24e)]>-0x1d55+-0x7c3*-0x1+0xb*0x1f6&&setTimeout(async()=>{try{await sendApi(_0x5afdc2,{'delete':_0x10beb4['key']});}catch(_0x40d5f4){}},CFG['WARNING_TT'+_0x528ffb(0x24e)]);}catch(_0x55f3e2){warn(_0x528ffb(0x187)+_0x528ffb(0x1ee)+_0x528ffb(0x1db)+(_0x55f3e2?.[_0x528ffb(0x21b)]||_0x55f3e2));}}async function processChatQueue(_0x5bca1e){const _0x55c677=_0x4b08e3;while((perChatQueue[_0x55c677(0x26c)](_0x5bca1e)||[])[_0x55c677(0x13a)]>0x1ce+-0x128f+0x10c1&&!shuttingDown){const _0x139dc4=Math['max'](0x11d2+0xd61+-0x1f32,CFG[_0x55c677(0x1d1)]||0x59c+0x1514+-0x2f7*0x9),_0x240201=perChatQueue['get'](_0x5bca1e)||[],_0x1cd1fc=_0x240201[_0x55c677(0x12b)](-0x1be4+-0x240a+-0x7*-0x922,_0x139dc4);for(const _0x6d53e0 of _0x1cd1fc){try{const _0xd59f09=await deleteWithRetry(_0x6d53e0)[_0x55c677(0x2dc)](()=>![]);_0xd59f09&&await sendWarningAndMaybeDelete(_0x6d53e0)[_0x55c677(0x2dc)](()=>{});}catch(_0x2bc733){warn('[lock]\x20pro'+_0x55c677(0x1a7)+_0x55c677(0x1bd)+_0x55c677(0x2d9)+(_0x2bc733?.[_0x55c677(0x21b)]||_0x2bc733));}}(perChatQueue[_0x55c677(0x26c)](_0x5bca1e)||[])[_0x55c677(0x13a)]>0x2*-0xd3d+0x1*-0x1f5+0x1c6f&&await sleep(Math[_0x55c677(0x2b7)](0x1c28+0xd*-0x83+-0x1581,CFG[_0x55c677(0x2b8)+_0x55c677(0x2fd)]||0x1*0x11ef+0x2e2*0x3+0x5*-0x529));}if((perChatQueue['get'](_0x5bca1e)||[])[_0x55c677(0x13a)]===0x1907+-0x67*0x30+-0x4d*0x13)perChatQueue[_0x55c677(0x17c)](_0x5bca1e);}function tryStartProcessingForChat(_0x40448e){const _0x14c501=_0x4b08e3;if(perChatProcessing[_0x14c501(0x26c)](_0x40448e))return;if(activeChats>=(CFG[_0x14c501(0x179)+_0x14c501(0x175)]||0x2*-0xae7+-0x1a01+-0xbf4*-0x4)){setTimeout(()=>tryStartProcessingForChat(_0x40448e),0x18d3+-0x13*-0x147+-0x3082);return;}activeChats++,perChatProcessing[_0x14c501(0x148)](_0x40448e,!![]),((async()=>{const _0x3f59f5=_0x14c501;try{await processChatQueue(_0x40448e);}catch(_0x4b296f){warn(_0x3f59f5(0x1aa)+'cessChatQu'+_0x3f59f5(0x15b)+(_0x4b296f?.[_0x3f59f5(0x21b)]||_0x4b296f));}finally{perChatProcessing[_0x3f59f5(0x17c)](_0x40448e),activeChats=Math[_0x3f59f5(0x2b7)](0xd7a+-0x5c*0x2e+0x30e,activeChats-(-0x1*-0x8ab+-0x11f8+0x18d*0x6));if((perChatQueue[_0x3f59f5(0x26c)](_0x40448e)||[])[_0x3f59f5(0x13a)])setImmediate(()=>tryStartProcessingForChat(_0x40448e));}})());}function enqueueDeletion(_0x2cb601){const _0x1324e0=_0x4b08e3,_0x37db03=_0x2cb601[_0x1324e0(0x34b)]?.[_0x1324e0(0x255)];if(!_0x37db03)return;if(!perChatQueue[_0x1324e0(0x134)](_0x37db03))perChatQueue[_0x1324e0(0x148)](_0x37db03,[]);const _0x47d3ed=perChatQueue['get'](_0x37db03);if(_0x47d3ed['length']>=(CFG['PER_CHAT_Q'+_0x1324e0(0x181)]||DEFAULTS['PER_CHAT_Q'+_0x1324e0(0x181)]))_0x47d3ed[_0x1324e0(0x258)]();_0x47d3ed[_0x1324e0(0x124)](_0x2cb601);if(!perChatProcessing['get'](_0x37db03))tryStartProcessingForChat(_0x37db03);}function extractTextFromMessage(_0x1bd9e8){const _0x47aa35=_0x4b08e3;if(!_0x1bd9e8||!_0x1bd9e8[_0x47aa35(0x21b)])return'';const _0x5e7628=_0x1bd9e8['message'];if(_0x5e7628[_0x47aa35(0x27c)+'on'])return _0x5e7628[_0x47aa35(0x27c)+'on'];if(_0x5e7628[_0x47aa35(0x150)+_0x47aa35(0x335)]?.[_0x47aa35(0x2ec)])return _0x5e7628['extendedTe'+_0x47aa35(0x335)][_0x47aa35(0x2ec)];if(_0x5e7628['imageMessa'+'ge']?.[_0x47aa35(0x271)])return _0x5e7628[_0x47aa35(0x14c)+'ge']['caption'];if(_0x5e7628[_0x47aa35(0x195)+'ge']?.[_0x47aa35(0x271)])return _0x5e7628[_0x47aa35(0x195)+'ge'][_0x47aa35(0x271)];if(_0x5e7628[_0x47aa35(0x201)+_0x47aa35(0x25c)+'ge']?.['selectedBu'+_0x47aa35(0x226)])return _0x5e7628['buttonsRes'+_0x47aa35(0x25c)+'ge'][_0x47aa35(0x1b6)+_0x47aa35(0x226)];return'';}function splitRestForGp(_0xa76c7){const _0x4cc5ba=_0x4b08e3;if(!_0xa76c7)return{'left':'','gp':null};const _0x27b419=_0xa76c7['match'](/\bgp[:\s]+(.+)$/i);if(_0x27b419){const _0x47b9e8=_0xa76c7['slice'](-0x1ed9+-0xa44*-0x1+0x1df*0xb,_0x27b419[_0x4cc5ba(0x291)])[_0x4cc5ba(0x2d6)](),_0x5dcb49=_0x27b419[0x843+0x1772*-0x1+0x8*0x1e6][_0x4cc5ba(0x2d6)]();return{'left':_0x47b9e8,'gp':_0x5dcb49};}const _0x2c1821=_0xa76c7[_0x4cc5ba(0x21c)](/\s+/)['filter'](Boolean);if(_0x2c1821[_0x4cc5ba(0x13a)]>0x1c7c+0x268e+0x4309*-0x1){const _0x3df0f9=_0x2c1821[_0x2c1821[_0x4cc5ba(0x13a)]-(-0x1a18+0x1a32+-0x19)];if(_0x3df0f9[_0x4cc5ba(0x281)+'e']()===_0x4cc5ba(0x308)||_0x3df0f9[_0x4cc5ba(0x294)]('@'))return _0x2c1821['pop'](),{'left':_0x2c1821[_0x4cc5ba(0x337)]('\x20')[_0x4cc5ba(0x2d6)](),'gp':_0x3df0f9};}return{'left':_0xa76c7['trim'](),'gp':null};}function parseLockCommandOneLine(_0x2f0d38){const _0x3f40f2=_0x4b08e3,_0x345d24=(_0x2f0d38||'')[_0x3f40f2(0x21c)](/\r?\n/)[0x3f*0x12+-0x217f*-0x1+-0x7*0x56b][_0x3f40f2(0x2d6)]();let _0x4c2562=_0x345d24[_0x3f40f2(0x25f)](/^\/?lock\b/i,'')[_0x3f40f2(0x2d6)]();const {left:_0x491f80,gp:_0x12db2a}=splitRestForGp(_0x4c2562),_0x3ea39e=(_0x491f80||'')[_0x3f40f2(0x21c)](',')[_0x3f40f2(0x300)](_0x52e6d6=>_0x52e6d6['trim']())['filter'](Boolean);return{'triggers':_0x3ea39e,'gp':_0x12db2a};}function parseUnlockCommandOneLine(_0x4fb256){const _0x4f1bb8=_0x4b08e3,_0x353172=(_0x4fb256||'')[_0x4f1bb8(0x21c)](/\r?\n/)[-0xb76+0x3af*0x2+0x418][_0x4f1bb8(0x2d6)]();let _0x45d521=_0x353172[_0x4f1bb8(0x25f)](/^\/?unlock\b/i,'')[_0x4f1bb8(0x2d6)]();const {left:_0x47ed03,gp:_0x4e0247}=splitRestForGp(_0x45d521),_0x2bfa76=(_0x47ed03||'')[_0x4f1bb8(0x21c)](',')['map'](_0x15f00e=>_0x15f00e[_0x4f1bb8(0x2d6)]())[_0x4f1bb8(0x1d0)](Boolean);return{'parts':_0x2bfa76,'gp':_0x4e0247};}function parseListCommandOneLine(_0x2c8720){const _0x5680a6=_0x4b08e3,_0x4c6d38=(_0x2c8720||'')['split'](/\r?\n/)[0x50*0x49+-0x2*-0xd7c+0x3*-0x1098][_0x5680a6(0x2d6)]();let _0x42bd2b=_0x4c6d38[_0x5680a6(0x25f)](/^\/?listlock\b/i,'')[_0x5680a6(0x2d6)]();const {left:_0x4edd45,gp:_0x291ca2}=splitRestForGp(_0x42bd2b),_0x45818c=_0x291ca2||(_0x4edd45?_0x4edd45:null);return{'gp':_0x45818c};}function parseLockNotifyCommandOneLine(_0x353b88){const _0x408825=_0x4b08e3,_0x22760f=(_0x353b88||'')[_0x408825(0x21c)](/\r?\n/)[-0x273*-0x1+-0x7f0+0x5*0x119]['trim']();let _0x4c7e2b=_0x22760f['replace'](/^\/?locknotify\b/i,'')[_0x408825(0x2d6)]();const {left:_0x5b9c17,gp:_0x821176}=splitRestForGp(_0x4c7e2b),_0x499004=(_0x5b9c17||'')[_0x408825(0x281)+'e']();let _0x3eac77=null;if(_0x499004['includes']('on'))_0x3eac77='on';else{if(_0x499004['includes'](_0x408825(0x1fb)))_0x3eac77=_0x408825(0x1fb);}return{'mode':_0x3eac77,'gp':_0x821176};}async function validateStoredRegexes(){const _0x1138d2=_0x4b08e3;try{const _0x35a962=await db['all']('SELECT\x20id,'+_0x1138d2(0x315)+_0x1138d2(0x332)+_0x1138d2(0x348)+_0x1138d2(0x13f)+_0x1138d2(0x25b)+'\x27invalid_r'+_0x1138d2(0x1e4));for(const _0x519dad of _0x35a962||[]){try{new RegExp(_0x519dad[_0x1138d2(0x34e)]),await db[_0x1138d2(0x25d)](_0x1138d2(0x232)+'ks\x20SET\x20is_'+'valid_rege'+_0x1138d2(0x1ad)+'E\x20id\x20=\x20?',[_0x519dad['id']]);}catch(_0x5647da){await db['run']('UPDATE\x20loc'+'ks\x20SET\x20is_'+_0x1138d2(0x1d5)+_0x1138d2(0x1cb)+_0x1138d2(0x1e8),[_0x519dad['id']]);}}}catch(_0x46d257){warn(_0x1138d2(0x33d)+'idateStore'+'dRegexes\x20e'+'rror:\x20'+(_0x46d257?.[_0x1138d2(0x21b)]||_0x46d257));}}async function findStoredMatchFromFindings(_0x3bfb5b=[]){const _0x170c28=_0x4b08e3;try{const _0x13bfc9=await listSudo();if(!Array[_0x170c28(0x2d2)](_0x13bfc9)||_0x13bfc9['length']===-0x2583+-0x1d9b+0xb*0x61a)return null;const _0x1c393a=new Set(_0x13bfc9[_0x170c28(0x300)](String));for(const _0x425a6d of _0x3bfb5b||[]){if(!_0x425a6d||typeof _0x425a6d[_0x170c28(0x2d4)]!==_0x170c28(0x2c7))continue;const _0x51a663=normalizeToJid(_0x425a6d[_0x170c28(0x2d4)]);if(_0x51a663&&_0x1c393a[_0x170c28(0x134)](_0x51a663))return _0x51a663;if(_0x1c393a[_0x170c28(0x134)](_0x425a6d[_0x170c28(0x2d4)]))return _0x425a6d[_0x170c28(0x2d4)];const _0x590c23=String(_0x425a6d[_0x170c28(0x2d4)])[_0x170c28(0x21c)]('@')[-0x1244+-0x1*0xf88+-0xe*-0x26a]['split'](':')[-0x2*0xd81+-0x1458+0x13*0x27e];if(_0x590c23)for(const _0x44e8f5 of _0x13bfc9){const _0x4bd9fb=String(_0x44e8f5)[_0x170c28(0x21c)]('@')[-0x9f*-0x2e+-0x2159*0x1+0x4c7];if(_0x4bd9fb&&_0x4bd9fb===_0x590c23)return _0x44e8f5;}}return null;}catch(_0x3bdbe1){return warn(_0x170c28(0x13e)+_0x170c28(0x34c)+_0x170c28(0x2bc)+_0x170c28(0x267)+':\x20'+(_0x3bdbe1?.[_0x170c28(0x21b)]||_0x3bdbe1)),null;}}export async function initialize(_0x28588f){const _0xde909c=_0x4b08e3;if(!_0x28588f)throw new Error(_0xde909c(0x130)+_0xde909c(0x152)+_0xde909c(0x279)+_0xde909c(0x292));botRef=_0x28588f,setupSendApi();try{const _0x52cc7a=getConfig()||{},_0x235126=_0x52cc7a&&_0x52cc7a['LOCKS']?_0x52cc7a[_0xde909c(0x1c8)]:{};CFG['DEFAULT_EN'+_0xde909c(0x2eb)]=_0x235126['DEFAULT_EN'+_0xde909c(0x2eb)]??DEFAULTS[_0xde909c(0x203)+_0xde909c(0x2eb)],CFG[_0xde909c(0x228)+'NG']=_0x235126[_0xde909c(0x228)+'NG']??DEFAULTS[_0xde909c(0x228)+'NG'],CFG[_0xde909c(0x14b)+_0xde909c(0x2a9)]=_0x235126[_0xde909c(0x14b)+_0xde909c(0x2a9)]??DEFAULTS[_0xde909c(0x14b)+_0xde909c(0x2a9)],CFG[_0xde909c(0x18d)+'L_MS']=Number[_0xde909c(0x295)](_0x235126[_0xde909c(0x18d)+_0xde909c(0x24e)])?_0x235126[_0xde909c(0x18d)+_0xde909c(0x24e)]:DEFAULTS[_0xde909c(0x18d)+_0xde909c(0x24e)],CFG[_0xde909c(0x2d1)+_0xde909c(0x181)]=Number[_0xde909c(0x295)](_0x235126[_0xde909c(0x2d1)+_0xde909c(0x181)])?_0x235126['PER_CHAT_Q'+_0xde909c(0x181)]:DEFAULTS[_0xde909c(0x2d1)+'UEUE_LIMIT'],CFG[_0xde909c(0x1d1)]=Number['isInteger'](_0x235126[_0xde909c(0x1d1)])?_0x235126[_0xde909c(0x1d1)]:DEFAULTS[_0xde909c(0x1d1)],CFG[_0xde909c(0x2b8)+'Y_MS']=Number[_0xde909c(0x295)](_0x235126[_0xde909c(0x2b8)+_0xde909c(0x2fd)])?_0x235126[_0xde909c(0x2b8)+_0xde909c(0x2fd)]:DEFAULTS[_0xde909c(0x2b8)+_0xde909c(0x2fd)],CFG[_0xde909c(0x179)+_0xde909c(0x175)]=Number['isInteger'](_0x235126[_0xde909c(0x179)+'CURRENCY'])?_0x235126[_0xde909c(0x179)+_0xde909c(0x175)]:DEFAULTS[_0xde909c(0x179)+_0xde909c(0x175)],CFG[_0xde909c(0x25e)+'REMOVE_DIA'+_0xde909c(0x28b)]=!!_0x235126[_0xde909c(0x25e)+_0xde909c(0x29f)+'CRITICS'];}catch(_0x12651c){warn(_0xde909c(0x24a)+_0xde909c(0x329)+'ailed,\x20usi'+_0xde909c(0x2b5)+'s'),CFG={...DEFAULTS};}try{await ensureSchema(),await validateStoredRegexes(),info('[lock]\x20ini'+_0xde909c(0x273)+_0xde909c(0x20a)+_0xde909c(0x194)+_0xde909c(0x2ac)+'run)');}catch(_0x415c8d){error(_0x415c8d,_0xde909c(0x248)+_0xde909c(0x11d)+_0xde909c(0x2d3));throw _0x415c8d;}}export async function onMessage(_0x260bbe){const _0x3d76ed=_0x4b08e3;try{if(!_0x260bbe||!_0x260bbe['key']||!_0x260bbe['message'])return;const _0x244cf5=_0x260bbe[_0x3d76ed(0x34b)]?.['id']||_0x260bbe[_0x3d76ed(0x34b)]?.['participan'+'t']||(_0x260bbe[_0x3d76ed(0x34b)]?.['fromMe']?_0x3d76ed(0x264):''),_0x1f9bc4=String(_0x260bbe[_0x3d76ed(0x34b)][_0x3d76ed(0x255)]||'')+'::'+String(_0x244cf5||'');if(isProcessed(_0x1f9bc4))return;markProcessed(_0x1f9bc4);const _0x4351a8=extractTextFromMessage(_0x260bbe);if(!_0x4351a8)return;const _0xa47e8e=_0x260bbe[_0x3d76ed(0x34b)][_0x3d76ed(0x255)],_0x585264=typeof _0xa47e8e==='string'&&_0xa47e8e[_0x3d76ed(0x19c)](_0x3d76ed(0x310)),_0x2fd71c=_0x260bbe[_0x3d76ed(0x34b)]?.[_0x3d76ed(0x2c6)+'t']||_0x260bbe['key']?.[_0x3d76ed(0x20d)]||_0x260bbe[_0x3d76ed(0x34b)]?.['remoteJid']||'',_0x28de53=String(_0x2fd71c||'')['split']('@')[-0x10fb+0x3*-0x1b+0x1*0x114c];let _0x16814f=![];if(_0x585264)try{_0x16814f=await isadmin(botRef,_0x260bbe);}catch(_0xdf31a5){warn(_0x3d76ed(0x1a1)+'dmin\x20check'+_0x3d76ed(0x1d6)),_0x16814f=![];}if(_0x260bbe['isCommand']){const _0xf763fe=typeof _0x260bbe[_0x3d76ed(0x2ec)]===_0x3d76ed(0x2c7)&&_0x260bbe[_0x3d76ed(0x2ec)][_0x3d76ed(0x2d6)]()[_0x3d76ed(0x13a)]?_0x260bbe['text'][_0x3d76ed(0x2d6)]():_0x4351a8['trim'](),_0x17bab6=(_0xf763fe[_0x3d76ed(0x21c)](/\s+/)[-0x1*0x593+0x12ad+-0xd1a]||'')[_0x3d76ed(0x281)+'e']();if(!_0x585264){const _0x5c931e=Boolean(_0x260bbe[_0x3d76ed(0x34b)][_0x3d76ed(0x264)]);let _0x49b2ce=null;if(_0x5c931e){const _0x59bd6c=getBotJid();_0x49b2ce=_0x59bd6c||_0x260bbe[_0x3d76ed(0x34b)][_0x3d76ed(0x255)];}else{let _0x26257c=![];try{_0x26257c=await isSudo(botRef,_0x260bbe);}catch(_0x289cbc){_0x26257c=![];}if(!_0x26257c)return;const _0x1ad039=userJidFromCtx(_0x260bbe)||{'findings':[]},_0x50796e=await findStoredMatchFromFindings(_0x1ad039[_0x3d76ed(0x27f)]||[]);if(!_0x50796e)return;_0x49b2ce=_0x50796e;}if(!_0x49b2ce)return;if(_0x17bab6===_0x3d76ed(0x1c6)){const {triggers:_0x4dd9c1,gp:_0x2edc95}=parseLockCommandOneLine(_0xf763fe||_0x4351a8);if(!_0x4dd9c1[_0x3d76ed(0x13a)]){await sendText(_0x49b2ce,_0x3d76ed(0x316)+_0x3d76ed(0x198)+_0x3d76ed(0x20b)+_0x3d76ed(0x27d)+'gger2>\x20gp:'+_0x3d76ed(0x30b)+'|all>');return;}if(!_0x2edc95){await sendText(_0x49b2ce,'❌\x20PM:\x20incl'+_0x3d76ed(0x297)+_0x3d76ed(0x17a)+_0x3d76ed(0x261)+_0x3d76ed(0x1b8)+_0x3d76ed(0x245)+_0x3d76ed(0x345));return;}let _0x368814=[];const _0xfa1b59=_0x2edc95['trim']();if(_0xfa1b59['toLowerCas'+'e']()===_0x3d76ed(0x308))_0x368814=await _0x1f455d[_0x3d76ed(0x11e)+_0x3d76ed(0x26a)]();else{const _0x24c9ef=await _0x1f455d['resolveNam'+'e'](_0xfa1b59);if(_0x24c9ef)_0x368814=[_0x24c9ef];else{if(_0xfa1b59['includes']('@'))_0x368814=[_0x1f455d['normalizeT'+_0x3d76ed(0x260)](_0xfa1b59)];else{await sendText(_0x49b2ce,_0x3d76ed(0x1dc)+_0x3d76ed(0x276)+_0x3d76ed(0x2ba)+_0xfa1b59+'\x22.');return;}}}let _0x1cf69f=0x1*0xc10+-0xb1*0x23+0xc23;for(const _0x516e30 of uniqArray(_0x368814)){for(const _0x5a5596 of _0x4dd9c1){const _0x38e3ea=await addLock(_0x516e30,_0x5a5596,_0x2fd71c);if(_0x38e3ea)_0x1cf69f++;}}await sendText(_0x49b2ce,_0x3d76ed(0x24b)+_0x1cf69f+_0x3d76ed(0x215));return;}if(_0x17bab6===_0x3d76ed(0x173)){const {gp:_0x13de64}=parseListCommandOneLine(_0xf763fe||_0x4351a8);if(!_0x13de64){await sendText(_0x49b2ce,'❌\x20PM:\x20one-'+_0x3d76ed(0x198)+_0x3d76ed(0x324)+_0x3d76ed(0x20f)+_0x3d76ed(0x16b));return;}let _0x5f2b03=[];if(_0x13de64['toLowerCas'+'e']()===_0x3d76ed(0x308))_0x5f2b03=await _0x1f455d[_0x3d76ed(0x11e)+_0x3d76ed(0x26a)]();else{const _0x1f1fe6=await _0x1f455d[_0x3d76ed(0x1c9)+'e'](_0x13de64);if(_0x1f1fe6)_0x5f2b03=[_0x1f1fe6];else{if(_0x13de64['includes']('@'))_0x5f2b03=[_0x1f455d[_0x3d76ed(0x1f3)+_0x3d76ed(0x260)](_0x13de64)];else{await sendText(_0x49b2ce,_0x3d76ed(0x1dc)+_0x3d76ed(0x276)+_0x3d76ed(0x2ba)+_0x13de64+'\x22.');return;}}}let _0x514b4b=[];for(const _0x4879fc of _0x5f2b03){const _0x34673f=await listLocksForChat(_0x4879fc);for(const _0x12c14e of _0x34673f)_0x514b4b[_0x3d76ed(0x124)]({'chatJid':_0x4879fc,..._0x12c14e});}await sendText(_0x49b2ce,_0x3d76ed(0x254)+_0x514b4b[_0x3d76ed(0x13a)]+('\x20locks\x20loa'+'ded\x20for\x20re'+_0x3d76ed(0x2da)+_0x3d76ed(0x18c)));if(!_0x514b4b['length'])return;let _0x2d9e05='';for(const _0x232f52 of _0x514b4b){const _0x591743=_0x232f52[_0x3d76ed(0x283)]?new Date(_0x232f52['created_at']*(-0x1607*-0x1+0xd08+0x1d*-0x113))[_0x3d76ed(0x303)+'g']()[_0x3d76ed(0x328)](-0x201c+-0x128a+-0x3*-0x10e2,-0x1aad*0x1+0x1cd4+0x1*-0x21d):'',_0x46a7b0=_0x232f52[_0x3d76ed(0x30d)]==='regex'?'⦿':_0x232f52[_0x3d76ed(0x30d)]==='wildcard'?'✶':'',_0x30c780=_0x232f52[_0x3d76ed(0x30d)]===_0x3d76ed(0x249)?_0x3d76ed(0x2e0)+_0x232f52[_0x3d76ed(0x34e)]:_0x232f52['phrase'],_0x3abb32=_0x232f52[_0x3d76ed(0x30d)]===_0x3d76ed(0x249)&&_0x232f52[_0x3d76ed(0x33b)+'egex']===0x11ce+-0x529*-0x1+0x16f7*-0x1?'\x20(INVALID\x20'+_0x3d76ed(0x13c):'',_0x275498=_0x232f52[_0x3d76ed(0x221)]+':'+_0x232f52['id']+'.\x20'+(_0x46a7b0?_0x46a7b0+'\x20':'')+_0x30c780+_0x3abb32+'\x20'+(_0x591743?'('+_0x591743+')':'')+'\x0a';(_0x2d9e05+_0x275498)[_0x3d76ed(0x13a)]>-0x26*0xd+0x6d3+0xf7&&(await sendText(_0x49b2ce,_0x2d9e05['trim']()),_0x2d9e05=''),_0x2d9e05+=_0x275498;}if(_0x2d9e05[_0x3d76ed(0x2d6)]())await sendText(_0x49b2ce,_0x2d9e05[_0x3d76ed(0x2d6)]());return;}if([_0x3d76ed(0x11b),_0x3d76ed(0x211),'delock',_0x3d76ed(0x13b),_0x3d76ed(0x305)][_0x3d76ed(0x294)](_0x17bab6)){const {parts:_0xee83d8,gp:_0x17e5fd}=parseUnlockCommandOneLine(_0xf763fe||_0x4351a8);if(!_0xee83d8?.[_0x3d76ed(0x13a)]){await sendText(_0x49b2ce,'❌\x20PM:\x20one-'+_0x3d76ed(0x198)+_0x3d76ed(0x158)+_0x3d76ed(0x1f6)+_0x3d76ed(0x2c4)+_0x3d76ed(0x157)+_0x3d76ed(0x2be)+_0x3d76ed(0x28e));return;}if(!_0x17e5fd){await sendText(_0x49b2ce,_0x3d76ed(0x2df)+'ude\x20gp\x20in\x20'+_0x3d76ed(0x17a)+'\x20Example:\x20'+_0x3d76ed(0x18f)+'\x20gp:alias');return;}let _0x2daa4c=[];const _0x180a68=_0x17e5fd[_0x3d76ed(0x2d6)]();if(_0x180a68[_0x3d76ed(0x281)+'e']()===_0x3d76ed(0x308))_0x2daa4c=await _0x1f455d[_0x3d76ed(0x11e)+_0x3d76ed(0x26a)]();else{const _0x25f8b8=await _0x1f455d['resolveNam'+'e'](_0x180a68);if(_0x25f8b8)_0x2daa4c=[_0x25f8b8];else{if(_0x180a68[_0x3d76ed(0x294)]('@'))_0x2daa4c=[_0x1f455d['normalizeT'+_0x3d76ed(0x260)](_0x180a68)];else{await sendText(_0x49b2ce,_0x3d76ed(0x1dc)+_0x3d76ed(0x276)+_0x3d76ed(0x2ba)+_0x180a68+'\x22.');return;}}}let _0x12b5c8=-0x1891+0x1c79+-0x3e8;for(const _0x42ae7b of _0xee83d8){if(!_0x42ae7b)continue;if(/^\d+$/['test'](_0x42ae7b)){for(const _0x309165 of _0x2daa4c){const _0x3d98a2=await deleteLockById(_0x309165,_0x42ae7b);if(_0x3d98a2)_0x12b5c8+=_0x3d98a2;}continue;}for(const _0x2dc34b of _0x2daa4c){const _0x19f2e0=await deleteLockByPhrase(_0x2dc34b,_0x42ae7b);if(_0x19f2e0)_0x12b5c8+=_0x19f2e0;}}await sendText(_0x49b2ce,_0x3d76ed(0x200)+_0x12b5c8+'/'+_0xee83d8[_0x3d76ed(0x13a)]+_0x3d76ed(0x215));return;}if(_0x17bab6===_0x3d76ed(0x2cd)||_0x17bab6===_0x3d76ed(0x186)||_0x17bab6===_0x3d76ed(0x1eb)){const _0x5b0910=(_0xf763fe||_0x4351a8||'')[_0x3d76ed(0x21c)](/\r?\n/)[0x7*0x535+-0x1b4d+0x1*-0x926][_0x3d76ed(0x2d6)](),_0x26404f=_0x5b0910[_0x3d76ed(0x25f)](/^\/?(unlockall|delall|clearlocks)\b/i,'')[_0x3d76ed(0x2d6)](),{left:_0x1f42c5,gp:_0x18f78a}=splitRestForGp(_0x26404f);if(!_0x18f78a){await sendText(_0x49b2ce,_0x3d76ed(0x316)+_0x3d76ed(0x198)+_0x3d76ed(0x243)+_0x3d76ed(0x197)+_0x3d76ed(0x2d5));return;}let _0x49fdf2=[];const _0x59f13b=_0x18f78a[_0x3d76ed(0x2d6)]();if(_0x59f13b[_0x3d76ed(0x281)+'e']()===_0x3d76ed(0x308))_0x49fdf2=await _0x1f455d[_0x3d76ed(0x11e)+'ids']();else{const _0x3efcfa=await _0x1f455d[_0x3d76ed(0x1c9)+'e'](_0x59f13b);if(_0x3efcfa)_0x49fdf2=[_0x3efcfa];else{if(_0x59f13b[_0x3d76ed(0x294)]('@'))_0x49fdf2=[_0x1f455d['normalizeT'+_0x3d76ed(0x260)](_0x59f13b)];else{await sendText(_0x49b2ce,_0x3d76ed(0x1dc)+'gp\x20alias/j'+_0x3d76ed(0x2ba)+_0x59f13b+'\x22.');return;}}}let _0x552e96=0x19*0x9d+0x33d*-0x3+-0x59e;for(const _0x462158 of _0x49fdf2){const _0x371d9d=await deleteAllLocksForChat(_0x462158);_0x552e96+=_0x371d9d||-0x145e+-0x10f3+0x29*0xe9;}await sendText(_0x49b2ce,_0x3d76ed(0x200)+_0x552e96+'\x20lock(s).');return;}if(_0x17bab6===_0x3d76ed(0x28a)){const _0x5a1062=parseLockNotifyCommandOneLine(_0xf763fe||_0x4351a8),{mode:_0x16617e,gp:_0x5624d8}=_0x5a1062;if(!_0x5624d8){await sendText(_0x49b2ce,_0x3d76ed(0x176)+_0x3d76ed(0x2e9)+_0x3d76ed(0x2c1)+'y\x20[on|off]'+_0x3d76ed(0x20f)+_0x3d76ed(0x1ed)+_0x3d76ed(0x350)+_0x3d76ed(0x29e)+_0x3d76ed(0x189)+':<alias|ji'+_0x3d76ed(0x2ee));return;}let _0x33a30b=[];const _0x997241=_0x5624d8[_0x3d76ed(0x2d6)]();if(_0x997241[_0x3d76ed(0x281)+'e']()===_0x3d76ed(0x308))_0x33a30b=await _0x1f455d[_0x3d76ed(0x11e)+_0x3d76ed(0x26a)]();else{const _0x2d8e3b=await _0x1f455d[_0x3d76ed(0x1c9)+'e'](_0x997241);if(_0x2d8e3b)_0x33a30b=[_0x2d8e3b];else{if(_0x997241[_0x3d76ed(0x294)]('@'))_0x33a30b=[_0x1f455d[_0x3d76ed(0x1f3)+_0x3d76ed(0x260)](_0x997241)];else{await sendText(_0x49b2ce,_0x3d76ed(0x1dc)+_0x3d76ed(0x276)+_0x3d76ed(0x2ba)+_0x997241+'\x22.');return;}}}if(!_0x16617e){const _0x1f037a=[];for(const _0xa16c0e of uniqArray(_0x33a30b)){const _0x1f120e=await getLockNotify(_0xa16c0e)['catch'](()=>0x2214+0xd0f*0x1+-0x2f23*0x1);_0x1f037a[_0x3d76ed(0x124)](_0xa16c0e+':\x20'+(_0x1f120e?'ON':_0x3d76ed(0x1cd)));}await sendText(_0x49b2ce,_0x3d76ed(0x182)+_0x3d76ed(0x17f)+_0x3d76ed(0x29c)+_0x1f037a[_0x3d76ed(0x337)]('\x0a'));return;}let _0x362b5d=-0x1df1+-0x1086+0x2e77;for(const _0x14af7c of uniqArray(_0x33a30b)){const _0x544964=await setLockNotify(_0x14af7c,_0x16617e==='on');if(_0x544964)_0x362b5d++;}await sendText(_0x49b2ce,'✔️\x20Locknoti'+_0x3d76ed(0x15d)+_0x16617e+_0x3d76ed(0x31e)+_0x362b5d+'/'+_0x33a30b[_0x3d76ed(0x13a)]+(_0x3d76ed(0x266)+'.'));return;}return;}if(_0x585264){if(!_0x16814f)return;const _0x2f896d=_0xa47e8e,_0x1b29b0=await getDefault(_0x28de53)[_0x3d76ed(0x2dc)](()=>null);if(!_0x1b29b0||Array[_0x3d76ed(0x2d2)](_0x1b29b0)&&_0x1b29b0[_0x3d76ed(0x13a)]===0x1*0x21c7+-0x2035+-0xc9*0x2)return;const _0x1a213f=Array[_0x3d76ed(0x2d2)](_0x1b29b0)?_0x1b29b0:[_0x1b29b0];let _0x33b925=[];for(const _0x35b36a of _0x1a213f){try{const _0x201f9c=await getConnection(_0x35b36a)[_0x3d76ed(0x2dc)](()=>null);if(Array[_0x3d76ed(0x2d2)](_0x201f9c))_0x33b925['push'](..._0x201f9c);else{if(_0x201f9c)_0x33b925['push'](String(_0x201f9c));}}catch(_0xd7d828){warn(_0x3d76ed(0x166)+_0x3d76ed(0x180)+_0x3d76ed(0x177)+_0x35b36a+_0x3d76ed(0x20c)+(_0xd7d828?.[_0x3d76ed(0x21b)]||_0xd7d828));}}_0x33b925=uniqArray(_0x33b925);if(!_0x33b925[_0x3d76ed(0x13a)]){await sendText(_0x2f896d,_0x3d76ed(0x325)+_0x3d76ed(0x231)+_0x3d76ed(0x2cc)+_0x3d76ed(0x341)+_0x3d76ed(0x280)+_0x1a213f[_0x3d76ed(0x337)](',\x20')+(_0x3d76ed(0x321)+_0x3d76ed(0x136)+_0x3d76ed(0x309)+'ue(s).'));return;}if(_0x17bab6===_0x3d76ed(0x1c6)){const {triggers:_0x45f935}=parseLockCommandOneLine(_0xf763fe||_0x4351a8);if(!_0x45f935['length']){await sendText(_0x2f896d,_0x3d76ed(0x2ef)+_0x3d76ed(0x2f0)+_0x3d76ed(0x311)+_0x3d76ed(0x12e)+_0x3d76ed(0x16f));return;}let _0x592d9c=-0xe66+0x629*-0x4+0x270a;for(const _0x101865 of _0x33b925){let _0x2bc93a=-0x25*0xb5+-0x679*0x2+0x271b;for(const _0x16d333 of _0x45f935){const _0x2fd756=await addLock(_0x101865,_0x16d333,_0x2fd71c);if(_0x2fd756)_0x2bc93a++;}_0x592d9c+=_0x2bc93a;}await sendText(_0x2f896d,_0x3d76ed(0x24b)+_0x592d9c+'/'+_0x45f935[_0x3d76ed(0x13a)]*_0x33b925[_0x3d76ed(0x13a)]+(_0x3d76ed(0x289)+'ies\x20to\x20you'+_0x3d76ed(0x139)+'connection'+_0x3d76ed(0x1c2))+_0x33b925['join'](',\x20'));return;}if(_0x17bab6===_0x3d76ed(0x173)){const _0x419f07=[];for(const _0x7cdf3 of _0x33b925){const _0x1ac32e=await listLocksForChat(_0x7cdf3);for(const _0x273f57 of _0x1ac32e)_0x419f07['push']({'chatJid':_0x7cdf3,..._0x273f57});}await sendText(_0x2f896d,'✔️\x20[lock]\x20l'+_0x3d76ed(0x146)+_0x419f07['length']+(_0x3d76ed(0x129)+_0x3d76ed(0x167)+'ult\x20connec'+'tion(s):\x20')+_0x33b925[_0x3d76ed(0x337)](',\x20'));if(!_0x419f07['length'])return;let _0x159c52='';for(const _0x14ba8a of _0x419f07){const _0x235ca9=_0x14ba8a[_0x3d76ed(0x283)]?new Date(_0x14ba8a[_0x3d76ed(0x283)]*(-0xdb8+0x11*0x209+0x5*-0x365))[_0x3d76ed(0x303)+'g']()[_0x3d76ed(0x328)](-0x6b*0x49+-0x6d4+-0xb*-0x365,0x1b4*0x6+-0x1*0x2456+0x1a28):'',_0x3ebaa8=_0x14ba8a[_0x3d76ed(0x30d)]===_0x3d76ed(0x249)?'⦿':_0x14ba8a['type']===_0x3d76ed(0x1c1)?'✶':'',_0x28a43f=_0x14ba8a[_0x3d76ed(0x30d)]===_0x3d76ed(0x249)?_0x3d76ed(0x2e0)+_0x14ba8a[_0x3d76ed(0x34e)]:_0x14ba8a[_0x3d76ed(0x34e)],_0x11d59b=_0x14ba8a['type']===_0x3d76ed(0x249)&&_0x14ba8a['is_valid_r'+_0x3d76ed(0x29a)]===0x24e4+-0xbdf*0x3+0x6d*-0x3?'\x20(INVALID\x20'+_0x3d76ed(0x13c):'',_0xc3000b=_0x14ba8a[_0x3d76ed(0x221)]+':'+_0x14ba8a['id']+'.\x20'+(_0x3ebaa8?_0x3ebaa8+'\x20':'')+_0x28a43f+_0x11d59b+'\x20'+(_0x235ca9?'('+_0x235ca9+')':'')+'\x0a';(_0x159c52+_0xc3000b)[_0x3d76ed(0x13a)]>0x1d*0x133+-0x652*-0x1+-0x233d&&(await sendText(_0x2f896d,_0x159c52[_0x3d76ed(0x2d6)]()),_0x159c52=''),_0x159c52+=_0xc3000b;}if(_0x159c52[_0x3d76ed(0x2d6)]())await sendText(_0x2f896d,_0x159c52[_0x3d76ed(0x2d6)]());return;}if([_0x3d76ed(0x11b),_0x3d76ed(0x211),_0x3d76ed(0x305),_0x3d76ed(0x13b),_0x3d76ed(0x305)][_0x3d76ed(0x294)](_0x17bab6)){const {parts:_0x280132}=parseUnlockCommandOneLine(_0xf763fe||_0x4351a8);if(!_0x280132?.[_0x3d76ed(0x13a)]){await sendText(_0x2f896d,'❌\x20Usage\x20(g'+_0x3d76ed(0x2f0)+':\x20unlock\x201'+_0x3d76ed(0x26d)+_0x3d76ed(0x253)+',phrase2');return;}const _0x2b95e1=new Map();for(const _0x243112 of _0x33b925){const _0x4a5104=await listLocksForChat(_0x243112);_0x2b95e1[_0x3d76ed(0x148)](_0x243112,_0x4a5104||[]);}let _0x40cae0=-0x3*-0x31d+0xe2*0x2b+-0x2f4d;for(const _0x1a9b67 of _0x280132){if(!_0x1a9b67)continue;if(/^\d+$/[_0x3d76ed(0x121)](_0x1a9b67)){for(const [_0x13a612,_0x1a4388]of _0x2b95e1[_0x3d76ed(0x32c)]()){if(_0x1a4388[_0x3d76ed(0x184)](_0x1d5953=>String(_0x1d5953['id'])===_0x1a9b67)){const _0x1b785=await deleteLockById(_0x13a612,_0x1a9b67);if(_0x1b785)_0x40cae0+=_0x1b785;}}continue;}for(const _0x56badb of _0x33b925){const _0x33c6bc=await deleteLockByPhrase(_0x56badb,_0x1a9b67);if(_0x33c6bc)_0x40cae0+=_0x33c6bc;}}await sendText(_0x2f896d,'✔️\x20Deleted\x20'+_0x40cae0+'/'+_0x280132[_0x3d76ed(0x13a)]+(_0x3d76ed(0x307)+_0x3d76ed(0x237)+_0x3d76ed(0x1e7)+_0x3d76ed(0x1fa)+':\x20')+_0x33b925['join'](',\x20'));return;}if(_0x17bab6===_0x3d76ed(0x2cd)||_0x17bab6===_0x3d76ed(0x186)||_0x17bab6===_0x3d76ed(0x1eb)){try{let _0x64e668=-0xbf*0x2f+-0xf11+0xba*0x45;for(const _0x4e8113 of _0x33b925){const _0x5846f4=await deleteAllLocksForChat(_0x4e8113);_0x64e668+=_0x5846f4||-0x1*-0x225a+0x3d4*-0x7+0x78e*-0x1;}await sendText(_0x2f896d,_0x3d76ed(0x200)+_0x64e668+(_0x3d76ed(0x307)+'rom\x20your\x20d'+_0x3d76ed(0x1e7)+_0x3d76ed(0x1fa)+':\x20')+_0x33b925['join'](',\x20'));}catch(_0x492e4d){warn(_0x3d76ed(0x322)+_0x3d76ed(0x1ae)+_0x3d76ed(0x1e2)+_0x33b925[_0x3d76ed(0x337)](',\x20')+':\x20'+(_0x492e4d?.[_0x3d76ed(0x21b)]||_0x492e4d)),await sendText(_0x2f896d,_0x3d76ed(0x244)+_0x3d76ed(0x1f1)+_0x3d76ed(0x30a)+_0x3d76ed(0x1ce)+'t\x20connecti'+_0x3d76ed(0x256)+_0x33b925[_0x3d76ed(0x337)](',\x20'));}return;}if(_0x17bab6===_0x3d76ed(0x28a)){const _0x4503bd=(_0xf763fe||_0x4351a8||'')[_0x3d76ed(0x21c)](/\r?\n/)[-0x2*0x78a+0x8b*0x42+-0xa61*0x2]['trim'](),{left:_0x11861c}=splitRestForGp(_0x4503bd[_0x3d76ed(0x25f)](/^\/?locknotify\b/i,'')[_0x3d76ed(0x2d6)]()),_0x36c8d7=(_0x11861c||'')[_0x3d76ed(0x281)+'e']();if(!_0x36c8d7[_0x3d76ed(0x294)]('on')&&!_0x36c8d7[_0x3d76ed(0x294)](_0x3d76ed(0x1fb))){await sendText(_0x2f896d,_0x3d76ed(0x2ef)+_0x3d76ed(0x2f0)+_0x3d76ed(0x126)+_0x3d76ed(0x327)+_0x3d76ed(0x20e)+'es\x20lock\x20no'+_0x3d76ed(0x23d)+_0x3d76ed(0x144)+'\x20DEFAULT\x20c'+'onnection('+_0x3d76ed(0x2a3));return;}const _0x4e448=_0x36c8d7['includes']('on')?'on':'off';let _0x4c3078=-0xf21*-0x2+0x7*0x245+-0x2e25;for(const _0x3c2af5 of _0x33b925){const _0x1f1035=await setLockNotify(_0x3c2af5,_0x4e448==='on');if(_0x1f1035)_0x4c3078++;}await sendText(_0x2f896d,_0x3d76ed(0x1bf)+_0x3d76ed(0x15d)+_0x4e448+_0x3d76ed(0x31e)+_0x4c3078+'/'+_0x33b925[_0x3d76ed(0x13a)]+(_0x3d76ed(0x31c)+'onnection('+'s).'));return;}return;}}if(_0x585264){if(!CFG[_0x3d76ed(0x203)+_0x3d76ed(0x2eb)])return;if(_0x260bbe[_0x3d76ed(0x34b)][_0x3d76ed(0x264)])return;if(_0x16814f)return;const _0x4b385a=_0xa47e8e,_0x550177=extractTextFromMessage(_0x260bbe);if(!_0x550177)return;const _0x2e97d4=normalizeForMatch(String(_0x550177||''))[_0x3d76ed(0x281)+'e'](),_0x3aa73c=await listLocksForChat(_0x4b385a);if(!_0x3aa73c||!_0x3aa73c[_0x3d76ed(0x13a)])return;const _0x42c4ae=_0x3aa73c[_0x3d76ed(0x1d0)](_0x365637=>!_0x365637[_0x3d76ed(0x30d)]||_0x365637['type']==='normal'),_0x40ef4d=_0x3aa73c[_0x3d76ed(0x1d0)](_0x198167=>_0x198167[_0x3d76ed(0x30d)]===_0x3d76ed(0x1c1)),_0x40e39f=_0x3aa73c['filter'](_0x2407d7=>_0x2407d7[_0x3d76ed(0x30d)]===_0x3d76ed(0x249)||_0x2407d7[_0x3d76ed(0x30d)]==='invalid_re'+_0x3d76ed(0x127)),_0x2a5447=new Set(),_0x509da9=new Set();if(_0x42c4ae[_0x3d76ed(0x13a)]>-0x1837*-0x1+-0x9*0x121+0xe*-0x101){const _0xf17f3c=_0x42c4ae[_0x3d76ed(0x300)](_0x22ba7c=>normalizeForMatch(String(_0x22ba7c[_0x3d76ed(0x34e)]||'')))[_0x3d76ed(0x1d0)](Boolean),_0x700105=_0xf17f3c[_0x3d76ed(0x337)]('\x00');let _0x3933d5;const _0x4b0d72=ahoCache['get'](_0x4b385a);if(_0x4b0d72&&_0x4b0d72[_0x3d76ed(0x239)+'Keywords']===_0x700105&&_0x4b0d72['aho'])_0x3933d5=_0x4b0d72[_0x3d76ed(0x313)];else try{_0x3933d5=new AhoCorasick(_0xf17f3c),ahoCache[_0x3d76ed(0x148)](_0x4b385a,{'serializedKeywords':_0x700105,'aho':_0x3933d5});}catch(_0x244762){warn(_0x3d76ed(0x216)+'Corasick\x20b'+'uild\x20faile'+_0x3d76ed(0x1f5)+_0x4b385a+':\x20'+(_0x244762?.[_0x3d76ed(0x21b)]||_0x244762)),_0x3933d5=null;}if(_0x3933d5)try{const _0x23c2f9=_0x3933d5[_0x3d76ed(0x22c)](_0x2e97d4);for(const _0x25f832 of _0x23c2f9){const _0x4e9885=_0x25f832[_0x3d76ed(0x1df)],_0x24cd04=_0x25f832[_0x3d76ed(0x291)],_0x4d24a5=_0x24cd04+_0x4e9885[_0x3d76ed(0x13a)],_0x4b5e00=_0x24cd04===-0x229+0x1*-0x105a+-0x1*-0x1283||!/\w/[_0x3d76ed(0x121)](_0x2e97d4[_0x24cd04-(-0x35*0xb3+0x1*-0x1229+-0x3739*-0x1)]),_0x2f1c92=_0x4d24a5===_0x2e97d4[_0x3d76ed(0x13a)]||!/\w/['test'](_0x2e97d4[_0x4d24a5]);if(_0x4b5e00&&_0x2f1c92)for(const _0x390bd4 of _0x42c4ae){const _0x140878=normalizeForMatch(String(_0x390bd4['phrase']||''));if(_0x140878===_0x4e9885)try{const _0x1dcec4=wholeWordRegexForPhrase(_0x140878);_0x1dcec4[_0x3d76ed(0x121)](_0x2e97d4)&&(_0x2a5447['add'](_0x390bd4['id']),_0x509da9[_0x3d76ed(0x135)](_0x390bd4[_0x3d76ed(0x34e)]));}catch(_0x412df2){_0x2a5447[_0x3d76ed(0x135)](_0x390bd4['id']),_0x509da9[_0x3d76ed(0x135)](_0x390bd4[_0x3d76ed(0x34e)]);}}else for(const _0x329945 of _0x42c4ae){try{const _0x4b0215=wholeWordRegexForPhrase(normalizeForMatch(String(_0x329945[_0x3d76ed(0x34e)]||'')));_0x4b0215[_0x3d76ed(0x121)](_0x2e97d4)&&(_0x2a5447[_0x3d76ed(0x135)](_0x329945['id']),_0x509da9[_0x3d76ed(0x135)](_0x329945[_0x3d76ed(0x34e)]));}catch(_0x3d4cf7){}}}}catch(_0x1a3547){warn(_0x3d76ed(0x216)+'Corasick\x20s'+'earch\x20fail'+_0x3d76ed(0x161)+(_0x1a3547?.['message']||_0x1a3547));for(const _0x267469 of _0x42c4ae){try{const _0x1a02f6=wholeWordRegexForPhrase(normalizeForMatch(String(_0x267469[_0x3d76ed(0x34e)]||'')));_0x1a02f6['test'](_0x2e97d4)&&(_0x2a5447[_0x3d76ed(0x135)](_0x267469['id']),_0x509da9[_0x3d76ed(0x135)](_0x267469[_0x3d76ed(0x34e)]));}catch(_0x4d96d5){}}}else for(const _0xeb40de of _0x42c4ae){try{const _0x3b403c=wholeWordRegexForPhrase(normalizeForMatch(String(_0xeb40de[_0x3d76ed(0x34e)]||'')));_0x3b403c['test'](_0x2e97d4)&&(_0x2a5447[_0x3d76ed(0x135)](_0xeb40de['id']),_0x509da9[_0x3d76ed(0x135)](_0xeb40de[_0x3d76ed(0x34e)]));}catch(_0x59e811){}}}if(_0x40ef4d[_0x3d76ed(0x13a)]>-0x1*-0x128c+-0x20dc+0xe50)for(const _0x158a8c of _0x40ef4d){try{const _0x46559f=wildcardToRegex(String(_0x158a8c[_0x3d76ed(0x34e)]||''));_0x46559f[_0x3d76ed(0x121)](_0x2e97d4)&&(_0x2a5447[_0x3d76ed(0x135)](_0x158a8c['id']),_0x509da9[_0x3d76ed(0x135)](_0x158a8c['phrase']));}catch(_0x3453c4){warn(_0x3d76ed(0x1b4)+_0x3d76ed(0x1ca)+_0x3d76ed(0x1af)+'='+_0x158a8c['id']+'\x20phrase=\x22'+_0x158a8c[_0x3d76ed(0x34e)]+_0x3d76ed(0x34a)+(_0x3453c4?.[_0x3d76ed(0x21b)]||_0x3453c4));}}if(_0x40e39f[_0x3d76ed(0x13a)]>-0x362*-0x8+0x1d04+-0xe05*0x4)for(const _0x233e45 of _0x40e39f){try{if(_0x233e45['is_valid_r'+_0x3d76ed(0x29a)]===-0x3*0x17f+-0x187b+-0x67*-0x48){warn('[lock]\x20ski'+'pping\x20inva'+'lid\x20stored'+_0x3d76ed(0x207)+_0x233e45['id']+_0x3d76ed(0x262)+_0x233e45['phrase']+'\x22');continue;}const _0x38d653=new RegExp(_0x233e45[_0x3d76ed(0x34e)],'iu');_0x38d653[_0x3d76ed(0x121)](_0x2e97d4)&&(_0x2a5447[_0x3d76ed(0x135)](_0x233e45['id']),_0x509da9[_0x3d76ed(0x135)](_0x3d76ed(0x2e0)+_0x233e45['phrase']));}catch(_0x3455bc){warn(_0x3d76ed(0x1b4)+_0x3d76ed(0x259)+'d\x20regex\x20fo'+'r\x20id='+_0x233e45['id']+'\x20phrase=\x22'+_0x233e45['phrase']+_0x3d76ed(0x34a)+(_0x3455bc?.['message']||_0x3455bc));try{await db[_0x3d76ed(0x25d)](_0x3d76ed(0x232)+_0x3d76ed(0x1a0)+_0x3d76ed(0x1d5)+_0x3d76ed(0x1cb)+_0x3d76ed(0x1e8),[_0x233e45['id']]);}catch(_0x1949d0){}}}if(_0x2a5447[_0x3d76ed(0x133)]>0x2506+0x2b*0xb+-0x26df)try{try{const _0x5e5844=await getLockNotify(_0x4b385a)[_0x3d76ed(0x2dc)](()=>0xc*0xf+0x1*0x1548+-0x15fc);if(_0x5e5844)try{const _0x281531=await db['get'](_0x3d76ed(0x210)+'ue\x20FROM\x20de'+_0x3d76ed(0x164)+'\x20WHERE\x20key'+_0x3d76ed(0x2a1)+_0x3d76ed(0x2af));let _0x1e6d0d=_0x281531?.['value']||null;if(!_0x1e6d0d){const _0x11f592=getBotJid();_0x1e6d0d=_0x11f592||null;}if(_0x1e6d0d){const _0xd45fe6=Array[_0x3d76ed(0x20d)](_0x509da9)[_0x3d76ed(0x328)](-0x13d*-0x6+0x117*0x3+-0xab3,0x5*0x291+0x116*0x15+-0x3f5*0x9)[_0x3d76ed(0x337)](',\x20'),_0xca8971=_0x28de53||String(_0x2fd71c||'')[_0x3d76ed(0x21c)]('@')[-0x10*-0x122+-0x1458+0x8*0x47]||'unknown',_0x50dc43=String(_0x550177||'')[_0x3d76ed(0x2d6)](),_0x3770ba=_0x3d76ed(0x1da)+'ch\x20in\x20'+_0x4b385a+'\x20by\x20@'+_0xca8971+_0x3d76ed(0x242)+_0xd45fe6+'\x0aMessage:\x0a'+_0x50dc43;await sendText(_0x1e6d0d,_0x3770ba,_0x2fd71c?[_0x2fd71c]:[]);}}catch(_0x57639b){warn('[lock]\x20fai'+'led\x20to\x20sen'+_0x3d76ed(0x33a)+_0x3d76ed(0x1ea)+':\x20'+(_0x57639b?.[_0x3d76ed(0x21b)]||_0x57639b));}}catch(_0x2e35a3){warn(_0x3d76ed(0x32e)+_0x3d76ed(0x183)+_0x3d76ed(0x1f4)+':\x20'+(_0x2e35a3?.[_0x3d76ed(0x21b)]||_0x2e35a3));}enqueueDeletion(_0x260bbe);for(const _0x2e9998 of _0x2a5447){try{await db[_0x3d76ed(0x25d)](_0x3d76ed(0x232)+'ks\x20SET\x20hit'+_0x3d76ed(0x2a4)+_0x3d76ed(0x19a)+_0x3d76ed(0x1bc)+_0x3d76ed(0x1f9),[_0x2e9998]);}catch(_0x359deb){}}}catch(_0x2889a6){warn(_0x3d76ed(0x1cc)+_0x3d76ed(0x2fa)+_0x3d76ed(0x1db)+(_0x2889a6?.[_0x3d76ed(0x21b)]||_0x2889a6));}}}catch(_0x3ce5d6){error(_0x3ce5d6,'[lock]\x20han'+_0x3d76ed(0x1e5)+':\x20'+(_0x3ce5d6?.[_0x3d76ed(0x21b)]||_0x3ce5d6));}}export async function cleanup(){const _0x28e893=_0x4b08e3;shuttingDown=!![];for(const _0x4dccce of processedMessageKeys['values']())try{clearTimeout(_0x4dccce);}catch(_0x12383e){}processedMessageKeys[_0x28e893(0x11c)](),perChatQueue[_0x28e893(0x11c)](),perChatProcessing[_0x28e893(0x11c)](),activeChats=0x1*0x376+0x18fc+-0x1c72,botRef=null,sendApi=null,ahoCache[_0x28e893(0x11c)](),info(_0x28e893(0x34f)+_0x28e893(0x22e));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};