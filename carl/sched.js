const _0x4bbee4=_0x6554;(function(_0x4b9ca2,_0x22cdab){const _0x34c7c9=_0x6554,_0x406a15=_0x4b9ca2();while(!![]){try{const _0x113e44=parseInt(_0x34c7c9(0x2ba))/(0x101f*0x1+0x1*-0x6ad+0x1*-0x971)+parseInt(_0x34c7c9(0x2ee))/(-0x181*0x1+0x7db+-0x32c*0x2)*(-parseInt(_0x34c7c9(0x29a))/(-0x2507+-0x65e+0x39e*0xc))+parseInt(_0x34c7c9(0x1fd))/(0x1c6+0x691+-0x853)+-parseInt(_0x34c7c9(0x21a))/(-0x1f*-0xb5+-0x156e+0xf*-0x8)*(-parseInt(_0x34c7c9(0x1b3))/(0x141*0x1c+-0x16b9+-0xc5d))+-parseInt(_0x34c7c9(0x17f))/(-0xa40+-0x553+0xf9a)+-parseInt(_0x34c7c9(0x219))/(0x2*-0x773+0x2*0x649+-0x1*-0x25c)+-parseInt(_0x34c7c9(0x2a0))/(0x2549+0x1*0x12e3+-0x3823);if(_0x113e44===_0x22cdab)break;else _0x406a15['push'](_0x406a15['shift']());}catch(_0x70503a){_0x406a15['push'](_0x406a15['shift']());}}}(_0x4c32,0x8f380+-0x1e6b3+-0xf556));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x11e086 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';export const name=_0x4bbee4(0x99);export const version='2.4.0';export const priority=0x1344+0x2406+-0x1*0x36f5;export const commands=[_0x4bbee4(0x99),_0x4bbee4(0x1f2)];export const configKeys=[_0x4bbee4(0x23c)+_0x4bbee4(0x1e6)+_0x4bbee4(0x328),_0x4bbee4(0x1e2)+_0x4bbee4(0x135)+'NE','SCHED_SEND'+_0x4bbee4(0x152),_0x4bbee4(0x98)+_0x4bbee4(0x237)+'F_MS'];let botRef=null,sendApi=null,schedulerIntervalHandle=null,executorRunning=![],CHECK_INTERVAL_MS=(-0x1dc8*0x1+0x9c7+0x143d)*(0x3f*0x28+0x70d+0x5f*-0x23),DEFAULT_TIMEZONE='Africa/Nai'+_0x4bbee4(0x2f4),SEND_RETRIES=0x1afd+-0x1ca*0x13+0x704,INITIAL_BACKOFF_MS=0x233e+-0x1*0x229d+0x71*0x3;const MAX_DB_ATTEMPTS=-0x115*0x1b+-0xd*-0x209+-0x1*-0x2c5;function ensureArray(_0x5077eb){const _0x1eeb45=_0x4bbee4;if(!_0x5077eb)return[];if(Array[_0x1eeb45(0x25f)](_0x5077eb))return _0x5077eb;return[_0x5077eb];}function uniqArray(_0x3a409a){const _0x15eec2=_0x4bbee4,_0xaa5f5=new Set(),_0x3382b6=[];for(const _0x5a1777 of _0x3a409a||[]){const _0x4374b1=String(_0x5a1777||'')[_0x15eec2(0x1b7)]();if(!_0x4374b1)continue;!_0xaa5f5[_0x15eec2(0x10e)](_0x4374b1)&&(_0xaa5f5[_0x15eec2(0x221)](_0x4374b1),_0x3382b6[_0x15eec2(0x18d)](_0x4374b1));}return _0x3382b6;}async function tableExists(_0x127c80){const _0x399501=_0x4bbee4;try{const _0x99bd46=await db[_0x399501(0x1c5)](_0x399501(0x244)+_0x399501(0x149)+_0x399501(0x270)+_0x399501(0xae)+_0x399501(0x301)+_0x399501(0xa7),[_0x127c80]);return!!_0x99bd46;}catch(_0x308dfe){return warn(_0x399501(0x1f3)+_0x399501(0x2a9)+'error:\x20'+(_0x308dfe?.[_0x399501(0x317)]||_0x308dfe)),![];}}async function getTableColumns(_0x302814){const _0xf26bc4=_0x4bbee4;try{const _0x55e29a=await db[_0xf26bc4(0x2bd)](_0xf26bc4(0x22a)+_0xf26bc4(0x14d)+_0x302814+')');return(_0x55e29a||[])[_0xf26bc4(0xb1)](_0x18e5a9=>_0x18e5a9[_0xf26bc4(0x97)]);}catch(_0x7b1991){return warn(_0xf26bc4(0xb8)+_0xf26bc4(0x124)+_0xf26bc4(0x23b)+_0xf26bc4(0x9a)+_0x302814+':\x20'+(_0x7b1991?.['message']||_0x7b1991)),[];}}function resolveChatJidFromRow(_0x11006c){const _0xc0d412=_0x4bbee4,_0x39b477=[_0xc0d412(0x182),_0xc0d412(0x19e),_0xc0d412(0x2e7),_0xc0d412(0xea),_0xc0d412(0x177),_0xc0d412(0xc9),'target_jid'];for(const _0x635df3 of _0x39b477)if(_0x635df3 in _0x11006c&&_0x11006c[_0x635df3])return String(_0x11006c[_0x635df3]);for(const _0x82d6c5 of Object[_0xc0d412(0x1b2)](_0x11006c)){const _0x32200d=_0x11006c[_0x82d6c5];if(typeof _0x32200d===_0xc0d412(0x2aa)&&_0x32200d['includes']('@'))return _0x32200d;}return null;}function resolveMessageFromRow(_0x25df08){const _0x28b696=_0x4bbee4,_0x514004=[_0x28b696(0x317),_0x28b696(0x1e4),_0x28b696(0x1e7),_0x28b696(0xe1),_0x28b696(0x2a7)];for(const _0x32c9ff of _0x514004)if(_0x32c9ff in _0x25df08&&_0x25df08[_0x32c9ff]!=null)return String(_0x25df08[_0x32c9ff]);for(const _0x41ec12 of Object[_0x28b696(0x1b2)](_0x25df08)){if(typeof _0x25df08[_0x41ec12]==='string'&&_0x25df08[_0x41ec12][_0x28b696(0x198)]>0x7f6*-0x4+-0x1*0x16c9+0x36a1*0x1&&!_0x25df08[_0x41ec12][_0x28b696(0x1cf)]('@'))return _0x25df08[_0x41ec12];}return'';}function resolveWhenFromRow(_0x3c8422){const _0x236f16=_0x4bbee4,_0x25393f=[_0x236f16(0x1f7),_0x236f16(0x2a6),'sendat',_0x236f16(0x1b8),'timestamp','ts',_0x236f16(0x294)];for(const _0x17ce58 of _0x25393f){if(_0x17ce58 in _0x3c8422&&_0x3c8422[_0x17ce58]){const _0x283e3a=Number(_0x3c8422[_0x17ce58]);if(!Number[_0x236f16(0x255)](_0x283e3a)&&_0x283e3a>-0x428c0*0x1210+-0x394ac910+0xc0059f10)return{'send_at':_0x283e3a};}}const _0x1fba84=[_0x236f16(0x168),_0x236f16(0x300),_0x236f16(0x33d)+'ime',_0x236f16(0x1ec)+'time'];for(const _0x499dcd of _0x1fba84){if(_0x499dcd in _0x3c8422&&_0x3c8422[_0x499dcd]){const _0x3ce218=String(_0x3c8422[_0x499dcd])[_0x236f16(0x1b7)]();if(/^\d{1,2}:\d{2}$/[_0x236f16(0xda)](_0x3ce218))return{'time':_0x3ce218};}}return{'time':null,'send_at':null};}function _0x4c32(){const _0x48422e=['oUserJid','[sched]\x20cr','LE\x20IF\x20NOT\x20','\x20<number>\x20',',\x20time,\x20se','normalizeT','ted\x20â€”\x20migr','xample:\x0asc','-DDTHH:mm>','KEY\x20AUTOIN','ommandPM\x20e','chat','hedules\x20ta','bling\x20sche','ler\x20error:','\x20->\x20','t_sent\x20INT','ewlines\x20pr','ne;\x20old\x20ta','291669XOncCN','unsupporte',')\x20id:','chat_jid','tempt\x20INTE','`\x0aâ€£\x20Change','\x20daily,\x20`n','nfig\x20refre','=\x20OFF;','ndler\x20erro','s\x20at\x20given','\x0a\x20\x20\x20\x20\x20\x20\x20\x20l','ble\x20error\x20','last_attem','push','\x20when:','iled:\x20','UPDATE\x20sch','\x20\x20\x20\x20\x20\x20\x20\x20cr','c.\x0a\x0a>\x20*sch','mMe)','\x20|\x20all>`\x0aâ€£','.\x20Will\x20ret','parse_fail','original\x20n','length','tempts\x20INT','No\x20changes','[sched]\x20ad','\x20\x20\x20);\x0a\x20\x20\x20\x20','at_jid)\x20DO','chatid','ine\x20when\x20m','val:\x20`n=1`','th\x20/setdef','toSeconds','\x20default\x20c','xtMessage','le*\x20`<numb','list','ow\x20error:\x20','REATE\x20TABL','of\x20a\x20sched','not\x20availa','hat_jid);','d\x20to\x20backu','nd_attempt','unrecovera','all\x20schedu','INTEGER\x20DE','\x20\x20\x20\x20\x20\x20\x20\x20se','keys','1065090VVcfoP','quency.','match','attempts,\x20','trim','send','there\x0amore','ple\x20schedu','\x20last_sent','[sched]\x20PM','nutes)','empt\x20#','les\x20WHERE\x20','es.\x0a\x0a>\x20*sc','or\x20max\x20att','n(s).\x20Set\x20','r,...|all>','EXISTS\x20sch','get','pdate\x20hand','INTEGER\x0a\x20\x20','e\x20#','ed\x20once\x20<H','[sched]\x20Un','quency,\x20ti','no\x20sendApi','split','send_attem','includes','\x203\x20OR\x20sche','d\x20last_att','from','key','\x20id\x20ASC','zoneName','edule.','jid|all>','s)\x20across\x20','HH:mm',':\x20\x22','pdate\x20obse','DATETIME_M','dules_new\x20','SELECT\x20*\x20F','s):\x0a','[sched]\x20se','\x20updated\x20t','SCHED_DEFA','livery\x20per','msg','hed\x20freque','K_INTERVAL','text','connection','findings','in\x20N\x20hours','ble','scheduled_','No\x20valid\x20i','hasSame','\x22.\x20Use\x20gp:','ialize\x20req','ed\x20add\x20<HH','schedule','[sched]\x20ta','failed:\x20','reason','umber>\x20<HH','send_at','ATE\x20TABLE\x20','\x20?,\x20?,\x20?)','imageMessa','1\x20ORDER\x20BY','T,\x0a\x20\x20\x20\x20\x20\x20\x20','2372500nPimuZ','when','ftime(\x27%s\x27','w\x27))\x0a\x20\x20\x20\x20\x20','mber,numbe','\x20\x20\x20enabled','ommandGrou','\x20);','\x20error:\x20','isInteger','[sched]\x20No','TEXT\x0a\x20\x20\x20\x20\x20','\x20or\x20on\x20nex','\x20\x20\x20\x20\x20\x20\x20cha','t\x20required',',\x0a\x20\x20','lizeExisti','ates)','sage...>','ttempt\x20col','frequency','moveSchedu','essage\x20TEX','isValid','group/defa','e\x20or\x20multi','toMillis','\x20disabled\x20','3410160sWynta','5qcczmi','[sched]\x20in','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','cy\x20<number','ias|jid|al','time\x20TEXT,','timestamp','add','delete:\x20','uld\x20not\x20ad','\x20\x20\x20\x20enable','fromMillis','â€£\x20One-off\x20','join','_settings\x20','toISO','PRAGMA\x20tab','s).\x20gp:<al','plies\x20(fro','weekday','TEGER,\x0a\x20\x20\x20','s\x20found\x20fo','d\x20time\x20for','H:mm>\x20[Nda','caption','ezone\x20FROM','once','ALTER\x20TABL','every','IAL_BACKOF','*\x20`<number','INSERT\x20INT','F_MS','mns\x20error\x20','SCHED_CHEC','MN\x20last_at','update\x20sch','s/days/min','nnot\x20inser','no\x20send\x20ta','itialized\x20','ek:','SELECT\x20nam','singleSele','include\x20gp','\x20for\x20id=','\x20\x20\x20\x20creato','d\x20removed\x20','*sched\x20lis','slice','Could\x20not\x20','=\x20?','edules\x20SET','r_settings','eign_keys\x20','r\x20id=','TEXT','participan','d|all>\x20inl','isNaN','r:\x20','1\x20daily,\x20n','mat\x20for\x20ed','sureSchema','es\x20created','FAULT\x20(str','\x20time.\x0a\x0a>\x20','eator_jid)','ed\x20edit*\x20`','isArray','livered\x20on','aged\x20conne','ttempts\x20co','Deleted\x20','ge...>`\x0aâ€£\x20','\x20?\x20ORDER\x20B','ndexes\x20pro','targets.','faults\x20as\x20','d\x20send_att','th:','trimEnd','one-off\x20id','not\x20found','CREATE\x20TAB','ULL','ite_master','ENT','O\x20schedule','chat_jid\x20=','toLocaleSt','author','db\x20delete\x20','\x20failed:\x20','ttonId','essage.\x0a','ble\x20for\x20re','ncy\x20TEXT\x20D','requested\x20','\x20id\x20INTEGE','s\x20RENAME\x20T','FAULT\x200','creator','padStart','toLowerCas','rror:\x20','\x20freq:','\x20<number>','SCHED_SEND','>`\x20`<messa','\x20made.','_jid,\x20enab','.update','\x20|\x20number,','`<HH:mm\x20|\x20','lastID','EX\x20IF\x20NOT\x20','s\x20WHERE\x20id','sendMessag','\x20\x20\x20\x20\x20creat','>\x20*sched\x20o','seMessage','time_at','ur\x20default','getUniqueJ','ys]\x20<messa','ring',',\x20?,\x20?,\x20?,','21JFxguH','daily','shift','able\x20(expl','ys:','Failed\x20to\x20','1708605wOMtDR','utes>\x20<mes','fromMe','ying.','chatJid','\x20chat:','sendAt','value','\x20\x20\x20\x20freque','bleExists\x20','string','ne\x20TEXT,\x0a\x20','T\x20NOT\x20NULL','adAndNorma','remoteJid','ed\x20edit\x20<n','ponseMessa','ULT\x200,\x0a\x20\x20\x20','TEXT\x20DEFAU','ed,\x20schedu','If\x20`Ndays`','default\x20wi','vided.\x20Usa','XISTS\x20sche','d|all>)','filter','593098RhGUBC','\x5c$&','as|jid|all','all','ys/minutes','set','gister\x20man','\x20|\x20YYYY-MM','d\x20INTEGER\x20','plus','heduler\x20st','\x20all','failed','enable\x20a\x20p','Message\x20er','sock','TEXT\x20NOT\x20N','for\x20defaul',')\x20VALUES\x20(','ndleSchedC','ed\x20listene','delete','\x20enabled:','\x20INTEGER,\x0a','function','o\x20recurrin','E\x20schedule','_chat\x20ON\x20s','e\x20from\x20DB;','CREMENT,\x0a\x20','MN\x20send_at','sent_at','delete\x201\x202','[sched]\x20ho','EFAULT\x20\x27da','ME\x20TO\x20sche','n\x20follow\x20t','ttempts\x20IN','ltChatJids','ast_attemp','\x20->\x20id:','\x20to\x20','[sched]\x20sc','=\x20ON;','startsWith','chat_id','s):\x20','gned\x20to\x20mi','<number|nu','ler_settin','k\x20failed','ily\x27,\x0a\x20\x20\x20\x20','87638VEaHoT','ed\x20disable','ed\x20schedul','_jid\x20=\x20?','\x0a\x20\x20\x20\x20\x20\x20CRE','s.\x0a\x0a>\x20*sch','robi','onnection(','available','\x20\x20\x20timezon','hed\x20delete','floor','rget\x20avail','eator_jid\x20','s_new\x20RENA','ge...>\x20\x20\x20(','o\x20one-off\x20','rarily\x20dis','hhmm','e=\x27table\x27\x20','ration\x20fai','hed).\x20Disa','at_jid\x20=\x20?','\x20?,\x20?)','fter\x20time\x20','last_sent','ROM\x20schedu','moveAllSch','\x20WHERE\x20id\x20','eduled\x20mes','[sched]\x20en','ror:\x20','opped','creator_ji','\x20available','ours|YYYY-','fallback','days','\x20messages\x20','DEFAULT\x201,','Usage:\x20sch','message','FAULT\x201','Schedule\x20#','one-off\x20fo','dScheduleR','LUES\x20(?,\x20?',',\x20last_sen','endsWith','reviously\x20','\x20found\x20acr','extendedTe','E\x20IF\x20NOT\x20E','(listenerM','\x20lines\x0agp:','dule.','iled\x20to\x20re','listRespon','_MS','arted\x20(ali','livered\x20re','ys]`\x20`<mes','ONFLICT(ch','utor\x20error','[sched]\x20on','setup\x20send','t\x20INTEGER,','ms\x20default','leFields\x20e','ame\x20line\x20a','enabled\x20=\x20','edit','startOf','eated\x20sche','INTEGER','replace','ll>','now','disabled\x20m','schedule_t','s).','attempt\x20IN','time.','PM\x20usage:\x20','\x20\x20\x20\x20timezo','ecutorTick','ecutor\x20ite','d_at)\x20VALU','led\x20messag','oss\x20reques','empt\x20colum','uled\x20messa','EGER\x20DEFAU','fig\x20regist','ime\x20inline','isCommand','ded\x20send_a','day','schedules_','led\x20for\x20id','without\x20de','resolve\x20gp',':\x20bot\x20JID\x20','AUTOINCREM','\x20Delete\x20on','HH:mm\x20|\x20YY','nce*\x20`<HH:','ection\x20upd','YY-MM-DDTH','>`\x0aâ€£\x20Tempo','@g.us','empts\x20reac','GER\x20DEFAUL','enable','day\x20+\x20Nday','uires\x20bot\x20','M-DDTHH:mm','tReloadCon','\x20NOT\x20NULL,','rval=','MM-DDTHH:m','bled\x20state','ed\x20add*\x20`<','\x20(chat_jid','roup\x20JID.','manently\x20(','at\x20','[sched]\x20cl','le\x20id=','\x20target(s)','name','SCHED_INIT','sched','for\x20','m>\x20gp:<ali','CREATE\x20IND','recurrence','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','all\x20or\x20a\x20g','end_at\x20INT','[sched]\x20Le','unknown','anaging\x20sc','id|all>','update\x20fre','[sched]\x20ex','AND\x20name=?','\x20frequency','owing\x20line','t_jid,\x20mes','s\x20ADD\x20COLU','mezone\x20TEX','>\x20<n>\x20\x20(n=','\x20WHERE\x20typ','d_time','\x20schedule(','map','M\x20schedule','schedule.\x20','peat\x20inter','\x20at\x20','buttonsRes','created_by','[sched]\x20ge','nnection.u','oss\x20your\x20d','one\x20error:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','[sched]\x20re','alias,\x20gp:','_schedules','sched\x20enab','help','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','[sched]\x20co','changes','ttempt\x20fai','ted\x20target','IF\x20NOT\x20EXI','gacy\x20sched','room','\x0amsg:\x0a','efaults.','ctReply','=2`\x20every\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20c','[sched]\x20id','instance','.)\x20gp:<ali','timezone','T\x201,\x0a\x20\x20\x20\x20\x20','indexOf','catch',',2,3\x20OR\x20sc','te\x20listene','recoverabl','EXISTS\x20idx','test','found\x20for\x20','\x20cycle.','selectedBu',',\x20timezone','datetime','ating\x20safe','body','ge:\x20sched\x20','p:<alias|j','ed_at\x20INTE','setZone','mn:\x20','ed\x20frequen','e\x20for\x20','EGER,\x0a\x20\x20\x20\x20','jid','conversati','update\x20ena','number','EY,\x0a\x20\x20\x20\x20\x20\x20','[sched]\x20fi','prepare','leByDBId\x20e','DELETE\x20FRO','duler_sett','\x20the\x20time\x20','|in\x20N\x20hour','ndStoredMa','solving\x20co','\x20failed\x20de','db_failed','[sched]\x20DB','Failed\x20for','ap\x20tables\x20','ge.\x0a\x0a>\x20*sc','dApi\x20','backup_','d,\x20message','disable','eserved.\x0a\x0a','IMARY\x20KEY\x20','tChatTimez','livered\x20an','every_n_da','les\x20for\x20to','nabled\x20INT','(id:','les','Please\x20pro','\x20all\x20gp:<a','admin\x20chec','has','=2\x20every\x202','ules\x20detec','Scheduled\x20','Message\x20ca','R\x20PRIMARY\x20','Api\x20(manag','lumn','|jid|all>',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','r_jid\x20TEXT','No\x20schedul','nnection\x20','r\x20defaults','sage,\x20time','weekly','pt,\x20create','rved\x20-\x20re-','er>`\x0aâ€£\x20Re-','parse\x20new\x20','Unsupporte','pts','tTableColu','ed\x20delete\x20','eanup\x20erro','ult\x20TZ','gp:<alias|','not-availa','selectedRo','ings\x20(\x0a\x20\x20\x20','type','TEGER\x20DEFA','run','stSchedule','d\x20to\x20remov','ge\x20text\x20(s','diff','status','STS\x20schedu','ULT_TIMEZO','ble\x20rename',',\x20send_at,','d\x20TEXT\x20PRI','created_at','\x20\x20\x20\x20);','\x20set\x20to\x20','nd\x20attempt','\x20=\x20?','or\x20on\x20foll','dules\x20tabl','vide\x20messa','zone','gration\x20do','\x0a);','ed\x20','\x20PRIMARY\x20K','\x20\x20\x20\x20\x20\x20\x20\x20en','e\x20TEXT\x0a\x20\x20\x20','[sched]\x20de','e\x20FROM\x20sql','wId','\x20is\x20provid','assign','le_info(','t*\x0aâ€£\x20View\x20','mm>`\x20`[Nda','hedules.\x20E','livery\x20att','_RETRIES','ðŸ“…\x20*SchedHe','d\x20for\x20conn','sage...>`\x0a','freshConfi','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','d\x20delete\x201','solveDefau','LT\x20\x27daily\x27','\x20ensure\x20fa','edules_new','led,\x20send_','[sched]\x20up','mezone,\x20cr','\x20\x20\x20\x20send_a','[sched]\x20li','g\x20at\x20',':00\x20Hello\x20','\x0a\x20\x20\x20\x20\x20\x20\x20VA','t\x20normaliz','t_jid\x20TEXT','exec','time','chedules(c','\x20days,\x20etc','forbidden'];_0x4c32=function(){return _0x48422e;};return _0x4c32();}async function readAndNormalizeExistingSchedules(){const _0x50d48e=_0x4bbee4;try{const _0x131a6f=await db[_0x50d48e(0x2bd)](_0x50d48e(0x1de)+_0x50d48e(0x308)+_0x50d48e(0x10a)),_0x27fee3=[];for(const _0x5ebe5a of _0x131a6f||[]){const _0x32f1c4=resolveChatJidFromRow(_0x5ebe5a)||'',_0x145208=resolveMessageFromRow(_0x5ebe5a)||'',_0x11c502=resolveWhenFromRow(_0x5ebe5a)||{};let _0x570d6f=_0x5ebe5a[_0x50d48e(0x211)]||_0x5ebe5a['freq']||_0x5ebe5a['repeat']||_0x5ebe5a[_0x50d48e(0x9d)]||_0x50d48e(0x29b);if(typeof _0x570d6f===_0x50d48e(0xed))_0x570d6f=_0x50d48e(0x106)+_0x50d48e(0x29e)+_0x570d6f;const _0x24d65b=_0x5ebe5a[_0x50d48e(0xd2)]||_0x5ebe5a['tz']||null,_0x5ea793=_0x5ebe5a[_0x50d48e(0x30f)+'d']||_0x5ebe5a[_0x50d48e(0xb7)]||_0x5ebe5a['author']||_0x5ebe5a[_0x50d48e(0x280)]||'';let _0x5209eb=Number(_0x5ebe5a['created_at']||_0x5ebe5a['ts']||_0x5ebe5a[_0x50d48e(0x220)]||-0x1c00+0x1b20+0xe0);if(!_0x5209eb)_0x5209eb=Math[_0x50d48e(0x2f9)](Date[_0x50d48e(0x33b)]()/(-0xe2d+0x228f+-0x107a));_0x27fee3[_0x50d48e(0x18d)]({'chat_jid':_0x32f1c4,'message':_0x145208,'time':_0x11c502['time']||null,'send_at':_0x11c502['send_at']||null,'frequency':_0x570d6f||_0x50d48e(0x29b),'timezone':_0x24d65b,'last_sent':Number(_0x5ebe5a[_0x50d48e(0x307)]||_0x5ebe5a[_0x50d48e(0x2d9)]||0x1*0x14e4+-0x322*0x1+-0x11c2)||-0x4*-0x60a+0xc43+0x1*-0x246b,'creator_jid':_0x5ea793||'','created_at':_0x5209eb});}return _0x27fee3;}catch(_0x1c136f){return warn(_0x50d48e(0xbd)+_0x50d48e(0x2ad)+_0x50d48e(0x20d)+'ngSchedule'+'s\x20failed:\x20'+(_0x1c136f?.['message']||_0x1c136f)),[];}}async function ensureSchema(){const _0xcacdca=_0x4bbee4,_0x5beed6={'id':'INTEGER\x20PR'+_0xcacdca(0x103)+_0xcacdca(0x7c)+_0xcacdca(0x271),'chat_jid':_0xcacdca(0x2ca)+_0xcacdca(0x26f),'message':'TEXT\x20NOT\x20N'+_0xcacdca(0x26f),'time':_0xcacdca(0x252),'send_at':_0xcacdca(0x338),'frequency':_0xcacdca(0x2b2)+_0xcacdca(0x15a),'timezone':_0xcacdca(0x252),'last_sent':'INTEGER','creator_jid':_0xcacdca(0x2ca)+_0xcacdca(0x26f),'enabled':_0xcacdca(0x1b0)+_0xcacdca(0x318),'send_attempts':'INTEGER\x20DE'+_0xcacdca(0x27f),'last_attempt':_0xcacdca(0x338),'created_at':_0xcacdca(0x1b0)+_0xcacdca(0x25b)+_0xcacdca(0x1ff)+',\x27now\x27))'};try{const _0x45bd50=await tableExists('schedules');if(!_0x45bd50){const _0xfe4247=Object['entries'](_0x5beed6)[_0xcacdca(0xb1)](([_0x3a3f2a,_0x36ff58])=>_0x3a3f2a+'\x20'+_0x36ff58)[_0xcacdca(0x227)](_0xcacdca(0x20c));await db[_0xcacdca(0x167)](_0xcacdca(0x26e)+'LE\x20schedul'+'es\x20(\x0a\x20\x20'+_0xfe4247+_0xcacdca(0x143));try{await db[_0xcacdca(0x167)](_0xcacdca(0x9c)+'EX\x20IF\x20NOT\x20'+_0xcacdca(0xd9)+'_schedules'+'_chat\x20ON\x20s'+'chedules(c'+_0xcacdca(0x1ab));}catch(_0x3a5260){}info('[sched]\x20cr'+'eated\x20cano'+'nical\x20sche'+_0xcacdca(0x13f)+'e'),await db[_0xcacdca(0x167)](_0xcacdca(0xc2)+_0xcacdca(0x1a8)+_0xcacdca(0x322)+_0xcacdca(0x2b7)+_0xcacdca(0xf3)+'ings\x20(\x0a\x20\x20\x20'+_0xcacdca(0x20a)+_0xcacdca(0x166)+_0xcacdca(0x145)+'EY,\x0a\x20\x20\x20\x20\x20\x20'+_0xcacdca(0x224)+_0xcacdca(0x2c2)+_0xcacdca(0x315)+_0xcacdca(0x157)+'\x20timezone\x20'+_0xcacdca(0x208)+_0xcacdca(0x19c)+'\x20\x20');return;}const _0x3b9bb3=await getTableColumns('schedules'),_0x2eda37=_0x3b9bb3[_0xcacdca(0x1cf)](_0xcacdca(0x182)),_0x1dc249=_0x3b9bb3[_0xcacdca(0x1cf)](_0xcacdca(0x317))||_0x3b9bb3['includes'](_0xcacdca(0x1e4))||_0x3b9bb3[_0xcacdca(0x1cf)](_0xcacdca(0xe1))||_0x3b9bb3[_0xcacdca(0x1cf)](_0xcacdca(0x1e7)),_0x1736e4=_0x3b9bb3[_0xcacdca(0x1cf)](_0xcacdca(0x30f)+'d')||_0x3b9bb3[_0xcacdca(0x1cf)](_0xcacdca(0xb7))||_0x3b9bb3[_0xcacdca(0x1cf)](_0xcacdca(0x275));if(_0x2eda37&&_0x1dc249&&_0x1736e4){if(!_0x3b9bb3[_0xcacdca(0x1cf)](_0xcacdca(0x1ce)+_0xcacdca(0x123)))try{await db[_0xcacdca(0x167)](_0xcacdca(0x235)+_0xcacdca(0x2d4)+_0xcacdca(0xab)+_0xcacdca(0x2d8)+_0xcacdca(0x199)+_0xcacdca(0x71)+'LT\x200'),info(_0xcacdca(0x19b)+_0xcacdca(0x75)+_0xcacdca(0x262)+_0xcacdca(0x115));}catch(_0x510fe8){warn(_0xcacdca(0xc3)+'uld\x20not\x20ad'+_0xcacdca(0x269)+'empts\x20colu'+_0xcacdca(0xe6)+(_0x510fe8?.['message']||_0x510fe8));}if(!_0x3b9bb3[_0xcacdca(0x1cf)]('last_attem'+'pt'))try{await db[_0xcacdca(0x167)]('ALTER\x20TABL'+_0xcacdca(0x2d4)+'s\x20ADD\x20COLU'+_0xcacdca(0x23d)+_0xcacdca(0x183)+'GER'),info(_0xcacdca(0x19b)+'ded\x20last_a'+_0xcacdca(0x210)+'umn');}catch(_0x489bb4){warn(_0xcacdca(0xc3)+_0xcacdca(0x223)+_0xcacdca(0x1d1)+_0xcacdca(0x6f)+'n:\x20'+(_0x489bb4?.[_0xcacdca(0x317)]||_0x489bb4));}try{await db[_0xcacdca(0x167)](_0xcacdca(0x9c)+_0xcacdca(0x28e)+_0xcacdca(0xd9)+_0xcacdca(0xbf)+_0xcacdca(0x2d5)+_0xcacdca(0x169)+'hat_jid);');}catch(_0xfced6c){}await db[_0xcacdca(0x167)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20C'+_0xcacdca(0x1a8)+_0xcacdca(0x322)+_0xcacdca(0x2b7)+_0xcacdca(0xf3)+_0xcacdca(0x12b)+'\x20\x20\x20\x20\x20\x20\x20cha'+_0xcacdca(0x166)+'\x20PRIMARY\x20K'+_0xcacdca(0xee)+_0xcacdca(0x224)+_0xcacdca(0x2c2)+'DEFAULT\x201,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20timezone\x20'+_0xcacdca(0x208)+_0xcacdca(0x19c)+'\x20\x20'),info(_0xcacdca(0x2e4)+_0xcacdca(0x178)+'ble\x20appear'+'s\x20canonica'+'l/adequate');return;}info(_0xcacdca(0xa1)+_0xcacdca(0xc8)+_0xcacdca(0x110)+_0xcacdca(0x172)+_0xcacdca(0xe0)+'ly');const _0x111e21=await readAndNormalizeExistingSchedules();await db[_0xcacdca(0x167)]('PRAGMA\x20for'+_0xcacdca(0x250)+_0xcacdca(0x187));try{await db[_0xcacdca(0x167)](_0xcacdca(0x26e)+'LE\x20IF\x20NOT\x20'+_0xcacdca(0x1c4)+_0xcacdca(0x15c)+_0xcacdca(0x9e)+_0xcacdca(0x27d)+_0xcacdca(0x113)+_0xcacdca(0x175)+'CREMENT,\x0a\x20'+_0xcacdca(0x20a)+_0xcacdca(0x166)+_0xcacdca(0x8b)+_0xcacdca(0x21c)+_0xcacdca(0x213)+_0xcacdca(0x2ac)+_0xcacdca(0x117)+_0xcacdca(0x21f)+_0xcacdca(0xbc)+_0xcacdca(0xa0)+'EGER,\x0a\x20\x20\x20\x20'+_0xcacdca(0x2a8)+_0xcacdca(0x27b)+_0xcacdca(0x2dc)+_0xcacdca(0x2ed)+_0xcacdca(0x69)+_0xcacdca(0x2ab)+'\x20\x20\x20\x20\x20\x20\x20las'+_0xcacdca(0x17c)+'EGER,\x0a\x20\x20\x20\x20'+_0xcacdca(0x248)+_0xcacdca(0x118)+_0xcacdca(0x8b)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20e'+_0xcacdca(0x108)+'EGER\x20DEFAU'+'LT\x201,\x0a\x20\x20\x20\x20'+_0xcacdca(0x160)+_0xcacdca(0x2df)+_0xcacdca(0x12d)+_0xcacdca(0x2b1)+'\x20\x20\x20\x20\x20last_'+_0xcacdca(0x33f)+_0xcacdca(0x22e)+_0xcacdca(0x291)+_0xcacdca(0xe4)+_0xcacdca(0x85)+'T\x20(strftim'+'e(\x27%s\x27,\x27no'+_0xcacdca(0x200)+_0xcacdca(0x204));}catch(_0x4e86f9){await db[_0xcacdca(0x167)](_0xcacdca(0x26e)+_0xcacdca(0x16e)+_0xcacdca(0x1c4)+_0xcacdca(0x15c)+_0xcacdca(0x9e)+'\x20id\x20INTEGE'+_0xcacdca(0x113)+_0xcacdca(0x175)+_0xcacdca(0x2d7)+_0xcacdca(0x20a)+_0xcacdca(0x166)+_0xcacdca(0x8b)+_0xcacdca(0x21c)+_0xcacdca(0x213)+_0xcacdca(0x2ac)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0xcacdca(0x21f)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+_0xcacdca(0xa0)+_0xcacdca(0xe9)+_0xcacdca(0x2a8)+'ncy\x20TEXT,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ti'+_0xcacdca(0xac)+_0xcacdca(0x1fc)+_0xcacdca(0x1bb)+_0xcacdca(0x2d1)+_0xcacdca(0x191)+_0xcacdca(0x2fb)+_0xcacdca(0x2ca)+'ULL,\x0a\x20\x20\x20\x20\x20'+_0xcacdca(0x202)+_0xcacdca(0x2d1)+_0xcacdca(0x1b1)+_0xcacdca(0x1ad)+'s\x20INTEGER,'+_0xcacdca(0x18a)+_0xcacdca(0x2e1)+_0xcacdca(0x330)+_0xcacdca(0xce)+'reated_at\x20'+_0xcacdca(0x1c7)+_0xcacdca(0x13a)),warn(_0xcacdca(0x16d)+_0xcacdca(0x337)+_0xcacdca(0x1dd)+_0xcacdca(0x79)+_0xcacdca(0x268)+_0xcacdca(0x312));}const _0x18b5aa=await db[_0xcacdca(0xf0)](_0xcacdca(0x239)+_0xcacdca(0x272)+'s_new\x20(cha'+_0xcacdca(0xaa)+_0xcacdca(0x11c)+_0xcacdca(0x137)+'\x20frequency'+',\x20timezone'+_0xcacdca(0x31d)+'t,\x20creator'+_0xcacdca(0x289)+_0xcacdca(0x15d)+_0xcacdca(0x1b6)+_0xcacdca(0x18c)+_0xcacdca(0x11e)+_0xcacdca(0x6c)+'ES\x20(?,\x20?,\x20'+'?,\x20?,\x20?,\x20?'+_0xcacdca(0x299)+_0xcacdca(0x1f9));try{for(const _0x1de969 of _0x111e21){try{await _0x18b5aa[_0xcacdca(0x12e)](_0x1de969[_0xcacdca(0x182)]||'',_0x1de969[_0xcacdca(0x317)]||'',_0x1de969['time']||null,_0x1de969[_0xcacdca(0x1f7)]||null,_0x1de969[_0xcacdca(0x211)]||_0xcacdca(0x29b),_0x1de969[_0xcacdca(0xd2)]||null,_0x1de969['last_sent']||-0x10a2+0x14d4*-0x1+0x2576,_0x1de969[_0xcacdca(0x30f)+'d']||'',-0x1*0x1471+-0xfdf+0xc1b*0x3,-0x142b+-0x10c1*0x2+0x35ad,null,_0x1de969[_0xcacdca(0x139)]||Math[_0xcacdca(0x2f9)](Date[_0xcacdca(0x33b)]()/(-0x656+0x1a3+-0x1*-0x89b)));}catch(_0x9b6149){warn('[sched]\x20ca'+_0xcacdca(0x240)+_0xcacdca(0x165)+_0xcacdca(0x2f0)+_0xcacdca(0xe8)+_0x1de969[_0xcacdca(0x182)]+':\x20'+(_0x9b6149?.['message']||_0x9b6149));}}}finally{try{await _0x18b5aa['finalize']();}catch(_0x465e8f){}}try{const _0x56a8ff=_0xcacdca(0x77)+_0xcacdca(0xff)+Math[_0xcacdca(0x2f9)](Date[_0xcacdca(0x33b)]()/(-0x5*0x217+-0x8a9+0x1704));await db[_0xcacdca(0x167)](_0xcacdca(0x235)+_0xcacdca(0x2d4)+_0xcacdca(0x27e)+'O\x20'+_0x56a8ff+';'),await db['exec'](_0xcacdca(0x235)+_0xcacdca(0x2d4)+_0xcacdca(0x2fc)+_0xcacdca(0x2dd)+'dules;');try{await db[_0xcacdca(0x167)]('CREATE\x20IND'+'EX\x20IF\x20NOT\x20'+_0xcacdca(0xd9)+'_schedules'+_0xcacdca(0x2d5)+_0xcacdca(0x169)+_0xcacdca(0x1ab));}catch(_0x270902){}info('[sched]\x20mi'+_0xcacdca(0x142)+_0xcacdca(0x17e)+_0xcacdca(0x136)+_0xcacdca(0x1ac)+'p');}catch(_0x59045d){warn('[sched]\x20sw'+_0xcacdca(0xfc)+_0xcacdca(0x1f4)+(_0x59045d?.['message']||_0x59045d));throw _0x59045d;}finally{await db[_0xcacdca(0x167)]('PRAGMA\x20for'+_0xcacdca(0x250)+_0xcacdca(0x2e5));}await db[_0xcacdca(0x167)](_0xcacdca(0x2f2)+_0xcacdca(0x1f8)+_0xcacdca(0xc7)+_0xcacdca(0x134)+_0xcacdca(0x2eb)+'gs\x20(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20chat_ji'+_0xcacdca(0x138)+'MARY\x20KEY,\x0a'+_0xcacdca(0x146)+'abled\x20INTE'+'GER\x20DEFAUL'+_0xcacdca(0xd3)+_0xcacdca(0x2f7)+_0xcacdca(0x147)+_0xcacdca(0x19c));}catch(_0x4dab23){error(_0x4dab23,_0xcacdca(0x30c)+_0xcacdca(0x259)+'\x20fatal');throw _0x4dab23;}}function refreshConfig(){const _0x220fda=_0x4bbee4;try{const _0x1f9451=getConfig()||{};CHECK_INTERVAL_MS=Number(_0x1f9451[_0x220fda(0x23c)+_0x220fda(0x1e6)+_0x220fda(0x328)]??CHECK_INTERVAL_MS),DEFAULT_TIMEZONE=_0x1f9451[_0x220fda(0x1e2)+'ULT_TIMEZO'+'NE']||DEFAULT_TIMEZONE,SEND_RETRIES=Number(_0x1f9451[_0x220fda(0x286)+'_RETRIES']??SEND_RETRIES),INITIAL_BACKOFF_MS=Number(_0x1f9451[_0x220fda(0x98)+_0x220fda(0x237)+_0x220fda(0x23a)]??INITIAL_BACKOFF_MS),info('[sched]\x20co'+_0x220fda(0x186)+'shed:\x20inte'+_0x220fda(0x8c)+CHECK_INTERVAL_MS+(_0x220fda(0x331)+'TZ=')+DEFAULT_TIMEZONE);}catch(_0x4cabc9){warn(_0x220fda(0xbd)+_0x220fda(0x156)+'g\x20error:\x20'+(_0x4cabc9?.[_0x220fda(0x317)]||_0x4cabc9));}}try{typeof hotReloadConfig===_0x4bbee4(0x2d2)&&hotReloadConfig((_0x1590d0=[])=>{const _0x2d76b2=_0x4bbee4;try{refreshConfig();}catch(_0xc97a7d){warn(_0x2d76b2(0x2db)+'tReload\x20ha'+_0x2d76b2(0x188)+_0x2d76b2(0x256)+(_0xc97a7d?.[_0x2d76b2(0x317)]||_0xc97a7d));}});}catch(_0x2163ba){warn(_0x4bbee4(0x2db)+_0x4bbee4(0x8a)+_0x4bbee4(0x72)+_0x4bbee4(0x302)+'led:\x20'+(_0x2163ba?.[_0x4bbee4(0x317)]||_0x2163ba));}refreshConfig();function tryBuildSendApiFromBot(_0x4861c1){const _0x227cb4=_0x4bbee4;if(!_0x4861c1)return null;if(typeof _0x4861c1[_0x227cb4(0x290)+'e']===_0x227cb4(0x2d2))return async(_0x138abe,_0x49db40)=>_0x4861c1[_0x227cb4(0x290)+'e'](_0x138abe,_0x49db40);else{if(_0x4861c1[_0x227cb4(0x2c9)]&&typeof _0x4861c1['sock']['sendMessag'+'e']===_0x227cb4(0x2d2))return async(_0x1a7e7e,_0x52f6e9)=>_0x4861c1[_0x227cb4(0x2c9)][_0x227cb4(0x290)+'e'](_0x1a7e7e,_0x52f6e9);}return null;}function setupSendApi(_0x585c36){const _0x1ab75c=_0x4bbee4;botRef=_0x585c36,sendApi=tryBuildSendApiFromBot(botRef),info('[sched]\x20se'+'tupSendApi'+'\x20done;\x20sen'+_0x1ab75c(0xfe)+(sendApi?_0x1ab75c(0x2f6):_0x1ab75c(0x129)+_0x1ab75c(0x1eb)));}async function performSend(_0x33e01c,_0x414d18){const _0xca73b7=_0x4bbee4,_0x2d35e6=_0x33e01c||null;if(!_0x2d35e6)throw new Error(_0xca73b7(0x241)+_0xca73b7(0x2fa)+_0xca73b7(0x29d)+'icit\x20targe'+_0xca73b7(0x20b)+')');if(typeof sendApi===_0xca73b7(0x2d2)){await sendApi(_0x2d35e6,_0x414d18);return;}if(botRef&&typeof botRef['sendMessag'+'e']===_0xca73b7(0x2d2)){await botRef[_0xca73b7(0x290)+'e'](_0x2d35e6,_0x414d18);return;}if(botRef&&botRef['sock']&&typeof botRef['sock'][_0xca73b7(0x290)+'e']===_0xca73b7(0x2d2)){await botRef[_0xca73b7(0x2c9)]['sendMessag'+'e'](_0x2d35e6,_0x414d18);return;}throw new Error(_0xca73b7(0x1cc)+_0xca73b7(0x310));}async function sendWithRetry(_0xc6e3e3,_0xb67fdf){const _0x4c8761=_0x4bbee4,_0x28547b=Number(SEND_RETRIES||-0xd*-0x55+-0xe8b+0xa3d);let _0x32207f=0x1*-0x2552+0x938+0x28e*0xb,_0x30617b=Number(INITIAL_BACKOFF_MS||-0x2012*-0x1+0x1*-0xf05+-0x5*0x305);while(_0x32207f<_0x28547b){try{return await performSend(_0xc6e3e3,_0xb67fdf),!![];}catch(_0x3369b1){_0x32207f++;const _0x2ef359=String(_0x3369b1?.[_0x4c8761(0x317)]||'')[_0x4c8761(0x282)+'e']()['includes']('rate')||_0x3369b1?.[_0x4c8761(0x133)]===-0x8*-0x323+0x54c+-0x1cb7*0x1;warn(_0x4c8761(0x1e0)+_0x4c8761(0x13c)+'\x20'+_0x32207f+_0x4c8761(0x277)+(_0x3369b1?.['message']||_0x3369b1));if(_0x32207f>=_0x28547b||!_0x2ef359)return![];await new Promise(_0x3179c5=>setTimeout(_0x3179c5,_0x30617b)),_0x30617b*=0x4a3*0x3+-0x17db+0x9f4;try{setupSendApi(botRef);}catch(_0xeb3e1c){}}}return![];}async function sendScheduledMessage(_0x12ceea){const _0x71c797=_0x4bbee4,{id:_0x1d87c7,chat_jid:_0x3e3c79,message:_0x5b5ca0}=_0x12ceea,_0x13619b={'text':_0x5b5ca0},_0x1c4909=Number(SEND_RETRIES||0x23d4+0x10d*0x2+-0x25eb);let _0x2de6da=-0x1*-0x235+-0x15fd+0x34c*0x6,_0x1d42ef=Number(INITIAL_BACKOFF_MS||0x28e+0x2669+-0x3*0xd01);while(_0x2de6da<_0x1c4909){_0x2de6da++;try{return await performSend(_0x3e3c79,_0x13619b),{'success':!![],'unrecoverable':![]};}catch(_0x6ccd8c){const _0x11340d=_0x6ccd8c?.[_0x71c797(0x317)]||String(_0x6ccd8c),_0x3c8f5f=_0x11340d[_0x71c797(0x282)+'e']()[_0x71c797(0x1cf)](_0x71c797(0x16b))||_0x6ccd8c?.['data']===0x8*-0x2b+-0x3*-0x26b+-0x3*0x172,_0x531884=_0x11340d[_0x71c797(0x282)+'e']()['includes'](_0x71c797(0x26d))||_0x6ccd8c?.['data']===0x59*-0x10+-0x19be+0x20e2;warn(_0x71c797(0x1e0)+_0x71c797(0x13c)+'\x20'+_0x2de6da+'/'+_0x1c4909+_0x71c797(0x247)+_0x1d87c7+'\x20failed:\x20'+_0x11340d);if(_0x3c8f5f||_0x531884)return error(_0x71c797(0x1ca)+_0x71c797(0xd8)+'e\x20error\x20fo'+_0x71c797(0x251)+_0x1d87c7+':\x20'+_0x11340d+('.\x20Not\x20retr'+_0x71c797(0x2a3))),{'success':![],'unrecoverable':!![]};if(_0x2de6da>=_0x1c4909)return error('[sched]\x20Fi'+'nal\x20send\x20a'+_0x71c797(0xc5)+_0x71c797(0x78)+'='+_0x1d87c7+'.'),{'success':![],'unrecoverable':![]};await new Promise(_0x994626=>setTimeout(_0x994626,_0x1d42ef)),_0x1d42ef*=-0x8fc+-0x1b74+-0x74a*-0x5;try{setupSendApi(botRef);}catch(_0x15bf52){}}}return{'success':![],'unrecoverable':![]};}function parseTimeToken(_0x14a36a,_0x27bc42=DEFAULT_TIMEZONE){const _0x1fff1f=_0x4bbee4;if(!_0x14a36a||typeof _0x14a36a!==_0x1fff1f(0x2aa))return null;const _0x5e56bb=_0x14a36a[_0x1fff1f(0x1b7)](),_0x35e83b=_0x5e56bb[_0x1fff1f(0x1b5)](/^in\s+(\d+)\s*(minute|min|minutes|m|hour|hours|hr|h|day|days|d)$/i);if(_0x35e83b){const _0x406d9b=Number(_0x35e83b[-0x1ec4+0x12*-0x86+-0x2831*-0x1]),_0x66d612=_0x35e83b[-0x1*0xd97+-0x28*-0x9f+-0xb3f][_0x1fff1f(0x282)+'e']();let _0x4d063e=DateTime[_0x1fff1f(0x33b)]()[_0x1fff1f(0xe5)](_0x27bc42);if(_0x66d612[_0x1fff1f(0x2e6)]('min')||_0x66d612==='m')_0x4d063e=_0x4d063e['plus']({'minutes':_0x406d9b});else{if(_0x66d612[_0x1fff1f(0x2e6)]('h')||_0x66d612[_0x1fff1f(0x2e6)]('hr'))_0x4d063e=_0x4d063e[_0x1fff1f(0x2c3)]({'hours':_0x406d9b});else{if(_0x66d612['startsWith']('d'))_0x4d063e=_0x4d063e[_0x1fff1f(0x2c3)]({'days':_0x406d9b});}}if(_0x4d063e['isValid'])return{'type':_0x1fff1f(0xdf),'dt':_0x4d063e};}if(/^\d{4}-\d{2}-\d{2}[ T]\d{1,2}:\d{2}$/['test'](_0x5e56bb)){const _0x53959e=_0x5e56bb[_0x1fff1f(0x339)]('\x20','T'),_0x1744c9=DateTime['fromISO'](_0x53959e,{'zone':_0x27bc42});if(_0x1744c9[_0x1fff1f(0x214)])return{'type':_0x1fff1f(0xdf),'dt':_0x1744c9};}if(/^\d{1,2}:\d{2}$/[_0x1fff1f(0xda)](_0x5e56bb)){const [_0x2f3be1,_0x6bb628]=_0x5e56bb[_0x1fff1f(0x1cd)](':')[_0x1fff1f(0xb1)](Number);if(Number[_0x1fff1f(0x206)](_0x2f3be1)&&Number[_0x1fff1f(0x206)](_0x6bb628)&&_0x2f3be1>=0x1095+-0x5*0x4ef+0x816&&_0x2f3be1<=0x154*0xe+0x636+0x13*-0x14d&&_0x6bb628>=-0x3e9+0x1de8+-0x19ff&&_0x6bb628<=0x6d1*0x2+0x128*0x16+-0x26d7)return{'type':'hhmm','hhmm':String(_0x2f3be1)[_0x1fff1f(0x281)](0x1c5f+-0xb*0x14b+0x4*-0x389,'0')+':'+String(_0x6bb628)[_0x1fff1f(0x281)](-0x23a9+-0xb13*0x1+0x2ebe,'0')};}return null;}function shouldSendSlot(_0x358dfc,_0x3d41b0){const _0x432e77=_0x4bbee4,_0x31e8df=_0x358dfc[_0x432e77(0x211)]||_0x432e77(0x29b),_0x587a2d=_0x358dfc[_0x432e77(0x307)]||-0x1*0xabb+-0x136*-0x1a+-0x21*0xa1,_0x49a528=_0x587a2d?DateTime[_0x432e77(0x225)](_0x587a2d*(-0x9ef+-0x9*-0x3fb+-0x192*0xe))[_0x432e77(0xe5)](_0x3d41b0[_0x432e77(0x141)]):null;if(!_0x49a528)return!![];if(_0x31e8df==='daily')return!_0x49a528[_0x432e77(0x1ee)](_0x3d41b0,_0x432e77(0x76));if(_0x31e8df===_0x432e77(0x11d))return _0x3d41b0[_0x432e77(0x132)](_0x49a528,_0x432e77(0x313))[_0x432e77(0x313)]>=-0xcb*0x7+0x14b1+-0xf1d;if(_0x31e8df[_0x432e77(0x2e6)](_0x432e77(0x106)+'ys:')){const _0x3376d8=parseInt(_0x31e8df[_0x432e77(0x1cd)](':')[0x17dc+-0x1a4f+0x274],0x10fa+-0x17ac+0x1af*0x4);if(isNaN(_0x3376d8)||_0x3376d8<0x1c33+0x1adf+0x25*-0x17d)return![];return _0x3d41b0['diff'](_0x49a528,_0x432e77(0x313))[_0x432e77(0x313)]>=_0x3376d8;}if(_0x31e8df['startsWith']('days_of_we'+_0x432e77(0x243))){const _0x4f6391=_0x31e8df[_0x432e77(0x1cd)](':')[0xd3d+0x52a+0x933*-0x2]['split'](',')[_0x432e77(0xb1)](_0x56e5d6=>parseInt(_0x56e5d6,-0x2089+-0xe92*0x1+0x2f25))[_0x432e77(0x2b9)](Boolean);return _0x4f6391[_0x432e77(0x1cf)](_0x3d41b0[_0x432e77(0x22d)])&&!_0x49a528[_0x432e77(0x1ee)](_0x3d41b0,_0x432e77(0x76));}if(_0x31e8df[_0x432e77(0x2e6)]('day_of_mon'+_0x432e77(0x26a))){const _0x5e5f63=parseInt(_0x31e8df['split'](':')[0x6d*-0x7+-0x21b8+0x24b4],0xb2d*-0x1+-0xea*0x8+0x1287);return _0x3d41b0[_0x432e77(0x76)]===_0x5e5f63&&!_0x49a528['hasSame'](_0x3d41b0,_0x432e77(0x76));}return![];}async function addScheduleRow(_0x161ec4){const _0x17a26c=_0x4bbee4;try{const _0x293244=await db[_0x17a26c(0x12e)](_0x17a26c(0x239)+_0x17a26c(0x272)+'s\x20(chat_ji'+_0x17a26c(0x100)+_0x17a26c(0x170)+'nd_at,\x20fre'+_0x17a26c(0x1cb)+_0x17a26c(0x15f)+_0x17a26c(0x25d)+_0x17a26c(0x164)+_0x17a26c(0x31c)+_0x17a26c(0x299)+_0x17a26c(0x305),[_0x161ec4[_0x17a26c(0x182)],_0x161ec4[_0x17a26c(0x317)],_0x161ec4[_0x17a26c(0x168)],_0x161ec4[_0x17a26c(0x1f7)],_0x161ec4[_0x17a26c(0x211)]||_0x17a26c(0x29b),_0x161ec4[_0x17a26c(0xd2)]||null,_0x161ec4[_0x17a26c(0x30f)+'d']]),_0x1388de=_0x293244?.[_0x17a26c(0x28d)]||null;return info(_0x17a26c(0x19b)+'ded\x20schedu'+_0x17a26c(0x95)+_0x1388de+'\x20chat='+_0x161ec4[_0x17a26c(0x182)]+'\x20time='+(_0x161ec4[_0x17a26c(0x168)]||_0x161ec4[_0x17a26c(0x1f7)])),_0x1388de;}catch(_0x564e5e){return warn(_0x17a26c(0x19b)+_0x17a26c(0x31b)+_0x17a26c(0x1a7)+(_0x564e5e?.[_0x17a26c(0x317)]||_0x564e5e)),null;}}async function listSchedulesForChat(_0xd992af){const _0x1712c9=_0x4bbee4;try{const _0x530545=await db[_0x1712c9(0x2bd)](_0x1712c9(0x1de)+_0x1712c9(0x308)+_0x1712c9(0x1bf)+_0x1712c9(0x273)+_0x1712c9(0x265)+'Y\x20id\x20ASC',[_0xd992af]);return _0x530545||[];}catch(_0x4a0efc){return warn(_0x1712c9(0x161)+_0x1712c9(0x12f)+'sForChat\x20e'+_0x1712c9(0x283)+(_0x4a0efc?.[_0x1712c9(0x317)]||_0x4a0efc)),[];}}async function removeScheduleByDBId(_0x185ea7){const _0x308d01=_0x4bbee4;try{const _0x19ff92=await db[_0x308d01(0x12e)](_0x308d01(0xf2)+_0x308d01(0xb2)+_0x308d01(0x28f)+'\x20=\x20?',[_0x185ea7]);return _0x19ff92?.['changes']?!![]:![];}catch(_0x1f71a5){return warn(_0x308d01(0xbd)+_0x308d01(0x212)+_0x308d01(0xf1)+'rror:\x20'+(_0x1f71a5?.[_0x308d01(0x317)]||_0x1f71a5)),![];}}async function removeAllSchedulesForChat(_0x3bdd1a){const _0x317784=_0x4bbee4;try{const _0x117b15=await db[_0x317784(0x12e)]('DELETE\x20FRO'+_0x317784(0xb2)+'s\x20WHERE\x20ch'+_0x317784(0x304),[_0x3bdd1a]);return _0x117b15?.[_0x317784(0xc4)]||-0x2079+-0x116b*-0x2+0x37*-0xb;}catch(_0x411b59){return warn(_0x317784(0xbd)+_0x317784(0x309)+'edulesForC'+'hat\x20error:'+'\x20'+(_0x411b59?.[_0x317784(0x317)]||_0x411b59)),-0xf2a+-0x12b8+0x21e2*0x1;}}async function updateScheduleFields(_0x320f39,_0x2a8250={}){const _0x5c9012=_0x4bbee4;try{const _0x424cee=[],_0x2170cd=[];for(const _0x5a74d1 of Object[_0x5c9012(0x1b2)](_0x2a8250)){_0x424cee[_0x5c9012(0x18d)](_0x5a74d1+_0x5c9012(0x13d)),_0x2170cd[_0x5c9012(0x18d)](_0x2a8250[_0x5a74d1]);}if(!_0x424cee[_0x5c9012(0x198)])return![];_0x2170cd['push'](_0x320f39);const _0x27ad07=_0x5c9012(0x190)+_0x5c9012(0x24e)+'\x20'+_0x424cee['join'](',\x20')+(_0x5c9012(0x30a)+_0x5c9012(0x24d)),_0x40b58a=await db[_0x5c9012(0x12e)](_0x27ad07,_0x2170cd);return _0x40b58a?.[_0x5c9012(0xc4)]?!![]:![];}catch(_0xef9db1){return warn(_0x5c9012(0x15e)+'dateSchedu'+_0x5c9012(0x332)+_0x5c9012(0x283)+(_0xef9db1?.['message']||_0xef9db1)),![];}}async function getChatTimezone(_0x3a57ca){const _0x47df67=_0x4bbee4;try{const _0x2ff79b=await db[_0x47df67(0x1c5)]('SELECT\x20tim'+_0x47df67(0x233)+'\x20scheduler'+_0x47df67(0x228)+'WHERE\x20chat'+_0x47df67(0x2f1),[_0x3a57ca]);return _0x2ff79b?.[_0x47df67(0xd2)]||null;}catch(_0x35dc78){return warn(_0x47df67(0xb8)+_0x47df67(0x104)+_0x47df67(0xbb)+'\x20'+(_0x35dc78?.[_0x47df67(0x317)]||_0x35dc78)),null;}}async function setChatTimezone(_0xd2edda,_0x5d5efe){const _0x37356a=_0x4bbee4;try{return await db['run']('INSERT\x20INT'+_0x37356a(0x272)+_0x37356a(0x24f)+_0x37356a(0x90)+_0x37356a(0xde)+_0x37356a(0x2cc)+'?,\x20?)\x20ON\x20C'+_0x37356a(0x32c)+_0x37356a(0x19d)+'\x20UPDATE\x20SE'+'T\x20timezone'+'=excluded.'+_0x37356a(0xd2),[_0xd2edda,_0x5d5efe]),!![];}catch(_0x1fb382){return warn(_0x37356a(0x1e0)+_0x37356a(0x104)+_0x37356a(0xbb)+'\x20'+(_0x1fb382?.[_0x37356a(0x317)]||_0x1fb382)),![];}}async function executorTick(){const _0x6c0bb=_0x4bbee4;if(executorRunning)return;executorRunning=!![];try{const _0x74ee4d=await db['all']('SELECT\x20*\x20F'+_0x6c0bb(0x308)+_0x6c0bb(0x1bf)+_0x6c0bb(0x334)+_0x6c0bb(0x1fb)+_0x6c0bb(0x1d4));if(!_0x74ee4d||_0x74ee4d['length']===-0xaa1+0x3fc+0x1*0x6a5)return;for(const _0x4b01f4 of _0x74ee4d){try{const _0x49f635=_0x4b01f4[_0x6c0bb(0xd2)]||await getChatTimezone(_0x4b01f4[_0x6c0bb(0x182)])||DEFAULT_TIMEZONE,_0x333a8d=DateTime['now']()[_0x6c0bb(0xe5)](_0x49f635),_0x380ab0=Math[_0x6c0bb(0x2f9)](_0x333a8d[_0x6c0bb(0x1a2)]());let _0x26c4dc=![],_0x22b6ed=![];if(_0x4b01f4[_0x6c0bb(0x1f7)]&&Number(_0x4b01f4[_0x6c0bb(0x1f7)])>0xa8*0x20+0x153d*0x1+0x3d7*-0xb)_0x22b6ed=!![],Number(_0x4b01f4[_0x6c0bb(0x1f7)])<=_0x380ab0&&(_0x26c4dc=!![]);else{if(_0x4b01f4[_0x6c0bb(0x168)]){const _0x3f3efb=_0x333a8d['toFormat'](_0x6c0bb(0x1d9));if(_0x3f3efb===_0x4b01f4['time']){const _0x1e7172={'id':_0x4b01f4['id'],'frequency':_0x4b01f4[_0x6c0bb(0x211)]||'daily','last_sent':_0x4b01f4[_0x6c0bb(0x307)]||0x1*-0x124+-0x5fc*0x2+-0x68e*-0x2};shouldSendSlot(_0x1e7172,_0x333a8d)&&(_0x26c4dc=!![]);}}}if(!_0x26c4dc)continue;const _0x1f88c5=await sendScheduledMessage(_0x4b01f4);if(_0x1f88c5['success']){if(_0x22b6ed){const _0x3d4bb4=await removeScheduleByDBId(_0x4b01f4['id']);_0x3d4bb4?info(_0x6c0bb(0x148)+_0x6c0bb(0x105)+_0x6c0bb(0x249)+_0x6c0bb(0x26c)+'='+_0x4b01f4['id']+_0x6c0bb(0x2e3)+_0x4b01f4[_0x6c0bb(0x182)]):(await updateScheduleFields(_0x4b01f4['id'],{'enabled':0x0,'last_sent':_0x380ab0}),warn('[sched]\x20de'+_0x6c0bb(0x260)+'e-off\x20id='+_0x4b01f4['id']+_0x6c0bb(0x2e3)+_0x4b01f4['chat_jid']+('\x20but\x20faile'+_0x6c0bb(0x130)+_0x6c0bb(0x2d6)+_0x6c0bb(0x218)+'instead')));}else await updateScheduleFields(_0x4b01f4['id'],{'last_sent':_0x380ab0,'send_attempts':0x0}),info(_0x6c0bb(0x148)+_0x6c0bb(0x32a)+'curring\x20id'+'='+_0x4b01f4['id']+_0x6c0bb(0x2e3)+_0x4b01f4['chat_jid']+_0x6c0bb(0xb5)+_0x4b01f4[_0x6c0bb(0x168)]+'\x20('+_0x49f635+')');}else{const _0x4ca8f8=(_0x4b01f4[_0x6c0bb(0x1ce)+_0x6c0bb(0x123)]||0xac2*-0x2+0x1*-0xd63+0x22e7)+(-0x144e+-0x1926+0x50d*0x9);_0x1f88c5[_0x6c0bb(0x1ae)+'ble']||_0x4ca8f8>=MAX_DB_ATTEMPTS?(error(_0x6c0bb(0xcf)+'='+_0x4b01f4['id']+('\x20failed\x20de'+_0x6c0bb(0x1e3)+_0x6c0bb(0x92)+_0x6c0bb(0x1ae)+_0x6c0bb(0x18b)+_0x6c0bb(0x1c1)+_0x6c0bb(0x84)+_0x6c0bb(0x303)+_0x6c0bb(0x179)+_0x6c0bb(0x325))),await updateScheduleFields(_0x4b01f4['id'],{'enabled':0x0,'last_attempt':_0x380ab0})):(warn(_0x6c0bb(0xcf)+'='+_0x4b01f4['id']+(_0x6c0bb(0xf8)+_0x6c0bb(0x151)+_0x6c0bb(0x1be))+_0x4ca8f8+(_0x6c0bb(0x195)+'ry\x20on\x20next'+_0x6c0bb(0xdc))),await updateScheduleFields(_0x4b01f4['id'],{'send_attempts':_0x4ca8f8,'last_attempt':_0x380ab0}));}}catch(_0x2e4d8a){warn(_0x6c0bb(0xa6)+_0x6c0bb(0x6b)+'m\x20error\x20fo'+_0x6c0bb(0x251)+_0x4b01f4['id']+':\x20'+(_0x2e4d8a?.[_0x6c0bb(0x317)]||_0x2e4d8a));}}}catch(_0x313710){error(_0x6c0bb(0xa6)+'ecutorTick'+_0x6c0bb(0x205)+(_0x313710?.['message']||_0x313710));}finally{executorRunning=![];}}function startSchedulerAligned(){const _0x76d982=_0x4bbee4;stopScheduler();const _0x5796e6=0x3ba2+0x10200+0x5342*-0x1-Date[_0x76d982(0x33b)]()%(-0x40*0x4cd+0xbd*-0xc+0x2267c);setTimeout(()=>{const _0x423855=_0x76d982;executorTick()['catch'](_0x5cddf4=>warn(_0x423855(0x21b)+'itial\x20exec'+_0x423855(0x32d)+':\x20'+(_0x5cddf4?.[_0x423855(0x317)]||_0x5cddf4))),schedulerIntervalHandle=setInterval(()=>{const _0x1b7bc8=_0x423855;executorTick()[_0x1b7bc8(0xd5)](_0x3138ce=>warn(_0x1b7bc8(0xa6)+_0x1b7bc8(0x6a)+_0x1b7bc8(0x205)+(_0x3138ce?.[_0x1b7bc8(0x317)]||_0x3138ce)));},CHECK_INTERVAL_MS),info(_0x423855(0x2e4)+_0x423855(0x2c4)+_0x423855(0x329)+_0x423855(0x2e9)+_0x423855(0x1bd));},_0x5796e6);}function stopScheduler(){const _0x5342c1=_0x4bbee4;schedulerIntervalHandle&&(clearInterval(schedulerIntervalHandle),schedulerIntervalHandle=null,info(_0x5342c1(0x2e4)+_0x5342c1(0x2c4)+_0x5342c1(0x30e)));}function extractTextFromMessage(_0x334575){const _0x3d9b14=_0x4bbee4;if(!_0x334575||!_0x334575['message'])return'';const _0x8bd3b5=_0x334575[_0x3d9b14(0x317)];if(_0x8bd3b5[_0x3d9b14(0xeb)+'on'])return _0x8bd3b5[_0x3d9b14(0xeb)+'on'];if(_0x8bd3b5['extendedTe'+_0x3d9b14(0x1a4)]?.[_0x3d9b14(0x1e7)])return _0x8bd3b5[_0x3d9b14(0x321)+_0x3d9b14(0x1a4)]['text'];if(_0x8bd3b5['imageMessa'+'ge']?.['caption'])return _0x8bd3b5[_0x3d9b14(0x1fa)+'ge'][_0x3d9b14(0x232)];if(_0x8bd3b5['videoMessa'+'ge']?.['caption'])return _0x8bd3b5['videoMessa'+'ge'][_0x3d9b14(0x232)];if(_0x8bd3b5[_0x3d9b14(0xb6)+_0x3d9b14(0x2b0)+'ge']?.[_0x3d9b14(0xdd)+'ttonId'])return _0x8bd3b5[_0x3d9b14(0xb6)+_0x3d9b14(0x2b0)+'ge'][_0x3d9b14(0xdd)+_0x3d9b14(0x278)];if(_0x8bd3b5['listRespon'+'seMessage']?.[_0x3d9b14(0x245)+_0x3d9b14(0xcc)]?.[_0x3d9b14(0x12a)+_0x3d9b14(0x14a)])return _0x8bd3b5[_0x3d9b14(0x327)+_0x3d9b14(0x293)][_0x3d9b14(0x245)+_0x3d9b14(0xcc)]['selectedRo'+'wId'];return'';}function splitFirstLinePreserveRest(_0x56e3a9){const _0x36f66e=_0x4bbee4,_0x12594b=_0x56e3a9[_0x36f66e(0x1cd)](/\r?\n/),_0x2c8c59=_0x12594b[_0x36f66e(0x198)]>0xe2b+0x3*-0x80f+0xa02?_0x12594b[_0x36f66e(0x29c)]():'',_0x4498b1=_0x12594b[_0x36f66e(0x227)]('\x0a'),_0x5ade84=_0x2c8c59['trim']()[_0x36f66e(0x1cd)](/\s+/)[_0x36f66e(0x2b9)](Boolean);return{'firstLine':_0x2c8c59,'restText':_0x4498b1,'firstTokens':_0x5ade84};}function findGpAndCleanBodyFromRestAndFirst(_0xd5df42,_0x14fea0){const _0x4d9e55=_0x4bbee4,_0x146f62=(_0x14fea0&&_0x14fea0['length']?_0x14fea0:'')+'\x0a'+(_0xd5df42||''),_0x162f6c=_0x146f62['match'](/\bgp[:\s]+(\S+)/i),_0x5c228b=_0x162f6c?_0x162f6c[0x1d64+-0x6*0x58a+0x3d9]['trim']():null;let _0xc365b1=(_0x14fea0||'')[_0x4d9e55(0x1cd)](/\r?\n/);if(!_0xc365b1||_0xc365b1[_0x4d9e55(0x198)]===-0x2*-0x1191+0x23e5+-0x4707||_0xc365b1[_0x4d9e55(0x236)](_0x383624=>!_0x383624['trim']()))return{'gpValue':_0x5c228b,'cleanedBody':''};const _0x300704=_0xc365b1[_0x4d9e55(0xb1)](_0x19d733=>_0x19d733[_0x4d9e55(0x339)](/^\s*gp[:\s]+\S+\s*$/i,'')[_0x4d9e55(0x339)](/\s*\bgp[:\s]+\S+\s*$/i,'')[_0x4d9e55(0x26b)]())[_0x4d9e55(0x2b9)](_0x32ceab=>_0x32ceab[_0x4d9e55(0x198)]>0xa54+0x1*-0x16b5+0xc61*0x1),_0x227a3e=_0x300704[_0x4d9e55(0x227)]('\x0a')[_0x4d9e55(0x1b7)]();return{'gpValue':_0x5c228b,'cleanedBody':_0x227a3e};}function extractInlineAfterToken(_0x62ffa6,_0x30ed7c){const _0x2eb1e4=_0x4bbee4;if(!_0x62ffa6||!_0x30ed7c)return'';try{const _0x25d226=new RegExp('\x5cb'+_0x30ed7c[_0x2eb1e4(0x339)](/[.*+?^${}()|[\]\\]/g,_0x2eb1e4(0x2bb))+'\x5cb'),_0x62afe7=_0x62ffa6[_0x2eb1e4(0x1b5)](_0x25d226);if(!_0x62afe7)return'';const _0x4a855b=_0x62ffa6[_0x2eb1e4(0xd4)](_0x62afe7[-0x10a2+0x1111*0x1+-0x6f]),_0x19b252=_0x4a855b+_0x62afe7[-0x7a6*-0x3+0x629*0x1+-0x1d1b][_0x2eb1e4(0x198)];let _0x4abc72=_0x62ffa6['slice'](_0x19b252)[_0x2eb1e4(0x339)](/^\s+/,'');return _0x4abc72=_0x4abc72[_0x2eb1e4(0x339)](/\s*\bgp[:\s]+\S+\s*$/i,'')[_0x2eb1e4(0x1b7)](),_0x4abc72;}catch(_0x1f5911){return'';}}const USAGE=_0x4bbee4(0x153)+'lp\x20Command'+'s*\x0a\x0a>\x20*sch'+_0x4bbee4(0x8f)+_0x4bbee4(0x7e)+_0x4bbee4(0x81)+'H:mm\x20|\x20in\x20'+'N\x20hours/da'+_0x4bbee4(0x2be)+_0x4bbee4(0x287)+_0x4bbee4(0x264)+_0x4bbee4(0x112)+_0x4bbee4(0x2de)+_0x4bbee4(0x73)+_0x4bbee4(0x209)+'t\x20lines\x20â€”\x20'+_0x4bbee4(0x197)+_0x4bbee4(0x17d)+_0x4bbee4(0x102)+_0x4bbee4(0x292)+_0x4bbee4(0x7f)+_0x4bbee4(0x14f)+_0x4bbee4(0x32b)+_0x4bbee4(0x155)+_0x4bbee4(0x226)+_0x4bbee4(0xb3)+_0x4bbee4(0x2b4)+_0x4bbee4(0x14b)+_0x4bbee4(0x2b3)+_0x4bbee4(0x107)+_0x4bbee4(0x87)+_0x4bbee4(0x189)+_0x4bbee4(0x25c)+_0x4bbee4(0x24a)+_0x4bbee4(0x14e)+_0x4bbee4(0x1af)+_0x4bbee4(0x6d)+_0x4bbee4(0x1c0)+_0x4bbee4(0x2f8)+_0x4bbee4(0x238)+_0x4bbee4(0x28b)+'number,...'+_0x4bbee4(0x194)+_0x4bbee4(0x7d)+_0x4bbee4(0x216)+_0x4bbee4(0x1ba)+'led\x20entrie'+_0x4bbee4(0x2f3)+_0x4bbee4(0x25e)+'<number>`\x20'+_0x4bbee4(0x28c)+_0x4bbee4(0x1ea)+_0x4bbee4(0x2c1)+_0x4bbee4(0x174)+_0x4bbee4(0x184)+_0x4bbee4(0xf4)+_0x4bbee4(0x1a9)+_0x4bbee4(0x70)+_0x4bbee4(0xfd)+_0x4bbee4(0x1e5)+'ncy*\x20`<num'+'ber>`\x20`<n>'+'`\x0aâ€£\x20Set\x20re'+_0x4bbee4(0xb4)+_0x4bbee4(0x1a0)+_0x4bbee4(0x185)+_0x4bbee4(0xcd)+'2\x20days,\x20et'+_0x4bbee4(0x192)+_0x4bbee4(0x2ef)+_0x4bbee4(0x238)+_0x4bbee4(0x82)+_0x4bbee4(0x2ff)+'able\x20a\x20sch'+_0x4bbee4(0x30b)+'sage.\x0a\x0a>\x20*'+_0x4bbee4(0xc0)+_0x4bbee4(0x1a5)+_0x4bbee4(0x120)+_0x4bbee4(0x2c7)+_0x4bbee4(0x31f)+_0x4bbee4(0x33c)+_0x4bbee4(0x279),processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(0x3d*0x6d+0x19b7*-0x1+0x17*-0x2)*(-0x1cea+0x1645*-0x1+-0x61f*-0x9);function markCmdProcessed(_0x3f676d){const _0x8399e6=_0x4bbee4;if(!_0x3f676d)return;if(processedCmdKeys[_0x8399e6(0x10e)](_0x3f676d))try{clearTimeout(processedCmdKeys[_0x8399e6(0x1c5)](_0x3f676d));}catch(_0x426742){}const _0x108bac=setTimeout(()=>processedCmdKeys[_0x8399e6(0x2cf)](_0x3f676d),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x8399e6(0x2bf)](_0x3f676d,_0x108bac);}function isCmdProcessed(_0x21ce16){const _0xf039e5=_0x4bbee4;return _0x21ce16&&processedCmdKeys[_0xf039e5(0x10e)](_0x21ce16);}async function resolveDefaultChatJidsForUser(_0x5d54fe){const _0x361244=_0x4bbee4;try{const _0x404364=await getDefault(_0x5d54fe)[_0x361244(0xd5)](()=>null);if(!_0x404364||Array[_0x361244(0x25f)](_0x404364)&&_0x404364[_0x361244(0x198)]===-0x13*0x3+-0xa*-0x27a+-0x188b)return[];const _0x31d516=Array['isArray'](_0x404364)?_0x404364:[_0x404364],_0xe8a3b0=[];for(const _0x1f71f6 of _0x31d516){try{const _0x22d75a=await getConnection(_0x1f71f6)[_0x361244(0xd5)](()=>null);if(Array[_0x361244(0x25f)](_0x22d75a))_0xe8a3b0[_0x361244(0x18d)](..._0x22d75a);else{if(_0x22d75a)_0xe8a3b0[_0x361244(0x18d)](String(_0x22d75a));}}catch(_0x52239f){warn(_0x361244(0xbd)+_0x361244(0xf7)+_0x361244(0x11a)+_0x1f71f6+_0x361244(0x277)+(_0x52239f?.[_0x361244(0x317)]||_0x52239f));}}return uniqArray(_0xe8a3b0);}catch(_0x245cb2){return warn(_0x361244(0xbd)+_0x361244(0x159)+_0x361244(0x2e0)+'ForUser\x20er'+'ror:\x20'+(_0x245cb2?.[_0x361244(0x317)]||_0x245cb2)),[];}}async function getCombinedSchedulesForChats(_0xb2cf6b){const _0x40bcc4=_0x4bbee4,_0x47fd9c=[];for(const _0x98190d of _0xb2cf6b){const _0x60ecc4=await listSchedulesForChat(_0x98190d);for(const _0x2e8d65 of _0x60ecc4){_0x47fd9c[_0x40bcc4(0x18d)](Object[_0x40bcc4(0x14c)]({},_0x2e8d65,{'chat_jid':_0x98190d}));}}return _0x47fd9c;}async function resolveNumberToDbId(_0x247142,_0x79397d){const _0x54c0a8=_0x4bbee4;if(!_0x247142||!Number[_0x54c0a8(0x206)](_0x247142)||_0x247142<0x13ec+0x438+0x25*-0xa7)return null;const _0x1e71c4=await getCombinedSchedulesForChats(_0x79397d);if(!_0x1e71c4||_0x1e71c4[_0x54c0a8(0x198)]<_0x247142)return null;return _0x1e71c4[_0x247142-(-0x1*-0x12d5+-0x17c9+0x4f5)]['id'];}async function findStoredMatchFromFindings(_0x3ddc63=[]){const _0x5e7652=_0x4bbee4;try{const _0x48cb85=await listSudo();if(!Array['isArray'](_0x48cb85)||_0x48cb85[_0x5e7652(0x198)]===0x1ded+0x1c*-0x141+-0x52f*-0x1)return null;const _0x47fef5=new Set(_0x48cb85[_0x5e7652(0xb1)](String));for(const _0x33d4a4 of _0x3ddc63||[]){if(!_0x33d4a4||typeof _0x33d4a4['jid']!=='string')continue;const _0x17c66b=normalizeToJid(_0x33d4a4[_0x5e7652(0xea)]);if(_0x17c66b&&_0x47fef5['has'](_0x17c66b))return _0x17c66b;if(_0x47fef5[_0x5e7652(0x10e)](_0x33d4a4[_0x5e7652(0xea)]))return _0x33d4a4[_0x5e7652(0xea)];const _0x367930=String(_0x33d4a4['jid'])[_0x5e7652(0x1cd)]('@')[0x18fe+0xeb3+-0x27b1]['split'](':')[-0x1*-0x1cf6+-0x7fa*0x2+-0xd02];if(_0x367930)for(const _0x1681cc of _0x48cb85){const _0x4e4104=String(_0x1681cc)['split']('@')[-0x16db+0x1*-0x2572+0x3c4d*0x1];if(_0x4e4104&&_0x4e4104===_0x367930)return _0x1681cc;}}return null;}catch(_0x69fe5a){return warn(_0x5e7652(0xef)+_0x5e7652(0xf6)+'tchFromFin'+'dings\x20erro'+_0x5e7652(0x256)+(_0x69fe5a?.[_0x5e7652(0x317)]||_0x69fe5a)),null;}}export async function onMessage(_0x4ea976){const _0x13dd50=_0x4bbee4;try{if(!_0x4ea976||!_0x4ea976[_0x13dd50(0x1d3)]||!_0x4ea976[_0x13dd50(0x317)])return;const _0x2cb090=String(_0x4ea976[_0x13dd50(0x1d3)]['remoteJid']||'')+'::'+String(_0x4ea976['key']['id']||_0x4ea976[_0x13dd50(0x1d3)][_0x13dd50(0x253)+'t']||'');if(isCmdProcessed(_0x2cb090))return;markCmdProcessed(_0x2cb090);if(!_0x4ea976[_0x13dd50(0x74)])return;const _0x12cbb8=typeof _0x4ea976[_0x13dd50(0x1e7)]===_0x13dd50(0x2aa)&&_0x4ea976[_0x13dd50(0x1e7)][_0x13dd50(0x1b7)]()['length']?_0x4ea976[_0x13dd50(0x1e7)]:extractTextFromMessage(_0x4ea976)||'';if(!_0x12cbb8)return;const _0x1c69e4=_0x4ea976[_0x13dd50(0x1d3)][_0x13dd50(0x2ae)],_0x479192=typeof _0x1c69e4===_0x13dd50(0x2aa)&&_0x1c69e4[_0x13dd50(0x31e)](_0x13dd50(0x83));if(_0x479192){let _0x5a3609=![];try{_0x5a3609=await isadmin(botRef,_0x4ea976);}catch(_0x44c7ac){warn('[sched]\x20is'+_0x13dd50(0x10d)+_0x13dd50(0x2ec)),_0x5a3609=![];}if(!_0x5a3609)return;const _0x127c54=String(_0x12cbb8)[_0x13dd50(0x1b7)](),{firstLine:_0x31b072,restText:_0x3e69c6,firstTokens:_0x5e11f8}=splitFirstLinePreserveRest(_0x127c54),_0x417765=(_0x5e11f8[0x1*0x2199+-0x2482*0x1+0x2e9*0x1]||'')[_0x13dd50(0x282)+'e']();if(!commands[_0x13dd50(0x1cf)](_0x417765))return;const _0xbc5101=(_0x5e11f8[0x4d7*0x4+0x1633+-0x6ed*0x6]||'')[_0x13dd50(0x282)+'e'](),_0x2d9da8=_0x4ea976[_0x13dd50(0x1d3)][_0x13dd50(0x253)+'t']||_0x4ea976['key']['from']||_0x4ea976[_0x13dd50(0x1d3)]['remoteJid']||'',_0x3c6eb3=(_0x2d9da8||'')[_0x13dd50(0x1cd)]('@')[0x1d7*-0x1+-0x787*-0x1+0x2*-0x2d8],_0xbd77e2=await resolveDefaultChatJidsForUser(_0x3c6eb3),_0x25f1ec=_0x1c69e4;if(!_0xbd77e2||_0xbd77e2[_0x13dd50(0x198)]===-0x106d+0x76*-0x3+0x11cf*0x1){await sendWithRetry(_0x25f1ec,{'text':_0x13dd50(0x24c)+'resolve\x20yo'+_0x13dd50(0x295)+'\x20connectio'+_0x13dd50(0x1c2)+_0x13dd50(0x2b5)+_0x13dd50(0x1a1)+'ault.'});return;}await handleSchedCommandGroup(_0x4ea976,{'firstLine':_0x31b072,'restText':_0x3e69c6,'firstTokens':_0x5e11f8,'sub':_0xbc5101,'defaultChatJids':_0xbd77e2,'confirmationTarget':_0x25f1ec,'senderJid':_0x2d9da8});return;}const _0x4fc32b=Boolean(_0x4ea976[_0x13dd50(0x1d3)][_0x13dd50(0x2a2)]);let _0x37bf1e=null;if(_0x4fc32b){const _0x54699e=getBotJid();if(!_0x54699e){warn(_0x13dd50(0x1bc)+_0x13dd50(0x7b)+_0x13dd50(0x1aa)+_0x13dd50(0x27a)+_0x13dd50(0x22c)+_0x13dd50(0x193));return;}_0x37bf1e=_0x54699e;}else{let _0x78980c=![];try{_0x78980c=await isSudo(botRef,_0x4ea976);}catch(_0x42019a){_0x78980c=![];}if(!_0x78980c)return;const _0x68f3f1=userJidFromCtx(_0x4ea976)||{'findings':[]},_0x2f82b3=await findStoredMatchFromFindings(_0x68f3f1[_0x13dd50(0x1e9)]||[]);if(!_0x2f82b3)return;_0x37bf1e=_0x2f82b3;}const _0x3c5927=String(_0x12cbb8),{firstLine:_0x560393,restText:_0x4257d2,firstTokens:_0x51b191}=splitFirstLinePreserveRest(_0x3c5927),_0x2b0ff9=(_0x51b191[0x16cf+-0x86*-0x3d+-0x36bd]||'')[_0x13dd50(0x282)+'e']();if(!commands[_0x13dd50(0x1cf)](_0x2b0ff9))return;const _0x9311a7=(_0x51b191[0xf75*0x1+-0x5*0x8e+-0xcae]||'')['toLowerCas'+'e']();if(!_0x9311a7||_0x9311a7===_0x13dd50(0xc1)){await sendWithRetry(_0x37bf1e,{'text':USAGE});return;}const _0x4c62a3=['once',_0x13dd50(0x221),_0x13dd50(0x1a6),'delete',_0x13dd50(0x335),_0x13dd50(0x211),'disable',_0x13dd50(0x86)],{gpValue:_0x371510,cleanedBody:_0xb7f3ea}=findGpAndCleanBodyFromRestAndFirst(_0x560393,_0x4257d2);if(_0x4c62a3['includes'](_0x9311a7)&&!_0x371510){await sendWithRetry(_0x37bf1e,{'text':_0x13dd50(0x68)+_0x13dd50(0x246)+':<alias|ji'+_0x13dd50(0x254)+_0x13dd50(0x19f)+_0x13dd50(0xa3)+_0x13dd50(0x150)+_0x13dd50(0x173)+'hed\x20add\x2009'+_0x13dd50(0x163)+_0x13dd50(0x1b9)+_0x13dd50(0x324)+'alias'});return;}let _0x123392=[];if(_0x371510){const _0x537f9a=_0x371510[_0x13dd50(0x1b7)]();if(_0x537f9a[_0x13dd50(0x282)+'e']()===_0x13dd50(0x2bd))_0x123392=await _0x11e086[_0x13dd50(0x296)+'ids']();else{const _0x1b2e5d=await _0x11e086['resolveNam'+'e'](_0x537f9a);if(_0x1b2e5d)_0x123392=[_0x1b2e5d];else{if(_0x537f9a[_0x13dd50(0x1cf)]('@'))_0x123392=[_0x11e086[_0x13dd50(0x171)+_0x13dd50(0x16c)](_0x537f9a)];}}if(_0x4c62a3[_0x13dd50(0x1cf)](_0x9311a7)&&(!_0x123392||_0x123392[_0x13dd50(0x198)]===0x1*-0x246+-0x1ef*0xb+-0x93*-0x29)){await sendWithRetry(_0x37bf1e,{'text':'Could\x20not\x20'+_0x13dd50(0x7a)+_0x13dd50(0x1da)+_0x371510+(_0x13dd50(0x1ef)+_0x13dd50(0xbe)+_0x13dd50(0x9f)+_0x13dd50(0x91))});return;}}await handleSchedCommandPM(_0x4ea976,{'sub':_0x9311a7,'firstLine':_0x560393,'restText':_0x4257d2,'firstTokens':_0x51b191,'targetChatJids':_0x123392,'confirmationTarget':_0x37bf1e,'senderJid':_0x4ea976[_0x13dd50(0x1d3)]['participan'+'t']||_0x4ea976[_0x13dd50(0x1d3)][_0x13dd50(0x1d2)]||'','cleanedBody':_0xb7f3ea});return;}catch(_0x1fba25){error(_0x13dd50(0x32e)+_0x13dd50(0x2c8)+_0x13dd50(0x30d)+(_0x1fba25?.[_0x13dd50(0x317)]||_0x1fba25));}}async function handleSchedCommandGroup(_0x5ef4fe,{firstLine:_0x47b485,restText:_0x484cdb,firstTokens:_0x1478fe,sub:_0x323e9e,defaultChatJids:_0xf30395,confirmationTarget:_0x2e25fb,senderJid:_0xd57116}){const _0x8e2cd9=_0x4bbee4;try{if(!_0x323e9e||_0x323e9e===_0x8e2cd9(0xc1)){await sendWithRetry(_0x2e25fb,{'text':USAGE});return;}if(_0x323e9e===_0x8e2cd9(0x234)){const _0x234401=_0x1478fe[0x1*-0x595+0x1316+-0x1*0xd7f],_0x236add=_0x1478fe[-0xe82+-0xe9*0xb+0x1888]&&/^\d+$/[_0x8e2cd9(0xda)](_0x1478fe[-0x146c+0xa7*0x35+-0x389*0x4])?Number(_0x1478fe[0x822+-0x799+-0x43*0x2]):null;let _0x358eff='';if(_0x234401){const _0x14f4a8=new RegExp('\x5cb'+_0x234401[_0x8e2cd9(0x339)](/[.*+?^${}()|[\]\\]/g,_0x8e2cd9(0x2bb))+'\x5cb'),_0x35ee67=_0x47b485[_0x8e2cd9(0x1b5)](_0x14f4a8);if(_0x35ee67){const _0x351836=_0x47b485[_0x8e2cd9(0xd4)](_0x35ee67[0x1983+-0x252a+0x13*0x9d]),_0x31ee38=_0x351836+_0x35ee67[-0x158+-0x4*0x231+-0x4*-0x287]['length'];_0x358eff=_0x47b485['slice'](_0x31ee38)[_0x8e2cd9(0x339)](/^\s*/,'');if(_0x358eff&&/^\d+/[_0x8e2cd9(0xda)](_0x358eff))_0x358eff=_0x358eff['replace'](/^\d+\s*/,'');}}const _0x23d823=_0x358eff&&_0x484cdb?_0x358eff+'\x0a'+_0x484cdb:_0x358eff||_0x484cdb||'';if(!_0x234401||!_0x23d823||_0x23d823[_0x8e2cd9(0x1b7)]()[_0x8e2cd9(0x198)]===-0xfc5+-0x4*0x3dd+-0x1f39*-0x1){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x316)+_0x8e2cd9(0x1c9)+_0x8e2cd9(0x231)+_0x8e2cd9(0x297)+'ge...>'});return;}const _0x56df7a=[];for(const _0x447eee of _0xf30395){const _0x3dc91d=await getChatTimezone(_0x447eee)||DEFAULT_TIMEZONE,_0x1f8c98=parseTimeToken(_0x234401,_0x3dc91d);if(!_0x1f8c98){_0x56df7a[_0x8e2cd9(0x18d)]({'chat':_0x447eee,'ok':![],'reason':'parse_fail'+'ed'});continue;}if(_0x1f8c98['type']===_0x8e2cd9(0xdf)){const _0xbd67fa=_0x1f8c98['dt'],_0x366e8f=Math[_0x8e2cd9(0x2f9)](_0xbd67fa['toMillis']()/(-0x17ee+-0xee5+0x2abb)),_0x564242=await addScheduleRow({'chat_jid':_0x447eee,'message':_0x23d823,'time':null,'send_at':_0x366e8f,'frequency':_0x8e2cd9(0x234),'timezone':_0xbd67fa[_0x8e2cd9(0x1d5)]||_0x3dc91d,'creator_jid':_0xd57116});if(_0x564242)_0x56df7a[_0x8e2cd9(0x18d)]({'chat':_0x447eee,'ok':!![],'id':_0x564242,'when':_0xbd67fa['toLocaleSt'+_0x8e2cd9(0x298)](DateTime[_0x8e2cd9(0x1dc)+'ED'])});else _0x56df7a[_0x8e2cd9(0x18d)]({'chat':_0x447eee,'ok':![],'reason':_0x8e2cd9(0xf9)});continue;}if(_0x1f8c98[_0x8e2cd9(0x12c)]===_0x8e2cd9(0x300)){const [_0x5c1845,_0x372a2f]=_0x1f8c98[_0x8e2cd9(0x300)][_0x8e2cd9(0x1cd)](':')[_0x8e2cd9(0xb1)](Number);let _0x32b32d=DateTime[_0x8e2cd9(0x33b)]()[_0x8e2cd9(0xe5)](_0x3dc91d),_0x2e0189=_0x32b32d['startOf'](_0x8e2cd9(0x76))['set']({'hour':_0x5c1845,'minute':_0x372a2f,'second':0x0,'millisecond':0x0});if(_0x236add&&Number[_0x8e2cd9(0x206)](_0x236add)&&_0x236add>=0x11d+-0x10d7+0x1*0xfbb)_0x2e0189=_0x2e0189[_0x8e2cd9(0x2c3)]({'days':Number(_0x236add)});else{if(_0x2e0189<=_0x32b32d)_0x2e0189=_0x2e0189['plus']({'days':0x1});}const _0x18a5ad=Math[_0x8e2cd9(0x2f9)](_0x2e0189[_0x8e2cd9(0x217)]()/(0x260d+-0x64a+-0x1bdb)),_0x12e95c=await addScheduleRow({'chat_jid':_0x447eee,'message':_0x23d823,'time':null,'send_at':_0x18a5ad,'frequency':'once','timezone':_0x3dc91d,'creator_jid':_0xd57116});if(_0x12e95c)_0x56df7a['push']({'chat':_0x447eee,'ok':!![],'id':_0x12e95c,'when':_0x2e0189[_0x8e2cd9(0x274)+'ring'](DateTime[_0x8e2cd9(0x1dc)+'ED'])});else _0x56df7a[_0x8e2cd9(0x18d)]({'chat':_0x447eee,'ok':![],'reason':_0x8e2cd9(0xf9)});continue;}_0x56df7a[_0x8e2cd9(0x18d)]({'chat':_0x447eee,'ok':![],'reason':'unsupporte'+'d_time'});}const _0x1238f3=_0x56df7a['filter'](_0x143c84=>_0x143c84['ok']),_0x352a94=_0x56df7a[_0x8e2cd9(0x2b9)](_0x7e933c=>!_0x7e933c['ok']);let _0x5b3bea='';if(_0x1238f3[_0x8e2cd9(0x198)]){_0x5b3bea+='Scheduled\x20'+_0x8e2cd9(0x31a)+'r\x20'+_0x1238f3['length']+(_0x8e2cd9(0x1a3)+'onnection('+'s):\x0a');for(const _0x530008 of _0x1238f3)_0x5b3bea+='â€¢\x20'+_0x530008[_0x8e2cd9(0x177)]+'\x20->\x20id:'+_0x530008['id']+_0x8e2cd9(0xb5)+_0x530008[_0x8e2cd9(0x1fe)]+'\x0a';}if(_0x352a94[_0x8e2cd9(0x198)]){_0x5b3bea+=_0x8e2cd9(0xfb)+'\x20'+_0x352a94[_0x8e2cd9(0x198)]+(_0x8e2cd9(0x1a3)+'onnection('+'s):\x0a');for(const _0x5384dc of _0x352a94)_0x5b3bea+='â€¢\x20'+_0x5384dc['chat']+_0x8e2cd9(0x17b)+_0x5384dc['reason']+'\x0a';}await sendWithRetry(_0x2e25fb,{'text':_0x5b3bea[_0x8e2cd9(0x1b7)]()||_0x8e2cd9(0x119)+_0x8e2cd9(0x25a)+'.'});return;}if(_0x323e9e===_0x8e2cd9(0x221)){if(!_0x1478fe[-0x22*-0x13+0x77a+-0x9fe]){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x316)+_0x8e2cd9(0x1f1)+':mm|YYYY-M'+_0x8e2cd9(0x89)+_0x8e2cd9(0xf5)+_0x8e2cd9(0x23f)+_0x8e2cd9(0x2a1)+_0x8e2cd9(0x20f)});return;}const _0x1c1a76=_0x1478fe[0x26*0x1+0x4f*-0x53+0x1979],_0x2d89ef=_0x1478fe[0x2*-0x110e+0x3b5+0x1e6a]&&/^\d+$/[_0x8e2cd9(0xda)](_0x1478fe[0xd02+-0x1*0xb99+-0x166])?Number(_0x1478fe[0x1510+0x207c+-0xab5*0x5]):null;let _0x1e8ab7='';const _0xbdef72=new RegExp('\x5cb'+_0x1c1a76[_0x8e2cd9(0x339)](/[.*+?^${}()|[\]\\]/g,_0x8e2cd9(0x2bb))+'\x5cb'),_0x366ce0=_0x47b485[_0x8e2cd9(0x1b5)](_0xbdef72);if(_0x366ce0){const _0x1c2d19=_0x47b485[_0x8e2cd9(0xd4)](_0x366ce0[0x1124*-0x2+0x192f+0x919]),_0x49dde3=_0x1c2d19+_0x366ce0[0x20e9+0x1825+-0x390e][_0x8e2cd9(0x198)];_0x1e8ab7=_0x47b485['slice'](_0x49dde3)[_0x8e2cd9(0x339)](/^\s*/,'');if(_0x1e8ab7&&/^\d+/[_0x8e2cd9(0xda)](_0x1e8ab7))_0x1e8ab7=_0x1e8ab7[_0x8e2cd9(0x339)](/^\d+\s*/,'');}const _0x1a8bc0=_0x1e8ab7&&_0x484cdb?_0x1e8ab7+'\x0a'+_0x484cdb:_0x1e8ab7||_0x484cdb||'';if(!_0x1a8bc0||_0x1a8bc0[_0x8e2cd9(0x1b7)]()[_0x8e2cd9(0x198)]===-0x1*0x2238+-0x18d+0x23c5){await sendWithRetry(_0x2e25fb,{'text':'Please\x20pro'+_0x8e2cd9(0x140)+_0x8e2cd9(0x131)+_0x8e2cd9(0x333)+_0x8e2cd9(0x306)+_0x8e2cd9(0x13e)+_0x8e2cd9(0xa9)+_0x8e2cd9(0x33e)});return;}const _0x18384d=[];for(const _0x1ea7ec of _0xf30395){const _0x50b864=await getChatTimezone(_0x1ea7ec)||DEFAULT_TIMEZONE,_0x3629d8=parseTimeToken(_0x1c1a76,_0x50b864);if(!_0x3629d8){_0x18384d[_0x8e2cd9(0x18d)]({'chat':_0x1ea7ec,'ok':![],'reason':'parse_fail'+'ed'});continue;}const _0x12170e=_0xd57116;if(_0x3629d8['type']==='datetime'){const _0x471049=_0x3629d8['dt'],_0x5cdacb=Math[_0x8e2cd9(0x2f9)](_0x471049[_0x8e2cd9(0x217)]()/(0xbf4+-0xa1f*0x1+0x3*0xb1)),_0x5847d9=await addScheduleRow({'chat_jid':_0x1ea7ec,'message':_0x1a8bc0,'time':null,'send_at':_0x5cdacb,'frequency':_0x8e2cd9(0x234),'timezone':_0x471049[_0x8e2cd9(0x1d5)]||_0x50b864,'creator_jid':_0x12170e});if(_0x5847d9)_0x18384d[_0x8e2cd9(0x18d)]({'chat':_0x1ea7ec,'ok':!![],'id':_0x5847d9,'when':_0x471049[_0x8e2cd9(0x274)+_0x8e2cd9(0x298)](DateTime[_0x8e2cd9(0x1dc)+'ED'])});else _0x18384d[_0x8e2cd9(0x18d)]({'chat':_0x1ea7ec,'ok':![],'reason':_0x8e2cd9(0xf9)});continue;}if(_0x3629d8['type']===_0x8e2cd9(0x300)){const _0x1b2603=_0x3629d8[_0x8e2cd9(0x300)];if(_0x2d89ef&&Number['isInteger'](_0x2d89ef)&&_0x2d89ef>=0x2386*0x1+-0x25f*-0x3+0x3*-0xe36){let _0x26ffd9=DateTime[_0x8e2cd9(0x33b)]()['setZone'](_0x50b864);const [_0x532af6,_0x3ed017]=_0x1b2603[_0x8e2cd9(0x1cd)](':')['map'](Number);let _0x104479=_0x26ffd9[_0x8e2cd9(0x336)](_0x8e2cd9(0x76))['set']({'hour':_0x532af6,'minute':_0x3ed017,'second':0x0,'millisecond':0x0});_0x104479=_0x104479[_0x8e2cd9(0x2c3)]({'days':Number(_0x2d89ef)});const _0x286100=Math[_0x8e2cd9(0x2f9)](_0x104479[_0x8e2cd9(0x217)]()/(-0x1*-0x1cab+-0xf*-0x26a+-0x3cf9)),_0x87c8af=await addScheduleRow({'chat_jid':_0x1ea7ec,'message':_0x1a8bc0,'time':null,'send_at':_0x286100,'frequency':_0x8e2cd9(0x234),'timezone':_0x50b864,'creator_jid':_0x12170e});if(_0x87c8af)_0x18384d[_0x8e2cd9(0x18d)]({'chat':_0x1ea7ec,'ok':!![],'id':_0x87c8af,'when':_0x104479[_0x8e2cd9(0x274)+'ring'](DateTime['DATETIME_M'+'ED'])});else _0x18384d[_0x8e2cd9(0x18d)]({'chat':_0x1ea7ec,'ok':![],'reason':_0x8e2cd9(0xf9)});continue;}const _0x156327=await addScheduleRow({'chat_jid':_0x1ea7ec,'message':_0x1a8bc0,'time':_0x1b2603,'send_at':null,'frequency':_0x8e2cd9(0x29b),'timezone':_0x50b864,'creator_jid':_0x12170e});if(_0x156327)_0x18384d[_0x8e2cd9(0x18d)]({'chat':_0x1ea7ec,'ok':!![],'id':_0x156327,'when':_0x1b2603+'\x20('+_0x50b864+')'});else _0x18384d[_0x8e2cd9(0x18d)]({'chat':_0x1ea7ec,'ok':![],'reason':_0x8e2cd9(0xf9)});continue;}_0x18384d['push']({'chat':_0x1ea7ec,'ok':![],'reason':_0x8e2cd9(0x180)+_0x8e2cd9(0xaf)});}const _0x566dc4=_0x18384d[_0x8e2cd9(0x2b9)](_0x45f29e=>_0x45f29e['ok']),_0x502d45=_0x18384d['filter'](_0x4cb8c2=>!_0x4cb8c2['ok']);let _0x3a1e6e='';if(_0x566dc4[_0x8e2cd9(0x198)]){_0x3a1e6e+=_0x8e2cd9(0x111)+_0x8e2cd9(0x9a)+_0x566dc4['length']+(_0x8e2cd9(0x1a3)+_0x8e2cd9(0x2f5)+_0x8e2cd9(0x1df));for(const _0x206ca1 of _0x566dc4)_0x3a1e6e+='â€¢\x20'+_0x206ca1[_0x8e2cd9(0x177)]+_0x8e2cd9(0x2e2)+_0x206ca1['id']+_0x8e2cd9(0x18e)+_0x206ca1['when']+'\x0a';}if(_0x502d45[_0x8e2cd9(0x198)]){_0x3a1e6e+=_0x8e2cd9(0xfb)+'\x20'+_0x502d45[_0x8e2cd9(0x198)]+(_0x8e2cd9(0x1a3)+_0x8e2cd9(0x2f5)+_0x8e2cd9(0x1df));for(const _0x370943 of _0x502d45)_0x3a1e6e+='â€¢\x20'+_0x370943[_0x8e2cd9(0x177)]+_0x8e2cd9(0x17b)+_0x370943['reason']+'\x0a';}await sendWithRetry(_0x2e25fb,{'text':_0x3a1e6e['trim']()||'No\x20schedul'+_0x8e2cd9(0x25a)+'.'});return;}if(_0x323e9e==='list'){const _0x3ef5c4=await getCombinedSchedulesForChats(_0xf30395);if(!_0x3ef5c4[_0x8e2cd9(0x198)]){await sendWithRetry(_0x2e25fb,{'text':'No\x20schedul'+'ed\x20message'+_0x8e2cd9(0x22f)+_0x8e2cd9(0x11b)+':\x20'+_0xf30395[_0x8e2cd9(0x227)](',\x20')});return;}const _0xfc298b=_0x3ef5c4['map']((_0x3dbc94,_0x2dabf1)=>{const _0x4ac713=_0x8e2cd9,_0x19ddb6=_0x3dbc94['send_at']?DateTime[_0x4ac713(0x225)](Number(_0x3dbc94['send_at'])*(0x67f*-0x1+-0x116c+-0x1*-0x1bd3))[_0x4ac713(0xe5)](_0x3dbc94[_0x4ac713(0xd2)]||DEFAULT_TIMEZONE)[_0x4ac713(0x229)]({'suppressSeconds':!![]}):_0x3dbc94[_0x4ac713(0x168)]?_0x3dbc94[_0x4ac713(0x168)]+'\x20('+(_0x3dbc94[_0x4ac713(0xd2)]||_0x4ac713(0x215)+_0x4ac713(0x127))+')':_0x4ac713(0xa2),_0x5ee2e9=(_0x3dbc94['message']||'')[_0x4ac713(0x1cd)]('\x0a')['map'](_0x45c09b=>_0x45c09b['trimEnd']())[_0x4ac713(0x227)]('\x0a');return _0x2dabf1+(-0x183b+-0x3c9*-0x6+0x186)+_0x4ac713(0x181)+_0x3dbc94['id']+_0x4ac713(0x2a5)+_0x3dbc94['chat_jid']+_0x4ac713(0x18e)+_0x19ddb6+_0x4ac713(0x284)+(_0x3dbc94['frequency']||_0x4ac713(0x29b))+_0x4ac713(0x2d0)+(_0x3dbc94['enabled']?'yes':'no')+_0x4ac713(0xca)+_0x5ee2e9;}),_0x2ec480=_0x8e2cd9(0x111)+_0x8e2cd9(0x2cb)+'ts\x20('+_0xf30395[_0x8e2cd9(0x227)](',\x20')+'):\x0a\x0a'+_0xfc298b[_0x8e2cd9(0x227)]('\x0a\x0a');await sendWithRetry(_0x2e25fb,{'text':_0x2ec480});return;}if(_0x323e9e===_0x8e2cd9(0x2cf)){const _0x3e4b38=_0x1478fe[_0x8e2cd9(0x24b)](0xf90+-0x4*0x5fe+0x86a);let _0x9174ad=_0x3e4b38[_0x8e2cd9(0x227)]('\x20');if(!_0x9174ad&&_0x484cdb)_0x9174ad=_0x484cdb['trim']();if(!_0x9174ad){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x316)+_0x8e2cd9(0x125)+_0x8e2cd9(0x2ea)+_0x8e2cd9(0x201)+_0x8e2cd9(0x1c3)});return;}if(/^\s*all\s*$/i[_0x8e2cd9(0xda)](_0x9174ad)){let _0x364cc4=0x69+0x72f+-0x798;for(const _0x1f4855 of _0xf30395){const _0x32c95b=await removeAllSchedulesForChat(_0x1f4855);_0x364cc4+=_0x32c95b;}await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x263)+_0x364cc4+(_0x8e2cd9(0xb0)+_0x8e2cd9(0x1d8)+'defaults:\x20')+_0xf30395['join'](',\x20')});return;}const _0x51c584=_0x9174ad[_0x8e2cd9(0x1cd)](/[\s,]+/)[_0x8e2cd9(0xb1)](_0x4960c0=>_0x4960c0[_0x8e2cd9(0x1b7)]())[_0x8e2cd9(0x2b9)](Boolean),_0x469687=_0x51c584[_0x8e2cd9(0xb1)](_0x56bc73=>Number(_0x56bc73))[_0x8e2cd9(0x2b9)](_0x1cb50e=>!Number[_0x8e2cd9(0x255)](_0x1cb50e)&&Number[_0x8e2cd9(0x206)](_0x1cb50e)&&_0x1cb50e>-0x24bc+0x264b+0x13*-0x15);if(!_0x469687[_0x8e2cd9(0x198)]){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x1ed)+_0x8e2cd9(0x266)+'vided.\x20Usa'+_0x8e2cd9(0xe2)+_0x8e2cd9(0x2da)+_0x8e2cd9(0x1d0)+_0x8e2cd9(0x158)+_0x8e2cd9(0xd6)+_0x8e2cd9(0x2f8)+_0x8e2cd9(0x2c5)});return;}const _0x42d136=[...new Set(_0x469687)],_0x3bbb12=await getCombinedSchedulesForChats(_0xf30395),_0x6627e7=[],_0x11dcfd=[];for(const _0x1f5f74 of _0x42d136){if(_0x1f5f74<0x12cb+0x1*0x1867+-0x2b31||_0x1f5f74>_0x3bbb12[_0x8e2cd9(0x198)]){_0x11dcfd[_0x8e2cd9(0x18d)]({'n':_0x1f5f74,'reason':_0x8e2cd9(0x26d)});continue;}const _0x5b160a=_0x3bbb12[_0x1f5f74-(0x24b5+-0x5*0x5f2+-0x26*0x2f)]['id'],_0x533ed2=await removeScheduleByDBId(_0x5b160a);if(_0x533ed2)_0x6627e7['push']({'n':_0x1f5f74,'id':_0x5b160a});else _0x11dcfd[_0x8e2cd9(0x18d)]({'n':_0x1f5f74,'reason':_0x8e2cd9(0x276)+_0x8e2cd9(0x2c6)});}let _0x4416ad='';if(_0x6627e7[_0x8e2cd9(0x198)])_0x4416ad+=_0x8e2cd9(0x263)+_0x6627e7['length']+('\x20schedule('+'s):\x20')+_0x6627e7[_0x8e2cd9(0xb1)](_0x9a32c2=>_0x9a32c2['n']+_0x8e2cd9(0x109)+_0x9a32c2['id']+')')[_0x8e2cd9(0x227)](',\x20')+'.\x0a';if(_0x11dcfd['length'])_0x4416ad+='Failed\x20to\x20'+_0x8e2cd9(0x222)+_0x11dcfd[_0x8e2cd9(0xb1)](_0x4a23e7=>_0x4a23e7['n']+'('+_0x4a23e7[_0x8e2cd9(0x1f5)]+')')[_0x8e2cd9(0x227)](',\x20')+'.';await sendWithRetry(_0x2e25fb,{'text':_0x4416ad[_0x8e2cd9(0x1b7)]()||_0x8e2cd9(0x19a)+_0x8e2cd9(0x288)});return;}if(_0x323e9e==='edit'){const _0x2be9bb=Number(_0x1478fe[0xdf*0xa+-0x3*0xbf+0x14b*-0x5]),_0x53c588=_0x1478fe[0x19b2+-0x1089+-0x1*0x926]||(_0x484cdb?_0x484cdb[_0x8e2cd9(0x1cd)](/\r?\n/)[0x17ed+-0x178e+-0x5f]['trim']():null);if(!_0x2be9bb||!_0x53c588){await sendWithRetry(_0x2e25fb,{'text':'Usage:\x20sch'+_0x8e2cd9(0x2af)+_0x8e2cd9(0x1f6)+':mm|in\x20N\x20h'+_0x8e2cd9(0x311)+'MM-DDTHH:m'+'m>'});return;}const _0x221ebf=await getCombinedSchedulesForChats(_0xf30395);if(!_0x221ebf||_0x221ebf[_0x8e2cd9(0x198)]<_0x2be9bb){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x119)+_0x8e2cd9(0x1c8)+_0x2be9bb+(_0x8e2cd9(0x320)+'oss\x20your\x20d'+_0x8e2cd9(0xcb))});return;}const _0x2be9e3=_0x221ebf[_0x2be9bb-(0x53c*0x7+-0x9d3+-0xd*0x210)]['id'];if(!_0x2be9e3){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x119)+_0x8e2cd9(0x1c8)+_0x2be9bb+('\x20found\x20acr'+_0x8e2cd9(0xba)+_0x8e2cd9(0xcb))});return;}const _0x3a2239=parseTimeToken(_0x53c588,DEFAULT_TIMEZONE);if(!_0x3a2239){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x29f)+_0x8e2cd9(0x121)+_0x8e2cd9(0x340)});return;}if(_0x3a2239[_0x8e2cd9(0x12c)]==='datetime'){const _0x3db53=_0x3a2239['dt'],_0x4cac67=Math[_0x8e2cd9(0x2f9)](_0x3db53[_0x8e2cd9(0x217)]()/(0xf*-0x131+-0x11*0x223+0x9af*0x6)),_0x3fe97d=await updateScheduleFields(_0x2be9e3,{'send_at':_0x4cac67,'time':null,'frequency':_0x8e2cd9(0x234),'timezone':_0x3db53['zoneName']||DEFAULT_TIMEZONE});if(_0x3fe97d)await sendWithRetry(_0x2e25fb,{'text':'Schedule\x20#'+_0x2be9bb+(_0x8e2cd9(0x1e1)+_0x8e2cd9(0x2fe)+_0x8e2cd9(0x93))+_0x3db53['toLocaleSt'+_0x8e2cd9(0x298)](DateTime['DATETIME_M'+'ED'])+'\x20('+_0x3db53[_0x8e2cd9(0x1d5)]+')'});else await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x29f)+_0x8e2cd9(0x23e)+_0x8e2cd9(0x1d6)});return;}else{if(_0x3a2239[_0x8e2cd9(0x12c)]===_0x8e2cd9(0x300)){const _0x589f19=_0x3a2239[_0x8e2cd9(0x300)],_0x2ee51c=_0x221ebf[_0x2be9bb-(-0x6c5+-0xb*-0x1ed+-0xe69)],_0x5492db=_0x2ee51c[_0x8e2cd9(0xd2)]||await getChatTimezone(_0x2ee51c[_0x8e2cd9(0x182)])||DEFAULT_TIMEZONE,_0x37ad99=await updateScheduleFields(_0x2be9e3,{'time':_0x589f19,'send_at':null,'frequency':_0x8e2cd9(0x29b),'timezone':_0x5492db});if(_0x37ad99)await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x319)+_0x2be9bb+(_0x8e2cd9(0x1e1)+_0x8e2cd9(0x2d3)+_0x8e2cd9(0x162))+_0x589f19+'\x20('+_0x5492db+')'});else await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x29f)+_0x8e2cd9(0x23e)+_0x8e2cd9(0x1d6)});return;}else{await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x122)+_0x8e2cd9(0x230)+_0x8e2cd9(0x258)+'it.'});return;}}}if(_0x323e9e===_0x8e2cd9(0x211)){const _0x59d0d2=Number(_0x1478fe[-0x1f6+-0x86*-0x3c+0x13a*-0x18]),_0x24b49c=Number(_0x1478fe[-0x14ae*-0x1+-0x257b+0x10d0]);if(!_0x59d0d2||!_0x24b49c||_0x24b49c<-0x3*-0x5f+0x5*0x2c3+-0xeeb){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x316)+_0x8e2cd9(0xe7)+_0x8e2cd9(0x21d)+_0x8e2cd9(0xad)+_0x8e2cd9(0x257)+_0x8e2cd9(0x10f)+_0x8e2cd9(0x16a)+'.)'});return;}const _0xe40e08=await getCombinedSchedulesForChats(_0xf30395);if(!_0xe40e08||_0xe40e08[_0x8e2cd9(0x198)]<_0x59d0d2){await sendWithRetry(_0x2e25fb,{'text':'No\x20schedul'+_0x8e2cd9(0x1c8)+_0x59d0d2+(_0x8e2cd9(0x320)+_0x8e2cd9(0xba)+_0x8e2cd9(0xcb))});return;}const _0x91fdc9=_0xe40e08[_0x59d0d2-(-0xdb+0x20a1+-0x1fc5)]['id'];if(!_0x91fdc9){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x119)+_0x8e2cd9(0x1c8)+_0x59d0d2+(_0x8e2cd9(0x320)+_0x8e2cd9(0xba)+_0x8e2cd9(0xcb))});return;}let _0x59c50b=_0x8e2cd9(0x29b);if(_0x24b49c===0x11b+-0x7a*-0x2b+-0xacc*0x2)_0x59c50b=_0x8e2cd9(0x29b);else _0x59c50b='every_n_da'+'ys:'+_0x24b49c;const _0x294f45=await updateScheduleFields(_0x91fdc9,{'frequency':_0x59c50b});if(_0x294f45)await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x319)+_0x59d0d2+(_0x8e2cd9(0xa8)+_0x8e2cd9(0x13b))+_0x59c50b});else await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x29f)+'update\x20fre'+_0x8e2cd9(0x1b4)});return;}if(_0x323e9e===_0x8e2cd9(0x101)||_0x323e9e==='enable'){const _0x2ae977=Number(_0x1478fe[-0x1198*-0x2+-0x3a3*-0x1+-0x26d1]);if(!_0x2ae977){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x316)+_0x8e2cd9(0x144)+_0x323e9e+_0x8e2cd9(0x285)});return;}const _0x51b720=await getCombinedSchedulesForChats(_0xf30395);if(!_0x51b720||_0x51b720['length']<_0x2ae977){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x119)+'e\x20#'+_0x2ae977+('\x20found\x20acr'+_0x8e2cd9(0xba)+_0x8e2cd9(0xcb))});return;}const _0x8f5b81=_0x51b720[_0x2ae977-(-0x198a+-0x21aa+0x3b35)]['id'];if(!_0x8f5b81){await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x119)+_0x8e2cd9(0x1c8)+_0x2ae977+(_0x8e2cd9(0x320)+_0x8e2cd9(0xba)+_0x8e2cd9(0xcb))});return;}const _0x3dee90=await updateScheduleFields(_0x8f5b81,{'enabled':_0x323e9e===_0x8e2cd9(0x86)?0x1d8*-0x4+-0x23*0xa7+0x1e36:-0x291*0x3+-0x1*-0x18da+0x1*-0x1127});if(_0x3dee90)await sendWithRetry(_0x2e25fb,{'text':'Schedule\x20#'+_0x2ae977+'\x20'+_0x323e9e+'d.'});else await sendWithRetry(_0x2e25fb,{'text':_0x8e2cd9(0x29f)+_0x8e2cd9(0xec)+_0x8e2cd9(0x8e)+'.'});return;}await sendWithRetry(_0x2e25fb,{'text':USAGE});}catch(_0x305876){warn('[sched]\x20ha'+_0x8e2cd9(0x2cd)+_0x8e2cd9(0x203)+'p\x20error:\x20'+(_0x305876?.[_0x8e2cd9(0x317)]||_0x305876));}}async function handleSchedCommandPM(_0x3c96ce,{sub:_0x1c0de2,firstLine:_0x243503,restText:_0x55f7b0,firstTokens:_0x1bf8fe,targetChatJids:_0x1927db,confirmationTarget:_0x54f92a,senderJid:_0x23f473,cleanedBody:_0x552d5c}){const _0x69ee75=_0x4bbee4;try{if(!_0x1c0de2||_0x1c0de2===_0x69ee75(0xc1)){await sendWithRetry(_0x54f92a,{'text':USAGE});return;}if(_0x1c0de2===_0x69ee75(0x234)){const _0x6a7596=_0x1bf8fe[-0x86+-0x1187+0x120f],_0x200293=_0x1bf8fe[0x326+0x38*-0x2b+0x645]&&/^\d+$/['test'](_0x1bf8fe[0x1*-0x16e1+0x51*0x79+-0x7*0x233])?Number(_0x1bf8fe[0x4*-0xd8+-0x104a+-0x45*-0x49]):null;let _0x489dbb=(_0x552d5c||'')['trim']();!_0x489dbb&&_0x6a7596&&(_0x489dbb=extractInlineAfterToken(_0x243503,_0x6a7596));if(!_0x6a7596||!_0x489dbb||_0x489dbb['trim']()[_0x69ee75(0x198)]===0x203+-0x1*-0x13c0+-0x15c3){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x316)+_0x69ee75(0x1c9)+'H:mm>\x20[Nda'+'ys]\x20<messa'+_0x69ee75(0x2fd)+_0x69ee75(0x246)+':<alias|ji'+_0x69ee75(0x2b8)});return;}const _0x42d03b=[];for(const _0x3b1965 of _0x1927db){const _0x29cc45=await getChatTimezone(_0x3b1965)||DEFAULT_TIMEZONE,_0x1d1af9=parseTimeToken(_0x6a7596,_0x29cc45);if(!_0x1d1af9){_0x42d03b['push']({'chat':_0x3b1965,'ok':![],'reason':_0x69ee75(0x196)+'ed'});continue;}if(_0x1d1af9[_0x69ee75(0x12c)]==='datetime'){const _0x21130d=_0x1d1af9['dt'],_0x4d9108=Math[_0x69ee75(0x2f9)](_0x21130d[_0x69ee75(0x217)]()/(-0x42*-0x5+0x65*0xb+-0x1b9)),_0x1e6028=await addScheduleRow({'chat_jid':_0x3b1965,'message':_0x489dbb,'time':null,'send_at':_0x4d9108,'frequency':_0x69ee75(0x234),'timezone':_0x21130d[_0x69ee75(0x1d5)]||_0x29cc45,'creator_jid':_0x23f473});if(_0x1e6028)_0x42d03b[_0x69ee75(0x18d)]({'chat':_0x3b1965,'ok':!![],'id':_0x1e6028,'when':_0x21130d['toLocaleSt'+_0x69ee75(0x298)](DateTime[_0x69ee75(0x1dc)+'ED'])});else _0x42d03b[_0x69ee75(0x18d)]({'chat':_0x3b1965,'ok':![],'reason':'db_failed'});continue;}if(_0x1d1af9[_0x69ee75(0x12c)]===_0x69ee75(0x300)){const [_0x7f64e3,_0x61c43]=_0x1d1af9[_0x69ee75(0x300)][_0x69ee75(0x1cd)](':')[_0x69ee75(0xb1)](Number);let _0x260d7b=DateTime[_0x69ee75(0x33b)]()[_0x69ee75(0xe5)](_0x29cc45),_0x5adafb=_0x260d7b[_0x69ee75(0x336)](_0x69ee75(0x76))['set']({'hour':_0x7f64e3,'minute':_0x61c43,'second':0x0,'millisecond':0x0});if(_0x200293&&Number[_0x69ee75(0x206)](_0x200293)&&_0x200293>=-0x8*-0x4d2+-0x227a+-0x415)_0x5adafb=_0x5adafb['plus']({'days':Number(_0x200293)});else{if(_0x5adafb<=_0x260d7b)_0x5adafb=_0x5adafb[_0x69ee75(0x2c3)]({'days':0x1});}const _0x3aa324=Math[_0x69ee75(0x2f9)](_0x5adafb[_0x69ee75(0x217)]()/(0x1886+0x17cb*0x1+-0x2c69)),_0x436800=await addScheduleRow({'chat_jid':_0x3b1965,'message':_0x489dbb,'time':null,'send_at':_0x3aa324,'frequency':_0x69ee75(0x234),'timezone':_0x29cc45,'creator_jid':_0x23f473});if(_0x436800)_0x42d03b['push']({'chat':_0x3b1965,'ok':!![],'id':_0x436800,'when':_0x5adafb[_0x69ee75(0x274)+_0x69ee75(0x298)](DateTime['DATETIME_M'+'ED'])});else _0x42d03b['push']({'chat':_0x3b1965,'ok':![],'reason':_0x69ee75(0xf9)});continue;}_0x42d03b[_0x69ee75(0x18d)]({'chat':_0x3b1965,'ok':![],'reason':_0x69ee75(0x180)+_0x69ee75(0xaf)});}const _0x18394a=_0x42d03b[_0x69ee75(0x2b9)](_0x579de1=>_0x579de1['ok']),_0x4baf65=_0x42d03b['filter'](_0x25813b=>!_0x25813b['ok']);let _0x59397e='';if(_0x18394a[_0x69ee75(0x198)]){_0x59397e+=_0x69ee75(0x111)+_0x69ee75(0x31a)+'r\x20'+_0x18394a['length']+('\x20target(s)'+':\x0a');for(const _0x2a6d4b of _0x18394a)_0x59397e+='â€¢\x20'+_0x2a6d4b[_0x69ee75(0x177)]+_0x69ee75(0x2e2)+_0x2a6d4b['id']+_0x69ee75(0xb5)+_0x2a6d4b[_0x69ee75(0x1fe)]+'\x0a';}if(_0x4baf65[_0x69ee75(0x198)]){_0x59397e+=_0x69ee75(0xfb)+'\x20'+_0x4baf65[_0x69ee75(0x198)]+(_0x69ee75(0x96)+':\x0a');for(const _0x7d01aa of _0x4baf65)_0x59397e+='â€¢\x20'+_0x7d01aa[_0x69ee75(0x177)]+_0x69ee75(0x17b)+_0x7d01aa[_0x69ee75(0x1f5)]+'\x0a';}await sendWithRetry(_0x54f92a,{'text':_0x59397e[_0x69ee75(0x1b7)]()||_0x69ee75(0x119)+_0x69ee75(0x25a)+'.'});return;}if(_0x1c0de2==='add'){if(!_0x1bf8fe[-0x2a3+0xab*0x13+-0xa0c]){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x316)+'ed\x20add\x20<HH'+':mm|YYYY-M'+_0x69ee75(0x89)+_0x69ee75(0xf5)+_0x69ee75(0x23f)+_0x69ee75(0x2a1)+'sage...>\x20g'+_0x69ee75(0xe3)+_0x69ee75(0xa4)});return;}const _0x2ced36=_0x1bf8fe[-0x2143+0xedd+-0x7c*-0x26],_0x5c8087=_0x1bf8fe[-0x1*0x1db3+-0x10f4+0x43e*0xb]&&/^\d+$/[_0x69ee75(0xda)](_0x1bf8fe[0x1*-0x1d46+-0xd*-0x233+0x2*0x59])?Number(_0x1bf8fe[0x956+0x1*-0x484+-0x4cf]):null;let _0xcce1a5=(_0x552d5c||'')['trim']();!_0xcce1a5&&(_0xcce1a5=extractInlineAfterToken(_0x243503,_0x2ced36));if(!_0xcce1a5||_0xcce1a5[_0x69ee75(0x1b7)]()[_0x69ee75(0x198)]===-0x711*0x1+-0x13dd+-0x2*-0xd77){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x10b)+_0x69ee75(0x140)+_0x69ee75(0x131)+_0x69ee75(0x333)+_0x69ee75(0x306)+_0x69ee75(0x13e)+_0x69ee75(0xa9)+_0x69ee75(0x22b)+_0x69ee75(0x21e)+'l>'});return;}const _0x4eb1a1=[];for(const _0x330131 of _0x1927db){const _0x506f07=await getChatTimezone(_0x330131)||DEFAULT_TIMEZONE,_0x437c76=parseTimeToken(_0x2ced36,_0x506f07);if(!_0x437c76){_0x4eb1a1[_0x69ee75(0x18d)]({'chat':_0x330131,'ok':![],'reason':'parse_fail'+'ed'});continue;}const _0x57d4c2=_0x23f473;if(_0x437c76[_0x69ee75(0x12c)]===_0x69ee75(0xdf)){const _0x587ec6=_0x437c76['dt'],_0x28cd86=Math[_0x69ee75(0x2f9)](_0x587ec6['toMillis']()/(-0xbf*-0x23+-0x24f7*-0x1+-0x3b2c)),_0x6896d=await addScheduleRow({'chat_jid':_0x330131,'message':_0xcce1a5,'time':null,'send_at':_0x28cd86,'frequency':_0x69ee75(0x234),'timezone':_0x587ec6['zoneName']||_0x506f07,'creator_jid':_0x57d4c2});if(_0x6896d)_0x4eb1a1[_0x69ee75(0x18d)]({'chat':_0x330131,'ok':!![],'id':_0x6896d,'when':_0x587ec6[_0x69ee75(0x274)+_0x69ee75(0x298)](DateTime[_0x69ee75(0x1dc)+'ED'])});else _0x4eb1a1['push']({'chat':_0x330131,'ok':![],'reason':'db_failed'});continue;}if(_0x437c76[_0x69ee75(0x12c)]===_0x69ee75(0x300)){const _0xdd838c=_0x437c76[_0x69ee75(0x300)];if(_0x5c8087&&Number[_0x69ee75(0x206)](_0x5c8087)&&_0x5c8087>=0xa1*-0x13+0x6*-0x407+0x241e){let _0x2d706d=DateTime[_0x69ee75(0x33b)]()[_0x69ee75(0xe5)](_0x506f07);const [_0x3eed80,_0x2dde50]=_0xdd838c[_0x69ee75(0x1cd)](':')[_0x69ee75(0xb1)](Number);let _0xd293a=_0x2d706d['startOf'](_0x69ee75(0x76))['set']({'hour':_0x3eed80,'minute':_0x2dde50,'second':0x0,'millisecond':0x0});_0xd293a=_0xd293a[_0x69ee75(0x2c3)]({'days':Number(_0x5c8087)});const _0x1fa31b=Math[_0x69ee75(0x2f9)](_0xd293a[_0x69ee75(0x217)]()/(0x17f2+-0x233f+-0x1*-0xf35)),_0x658a4f=await addScheduleRow({'chat_jid':_0x330131,'message':_0xcce1a5,'time':null,'send_at':_0x1fa31b,'frequency':'once','timezone':_0x506f07,'creator_jid':_0x57d4c2});if(_0x658a4f)_0x4eb1a1[_0x69ee75(0x18d)]({'chat':_0x330131,'ok':!![],'id':_0x658a4f,'when':_0xd293a[_0x69ee75(0x274)+_0x69ee75(0x298)](DateTime[_0x69ee75(0x1dc)+'ED'])});else _0x4eb1a1[_0x69ee75(0x18d)]({'chat':_0x330131,'ok':![],'reason':'db_failed'});continue;}const _0x310f60=await addScheduleRow({'chat_jid':_0x330131,'message':_0xcce1a5,'time':_0xdd838c,'send_at':null,'frequency':_0x69ee75(0x29b),'timezone':_0x506f07,'creator_jid':_0x57d4c2});if(_0x310f60)_0x4eb1a1[_0x69ee75(0x18d)]({'chat':_0x330131,'ok':!![],'id':_0x310f60,'when':_0xdd838c+'\x20('+_0x506f07+')'});else _0x4eb1a1[_0x69ee75(0x18d)]({'chat':_0x330131,'ok':![],'reason':_0x69ee75(0xf9)});continue;}_0x4eb1a1[_0x69ee75(0x18d)]({'chat':_0x330131,'ok':![],'reason':_0x69ee75(0x180)+_0x69ee75(0xaf)});}const _0x47067a=_0x4eb1a1[_0x69ee75(0x2b9)](_0x380af5=>_0x380af5['ok']),_0x4f3a5e=_0x4eb1a1[_0x69ee75(0x2b9)](_0x551a45=>!_0x551a45['ok']);let _0x36bcf8='';if(_0x47067a['length']){_0x36bcf8+=_0x69ee75(0x111)+_0x69ee75(0x9a)+_0x47067a[_0x69ee75(0x198)]+(_0x69ee75(0x96)+':\x0a');for(const _0x1cb489 of _0x47067a)_0x36bcf8+='â€¢\x20'+_0x1cb489[_0x69ee75(0x177)]+_0x69ee75(0x2e2)+_0x1cb489['id']+'\x20when:'+_0x1cb489['when']+'\x0a';}if(_0x4f3a5e[_0x69ee75(0x198)]){_0x36bcf8+='Failed\x20for'+'\x20'+_0x4f3a5e[_0x69ee75(0x198)]+(_0x69ee75(0x96)+':\x0a');for(const _0x2ae97f of _0x4f3a5e)_0x36bcf8+='â€¢\x20'+_0x2ae97f[_0x69ee75(0x177)]+'\x20->\x20'+_0x2ae97f[_0x69ee75(0x1f5)]+'\x0a';}await sendWithRetry(_0x54f92a,{'text':_0x36bcf8[_0x69ee75(0x1b7)]()||_0x69ee75(0x119)+_0x69ee75(0x25a)+'.'});return;}if(_0x1c0de2===_0x69ee75(0x1a6)){const _0x9b457b=[];for(const _0x43ffa7 of _0x1927db){const _0x47520a=await listSchedulesForChat(_0x43ffa7);for(const _0x3a5b07 of _0x47520a)_0x9b457b['push']({'chatJid':_0x43ffa7,..._0x3a5b07});}if(!_0x9b457b[_0x69ee75(0x198)]){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x207)+'\x20scheduled'+_0x69ee75(0x314)+_0x69ee75(0xdb)+_0x69ee75(0x27c)+'targets.'});return;}let _0x3eeff2='';for(const _0x50432d of _0x9b457b){const _0x1c0859=_0x50432d[_0x69ee75(0x1f7)]?DateTime[_0x69ee75(0x225)](Number(_0x50432d[_0x69ee75(0x1f7)])*(-0xced*-0x3+0x255+-0x2534))[_0x69ee75(0xe5)](_0x50432d[_0x69ee75(0xd2)]||DEFAULT_TIMEZONE)[_0x69ee75(0x229)]({'suppressSeconds':!![]}):_0x50432d[_0x69ee75(0x168)]?_0x50432d[_0x69ee75(0x168)]+'\x20('+(_0x50432d['timezone']||_0x69ee75(0x215)+_0x69ee75(0x127))+')':'unknown',_0xa204f=(_0x50432d[_0x69ee75(0x317)]||'')[_0x69ee75(0x1cd)]('\x0a')[_0x69ee75(0xb1)](_0x35ddd7=>_0x35ddd7[_0x69ee75(0x26b)]())[_0x69ee75(0x227)]('\x0a'),_0x52f4e5=_0x50432d[_0x69ee75(0x2a4)]+':'+_0x50432d['id']+'\x20when:'+_0x1c0859+_0x69ee75(0x284)+(_0x50432d[_0x69ee75(0x211)]||'daily')+_0x69ee75(0x2d0)+(_0x50432d['enabled']?'yes':'no')+'\x0amsg:\x0a'+_0xa204f+'\x0a\x0a';(_0x3eeff2+_0x52f4e5)[_0x69ee75(0x198)]>-0x647*-0x2+-0x25a1+0x1eef&&(await sendWithRetry(_0x54f92a,{'text':_0x3eeff2[_0x69ee75(0x1b7)]()}),_0x3eeff2=''),_0x3eeff2+=_0x52f4e5;}if(_0x3eeff2[_0x69ee75(0x1b7)]())await sendWithRetry(_0x54f92a,{'text':_0x3eeff2[_0x69ee75(0x1b7)]()});return;}if(_0x1c0de2===_0x69ee75(0x2cf)){const _0x2a5a48=_0x1bf8fe[_0x69ee75(0x24b)](-0x278*0x1+-0x2254+0x24ce);let _0x34e7d=_0x2a5a48[_0x69ee75(0x227)]('\x20');if(!_0x34e7d&&_0x55f7b0)_0x34e7d=_0x55f7b0['trim']();if(!_0x34e7d){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x316)+_0x69ee75(0x125)+_0x69ee75(0x2ea)+_0x69ee75(0x201)+_0x69ee75(0x1c3)+'\x20gp:<alias'+_0x69ee75(0x116)});return;}if(/^\s*all\s*$/i[_0x69ee75(0xda)](_0x34e7d)){let _0x292a1f=0x3*0x557+-0x1*0x246d+0x1468;for(const _0x9574c8 of _0x1927db){const _0x379a2f=await removeAllSchedulesForChat(_0x9574c8);_0x292a1f+=_0x379a2f;}await sendWithRetry(_0x54f92a,{'text':'Deleted\x20'+_0x292a1f+(_0x69ee75(0xb0)+_0x69ee75(0x1d8)+_0x69ee75(0x27c)+_0x69ee75(0x267))});return;}const _0x38f28a=_0x34e7d['split'](/[\s,]+/)[_0x69ee75(0xb1)](_0x5054e2=>_0x5054e2[_0x69ee75(0x1b7)]())[_0x69ee75(0x2b9)](Boolean),_0x5d3dd2=_0x38f28a[_0x69ee75(0xb1)](_0x66ab76=>Number(_0x66ab76))[_0x69ee75(0x2b9)](_0x44d050=>!Number['isNaN'](_0x44d050)&&Number['isInteger'](_0x44d050)&&_0x44d050>-0x10*0x185+-0x974*-0x2+0x568);if(!_0x5d3dd2['length']){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x1ed)+_0x69ee75(0x266)+_0x69ee75(0x2b6)+_0x69ee75(0xe2)+_0x69ee75(0x2da)+_0x69ee75(0x1d0)+_0x69ee75(0x158)+_0x69ee75(0xd6)+'hed\x20delete'+_0x69ee75(0x10c)+'lias|jid|a'+_0x69ee75(0x33a)});return;}const _0x45a8c7=[...new Set(_0x5d3dd2)],_0x2e28f3=await getCombinedSchedulesForChats(_0x1927db),_0x5e88d9=[],_0x3643e6=[];for(const _0x4b2fb6 of _0x45a8c7){if(_0x4b2fb6<-0x1484+-0x14c5+0x294a||_0x4b2fb6>_0x2e28f3[_0x69ee75(0x198)]){_0x3643e6[_0x69ee75(0x18d)]({'n':_0x4b2fb6,'reason':'not\x20found'});continue;}const _0x63bb02=_0x2e28f3[_0x4b2fb6-(-0xd14+-0x353*0x4+0x1a61)]['id'],_0x3dbfaf=await removeScheduleByDBId(_0x63bb02);if(_0x3dbfaf)_0x5e88d9[_0x69ee75(0x18d)]({'n':_0x4b2fb6,'id':_0x63bb02});else _0x3643e6[_0x69ee75(0x18d)]({'n':_0x4b2fb6,'reason':_0x69ee75(0x276)+_0x69ee75(0x2c6)});}let _0x381603='';if(_0x5e88d9['length'])_0x381603+=_0x69ee75(0x263)+_0x5e88d9[_0x69ee75(0x198)]+(_0x69ee75(0xb0)+_0x69ee75(0x2e8))+_0x5e88d9[_0x69ee75(0xb1)](_0x330576=>_0x330576['n']+_0x69ee75(0x109)+_0x330576['id']+')')['join'](',\x20')+'.\x0a';if(_0x3643e6['length'])_0x381603+='Failed\x20to\x20'+_0x69ee75(0x222)+_0x3643e6[_0x69ee75(0xb1)](_0x2dded3=>_0x2dded3['n']+'('+_0x2dded3['reason']+')')['join'](',\x20')+'.';await sendWithRetry(_0x54f92a,{'text':_0x381603[_0x69ee75(0x1b7)]()||_0x69ee75(0x19a)+_0x69ee75(0x288)});return;}if(_0x1c0de2===_0x69ee75(0x335)){const _0x1753a4=Number(_0x1bf8fe[0xe2f*-0x1+-0x54*-0x43+-0x7cb]),_0xb72286=_0x1bf8fe[0x12*0x30+-0x3bb+0x1*0x5e]||(_0x55f7b0?_0x55f7b0['split'](/\r?\n/)[-0x461*0x7+-0x1fd*-0x3+0x18b0][_0x69ee75(0x1b7)]():null);if(!_0x1753a4||!_0xb72286){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x316)+_0x69ee75(0x2af)+_0x69ee75(0x1f6)+':mm|in\x20N\x20h'+_0x69ee75(0x311)+_0x69ee75(0x8d)+_0x69ee75(0x9b)+_0x69ee75(0x2bc)+'>'});return;}const _0x18b1db=await getCombinedSchedulesForChats(_0x1927db);if(!_0x18b1db||_0x18b1db['length']<_0x1753a4){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x119)+_0x69ee75(0x1c8)+_0x1753a4+(_0x69ee75(0x320)+'oss\x20reques'+_0x69ee75(0xc6)+'s.')});return;}const _0xf41ecb=_0x18b1db[_0x1753a4-(0x34*-0x22+0x2*0x134b+-0x1fad)]['id'];if(!_0xf41ecb){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x119)+_0x69ee75(0x1c8)+_0x1753a4+(_0x69ee75(0x320)+_0x69ee75(0x6e)+_0x69ee75(0xc6)+'s.')});return;}const _0x493c15=parseTimeToken(_0xb72286,DEFAULT_TIMEZONE);if(!_0x493c15){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x29f)+'parse\x20new\x20'+_0x69ee75(0x340)});return;}if(_0x493c15[_0x69ee75(0x12c)]===_0x69ee75(0xdf)){const _0x312e0e=_0x493c15['dt'],_0x393122=Math['floor'](_0x312e0e[_0x69ee75(0x217)]()/(-0x91d*0x4+-0x18c+0x29e8)),_0x27e0de=await updateScheduleFields(_0xf41ecb,{'send_at':_0x393122,'time':null,'frequency':_0x69ee75(0x234),'timezone':_0x312e0e[_0x69ee75(0x1d5)]||DEFAULT_TIMEZONE});if(_0x27e0de)await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x319)+_0x1753a4+('\x20updated\x20t'+_0x69ee75(0x2fe)+_0x69ee75(0x93))+_0x312e0e['toLocaleSt'+_0x69ee75(0x298)](DateTime[_0x69ee75(0x1dc)+'ED'])+'\x20('+_0x312e0e['zoneName']+')'});else await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x29f)+_0x69ee75(0x23e)+_0x69ee75(0x1d6)});return;}else{if(_0x493c15[_0x69ee75(0x12c)]===_0x69ee75(0x300)){const _0x4d6ef7=_0x493c15[_0x69ee75(0x300)],_0x7775cd=_0x18b1db[_0x1753a4-(0x1e05*0x1+-0x228e+-0x2*-0x245)],_0x4da7ab=_0x7775cd[_0x69ee75(0xd2)]||await getChatTimezone(_0x7775cd[_0x69ee75(0x182)])||DEFAULT_TIMEZONE,_0x5b3160=await updateScheduleFields(_0xf41ecb,{'time':_0x4d6ef7,'send_at':null,'frequency':'daily','timezone':_0x4da7ab});if(_0x5b3160)await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x319)+_0x1753a4+(_0x69ee75(0x1e1)+'o\x20recurrin'+_0x69ee75(0x162))+_0x4d6ef7+'\x20('+_0x4da7ab+')'});else await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x29f)+_0x69ee75(0x23e)+_0x69ee75(0x1d6)});return;}else{await sendWithRetry(_0x54f92a,{'text':'Unsupporte'+'d\x20time\x20for'+_0x69ee75(0x258)+'it.'});return;}}}if(_0x1c0de2===_0x69ee75(0x211)){const _0x5b373e=Number(_0x1bf8fe[-0xac2+-0x2*-0xda9+-0x108e]),_0x560725=Number(_0x1bf8fe[0x12cb+-0x2*0xe4a+0x9cc]);if(!_0x5b373e||!_0x560725||_0x560725<-0x24d9*0x1+-0xc1b+-0x53*-0x97){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x316)+_0x69ee75(0xe7)+_0x69ee75(0x21d)+'>\x20<n>\x20\x20(n='+_0x69ee75(0x257)+_0x69ee75(0x10f)+_0x69ee75(0x16a)+_0x69ee75(0xd1)+_0x69ee75(0x2bc)+'>'});return;}const _0x531171=await getCombinedSchedulesForChats(_0x1927db);if(!_0x531171||_0x531171[_0x69ee75(0x198)]<_0x5b373e){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x119)+_0x69ee75(0x1c8)+_0x5b373e+('\x20found\x20acr'+_0x69ee75(0x6e)+'ted\x20target'+'s.')});return;}const _0x306595=_0x531171[_0x5b373e-(0x14*-0x1f+-0x1caf+0x1f1c*0x1)]['id'];if(!_0x306595){await sendWithRetry(_0x54f92a,{'text':'No\x20schedul'+_0x69ee75(0x1c8)+_0x5b373e+(_0x69ee75(0x320)+_0x69ee75(0x6e)+_0x69ee75(0xc6)+'s.')});return;}let _0x4782c1='daily';if(_0x560725===0x14f5+0x4*-0x52b+-0x3*0x18)_0x4782c1=_0x69ee75(0x29b);else _0x4782c1=_0x69ee75(0x106)+'ys:'+_0x560725;const _0x140910=await updateScheduleFields(_0x306595,{'frequency':_0x4782c1});if(_0x140910)await sendWithRetry(_0x54f92a,{'text':'Schedule\x20#'+_0x5b373e+(_0x69ee75(0xa8)+_0x69ee75(0x13b))+_0x4782c1});else await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x29f)+_0x69ee75(0xa5)+_0x69ee75(0x1b4)});return;}if(_0x1c0de2===_0x69ee75(0x101)||_0x1c0de2===_0x69ee75(0x86)){const _0x2efbf5=Number(_0x1bf8fe[-0x1d9*0x5+0x932+0xd]);if(!_0x2efbf5){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x316)+_0x69ee75(0x144)+_0x1c0de2+(_0x69ee75(0x16f)+_0x69ee75(0x128)+_0x69ee75(0x1d7))});return;}const _0x48efdf=await getCombinedSchedulesForChats(_0x1927db);if(!_0x48efdf||_0x48efdf['length']<_0x2efbf5){await sendWithRetry(_0x54f92a,{'text':'No\x20schedul'+_0x69ee75(0x1c8)+_0x2efbf5+('\x20found\x20acr'+_0x69ee75(0x6e)+_0x69ee75(0xc6)+'s.')});return;}const _0x12bb61=_0x48efdf[_0x2efbf5-(0x741*-0x1+0x505*-0x3+0x1651)]['id'];if(!_0x12bb61){await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x119)+_0x69ee75(0x1c8)+_0x2efbf5+(_0x69ee75(0x320)+_0x69ee75(0x6e)+_0x69ee75(0xc6)+'s.')});return;}const _0x32c060=await updateScheduleFields(_0x12bb61,{'enabled':_0x1c0de2===_0x69ee75(0x86)?0x21d*0xa+-0x61*-0x47+-0x3008:0x126f+-0x20c*0x5+0x1*-0x833});if(_0x32c060)await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x319)+_0x2efbf5+'\x20'+_0x1c0de2+'d.'});else await sendWithRetry(_0x54f92a,{'text':_0x69ee75(0x29f)+'update\x20ena'+_0x69ee75(0x8e)+'.'});return;}await sendWithRetry(_0x54f92a,{'text':USAGE});}catch(_0x11c517){warn('[sched]\x20ha'+_0x69ee75(0x2cd)+_0x69ee75(0x176)+_0x69ee75(0x283)+(_0x11c517?.[_0x69ee75(0x317)]||_0x11c517));}}export async function initialize(_0x38df43){const _0x32d275=_0x4bbee4;if(!_0x38df43)throw new Error('sched.init'+_0x32d275(0x1f0)+_0x32d275(0x88)+_0x32d275(0xd0));setupSendApi(_0x38df43),refreshConfig();try{await ensureSchema();}catch(_0x10636d){error(_0x32d275(0xfa)+_0x32d275(0x15b)+_0x32d275(0x18f)+(_0x10636d?.[_0x32d275(0x317)]||_0x10636d));throw _0x10636d;}try{startManagedListener({'botRef':_0x38df43,'eventName':_0x32d275(0x1e8)+_0x32d275(0x28a),'handler':_0x41e345=>{const _0x151b09=_0x32d275;try{info('[sched]\x20co'+'nnection.u'+_0x151b09(0x1db)+_0x151b09(0x11f)+_0x151b09(0x32f)+_0x151b09(0x114)+_0x151b09(0x2ce)+'r)'),setupSendApi(_0x38df43);}catch(_0x423404){warn(_0x151b09(0xc3)+_0x151b09(0xb9)+_0x151b09(0x1c6)+_0x151b09(0x17a)+'\x20'+(_0x423404?.['message']||_0x423404));}},'moduleName':name});}catch(_0x150b60){warn('[sched]\x20fa'+_0x32d275(0x326)+_0x32d275(0x2c0)+_0x32d275(0x261)+'ction.upda'+_0x32d275(0xd7)+_0x32d275(0x256)+(_0x150b60?.[_0x32d275(0x317)]||_0x150b60));}startSchedulerAligned(),info('[sched]\x20in'+_0x32d275(0x242)+_0x32d275(0x323)+'anager\x20use'+_0x32d275(0x154)+_0x32d275(0x80)+_0x32d275(0x20e));}export async function cleanup(){const _0x1f8abe=_0x4bbee4;try{stopScheduler();try{stopManagedListener(name,_0x1f8abe(0x1e8)+'.update');}catch(_0x3c0b42){}}catch(_0x5e3f81){warn('[sched]\x20cl'+_0x1f8abe(0x126)+'r:\x20'+(_0x5e3f81?.[_0x1f8abe(0x317)]||_0x5e3f81));}finally{botRef=null,sendApi=null,info(_0x1f8abe(0x94)+'eaned\x20up');}}function _0x6554(_0x2c6be0,_0x1a3a89){const _0x314382=_0x4c32();return _0x6554=function(_0x13ef1e,_0x4733a6){_0x13ef1e=_0x13ef1e-(-0x1c45*0x1+0xf87+0xd26);let _0x5ba798=_0x314382[_0x13ef1e];return _0x5ba798;},_0x6554(_0x2c6be0,_0x1a3a89);}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};