const _0x3fb202=_0x3f43;(function(_0x45f02f,_0x4c024c){const _0x4ee2f3=_0x3f43,_0xb91b17=_0x45f02f();while(!![]){try{const _0x22428b=-parseInt(_0x4ee2f3(0x21e))/(0x269f+-0x1dc7+0x49*-0x1f)*(-parseInt(_0x4ee2f3(0x163))/(0x65f+0x17*0x16d+-0x9ca*0x4))+parseInt(_0x4ee2f3(0x1b2))/(-0x9ab+0xcdb*-0x3+0x303f)+parseInt(_0x4ee2f3(0x198))/(0x56c*0x6+0x6bf+-0x2743)*(-parseInt(_0x4ee2f3(0x1f6))/(-0x3*-0x8d1+0x1*-0x83+-0x19eb))+parseInt(_0x4ee2f3(0x13c))/(0x2595+0x39b*-0x1+-0x21f4)*(-parseInt(_0x4ee2f3(0x1e8))/(0x234d+0x1*0xd7c+0x1*-0x30c2))+-parseInt(_0x4ee2f3(0x125))/(-0x1c2+-0x1b36+-0xe8*-0x20)+parseInt(_0x4ee2f3(0x134))/(-0xec5*-0x1+0x922*0x4+0x2*-0x19a2)+parseInt(_0x4ee2f3(0x179))/(-0x50*-0x76+-0x49*-0x1f+0xb*-0x427);if(_0x22428b===_0x4c024c)break;else _0xb91b17['push'](_0xb91b17['shift']());}catch(_0x17bfa3){_0xb91b17['push'](_0xb91b17['shift']());}}}(_0x4efb,0xccba4+0x10bcb0+-0x14910f));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import*as _0x1d8c5c from'../utils/groups.js';import{getDefault,getConnection}from'../utils/connection.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getConfig}from'../utils/config.js';export const name='status_bro'+_0x3fb202(0x165)+'k';export const version=_0x3fb202(0x218)+_0x3fb202(0x1f7);export const priority=-0x2*0x7a3+-0x1265*0x1+0x2228;export const commands=[_0x3fb202(0x14a)];export const configKeys=[_0x3fb202(0x1e6)+_0x3fb202(0x1b9)+_0x3fb202(0x1f4),'STATUS_BRO'+_0x3fb202(0x1b9)+_0x3fb202(0x150)+_0x3fb202(0x147),_0x3fb202(0x1e6)+_0x3fb202(0x1b9)+'AULT_REASO'+'N',_0x3fb202(0x1e6)+'ADCAST'];function _0x3f43(_0x45aa66,_0x9afc4a){const _0x26e53a=_0x4efb();return _0x3f43=function(_0x1d0c5d,_0x193cbd){_0x1d0c5d=_0x1d0c5d-(0x1*-0x10f1+0x543*0x1+0xcd2);let _0x3ef11f=_0x26e53a[_0x1d0c5d];return _0x3ef11f;},_0x3f43(_0x45aa66,_0x9afc4a);}const FALLBACK_DEFAULTS={'DEDUPE_TTL_MS':(0x21b1+0x1724+-0x38b7)*(0x9f0+-0x1264+0xc5c),'DEFAULT_WARN_MESSAGE':'*‚ö†Ô∏èWARN\x20MES'+'SAGE‚ö†Ô∏è*\x0a\x0a*U'+_0x3fb202(0x142)+'r}\x0a*MAX\x20WA'+_0x3fb202(0x1df)+_0x3fb202(0x17b)+_0x3fb202(0x171)+'G\x20WARNINGS'+':*\x20{remain'+_0x3fb202(0x187)+_0x3fb202(0x1a4)+_0x3fb202(0x155),'DEFAULT_MAX_WARN':0x3,'DEFAULT_REASON':_0x3fb202(0x18c)+'atus\x20broad'+'casts.'};let CONFIG={};try{CONFIG=typeof getConfig==='function'?getConfig()||{}:{};}catch(_0x21cd4d){warn(_0x3fb202(0x1bf)+_0x3fb202(0x1e1)+_0x3fb202(0x1ca)+_0x3fb202(0x16b)+'ding\x20with\x20'+'file\x20defau'+'lts.'),CONFIG={};}const DEFAULTS={'DEDUPE_TTL_MS':Number(CONFIG?.[_0x3fb202(0x1e6)+_0x3fb202(0x20c)]?.[_0x3fb202(0x21b)+_0x3fb202(0x14f)]??CONFIG[_0x3fb202(0x1e6)+'ADCAST_DED'+'UPE_TTL_MS']??FALLBACK_DEFAULTS[_0x3fb202(0x21b)+'_MS'])||FALLBACK_DEFAULTS[_0x3fb202(0x21b)+'_MS'],'DEFAULT_WARN_MESSAGE':typeof CONFIG[_0x3fb202(0x1e6)+'ADCAST_DEF'+'AULT_WARN']===_0x3fb202(0x213)&&CONFIG['STATUS_BRO'+'ADCAST_DEF'+_0x3fb202(0x1f4)][_0x3fb202(0x1d2)]?CONFIG['STATUS_BRO'+_0x3fb202(0x1b9)+_0x3fb202(0x1f4)]:typeof CONFIG?.[_0x3fb202(0x1e6)+'ADCAST']?.['DEFAULT_WA'+'RN']===_0x3fb202(0x213)&&CONFIG[_0x3fb202(0x1e6)+_0x3fb202(0x20c)][_0x3fb202(0x1e7)+'RN'][_0x3fb202(0x1d2)]?CONFIG[_0x3fb202(0x1e6)+_0x3fb202(0x20c)][_0x3fb202(0x1e7)+'RN']:FALLBACK_DEFAULTS[_0x3fb202(0x1e7)+_0x3fb202(0x195)],'DEFAULT_MAX_WARN':Number(CONFIG['STATUS_BRO'+_0x3fb202(0x1b9)+_0x3fb202(0x150)+_0x3fb202(0x147)]??CONFIG?.[_0x3fb202(0x1e6)+_0x3fb202(0x20c)]?.[_0x3fb202(0x166)]??FALLBACK_DEFAULTS[_0x3fb202(0x180)+_0x3fb202(0x177)])||FALLBACK_DEFAULTS[_0x3fb202(0x180)+_0x3fb202(0x177)],'DEFAULT_REASON':typeof CONFIG[_0x3fb202(0x1e6)+_0x3fb202(0x1b9)+_0x3fb202(0x185)+'N']==='string'&&CONFIG[_0x3fb202(0x1e6)+'ADCAST_DEF'+'AULT_REASO'+'N'][_0x3fb202(0x1d2)]?CONFIG['STATUS_BRO'+_0x3fb202(0x1b9)+_0x3fb202(0x185)+'N']:typeof CONFIG?.[_0x3fb202(0x1e6)+_0x3fb202(0x20c)]?.[_0x3fb202(0x20d)+_0x3fb202(0x139)]===_0x3fb202(0x213)&&CONFIG[_0x3fb202(0x1e6)+_0x3fb202(0x20c)]['DEFAULT_RE'+'ASON'][_0x3fb202(0x1d2)]?CONFIG[_0x3fb202(0x1e6)+'ADCAST'][_0x3fb202(0x20d)+_0x3fb202(0x139)]:FALLBACK_DEFAULTS[_0x3fb202(0x20d)+_0x3fb202(0x139)]};let botRef=null;const processedMessageKeys=new Map(),sleep=_0x2da5a6=>new Promise(_0x3dd44d=>setTimeout(_0x3dd44d,_0x2da5a6));function isStatusBroadcastMention(_0x3e5f07){const _0x84666d=_0x3fb202;if(!_0x3e5f07||!_0x3e5f07[_0x84666d(0x170)])return![];const _0x52f75f=_0x3e5f07[_0x84666d(0x170)];return _0x52f75f[_0x84666d(0x21a)+_0x84666d(0x1d9)+_0x84666d(0x176)]||_0x52f75f[_0x84666d(0x156)+'ssage']?.[_0x84666d(0x190)]?.[_0x84666d(0x201)]?.[_0x84666d(0x1e0)+'e']()===_0x84666d(0x132)+_0x84666d(0x138)||_0x52f75f[_0x84666d(0x1b4)+'textInfo']?.[_0x84666d(0x1f2)+_0x84666d(0x1c3)]?.[_0x84666d(0x156)+_0x84666d(0x176)]?.['key']?.['remoteJid']?.[_0x84666d(0x1e0)+'e']()===_0x84666d(0x132)+_0x84666d(0x138);}const TABLE_SETTINGS=_0x3fb202(0x21d)+_0x3fb202(0x1c1)+_0x3fb202(0x1f0),TABLE_WARN_USERS=_0x3fb202(0x21d)+_0x3fb202(0x1dc)+'ns',TABLE_WARN_SETTINGS=_0x3fb202(0x21d)+_0x3fb202(0x1dc)+_0x3fb202(0x1c4);async function ensureTables(){const _0x29f50e=_0x3fb202;try{await db[_0x29f50e(0x169)](_0x29f50e(0x1ed)+_0x29f50e(0x130)+_0x29f50e(0x1f5)+TABLE_SETTINGS+('\x20(chat_jid'+'\x20TEXT\x20PRIM'+_0x29f50e(0x1cf)+_0x29f50e(0x1bd)+_0x29f50e(0x1e2)+_0x29f50e(0x196)+_0x29f50e(0x211))),await db[_0x29f50e(0x169)]('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+_0x29f50e(0x1f5)+TABLE_WARN_USERS+(_0x29f50e(0x19e)+_0x29f50e(0x1eb)+_0x29f50e(0x19b)+_0x29f50e(0x16c)+'NOT\x20NULL,\x20'+'warn_count'+_0x29f50e(0x12d)+_0x29f50e(0x12c)+_0x29f50e(0x1ea)+_0x29f50e(0x1b1)+'d,\x20user_ji'+_0x29f50e(0x183))),await db[_0x29f50e(0x169)]('CREATE\x20TAB'+_0x29f50e(0x130)+_0x29f50e(0x1f5)+TABLE_WARN_SETTINGS+(_0x29f50e(0x19e)+_0x29f50e(0x19d)+_0x29f50e(0x1c6)+_0x29f50e(0x189)+_0x29f50e(0x160)+'x_warns\x20IN'+'TEGER,\x20upd'+_0x29f50e(0x1e5)+_0x29f50e(0x21f)));}catch(_0xb8494e){error(_0xb8494e,_0x29f50e(0x1b8)+_0x29f50e(0x1b7)+'ailed');throw _0xb8494e;}}async function getChatEnabled(_0x1770a7){const _0x5688f7=_0x3fb202,_0x1f9bee=await db[_0x5688f7(0x1b6)]('SELECT\x20ena'+_0x5688f7(0x174)+TABLE_SETTINGS+(_0x5688f7(0x12a)+_0x5688f7(0x13e)),[_0x1770a7]);return _0x1f9bee?Number(_0x1f9bee[_0x5688f7(0x1be)])===0x1177+-0xc90+-0x4e6:![];}async function setChatEnabled(_0x27aa11,_0xe0ab97){const _0x404974=_0x3fb202;await db[_0x404974(0x182)](_0x404974(0x209)+'O\x20'+TABLE_SETTINGS+('\x20(chat_jid'+_0x404974(0x1d8)+_0x404974(0x202)+_0x404974(0x16e)+_0x404974(0x1f9)+'ON\x20CONFLIC'+_0x404974(0x1b0)+_0x404974(0x222)+_0x404974(0x19a)+_0x404974(0x1ae)+'uded.enabl'+_0x404974(0x154)+_0x404974(0x145)+_0x404974(0x1a7)+_0x404974(0x205)),[_0x27aa11,_0xe0ab97?-0x816*0x1+-0x2560+0x2d77:0x8d6+0x2661+-0x2f37,Math[_0x404974(0x207)](Date[_0x404974(0x158)]()/(-0x1*-0x1c33+-0x13*-0x15b+-0x320c))]);}async function getWarnSettings(_0x145d51){const _0x1c969e=_0x3fb202,_0x9360c3=await db[_0x1c969e(0x1b6)](_0x1c969e(0x18f)+_0x1c969e(0x193)+_0x1c969e(0x14e)+_0x1c969e(0x225)+TABLE_WARN_SETTINGS+(_0x1c969e(0x12a)+_0x1c969e(0x13e)),[_0x145d51]),_0x50af0d=DEFAULTS['DEFAULT_WA'+_0x1c969e(0x195)],_0x566160=DEFAULTS[_0x1c969e(0x180)+'X_WARN'];if(!_0x9360c3)return{'warn_message':_0x50af0d,'max_warns':_0x566160};return{'warn_message':_0x9360c3[_0x1c969e(0x1a0)+'ge']&&_0x9360c3['warn_messa'+'ge'][_0x1c969e(0x1d2)]?_0x9360c3[_0x1c969e(0x1a0)+'ge']:_0x50af0d,'max_warns':Number[_0x1c969e(0x140)](Number(_0x9360c3[_0x1c969e(0x194)]))&&Number(_0x9360c3[_0x1c969e(0x194)])>0x27f+0xa07*0x3+-0x5*0x684?Number(_0x9360c3[_0x1c969e(0x194)]):_0x566160};}async function setWarnSettings(_0x15293a,_0x5eb5b8){const _0xcc96d2=_0x3fb202,_0x268953=await getWarnSettings(_0x15293a),_0x11b369=_0xcc96d2(0x1a0)+'ge'in _0x5eb5b8?_0x5eb5b8['warn_messa'+'ge']:_0x268953[_0xcc96d2(0x1a0)+'ge'],_0x3ae195=_0xcc96d2(0x194)in _0x5eb5b8?_0x5eb5b8[_0xcc96d2(0x194)]:_0x268953['max_warns'];await db[_0xcc96d2(0x182)](_0xcc96d2(0x209)+'O\x20'+TABLE_WARN_SETTINGS+('\x20(chat_jid'+_0xcc96d2(0x1f8)+_0xcc96d2(0x15b)+_0xcc96d2(0x219)+_0xcc96d2(0x1a1)+_0xcc96d2(0x220)+_0xcc96d2(0x1bb)+_0xcc96d2(0x18a)+'(chat_jid)'+_0xcc96d2(0x141)+'\x20SET\x20warn_'+_0xcc96d2(0x172)+'cluded.war'+_0xcc96d2(0x193)+_0xcc96d2(0x14e)+_0xcc96d2(0x20e)+_0xcc96d2(0x16a)+_0xcc96d2(0x202)+'t=excluded'+_0xcc96d2(0x184)+'t;'),[_0x15293a,_0x11b369,_0x3ae195,Math['floor'](Date[_0xcc96d2(0x158)]()/(-0x84e+-0xb85*-0x1+-0x3b*-0x3))]);}async function getWarnCount(_0x150771,_0x4de4f3){const _0x132eb0=_0x3fb202,_0x5b3b1f=await db['get'](_0x132eb0(0x18f)+_0x132eb0(0x223)+_0x132eb0(0x1a2)+TABLE_WARN_USERS+(_0x132eb0(0x12a)+_0x132eb0(0x159)+'AND\x20user_j'+_0x132eb0(0x146)),[_0x150771,_0x4de4f3]);return _0x5b3b1f?Number(_0x5b3b1f[_0x132eb0(0x148)]||0x1610+-0x11e*0x1f+0xc92):0x1c76+-0x2*0x2b5+-0x170c;}async function setWarnCount(_0x55ee63,_0x40b8b0,_0x5a902f){const _0x5f4de7=_0x3fb202;await db[_0x5f4de7(0x182)](_0x5f4de7(0x209)+'O\x20'+TABLE_WARN_USERS+(_0x5f4de7(0x19e)+_0x5f4de7(0x17d)+_0x5f4de7(0x13b)+'nt)\x20VALUES'+'\x20(?,\x20?,\x20?)'+_0x5f4de7(0x199)+'CT(chat_ji'+_0x5f4de7(0x20b)+_0x5f4de7(0x157)+'TE\x20SET\x20war'+_0x5f4de7(0x1a5)+'excluded.w'+_0x5f4de7(0x1aa)),[_0x55ee63,_0x40b8b0,Number(_0x5a902f||0xb1*-0xb+-0x444+0xbdf)]);}function _0x4efb(){const _0x1abc69=['messages.u','warn_messa','ated_at)\x20V','OM\x20','\x20it\x20to\x20the','\x0a*REASON:*','n_count\x20=\x20','(Opt-In).\x20','luded.upda','fromMe','‚ùå\x20Status\x20l','arn_count;','ock\x20**ENAB','(gp:|gp)?\x5c','mmand\x20to\x20t','led\x20=\x20excl','replace','T(chat_jid','Y\x20(chat_ji','1015002ctrneo','Unknown\x20gr','messageCon','alias>`\x20or','get','reTables\x20f','[sbl]\x20ensu','ADCAST_DEF','\x20group\x20onl','?,\x20?,\x20?)\x20O','isArray','nabled\x20INT','enabled','[sbl]\x20getC','findIndex','adcast_set','\x20by\x20adding','age','n_settings','extendedTe','ARY\x20KEY,\x20w','Invalid\x20nu','sock','warnmsg','rew\x20an\x20err','resolveNam','s\x20require\x20','Your\x20defau','[sbl]\x20dele','ARY\x20KEY,\x20e','\x20reset\x20for','ck\x20for\x20','length','Please\x20@me','\x20mentioned','*Warn\x20Mess','and\x20will\x20b','[sbl]\x20init',',\x20enabled,','sMentionMe','Dedupe\x20TTL','or\x20JID:\x20`','adcast_war','trim','*Status\x20lo','RNINGS:*\x20{','toLowerCas','onfig()\x20th','EGER,\x20upda','*üö®BAN\x20ALER','\x20updated.\x0a','ated_at\x20IN','STATUS_BRO','DEFAULT_WA','35uGhojW','xtMessage','PRIMARY\x20KE','\x20TEXT\x20NOT\x20',':*\x0a','CREATE\x20TAB','forEach','ias\x20or\x20JID','tings','te\x20failed:','quotedMess','text','AULT_WARN','EXISTS\x20','10xKRyIW','p-only',',\x20warn_mes','(?,\x20?,\x20?)\x20','\x20notice\x20to','isCommand','jid','caption','\x20user(s)\x20i','maxwarns','ode:\x20Group','remoteJid','\x20updated_a','find','‚ÑπÔ∏è\x20Max\x20warn','ted_at;','sage\x20for\x20','floor','show','INSERT\x20INT','sendMessag','d,\x20user_ji','ADCAST','DEFAULT_RE','=excluded.','[sbl]\x20kick','a\x20group\x20al','EGER);','e\x20removed.','string','[sbl]\x20warn','has','includes','from','3.1.0-grou','warns,\x20upd','groupStatu','DEDUPE_TTL','participan','status_bro','1wmYlQH','TEGER);','ALUES\x20(?,\x20','‚úÖ\x20Warn\x20mes',')\x20DO\x20UPDAT','n_count\x20FR','‚úÖ\x20ENABLED','\x20FROM\x20','\x20is\x20','1326752bjqXOR','ax\x20warning','videoMessa','contextInf','lt\x20connect','\x20WHERE\x20cha','indexOf','EFAULT\x200,\x20','\x20INTEGER\x20D','ms.','l`\x20command','LE\x20IF\x20NOT\x20','{remaining','status@bro','psert','1202553UxZEWz','ialized.\x20M','[sbl]\x20Fail','age\x20for\x20','adcast','ASON','\x20end.',',\x20warn_cou','414918JVovZq','ning\x20messa','t_jid\x20=\x20?','LED**\x20for\x20','isFinite','\x20DO\x20UPDATE','SER:*\x20{use','conversati','n\x20found.\x20A','d_at\x20=\x20exc','id\x20=\x20?','ARN','warn_count','s\x20in\x20','sbl','he\x20current','\x5cs*','\x20set\x20to\x20','\x20max_warns','_MS','AULT_MAX_W','@g.us','\x20warnings\x20','In\x20PM,\x20`sb','ed,\x20update','\x20{reason}','protocolMe','d)\x20DO\x20UPDA','now','t_jid\x20=\x20?\x20','oup\x20alias\x20','sage,\x20max_','\x20connectio','resetwarns','off','clear','e\x20TEXT,\x20ma','split','ned\x20up','964426kOORlp','ate','adcast_loc','MAX_WARN','[sbl]\x20fail','mentionedJ','exec','max_warns,','or,\x20procee','_jid\x20TEXT\x20','pplying\x20co','t)\x20VALUES\x20','{user}','message','\x0a*REMAININ','message=ex','gp:','bled\x20FROM\x20','ld\x20not\x20be\x20','ssage','X_WARN','delete','1782940oUUBXu','cipantsUpd','max_warns}','ed\x20',',\x20user_jid','‚úÖ\x20Status\x20l','\x20via\x20`gp\x20<','DEFAULT_MA','t\x20warnings','run','d));','.updated_a','AULT_REASO','s\x20for\x20','ing_warns}','{reason}','arn_messag','N\x20CONFLICT','BLED**\x20for','Posting\x20st','endsWith','groupParti','SELECT\x20war','key','set','[sbl]\x20clea','n_message,','max_warns','RN_MESSAGE','ted_at\x20INT','-Specific\x20','66520bzVAng','\x20ON\x20CONFLI','E\x20SET\x20enab','NULL,\x20user','‚úÖ\x20Warnings','\x20TEXT\x20PRIM','\x20(chat_jid'];_0x4efb=function(){return _0x1abc69;};return _0x4efb();}async function sendNotice(_0x1a6481,_0x406772,_0x2f31c0=[]){const _0x31765b=_0x3fb202;if(!_0x1a6481||!botRef)return;try{const _0x3c7773=botRef[_0x31765b(0x1c8)]?.['sendMessag'+'e']||botRef[_0x31765b(0x20a)+'e'];await _0x3c7773(_0x1a6481,{'text':_0x406772,'mentions':Array[_0x31765b(0x1bc)](_0x2f31c0)?_0x2f31c0:[]});}catch(_0xf69c3f){warn(_0x31765b(0x167)+'ed\x20to\x20send'+_0x31765b(0x1fa)+'\x20'+_0x1a6481+':\x20'+(_0xf69c3f?.[_0x31765b(0x170)]||_0xf69c3f));}}async function kickUser(_0x2efc9e,_0x1ffaf4){const _0x7331e5=_0x3fb202;try{const _0xe7f875=botRef?.[_0x7331e5(0x1c8)]||botRef;if(_0xe7f875?.['groupParti'+_0x7331e5(0x17a)+'ate'])return await _0xe7f875[_0x7331e5(0x18e)+_0x7331e5(0x17a)+_0x7331e5(0x164)](_0x2efc9e,[_0x1ffaf4],'remove'),info(_0x7331e5(0x20f)+_0x7331e5(0x17c)+_0x1ffaf4+'\x20from\x20'+_0x2efc9e),!![];return![];}catch(_0x11b7a5){return error(_0x11b7a5,_0x7331e5(0x136)+'ed\x20to\x20kick'+'\x20'+_0x1ffaf4),![];}}async function issueAutoWarningFor(_0x56ff02){const _0x294704=_0x3fb202,_0x41d723=_0x56ff02[_0x294704(0x190)][_0x294704(0x201)],_0x4c939b=_0x56ff02[_0x294704(0x190)][_0x294704(0x21c)+'t']||_0x56ff02[_0x294704(0x190)][_0x294704(0x201)];if(await isadmin(botRef,{'key':_0x56ff02[_0x294704(0x190)],'message':_0x56ff02[_0x294704(0x170)]}))return;const {warn_message:_0xc63be,max_warns:_0x5d869e}=await getWarnSettings(_0x41d723),_0x209aa5=await getWarnCount(_0x41d723,_0x4c939b),_0x50a3d4=_0x209aa5+(-0x26*0x43+-0x12f9*-0x1+-0x906);await setWarnCount(_0x41d723,_0x4c939b,_0x50a3d4);if(_0x50a3d4>=_0x5d869e){await sendNotice(_0x41d723,_0x294704(0x1e3)+'Tüö®*\x0a\x0aUser\x20'+'@'+_0x4c939b[_0x294704(0x161)]('@')[0x24f6+0x1*-0x82d+-0x1cc9]+('\x20has\x20reach'+_0x294704(0x17c))+_0x5d869e+(_0x294704(0x152)+_0x294704(0x1d6)+_0x294704(0x212)),[_0x4c939b]),await kickUser(_0x41d723,_0x4c939b),await setWarnCount(_0x41d723,_0x4c939b,-0xba0*-0x3+-0xfa2+0x66a*-0x3);return;}const _0x4ef550=_0x5d869e-_0x50a3d4;let _0x4a9ce3=String(_0xc63be)[_0x294704(0x1af)](_0x294704(0x16f),'@'+_0x4c939b['split']('@')[0x178a+-0x2680+0xef6])['replace']('{max_warns'+'}',String(_0x5d869e))[_0x294704(0x1af)](_0x294704(0x131)+'_warns}',String(_0x4ef550))['replace'](_0x294704(0x188),DEFAULTS[_0x294704(0x20d)+_0x294704(0x139)]);await sendNotice(_0x41d723,_0x4a9ce3,[_0x4c939b]),info(_0x294704(0x214)+_0x294704(0x17c)+_0x4c939b+'\x20in\x20'+_0x41d723+'\x20('+_0x50a3d4+'/'+_0x5d869e+')');}async function deleteWithRetryMsg(_0x360356){const _0x1aabf5=_0x3fb202;for(let _0x59fd80=-0x1bf*0x7+0x2659+-0x1a20;_0x59fd80<0xf48+0x824*0x1+-0x176a;_0x59fd80++){try{const _0x46c3d2=botRef[_0x1aabf5(0x1c8)]?.[_0x1aabf5(0x20a)+'e']||botRef[_0x1aabf5(0x20a)+'e'];return await _0x46c3d2(_0x360356[_0x1aabf5(0x190)][_0x1aabf5(0x201)],{'delete':_0x360356[_0x1aabf5(0x190)]}),!![];}catch(_0x1e67b7){if(_0x59fd80===-0x2635*-0x1+-0x1f07+0x397*-0x2)await sleep(-0x11*-0x237+0x7*-0x27a+0x1*-0x1357);else warn(_0x1aabf5(0x1ce)+_0x1aabf5(0x1f1)+'\x20'+(_0x1e67b7?.[_0x1aabf5(0x170)]||_0x1e67b7));}}return![];}async function rawMessagesUpsertHandler({messages:_0x2734ee}){const _0x9f15e4=_0x3fb202;for(const _0x1ba4fc of _0x2734ee){const _0x2e83f8=_0x1ba4fc[_0x9f15e4(0x190)]?.[_0x9f15e4(0x201)];if(!_0x1ba4fc[_0x9f15e4(0x170)]||_0x1ba4fc['key']['fromMe']||!_0x2e83f8||!_0x2e83f8['endsWith'](_0x9f15e4(0x151)))continue;const _0x4e7720=_0x2e83f8+'::'+_0x1ba4fc['key']['id'];if(processedMessageKeys[_0x9f15e4(0x215)](_0x4e7720))continue;processedMessageKeys[_0x9f15e4(0x191)](_0x4e7720,setTimeout(()=>processedMessageKeys[_0x9f15e4(0x178)](_0x4e7720),DEFAULTS[_0x9f15e4(0x21b)+_0x9f15e4(0x14f)]));const _0x2b3a44=await getChatEnabled(_0x2e83f8);if(!_0x2b3a44||await isadmin(botRef,{'key':_0x1ba4fc[_0x9f15e4(0x190)],'message':_0x1ba4fc[_0x9f15e4(0x170)]}))continue;isStatusBroadcastMention(_0x1ba4fc)&&(await deleteWithRetryMsg(_0x1ba4fc)&&await issueAutoWarningFor(_0x1ba4fc));}}async function findSudoerJid(_0x1f35ae){const _0x5c6686=_0x3fb202,{findings:_0x2e5220}=userJidFromCtx(_0x1f35ae),_0x332bb2=await listSudo(),_0x20465d=new Set(_0x332bb2['map'](String));for(const _0x271221 of _0x2e5220){if(_0x271221?.[_0x5c6686(0x1fc)]){const _0x420426=normalizeToJid(_0x271221[_0x5c6686(0x1fc)]);if(_0x420426&&_0x20465d[_0x5c6686(0x215)](_0x420426))return _0x420426;if(_0x20465d[_0x5c6686(0x215)](_0x271221[_0x5c6686(0x1fc)]))return _0x271221[_0x5c6686(0x1fc)];}}return null;}async function getMessageText(_0x9870b8){const _0x121c61=_0x3fb202;if(!_0x9870b8||!_0x9870b8[_0x121c61(0x170)])return'';const _0x5d5c55=_0x9870b8[_0x121c61(0x170)];return _0x5d5c55[_0x121c61(0x143)+'on']||_0x5d5c55[_0x121c61(0x1c5)+_0x121c61(0x1e9)]?.[_0x121c61(0x1f3)]||_0x5d5c55['imageMessa'+'ge']?.['caption']||_0x5d5c55[_0x121c61(0x127)+'ge']?.[_0x121c61(0x1fd)]||'';}function parseGpFromArgs(_0x431cc0){const _0x1d7de3=_0x3fb202,_0x3bc55c=_0x431cc0[_0x1d7de3(0x1c0)](_0x1201ad=>_0x1201ad[_0x1d7de3(0x1e0)+'e']()===_0x1d7de3(0x173)||_0x1201ad[_0x1d7de3(0x1e0)+'e']()==='gp');if(_0x3bc55c!==-(-0x2d*0x66+-0x1453+-0x1321*-0x2)&&_0x431cc0[_0x3bc55c+(-0x3a5+-0x18c1+0x1c67)])return _0x431cc0[_0x3bc55c+(0x11*0x243+-0x20*-0x5c+-0x31f2)];const _0x3857b3=_0x431cc0[_0x1d7de3(0x203)](_0xfb058a=>_0xfb058a[_0x1d7de3(0x216)](_0x1d7de3(0x151)));if(_0x3857b3)return _0x3857b3;if(_0x431cc0[_0x1d7de3(0x1d2)]>-0x107e*-0x2+0x1e6a+-0x3f66){const _0x53f2fa=_0x431cc0[_0x431cc0[_0x1d7de3(0x1d2)]-(-0x14b2+-0x5*-0x37a+0x351)];if(!['on',_0x1d7de3(0x15e),_0x1d7de3(0x208),_0x1d7de3(0x191),_0x1d7de3(0x15d),_0x1d7de3(0x1c9),_0x1d7de3(0x1ff)][_0x1d7de3(0x216)](_0x53f2fa['toLowerCas'+'e']()))return _0x53f2fa;}return null;}export async function onMessage(_0x4f7810){const _0x5085af=_0x3fb202,_0x44509e=(_0x4f7810[_0x5085af(0x1f3)]||await getMessageText(_0x4f7810))[_0x5085af(0x1dd)]();if(!_0x4f7810[_0x5085af(0x1fb)]||!_0x44509e)return;const [_0x1ad49a,..._0x4033df]=_0x44509e[_0x5085af(0x161)](/\s+/),_0x29c347=_0x1ad49a[_0x5085af(0x1e0)+'e']()['replace']('/','');if(!commands[_0x5085af(0x216)](_0x29c347))return;const _0xd4d95=_0x4f7810[_0x5085af(0x190)][_0x5085af(0x201)][_0x5085af(0x18d)](_0x5085af(0x151)),_0x493a73=_0x4f7810[_0x5085af(0x190)][_0x5085af(0x1a8)],_0x465e5d=_0x493a73?!![]:await isSudo(botRef,_0x4f7810),_0x39b6e7=_0xd4d95?await isadmin(botRef,_0x4f7810):![];if(!_0xd4d95&&!_0x465e5d)return;if(_0xd4d95&&!_0x39b6e7)return;let _0x158304,_0x534e5a=[];if(_0xd4d95){_0x158304=_0x4f7810[_0x5085af(0x190)]['remoteJid'];const _0xe51c59=(_0x4f7810[_0x5085af(0x190)]['participan'+'t']||_0x4f7810[_0x5085af(0x190)][_0x5085af(0x217)])['split']('@')[-0x23d1+0x2625+-0x254],_0x87bf10=await getDefault(_0xe51c59);if(!_0x87bf10||_0x87bf10[_0x5085af(0x1d2)]===0xb29+0xb*0x2cd+0x11*-0x278)_0x534e5a=[_0x4f7810[_0x5085af(0x190)][_0x5085af(0x201)]],await sendNotice(_0x158304,'No\x20default'+_0x5085af(0x15c)+_0x5085af(0x144)+_0x5085af(0x16d)+_0x5085af(0x1ad)+_0x5085af(0x14b)+_0x5085af(0x1ba)+'y.');else{for(const _0x2d3175 of Array[_0x5085af(0x1bc)](_0x87bf10)?_0x87bf10:[_0x87bf10]){const _0x1a2c12=await getConnection(_0x2d3175);if(_0x1a2c12)_0x534e5a['push'](...Array[_0x5085af(0x1bc)](_0x1a2c12)?_0x1a2c12:[_0x1a2c12]);}_0x534e5a=[...new Set(_0x534e5a)];if(_0x534e5a[_0x5085af(0x1d2)]===0x30*-0x10+0x15a2+0xa*-0x1dd)return sendNotice(_0x158304,_0x5085af(0x1cd)+_0x5085af(0x129)+'ion(s)\x20cou'+_0x5085af(0x175)+'resolved\x20t'+'o\x20any\x20grou'+'ps.');}}else{_0x158304=_0x493a73?getBotJid():await findSudoerJid(_0x4f7810);if(!_0x158304)return;const _0x3ce379=parseGpFromArgs(_0x4033df);if(!_0x3ce379)return sendNotice(_0x158304,_0x5085af(0x153)+_0x5085af(0x12f)+_0x5085af(0x1cc)+_0x5085af(0x210)+_0x5085af(0x1ef)+_0x5085af(0x17f)+_0x5085af(0x1b5)+_0x5085af(0x1c2)+_0x5085af(0x1a3)+_0x5085af(0x13a));const _0x443f7d=await _0x1d8c5c[_0x5085af(0x1cb)+'e'](_0x3ce379)||(_0x3ce379[_0x5085af(0x216)](_0x5085af(0x151))?_0x3ce379:null);if(!_0x443f7d)return sendNotice(_0x158304,_0x5085af(0x1b3)+_0x5085af(0x15a)+_0x5085af(0x1db)+_0x3ce379+'`');_0x534e5a=[_0x443f7d];}const _0x1ea663=(_0x4033df[_0x5085af(0x203)](_0xeee620=>['on',_0x5085af(0x15e),_0x5085af(0x208)][_0x5085af(0x216)](_0xeee620[_0x5085af(0x1e0)+'e']()))||_0x5085af(0x208))[_0x5085af(0x1e0)+'e'](),_0x2bdeaa=_0x4033df['find'](_0x51b635=>[_0x5085af(0x1c9),_0x5085af(0x1ff),_0x5085af(0x15d)][_0x5085af(0x216)](_0x51b635['toLowerCas'+'e']()));let _0xa78eba='';for(const _0x3ea6d1 of _0x534e5a){if(_0x2bdeaa){if(_0x2bdeaa===_0x5085af(0x1c9)){if(_0x4033df[_0x5085af(0x216)](_0x5085af(0x191))){const _0x287d23=_0x44509e['toLowerCas'+'e']()[_0x5085af(0x12b)](_0x5085af(0x191))+(-0x3*0x371+0x5c8+0x48f);let _0x1a587b=_0x44509e['slice'](_0x287d23)[_0x5085af(0x1dd)]();const _0x183199=parseGpFromArgs(_0x4033df);if(_0x183199)_0x1a587b=_0x1a587b[_0x5085af(0x1af)](new RegExp(_0x5085af(0x1ac)+'s*'+_0x183199+_0x5085af(0x14c),'i'),'')[_0x5085af(0x1dd)]();if(!_0x1a587b){_0xa78eba+='Please\x20pro'+'vide\x20a\x20war'+_0x5085af(0x13d)+'ge\x20for\x20'+_0x3ea6d1+'.\x0a';continue;}await setWarnSettings(_0x3ea6d1,{'warn_message':_0x1a587b}),_0xa78eba+=_0x5085af(0x221)+_0x5085af(0x206)+_0x3ea6d1+_0x5085af(0x1e4);}else{const {warn_message:_0x398db6}=await getWarnSettings(_0x3ea6d1);_0xa78eba+=_0x5085af(0x1d5)+_0x5085af(0x137)+_0x3ea6d1+_0x5085af(0x1ec)+_0x398db6+'\x0a\x0a';}}else{if(_0x2bdeaa===_0x5085af(0x1ff)){if(_0x4033df[_0x5085af(0x216)](_0x5085af(0x191))){const _0x4aa0c2=parseInt(_0x4033df[_0x4033df[_0x5085af(0x12b)](_0x5085af(0x191))+(-0x2394+0x1*0x26ce+-0x339)],0x12b*-0x11+0x144c+-0x67);if(isNaN(_0x4aa0c2)||_0x4aa0c2<-0x6a*-0x5+0x52*0x3e+-0x1*0x15ed){_0xa78eba+=_0x5085af(0x1c7)+'mber\x20for\x20m'+_0x5085af(0x126)+_0x5085af(0x149)+_0x3ea6d1+'.\x0a';continue;}await setWarnSettings(_0x3ea6d1,{'max_warns':_0x4aa0c2}),_0xa78eba+='‚úÖ\x20Max\x20warn'+_0x5085af(0x186)+_0x3ea6d1+_0x5085af(0x14d)+_0x4aa0c2+'.\x0a';}else{const {max_warns:_0x264f7e}=await getWarnSettings(_0x3ea6d1);_0xa78eba+=_0x5085af(0x204)+'s\x20for\x20'+_0x3ea6d1+_0x5085af(0x124)+_0x264f7e+'.\x0a';}}else{if(_0x2bdeaa===_0x5085af(0x15d)){const _0x1e4edd=_0x4f7810[_0x5085af(0x170)]?.[_0x5085af(0x1c5)+_0x5085af(0x1e9)]?.[_0x5085af(0x128)+'o']?.[_0x5085af(0x168)+'id']||[];if(!_0x1e4edd[_0x5085af(0x1d2)]){_0xa78eba+=_0x5085af(0x1d3)+'ntion\x20a\x20us'+'er\x20to\x20rese'+_0x5085af(0x181)+'\x20for\x20in\x20'+_0x3ea6d1+'.\x0a';continue;}for(const _0x3ae9fe of _0x1e4edd)await setWarnCount(_0x3ea6d1,_0x3ae9fe,-0x222d+0x1dbc+0x471);_0xa78eba+=_0x5085af(0x19c)+_0x5085af(0x1d0)+_0x5085af(0x1d4)+_0x5085af(0x1fe)+'n\x20'+_0x3ea6d1+'.\x0a';}}}}else{if(_0x1ea663==='on')await setChatEnabled(_0x3ea6d1,!![]),_0xa78eba+=_0x5085af(0x17e)+_0x5085af(0x1ab)+_0x5085af(0x13f)+_0x3ea6d1+'\x0a';else{if(_0x1ea663===_0x5085af(0x15e))await setChatEnabled(_0x3ea6d1,![]),_0xa78eba+=_0x5085af(0x1a9)+'ock\x20**DISA'+_0x5085af(0x18b)+'\x20'+_0x3ea6d1+'\x0a';else{const _0x550181=await getChatEnabled(_0x3ea6d1);let _0x3d330a=_0x550181?_0x5085af(0x224):'‚ùå\x20DISABLED';_0xa78eba+=_0x5085af(0x1de)+_0x5085af(0x1d1)+_0x3ea6d1+':*\x0a'+_0x3d330a+'\x0a\x0a';}}}}await sendNotice(_0x158304,_0xa78eba[_0x5085af(0x1dd)]());}export async function initialize(_0x5cebe1){const _0xfbc108=_0x3fb202;botRef=_0x5cebe1,await ensureTables(),startManagedListener({'botRef':botRef,'eventName':'messages.u'+'psert','handler':rawMessagesUpsertHandler,'moduleName':name}),info(_0xfbc108(0x1d7)+_0xfbc108(0x135)+_0xfbc108(0x200)+_0xfbc108(0x197)+_0xfbc108(0x1a6)+_0xfbc108(0x1da)+':\x20'+DEFAULTS[_0xfbc108(0x21b)+_0xfbc108(0x14f)]+_0xfbc108(0x12e));}export async function cleanup(){const _0x454df6=_0x3fb202;stopManagedListener(name,_0x454df6(0x19f)+_0x454df6(0x133)),processedMessageKeys[_0x454df6(0x1ee)](_0x339639=>clearTimeout(_0x339639)),processedMessageKeys[_0x454df6(0x15f)](),botRef=null,info(_0x454df6(0x192)+_0x454df6(0x162));}