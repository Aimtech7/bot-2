const _0x287a48=_0x6df4;function _0x6df4(_0x51f9dc,_0x5126d5){const _0x383ae9=_0x2469();return _0x6df4=function(_0x34ec36,_0x213d10){_0x34ec36=_0x34ec36-(0x177c+-0x15cc+-0x4a);let _0x34cb5b=_0x383ae9[_0x34ec36];return _0x34cb5b;},_0x6df4(_0x51f9dc,_0x5126d5);}(function(_0x4e3020,_0x4ef549){const _0x5c6ac8=_0x6df4,_0x76961a=_0x4e3020();while(!![]){try{const _0x1518cf=-parseInt(_0x5c6ac8(0x1b7))/(-0x10a9+0x3b*-0x35+0x1ce1)+parseInt(_0x5c6ac8(0x266))/(-0x15*-0xb0+-0x167*-0x12+0x1*-0x27ac)+parseInt(_0x5c6ac8(0x16d))/(-0x175c+-0x2698+0x3df7)*(-parseInt(_0x5c6ac8(0x1ae))/(-0x11d9+-0x1b83*-0x1+-0x9a6))+parseInt(_0x5c6ac8(0x1e3))/(0xa3b+0x1837+-0x226d)*(-parseInt(_0x5c6ac8(0x1b2))/(-0x134c+-0x1336+0x2688))+-parseInt(_0x5c6ac8(0x223))/(-0x602*0x1+0x24b3+0x2*-0xf55)+-parseInt(_0x5c6ac8(0x273))/(0x22f0+-0x21e5+-0x103)+parseInt(_0x5c6ac8(0x1de))/(0x53*-0x53+0x1b42+-0x50);if(_0x1518cf===_0x4ef549)break;else _0x76961a['push'](_0x76961a['shift']());}catch(_0x55c559){_0x76961a['push'](_0x76961a['shift']());}}}(_0x2469,-0xde09a+0x2*0x959d2+-0x4*-0x19f84));import _0x3245bd from'fs';import _0x47ba84 from'path';import{mkdirSync}from'fs';import{rm as _0x1aeae8}from'fs/promises';import{warn,error,info}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getBotJid}from'../utils/bot-state.js';export const name='status_rec'+_0x287a48(0x2ab);export const version=_0x287a48(0x2a3);export const priority=0x15*0x33+-0x1cc8+0x2b*0x95;export const commands=[_0x287a48(0x16b)+_0x287a48(0x1cd)];export const configKeys=[_0x287a48(0x19b)+'OT',_0x287a48(0x1f1)+_0x287a48(0x17a),_0x287a48(0x1f1)+_0x287a48(0x275)+_0x287a48(0x270)+_0x287a48(0x171),_0x287a48(0x1f1)+'OVERY_KEEP'+_0x287a48(0x1a2),_0x287a48(0x1f1)+'OVERY_RESP'+_0x287a48(0x2a9)+'T',_0x287a48(0x1f1)+_0x287a48(0x173)+_0x287a48(0x1ab)+_0x287a48(0x187),_0x287a48(0x1f1)+_0x287a48(0x1e4)+_0x287a48(0x2a4)+'YTES_WARN'];let CFG={};try{CFG=typeof getConfig==='function'?getConfig()||{}:{};}catch(_0x2a0010){warn('['+name+(_0x287a48(0x1ef)+_0x287a48(0x1dd)+'\x20')+(_0x2a0010?.[_0x287a48(0x204)]||_0x2a0010)+('.\x20Falling\x20'+_0x287a48(0x196)+_0x287a48(0x27e))),CFG={};}const FALLBACKS={'DATA_SUBPATH':_0x47ba84[_0x287a48(0x27c)]('data',_0x287a48(0x2a5)),'CLEANUP_INTERVAL_MS':(-0x8bf*-0x2+-0x1baa+0xa44)*(-0x2459+-0x1634+-0x3ac9*-0x1)*(-0x1*-0x1a9+-0xd*-0x13f+-0x6*0x2f0)*(0x4ef+0x4a*0x22+0x1*-0xadb),'KEEP_SECONDS':(-0x30f*0x3+0x1a9e+-0x1159*0x1)*(0xbb+-0x1624+0x15a5)*(0x1ccc+-0x119f+-0xaf1),'RESPONDED_LIMIT':0x1388,'RESPONDED_TRIM_KEEP':0xbb8,'MAX_DOWNLOAD_BYTES_WARN':(0x2*0x8cb+-0x264d+-0x14c1*-0x1)*(-0x1d37+-0xd93+0x2eca)*(0x241d+-0x86a+0x17b3*-0x1)};function toPositiveInt(_0x4e284a,_0x52cdad){const _0x41d990=_0x287a48,_0x11bbc7=Number(_0x4e284a);if(!Number[_0x41d990(0x2af)](_0x11bbc7)||_0x11bbc7<=-0x3e5+-0x5*0x6d+0x606)return _0x52cdad;return Math['floor'](_0x11bbc7);}function _0x2469(){const _0x51c0a2=['es\x20dir:\x20','audio/','key\x20TEXT\x20P','VALUES\x20(?,','tion\x20error','2164464bjFvut',',\x20?)','lay_name,\x20','string','rmdirSync','.jpg','mentionedJ','_name\x20TEXT','ved\x20copy\x20f','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','NUP_INTERV','_ts,\x20creat','ialize\x20req','5148040gOIsRL','sendMessag','OVERY_CLEA','expires_at','\x20->\x20sent','.ogg',']\x20cleanup\x20','\x20is\x20large:','.mp3','join','essage\x20not','faults.','\x20error\x20for','true',']\x20saveItem','\x20but\x20no\x20sa','message_js','essage','AsBuffer\x20f','@g.us',',\x20cannot\x20r','ON\x20CONFLIC',']\x20DB\x20saved',']\x20onMessag','essage_jso','dListener\x20','TO\x20','mime','\x20for\x20statu','document','participan','mime,\x20file','ated_at\x20IN','d\x20deleted\x20','essage\x20ava','TERVAL_MS','or\x20','resolve','ad\x20maker\x20f','atusUpload','toLowerCas','send','❌\x20Failed\x20t','h\x20file_pat','no\x20resend)','tus\x20','ed.updated','ound','2.3.2','DOWNLOAD_B','status','ARN','promises','now','ONDED_LIMI','SELECT\x20fil','overy','CLEANUP_IN',']\x20upload\x20a','MAX_DOWNLO','isFinite','pushName','imageMessa','\x20KEEP_SEC=','?,\x20?,\x20?,\x20?','show','revoke','mime\x20TEXT,','e_path\x20FRO','failed:\x20','XT,\x0a\x20\x20\x20\x20\x20\x20','luded.valu','created_at','antidelete','er\x20for\x20sta','3rIKYEk','\x20available',']\x20sweepExp',']\x20ensureDa','AL_MS','ue\x20FROM\x20','OVERY_RESP','cessful\x20re','\x20value=exc','messages.u','msg_ts','r:\x20','protocolMe','OVERY_DIR',']\x20setPref\x20','ired\x20error','isDirector','ntentFromM','rticipant\x20','sticker','status_rec','split','catch','has','length','\x20bytes','_KEEP','extname','\x20-\x20','xtMessage','\x20FROM\x20','\x20expired\x20s','unlinkSync',']\x20expired\x20','statSync','bType','stringify','DATA_SUBPA','filter','audioMessa','toUpperCas','back\x20to\x20de','\x20->\x20','TEGER\x20DEFA','image','n)\x0a\x20\x20\x20\x20\x20\x20\x20','PROJECT_RO','eletion\x20fo','all','toString','o\x20set\x20anti','OVERY','atus\x20','_SECONDS','off','status\x20','le_path\x20TE','SELECT\x20*\x20F','clear','ed\x20file\x20fo','basename','RIMARY\x20KEY','ONDED_TRIM','o\x20send\x20rec',']\x20removed\x20','309124FOpjQC','alue\x20TEXT\x20',']\x20initiali','ssage','516JLnRUi','downloadCo','\x20handle\x20fa','.png','existsSync','410446pokRvz','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','audio','function','ue,\x20update',']\x20deletion','✔️\x20antidele','display_na','sock','messages','\x20expires_a','status@bro','get','CREATE\x20TAB','uires\x20bot\x20','delete\x20sta','remoteJid','videoMessa','ssage_json','exec','\x20\x20\x20\x20\x20\x20\x20upd','aileys','\x20status',':\x20getBotJi','us\x20',']\x20handlePo','\x20\x20);','ed\x20for\x20','ES\x20(?,\x20?,\x20',']\x20file\x20mis','run','default','_at=exclud','messageTim','d()\x20return','concat','\x20DEFAULT\x20\x27','id()\x20empty','g()\x20threw:','18054009Xijogo','\x20WHERE\x20exp','push',']\x20download','\x0a\x20\x20\x20\x20\x20\x20\x20(i','49505ddHypJ','OVERY_MAX_','error:\x20','\x200,\x0a\x20\x20\x20\x20\x20\x20','documentMe','value','\x20bytes)','\x20failed:\x20','path)','fromMe','slice','AD_BYTES_W',']\x20getConfi','KEEP_SECON','STATUS_REC','eply',']\x20saved\x20st',']\x20sendReco',':\x20file\x20mis','ror:\x20','ires_at\x20<=','\x0a\x20\x20\x20\x20\x20\x20\x20me','\x20\x20\x20\x20create','sing\x20for\x20','isAbsolute','ires_at,\x20m','veredToBot','enabled','size','text','mById\x20fail','\x20\x20\x20display','caption','message','zed.\x20DATA_',':\x20no\x20sendM','\x20WHERE\x20key','video','message\x20er','\x0a\x20\x20\x20\x20\x20\x20\x20fi','overed\x20sta','build\x20fail','overy.init','s(es)',']\x20failed\x20t','ULT\x200\x0a\x20\x20\x20\x20','Recovered\x20','\x0a\x20\x20\x20\x20\x20\x20\x20pa','\x20?,\x20?,\x20?,\x20','led:\x20','isArray','missing\x20at','instance','Message','ttempt\x20fai','TEXT,\x0a\x20\x20\x20\x20','age','rename','sage','cwd','\x20after\x20suc','psert','endsWith','iled:\x20','2546999IdWqEW','OVERY_KEEP','\x20failed\x20fo','adcast','DIR=','stopManage','messageStu',']\x20no\x20paylo','.tmp-','=\x20?','\x20(no\x20file_','RESPONDED_','saved\x20stat','OFF','\x20TEXT\x20DEFA','NOT\x20NULL,\x0a','bParameter',']\x20stub\x20rev','file_path','\x20entry\x20wit','r\x20status\x20','extendedTe','mimetype','stickerMes','floor','isBuffer','image/','startsWith','\x20error:\x20','_path,\x20msg','overy_item','includes','\x20WHERE\x20id\x20','ed_at,\x20exp','d_at)\x20VALU','\x20removed\x20(','map','ULT\x200,\x0a\x20\x20\x20',']\x20deleteIt','\x0aSaved\x20fil','tmp','readFile','d,\x20partici','e,\x20updated',']\x20sent\x20sav','UPDATE\x20SET','LE\x20IF\x20NOT\x20','e\x20error:\x20','contextInf','readdirSyn','EXISTS\x20','.webp','from','_at;','trim','key','TRIM_KEEP',']\x20getPref\x20','add','LIMIT','conversati',']\x20recovere'];_0x2469=function(){return _0x51c0a2;};return _0x2469();}const DEFAULTS={'DATA_SUBPATH':typeof CFG[_0x287a48(0x1f1)+_0x287a48(0x17a)]===_0x287a48(0x269)&&CFG[_0x287a48(0x1f1)+_0x287a48(0x17a)]['trim']()?CFG['STATUS_REC'+_0x287a48(0x17a)]:FALLBACKS[_0x287a48(0x192)+'TH'],'CLEANUP_INTERVAL_MS':toPositiveInt(CFG[_0x287a48(0x1f1)+_0x287a48(0x275)+_0x287a48(0x270)+_0x287a48(0x171)]??(CFG['STATUS_REC'+_0x287a48(0x1a0)]&&CFG[_0x287a48(0x1f1)+_0x287a48(0x1a0)][_0x287a48(0x2ac)+_0x287a48(0x296)]),FALLBACKS['CLEANUP_IN'+_0x287a48(0x296)]),'KEEP_SECONDS':toPositiveInt(CFG[_0x287a48(0x1f1)+_0x287a48(0x224)+'_SECONDS']??(CFG[_0x287a48(0x1f1)+_0x287a48(0x1a0)]&&CFG[_0x287a48(0x1f1)+_0x287a48(0x1a0)]['KEEP_SECON'+'DS']),FALLBACKS[_0x287a48(0x1f0)+'DS']),'RESPONDED_LIMIT':toPositiveInt(CFG[_0x287a48(0x1f1)+_0x287a48(0x173)+'ONDED_LIMI'+'T']??(CFG['STATUS_REC'+_0x287a48(0x1a0)]&&CFG['STATUS_REC'+_0x287a48(0x1a0)]['RESPONDED_'+'LIMIT']),FALLBACKS[_0x287a48(0x22e)+_0x287a48(0x25e)]),'RESPONDED_TRIM_KEEP':toPositiveInt(CFG['STATUS_REC'+_0x287a48(0x173)+'ONDED_TRIM'+'_KEEP']??(CFG['STATUS_REC'+'OVERY']&&CFG[_0x287a48(0x1f1)+_0x287a48(0x1a0)]['RESPONDED_'+_0x287a48(0x25b)]),FALLBACKS[_0x287a48(0x22e)+'TRIM_KEEP']),'MAX_DOWNLOAD_BYTES_WARN':toPositiveInt(CFG['STATUS_REC'+_0x287a48(0x1e4)+'DOWNLOAD_B'+'YTES_WARN']??(CFG[_0x287a48(0x1f1)+_0x287a48(0x1a0)]&&CFG[_0x287a48(0x1f1)+_0x287a48(0x1a0)][_0x287a48(0x2ae)+_0x287a48(0x1ee)+_0x287a48(0x2a6)]),FALLBACKS[_0x287a48(0x2ae)+_0x287a48(0x1ee)+_0x287a48(0x2a6)])};let botRef=null,DATA_DIR=null,cleanupInterval=null,_baileysHelpers=null;const PREFS_TABLE=_0x287a48(0x181)+'overy_pref'+'s',ITEMS_TABLE=_0x287a48(0x181)+_0x287a48(0x241)+'s';let respondedMsgIds=new Set();function trackSent(_0x4bc10d){const _0x3878ab=_0x287a48;try{const _0x1da1a9=_0x4bc10d?.[_0x3878ab(0x25a)]?.['id']||_0x4bc10d?.['id']||_0x4bc10d?.[_0x3878ab(0x1c0)]&&_0x4bc10d[_0x3878ab(0x1c0)][0x1e30+-0xb3b+-0x12f5]?.[_0x3878ab(0x25a)]?.['id']||Array[_0x3878ab(0x215)](_0x4bc10d)&&_0x4bc10d[0x1*0xe40+0x1*-0x2465+0x1625]?.['key']?.['id']||null;if(!_0x1da1a9)return;respondedMsgIds[_0x3878ab(0x25d)](String(_0x1da1a9));if(respondedMsgIds[_0x3878ab(0x1ff)]>DEFAULTS[_0x3878ab(0x22e)+_0x3878ab(0x25e)]){const _0x4341bb=Array[_0x3878ab(0x257)](respondedMsgIds);respondedMsgIds=new Set(_0x4341bb[_0x3878ab(0x1ed)](-DEFAULTS[_0x3878ab(0x22e)+_0x3878ab(0x25b)]));}}catch(_0x2bc166){}}function isOurSentId(_0x397f06){const _0x54f61b=_0x287a48;return _0x397f06&&respondedMsgIds[_0x54f61b(0x184)](String(_0x397f06));}async function getBaileysHelpers(){const _0x5ed87a=_0x287a48;if(_baileysHelpers)return _baileysHelpers;try{const _0x23cc72=await import('@whiskeysockets/baileys');_baileysHelpers={'downloadContentFromMessage':_0x23cc72[_0x5ed87a(0x1b3)+_0x5ed87a(0x17e)+_0x5ed87a(0x284)]||_0x23cc72[_0x5ed87a(0x1d6)]?.[_0x5ed87a(0x1b3)+_0x5ed87a(0x17e)+_0x5ed87a(0x284)]};if(!_baileysHelpers[_0x5ed87a(0x1b3)+_0x5ed87a(0x17e)+_0x5ed87a(0x284)])throw new Error(_0x5ed87a(0x1b3)+_0x5ed87a(0x17e)+_0x5ed87a(0x27d)+_0x5ed87a(0x16e));return _baileysHelpers;}catch(_0x437367){error(_0x437367,'['+name+(']\x20failed\x20t'+'o\x20import\x20B'+_0x5ed87a(0x1cc)));throw _0x437367;}}async function streamToBuffer(_0x539460){const _0x2b92a3=_0x287a48,_0x244a0d=[];for await(const _0x310d5f of _0x539460)_0x244a0d[_0x2b92a3(0x1e0)](Buffer[_0x2b92a3(0x23c)](_0x310d5f)?_0x310d5f:Buffer[_0x2b92a3(0x257)](_0x310d5f));return Buffer[_0x2b92a3(0x1da)](_0x244a0d);}function ensureDataDir(){const _0x14e743=_0x287a48;try{const _0xfc9b09=CFG||{},_0x1b3b11=_0xfc9b09[_0x14e743(0x19b)+'OT']&&typeof _0xfc9b09[_0x14e743(0x19b)+'OT']==='string'?_0xfc9b09[_0x14e743(0x19b)+'OT']:process[_0x14e743(0x21e)](),_0x5d6d95=typeof DEFAULTS['DATA_SUBPA'+'TH']==='string'&&DEFAULTS[_0x14e743(0x192)+'TH']['trim']()?DEFAULTS['DATA_SUBPA'+'TH']:null;DATA_DIR=_0x5d6d95&&typeof _0x5d6d95===_0x14e743(0x269)&&_0x5d6d95['trim']()?_0x47ba84[_0x14e743(0x1fb)](_0x5d6d95)?_0x5d6d95:_0x47ba84[_0x14e743(0x298)](_0x1b3b11,_0x5d6d95):_0x47ba84['resolve'](_0x1b3b11,FALLBACKS['DATA_SUBPA'+'TH']),mkdirSync(DATA_DIR,{'recursive':!![]});try{const _0x2d7313=_0x47ba84['resolve'](_0x1b3b11,'data',_0x14e743(0x2a5),_0x14e743(0x24b));if(_0x3245bd[_0x14e743(0x1b6)](_0x2d7313)&&_0x3245bd[_0x14e743(0x18f)](_0x2d7313)[_0x14e743(0x17d)+'y']()){const _0x39fa6e=_0x3245bd[_0x14e743(0x254)+'c'](_0x2d7313)[_0x14e743(0x193)](Boolean);for(const _0x449a09 of _0x39fa6e){const _0x15ddb8=_0x47ba84['join'](_0x2d7313,_0x449a09),_0x3822ec=_0x47ba84[_0x14e743(0x27c)](DATA_DIR,_0x449a09);try{if(!_0x3245bd[_0x14e743(0x1b6)](_0x3822ec))_0x3245bd['renameSync'](_0x15ddb8,_0x3822ec);else _0x3245bd[_0x14e743(0x18d)](_0x15ddb8);}catch(_0x2f2036){}}try{const _0x541c3c=_0x3245bd[_0x14e743(0x254)+'c'](_0x2d7313);if(!_0x541c3c||_0x541c3c[_0x14e743(0x185)]===0x1524+0x1c7c+-0x31a0)_0x3245bd[_0x14e743(0x26a)](_0x2d7313);}catch(_0x440bdb){}}}catch(_0x37a981){}}catch(_0x44648a){warn('['+name+(_0x14e743(0x170)+'taDir\x20erro'+_0x14e743(0x178))+(_0x44648a?.[_0x14e743(0x204)]||_0x44648a)),DATA_DIR=_0x47ba84[_0x14e743(0x298)](process[_0x14e743(0x21e)](),FALLBACKS[_0x14e743(0x192)+'TH']);try{mkdirSync(DATA_DIR,{'recursive':!![]});}catch(_0x5f5dd9){}}}async function ensureTables(){const _0x13965d=_0x287a48;await db[_0x13965d(0x1ca)]('CREATE\x20TAB'+_0x13965d(0x251)+_0x13965d(0x255)+PREFS_TABLE+(_0x13965d(0x26f)+_0x13965d(0x263)+_0x13965d(0x1aa)+',\x0a\x20\x20\x20\x20\x20\x20\x20v'+_0x13965d(0x1af)+_0x13965d(0x232)+_0x13965d(0x1cb)+_0x13965d(0x293)+_0x13965d(0x198)+_0x13965d(0x210)+'\x20);')),await db[_0x13965d(0x1ca)](_0x13965d(0x1c4)+'LE\x20IF\x20NOT\x20'+'EXISTS\x20'+ITEMS_TABLE+(_0x13965d(0x26f)+'id\x20TEXT\x20PR'+'IMARY\x20KEY,'+_0x13965d(0x212)+_0x13965d(0x17f)+_0x13965d(0x21a)+_0x13965d(0x202)+_0x13965d(0x26d)+_0x13965d(0x1db)+_0x13965d(0x1b8)+_0x13965d(0x2b6)+_0x13965d(0x20a)+_0x13965d(0x1a5)+_0x13965d(0x168)+'\x20msg_ts\x20IN'+'TEGER\x20DEFA'+_0x13965d(0x248)+_0x13965d(0x1f9)+'d_at\x20INTEG'+'ER\x20DEFAULT'+_0x13965d(0x1e6)+_0x13965d(0x1c1)+'t\x20INTEGER\x20'+'DEFAULT\x200,'+_0x13965d(0x1f8)+_0x13965d(0x1c9)+_0x13965d(0x231)+'ULT\x20\x27\x27\x0a\x20\x20\x20'+_0x13965d(0x1d1)));}async function getPref(_0x3c3890){const _0x37ac8d=_0x287a48;try{const _0x4a8b80=await db[_0x37ac8d(0x1c3)]('SELECT\x20val'+_0x37ac8d(0x172)+PREFS_TABLE+(_0x37ac8d(0x207)+'\x20=\x20?'),[_0x3c3890]);return _0x4a8b80?_0x4a8b80[_0x37ac8d(0x1e8)]:null;}catch(_0xa1089d){return warn('['+name+(_0x37ac8d(0x25c)+_0x37ac8d(0x1e5))+(_0xa1089d?.[_0x37ac8d(0x204)]||_0xa1089d)),null;}}async function setPref(_0x586133,_0x2d9994){const _0x59e0ca=_0x287a48;try{const _0x4e4462=Math[_0x59e0ca(0x23b)](Date[_0x59e0ca(0x2a8)]()/(-0xa8e+0x10f4+-0x27e));return await db[_0x59e0ca(0x1d5)]('INSERT\x20INT'+'O\x20'+PREFS_TABLE+('\x20(key,\x20val'+_0x59e0ca(0x1bb)+_0x59e0ca(0x245)+_0x59e0ca(0x1d3)+'?)\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x59e0ca(0x288)+'T(key)\x20DO\x20'+_0x59e0ca(0x250)+_0x59e0ca(0x175)+_0x59e0ca(0x169)+_0x59e0ca(0x24e)+_0x59e0ca(0x1d7)+_0x59e0ca(0x2a1)+_0x59e0ca(0x258)),[_0x586133,String(_0x2d9994),_0x4e4462]),!![];}catch(_0x49cb5b){return warn('['+name+(_0x59e0ca(0x17b)+_0x59e0ca(0x167))+(_0x49cb5b?.[_0x59e0ca(0x204)]||_0x49cb5b)),![];}}async function saveItem(_0x31b887){const _0x1ffdd2=_0x287a48;try{const _0x4e14e3=Math[_0x1ffdd2(0x23b)](Date['now']()/(-0xd4*-0xb+-0x1*0x1741+0x120d*0x1)),_0x24a1cc=Number(_0x31b887['expires_at']||_0x4e14e3+DEFAULTS[_0x1ffdd2(0x1f0)+'DS']);return await db[_0x1ffdd2(0x1d5)]('INSERT\x20OR\x20'+'REPLACE\x20IN'+_0x1ffdd2(0x28d)+ITEMS_TABLE+(_0x1ffdd2(0x1e2)+_0x1ffdd2(0x24d)+'pant,\x20disp'+_0x1ffdd2(0x268)+_0x1ffdd2(0x292)+_0x1ffdd2(0x240)+_0x1ffdd2(0x271)+_0x1ffdd2(0x244)+_0x1ffdd2(0x1fc)+_0x1ffdd2(0x28b)+_0x1ffdd2(0x19a)+_0x1ffdd2(0x264)+_0x1ffdd2(0x213)+_0x1ffdd2(0x2b3)+_0x1ffdd2(0x267)),[_0x31b887['id'],_0x31b887['participan'+'t']||'',_0x31b887['display_na'+'me']||'',_0x31b887[_0x1ffdd2(0x28e)]||'',_0x31b887[_0x1ffdd2(0x235)]||'',Number(_0x31b887[_0x1ffdd2(0x177)]||-0x4c1+-0x311*0x5+-0xa0b*-0x2),Number(_0x31b887[_0x1ffdd2(0x16a)]||Math[_0x1ffdd2(0x23b)](Date[_0x1ffdd2(0x2a8)]()/(0x14ac*-0x1+-0x5*-0x568+-0x274))),Number(_0x24a1cc),_0x31b887[_0x1ffdd2(0x283)+'on']?_0x31b887[_0x1ffdd2(0x283)+'on']:'']),!![];}catch(_0x231a5c){return warn('['+name+(_0x1ffdd2(0x281)+_0x1ffdd2(0x1ea))+(_0x231a5c?.['message']||_0x231a5c)),![];}}async function fetchItemById(_0x1e4a5a){const _0x378d7b=_0x287a48;try{const _0x37080e=await db['get'](_0x378d7b(0x1a6)+'ROM\x20'+ITEMS_TABLE+(_0x378d7b(0x243)+_0x378d7b(0x22c)),[_0x1e4a5a]);return _0x37080e||null;}catch(_0x34ff5d){return warn('['+name+(']\x20fetchIte'+_0x378d7b(0x201)+'ed:\x20')+(_0x34ff5d?.[_0x378d7b(0x204)]||_0x34ff5d)),null;}}async function deleteItemById(_0x219bfa){const _0x4260fc=_0x287a48;try{const _0x2007e2=await db['get'](_0x4260fc(0x2aa)+_0x4260fc(0x166)+'M\x20'+ITEMS_TABLE+(_0x4260fc(0x243)+_0x4260fc(0x22c)),[_0x219bfa]);if(_0x2007e2?.[_0x4260fc(0x235)])try{await _0x1aeae8(_0x2007e2[_0x4260fc(0x235)])[_0x4260fc(0x183)](()=>{});}catch(_0x2629b3){}await db[_0x4260fc(0x1d5)]('DELETE\x20FRO'+'M\x20'+ITEMS_TABLE+(_0x4260fc(0x243)+_0x4260fc(0x22c)),[_0x219bfa]),info('['+name+(']\x20removed\x20'+_0x4260fc(0x22f)+_0x4260fc(0x1cf))+_0x219bfa);}catch(_0x3e0388){warn('['+name+(_0x4260fc(0x249)+'emById\x20fai'+_0x4260fc(0x214))+(_0x3e0388?.[_0x4260fc(0x204)]||_0x3e0388));}}async function sweepExpired(){const _0x36ea97=_0x287a48;try{const _0x1f9080=Math[_0x36ea97(0x23b)](Date[_0x36ea97(0x2a8)]()/(0x131*0x17+0x23f5+-0x3b74)),_0x154233=await db[_0x36ea97(0x19d)]('SELECT\x20id,'+'\x20file_path'+_0x36ea97(0x18b)+ITEMS_TABLE+(_0x36ea97(0x1df)+_0x36ea97(0x1f7)+'\x20?'),[_0x1f9080]);if(!_0x154233||_0x154233['length']===0x3d*-0x51+0x3*0xc3d+-0x116a)return;for(const _0x1112dd of _0x154233){try{if(_0x1112dd[_0x36ea97(0x235)])await _0x1aeae8(_0x1112dd['file_path'])[_0x36ea97(0x183)](()=>{});}catch(_0x3d8985){}}const _0x4297f6=_0x154233['map'](_0x46aae7=>_0x46aae7['id']);if(_0x4297f6[_0x36ea97(0x185)]){const _0x59eb22=_0x4297f6[_0x36ea97(0x247)](()=>'?')[_0x36ea97(0x27c)](',');await db[_0x36ea97(0x1d5)]('DELETE\x20FRO'+'M\x20'+ITEMS_TABLE+(_0x36ea97(0x243)+'IN\x20(')+_0x59eb22+')',_0x4297f6),info('['+name+']\x20cleaned\x20'+_0x4297f6[_0x36ea97(0x185)]+(_0x36ea97(0x18c)+'aved\x20statu'+_0x36ea97(0x20e)));}}catch(_0x560cd0){warn('['+name+(_0x36ea97(0x16f)+_0x36ea97(0x17c)+':\x20')+(_0x560cd0?.[_0x36ea97(0x204)]||_0x560cd0));}}function filenameForId(_0x5ae65a,_0x4d3fc1){const _0x55ba2e=_0x287a48,_0x59b553={'image/jpeg':_0x55ba2e(0x26b),'image/png':_0x55ba2e(0x1b5),'video/mp4':'.mp4','image/webp':_0x55ba2e(0x256),'audio/ogg':_0x55ba2e(0x278),'audio/mpeg':_0x55ba2e(0x27b),'application/pdf':'.pdf'},_0x4653e0=_0x4d3fc1&&_0x59b553[_0x4d3fc1]?_0x59b553[_0x4d3fc1]:_0x47ba84[_0x55ba2e(0x188)](_0x5ae65a)||'';return''+_0x5ae65a+_0x4653e0;}async function readFileAsBuffer(_0x467341){const _0x4c49ce=_0x287a48;try{return await _0x3245bd[_0x4c49ce(0x2a7)][_0x4c49ce(0x24c)](_0x467341);}catch(_0x5e169b){return warn('['+name+(']\x20readFile'+_0x4c49ce(0x285)+'ailed\x20for\x20')+_0x467341+':\x20'+(_0x5e169b?.[_0x4c49ce(0x204)]||_0x5e169b)),null;}}function buildPayloadFromSaved(_0x2f4202){const _0x54c406=_0x287a48;if(!_0x2f4202||!_0x2f4202[_0x54c406(0x235)])return null;const _0x3c2568=_0x2f4202['file_path'],_0x4e6ea7=(_0x2f4202[_0x54c406(0x28e)]||'')[_0x54c406(0x29b)+'e']();return async function(){const _0x1c4170=_0x54c406,_0x43fd48=await readFileAsBuffer(_0x3c2568);if(!_0x43fd48)return null;const _0x511124=(_0x2f4202[_0x1c4170(0x1be)+'me']?_0x2f4202[_0x1c4170(0x1be)+'me']+_0x1c4170(0x189):'')+(_0x1c4170(0x211)+_0x1c4170(0x2a5));if(_0x4e6ea7[_0x1c4170(0x23e)](_0x1c4170(0x23d)))return{'image':_0x43fd48,'caption':_0x511124,'mimetype':_0x4e6ea7};if(_0x4e6ea7[_0x1c4170(0x23e)]('video/'))return{'video':_0x43fd48,'caption':_0x511124,'mimetype':_0x4e6ea7};if(_0x4e6ea7[_0x1c4170(0x23e)](_0x1c4170(0x262)))return{'audio':_0x43fd48,'ptt':![],'mimetype':_0x4e6ea7};return{'document':_0x43fd48,'fileName':_0x47ba84[_0x1c4170(0x1a9)](_0x3c2568)||''+_0x2f4202['id'],'caption':_0x511124,'mimetype':_0x4e6ea7||undefined};};}async function sendRecoveredToBot(_0x1a2b8d){const _0x5d3a2e=_0x287a48;if(!_0x1a2b8d)return![];const _0x50449e=getBotJid();if(!_0x50449e)return warn('['+name+(_0x5d3a2e(0x1f4)+'veredToBot'+_0x5d3a2e(0x1ce)+_0x5d3a2e(0x1d9)+'ed\x20empty')),![];if(!_0x1a2b8d[_0x5d3a2e(0x235)]||!_0x3245bd[_0x5d3a2e(0x1b6)](_0x1a2b8d[_0x5d3a2e(0x235)]))return warn('['+name+(_0x5d3a2e(0x1f4)+_0x5d3a2e(0x1fd)+_0x5d3a2e(0x1f5)+_0x5d3a2e(0x1fa))+_0x1a2b8d['id']+_0x5d3a2e(0x197)+_0x1a2b8d[_0x5d3a2e(0x235)]),![];const _0x565317=buildPayloadFromSaved(_0x1a2b8d);if(!_0x565317)return warn('['+name+(_0x5d3a2e(0x22a)+_0x5d3a2e(0x299)+_0x5d3a2e(0x297))+_0x1a2b8d['id']),![];try{const _0x3d9537=await _0x565317();if(!_0x3d9537)return warn('['+name+(']\x20payload\x20'+_0x5d3a2e(0x20c)+_0x5d3a2e(0x1d2))+_0x1a2b8d['id']),![];if(typeof _0x3d9537==='object'&&_0x3d9537!==null){_0x3d9537[_0x5d3a2e(0x253)+'o']=_0x3d9537[_0x5d3a2e(0x253)+'o']||{};if(_0x1a2b8d[_0x5d3a2e(0x291)+'t'])_0x3d9537[_0x5d3a2e(0x253)+'o'][_0x5d3a2e(0x26c)+'id']=[_0x1a2b8d[_0x5d3a2e(0x291)+'t']];}let _0x525f4c=null;if(botRef&&botRef[_0x5d3a2e(0x1bf)]&&typeof botRef[_0x5d3a2e(0x1bf)][_0x5d3a2e(0x274)+'e']===_0x5d3a2e(0x1ba))_0x525f4c=await botRef['sock'][_0x5d3a2e(0x274)+'e'](_0x50449e,_0x3d9537);else{if(botRef&&typeof botRef[_0x5d3a2e(0x274)+'e']===_0x5d3a2e(0x1ba))_0x525f4c=await botRef[_0x5d3a2e(0x274)+'e'](_0x50449e,_0x3d9537);else return warn('['+name+(']\x20sendReco'+_0x5d3a2e(0x1fd)+_0x5d3a2e(0x206)+_0x5d3a2e(0x295)+'ilable')),![];}return trackSent(_0x525f4c),info('['+name+(_0x5d3a2e(0x24f)+'ed\x20file\x20fo'+'r\x20')+_0x1a2b8d['id']+'\x20->\x20'+_0x50449e),!![];}catch(_0x55b009){return warn('['+name+(_0x5d3a2e(0x1f4)+_0x5d3a2e(0x1fd)+_0x5d3a2e(0x27f)+'\x20')+_0x1a2b8d['id']+':\x20'+(_0x55b009?.[_0x5d3a2e(0x204)]||_0x55b009)),![];}}async function isEnabled(){const _0x425884=_0x287a48,_0x3cf017=await getPref(_0x425884(0x1fe));return _0x3cf017==='1'||_0x3cf017===_0x425884(0x280);}async function handleStatusUpload(_0x17f6c8){const _0x129115=_0x287a48;try{if(!_0x17f6c8||!_0x17f6c8[_0x129115(0x25a)])return;const _0x1459cf=String(_0x17f6c8[_0x129115(0x25a)][_0x129115(0x1c7)]||'')['toLowerCas'+'e']();if(_0x1459cf!==_0x129115(0x1c2)+_0x129115(0x226))return;const _0x378e57=String(_0x17f6c8['key']['id']||'');if(!_0x378e57)return;if(!await isEnabled())return;const _0x1d3a07=await fetchItemById(_0x378e57);if(_0x1d3a07)return;const _0x50eb2b=_0x17f6c8['message']||{};let _0x3323c6=null;if(_0x50eb2b['imageMessa'+'ge'])_0x3323c6=_0x129115(0x199);else{if(_0x50eb2b['videoMessa'+'ge'])_0x3323c6=_0x129115(0x208);else{if(_0x50eb2b[_0x129115(0x194)+'ge'])_0x3323c6=_0x129115(0x1b9);else{if(_0x50eb2b[_0x129115(0x1e7)+_0x129115(0x1b1)])_0x3323c6=_0x129115(0x290);else{if(_0x50eb2b[_0x129115(0x23a)+_0x129115(0x21d)])_0x3323c6=_0x129115(0x180);}}}}if(!_0x3323c6)return;const _0x590772=_0x3323c6===_0x129115(0x199)?'image':_0x3323c6===_0x129115(0x208)?_0x129115(0x208):_0x3323c6==='audio'?_0x129115(0x1b9):_0x129115(0x290),_0x54fb8a=_0x17f6c8[_0x129115(0x25a)]['participan'+'t']||'',_0x247636=_0x17f6c8[_0x129115(0x2b0)]||'',_0xb8de26=_0x54fb8a?_0x54fb8a[_0x129115(0x182)]('@')[-0x682+0x193e+-0x12bc]:_0x247636||'';let _0x2c2ac6='',_0x2c3089='';try{const _0x37ca73=_0x17f6c8[_0x129115(0x204)][_0x590772+_0x129115(0x218)]||_0x17f6c8['message'];_0x2c3089=_0x37ca73&&_0x37ca73[_0x129115(0x239)]?_0x37ca73[_0x129115(0x239)]:'';const {downloadContentFromMessage:_0x2255cb}=await getBaileysHelpers(),_0x4d359f=await _0x2255cb(_0x37ca73,_0x590772),_0xf3378f=await streamToBuffer(_0x4d359f);if(!_0xf3378f||!Buffer[_0x129115(0x23c)](_0xf3378f)||_0xf3378f[_0x129115(0x185)]===-0x2459+0x2069*0x1+-0x1*-0x3f0)warn('['+name+(_0x129115(0x1e1)+'\x20returned\x20'+'empty\x20buff'+_0x129115(0x16c)+'tus\x20')+_0x378e57),_0x2c2ac6='';else{const _0x54a229=filenameForId(_0x378e57,_0x2c3089);_0x2c2ac6=_0x47ba84['join'](DATA_DIR,_0x54a229);const _0x13f73b=_0x2c2ac6+_0x129115(0x22b)+Date[_0x129115(0x2a8)]();await _0x3245bd[_0x129115(0x2a7)]['writeFile'](_0x13f73b,_0xf3378f),await _0x3245bd[_0x129115(0x2a7)][_0x129115(0x21c)](_0x13f73b,_0x2c2ac6),info('['+name+(_0x129115(0x1f3)+'atus\x20')+_0x378e57+'\x20->\x20'+_0x2c2ac6+'\x20('+_0xf3378f[_0x129115(0x185)]+_0x129115(0x1e9)),_0xf3378f[_0x129115(0x185)]>DEFAULTS[_0x129115(0x2ae)+_0x129115(0x1ee)+_0x129115(0x2a6)]&&warn('['+name+(_0x129115(0x1e1)+_0x129115(0x1a8)+'r\x20')+_0x378e57+(_0x129115(0x27a)+'\x20')+_0xf3378f[_0x129115(0x185)]+_0x129115(0x186));}}catch(_0x500471){warn('['+name+(_0x129115(0x1e1)+_0x129115(0x225)+_0x129115(0x237))+_0x378e57+':\x20'+(_0x500471?.[_0x129115(0x204)]||_0x500471)),_0x2c2ac6='';}const _0x261688=Math[_0x129115(0x23b)](Date['now']()/(0x1948+-0x13*-0x13d+0x5f*-0x79)),_0x3ea1ed={'id':_0x378e57,'participant':_0x54fb8a,'display_name':_0xb8de26,'mime':_0x2c3089,'file_path':_0x2c2ac6,'msg_ts':Number(_0x17f6c8[_0x129115(0x1d8)+'estamp']||_0x261688),'created_at':_0x261688,'expires_at':_0x261688+DEFAULTS[_0x129115(0x1f0)+'DS'],'message_json':JSON[_0x129115(0x191)](_0x17f6c8)};await saveItem(_0x3ea1ed);if(_0x2c2ac6)info('['+name+(_0x129115(0x289)+_0x129115(0x236)+_0x129115(0x29e)+'h\x20for\x20')+_0x378e57);else info('['+name+(_0x129115(0x289)+'\x20entry\x20for'+'\x20')+_0x378e57+(_0x129115(0x22d)+_0x129115(0x1eb)));}catch(_0x44b454){warn('['+name+(']\x20handleSt'+_0x129115(0x29a)+_0x129115(0x23f))+(_0x44b454?.[_0x129115(0x204)]||_0x44b454));}}async function handlePossibleDeletion(_0x540266){const _0x3032d5=_0x287a48;try{if(!_0x540266||!_0x540266['message'])return;if(!await isEnabled())return;const _0x7a3554=Math['floor'](Date[_0x3032d5(0x2a8)]()/(-0x15f5*0x1+-0x11*0xb7+0x2604)),_0x42e31d=_0x540266['message'][_0x3032d5(0x179)+_0x3032d5(0x1b1)];if(_0x42e31d&&_0x42e31d[_0x3032d5(0x25a)]){const _0x28323a=_0x42e31d[_0x3032d5(0x25a)]||{},_0xb80fcb=String(_0x28323a[_0x3032d5(0x1c7)]||'')[_0x3032d5(0x29b)+'e']();if(_0xb80fcb===_0x3032d5(0x1c2)+_0x3032d5(0x226)){const _0x550baf=String(_0x28323a['id']||'');if(!_0x550baf)return;const _0x5311bc=await fetchItemById(_0x550baf);if(!_0x5311bc){warn('['+name+(_0x3032d5(0x1bc)+_0x3032d5(0x28f)+'s\x20')+_0x550baf+(_0x3032d5(0x282)+_0x3032d5(0x26e)+'ound'));return;}if(Number(_0x5311bc[_0x3032d5(0x276)]||0xd*0x2a1+0x1e4c+-0x4079)<=_0x7a3554){await deleteItemById(_0x550baf),info('['+name+(_0x3032d5(0x18e)+_0x3032d5(0x22f)+_0x3032d5(0x1cf))+_0x550baf+(_0x3032d5(0x246)+_0x3032d5(0x29f)));return;}const _0x2fec61=await sendRecoveredToBot(_0x5311bc);_0x2fec61?(info('['+name+(_0x3032d5(0x260)+_0x3032d5(0x294)+_0x3032d5(0x1a4))+_0x550baf+'\x20->\x20sent'),await deleteItemById(_0x550baf),info('['+name+(']\x20removed\x20'+_0x3032d5(0x22f)+_0x3032d5(0x1cf))+_0x550baf+(_0x3032d5(0x21f)+_0x3032d5(0x174)+'send'))):warn('['+name+(']\x20failed\x20t'+_0x3032d5(0x1ac)+_0x3032d5(0x20b)+_0x3032d5(0x2a0))+_0x550baf);return;}}if((_0x540266[_0x3032d5(0x229)+_0x3032d5(0x190)]||_0x540266[_0x3032d5(0x204)]?.['messageStu'+'bType'])&&Array[_0x3032d5(0x215)](_0x540266[_0x3032d5(0x204)]?.[_0x3032d5(0x229)+_0x3032d5(0x233)+'s'])){const _0x1625df=_0x540266[_0x3032d5(0x204)][_0x3032d5(0x229)+_0x3032d5(0x233)+'s'];if(_0x1625df[_0x3032d5(0x185)]>-0x2*0x10e4+-0x26*-0x91+0xc43&&String(_0x1625df[0x12d8+-0x1010*0x1+-0x2c8])['toLowerCas'+'e']()[_0x3032d5(0x242)](_0x3032d5(0x2b5))){for(let _0x2d00a3=-0x10e2+0x7*0x341+-0x5e4;_0x2d00a3<_0x1625df[_0x3032d5(0x185)];_0x2d00a3++){const _0x24860a=String(_0x1625df[_0x2d00a3]||'');if(!_0x24860a)continue;const _0x4da285=await fetchItemById(_0x24860a);if(!_0x4da285){warn('['+name+(_0x3032d5(0x234)+'oke\x20for\x20st'+_0x3032d5(0x1a1))+_0x24860a+('\x20but\x20no\x20sa'+_0x3032d5(0x26e)+_0x3032d5(0x2a2)));continue;}if(Number(_0x4da285[_0x3032d5(0x276)]||0x9c2+-0x1b32+0x1170)<=_0x7a3554){await deleteItemById(_0x24860a),info('['+name+(']\x20expired\x20'+_0x3032d5(0x22f)+_0x3032d5(0x1cf))+_0x24860a+('\x20removed\x20('+'no\x20resend)'));continue;}if(!_0x4da285['file_path']||!_0x3245bd[_0x3032d5(0x1b6)](_0x4da285['file_path'])){warn('['+name+(_0x3032d5(0x1d4)+_0x3032d5(0x1fa))+_0x24860a+':\x20'+_0x4da285[_0x3032d5(0x235)]);continue;}const _0x3f9e7b=await sendRecoveredToBot(_0x4da285);_0x3f9e7b?(info('['+name+(']\x20recovere'+_0x3032d5(0x294)+_0x3032d5(0x1a4))+_0x24860a+_0x3032d5(0x277)),await deleteItemById(_0x24860a),info('['+name+(_0x3032d5(0x1ad)+_0x3032d5(0x22f)+_0x3032d5(0x1cf))+_0x24860a+(_0x3032d5(0x21f)+_0x3032d5(0x174)+_0x3032d5(0x29c)))):warn('['+name+(_0x3032d5(0x20f)+'o\x20send\x20rec'+_0x3032d5(0x20b)+_0x3032d5(0x2a0))+_0x24860a);}return;}}const _0x39a412=_0x540266[_0x3032d5(0x204)]?.['extendedTe'+'xtMessage']?.[_0x3032d5(0x253)+'o']?.['quotedMess'+_0x3032d5(0x21b)];if(_0x39a412&&_0x39a412['protocolMe'+_0x3032d5(0x1b1)]&&_0x39a412[_0x3032d5(0x179)+_0x3032d5(0x1b1)][_0x3032d5(0x25a)]){const _0x258cfd=_0x39a412['protocolMe'+_0x3032d5(0x1b1)][_0x3032d5(0x25a)];if(String(_0x258cfd[_0x3032d5(0x1c7)]||'')[_0x3032d5(0x29b)+'e']()==='status@bro'+_0x3032d5(0x226)){const _0x52f940=String(_0x258cfd['id']||'');if(!_0x52f940)return;const _0x393389=await fetchItemById(_0x52f940);if(!_0x393389)return;if(Number(_0x393389[_0x3032d5(0x276)]||-0x26bb+0x151e+0x119d*0x1)<=_0x7a3554){await deleteItemById(_0x52f940),info('['+name+(_0x3032d5(0x18e)+_0x3032d5(0x22f)+_0x3032d5(0x1cf))+_0x52f940+('\x20removed\x20('+'no\x20resend)'));return;}if(!_0x393389[_0x3032d5(0x235)]||!_0x3245bd[_0x3032d5(0x1b6)](_0x393389[_0x3032d5(0x235)])){warn('['+name+(']\x20quoted\x20d'+_0x3032d5(0x19c)+'r\x20')+_0x52f940+('\x20but\x20file\x20'+_0x3032d5(0x216)+'\x20')+_0x393389[_0x3032d5(0x235)]);return;}const _0x19ca65=await sendRecoveredToBot(_0x393389);_0x19ca65?(info('['+name+(_0x3032d5(0x260)+_0x3032d5(0x294)+_0x3032d5(0x1a4))+_0x52f940+'\x20->\x20sent'),await deleteItemById(_0x52f940),info('['+name+(']\x20removed\x20'+_0x3032d5(0x22f)+_0x3032d5(0x1cf))+_0x52f940+(_0x3032d5(0x21f)+_0x3032d5(0x174)+'send'))):warn('['+name+(_0x3032d5(0x20f)+_0x3032d5(0x1ac)+_0x3032d5(0x20b)+'tus\x20')+_0x52f940);return;}}}catch(_0x2e0f20){warn('['+name+(_0x3032d5(0x1d0)+'ssibleDele'+_0x3032d5(0x265)+':\x20')+(_0x2e0f20?.[_0x3032d5(0x204)]||_0x2e0f20));}}async function rawMessagesUpsertHandler({messages:_0x1deba0}){const _0x310ae6=_0x287a48;if(!Array[_0x310ae6(0x215)](_0x1deba0))return;if(!await isEnabled())return;for(const _0x1d130b of _0x1deba0){try{if(!_0x1d130b||!_0x1d130b[_0x310ae6(0x25a)])continue;if(isOurSentId(_0x1d130b[_0x310ae6(0x25a)]?.['id']))continue;if(_0x1d130b['key']['fromMe'])continue;const _0x5e84f5=String(_0x1d130b['key'][_0x310ae6(0x1c7)]||'')[_0x310ae6(0x29b)+'e']();if(_0x5e84f5==='status@bro'+_0x310ae6(0x226)){await handleStatusUpload(_0x1d130b)[_0x310ae6(0x183)](_0xf538b2=>warn('['+name+(_0x310ae6(0x2ad)+_0x310ae6(0x219)+_0x310ae6(0x214))+(_0xf538b2?.[_0x310ae6(0x204)]||_0xf538b2))),await handlePossibleDeletion(_0x1d130b)[_0x310ae6(0x183)](_0x5e2d56=>warn('['+name+(_0x310ae6(0x1bc)+_0x310ae6(0x1b4)+'iled:\x20')+(_0x5e2d56?.['message']||_0x5e2d56)));continue;}await handlePossibleDeletion(_0x1d130b)[_0x310ae6(0x183)](_0x3c3dec=>warn('['+name+(_0x310ae6(0x1bc)+_0x310ae6(0x1b4)+_0x310ae6(0x222))+(_0x3c3dec?.['message']||_0x3c3dec)));}catch(_0x3ffe49){warn('['+name+(']\x20raw\x20per-'+_0x310ae6(0x209)+_0x310ae6(0x1f6))+(_0x3ffe49?.[_0x310ae6(0x204)]||_0x3ffe49));}}}function getMessageTextFromCtx(_0x481a9a){const _0xa98eef=_0x287a48;if(!_0x481a9a||!_0x481a9a[_0xa98eef(0x204)])return'';const _0x4fae9d=_0x481a9a[_0xa98eef(0x204)];if(_0x4fae9d[_0xa98eef(0x25f)+'on'])return _0x4fae9d[_0xa98eef(0x25f)+'on'];if(_0x4fae9d[_0xa98eef(0x238)+_0xa98eef(0x18a)]?.[_0xa98eef(0x200)])return _0x4fae9d['extendedTe'+_0xa98eef(0x18a)][_0xa98eef(0x200)];if(_0x4fae9d['imageMessa'+'ge']?.[_0xa98eef(0x203)])return _0x4fae9d[_0xa98eef(0x2b1)+'ge'][_0xa98eef(0x203)];if(_0x4fae9d[_0xa98eef(0x1c8)+'ge']?.[_0xa98eef(0x203)])return _0x4fae9d['videoMessa'+'ge'][_0xa98eef(0x203)];return'';}export async function onMessage(_0x4faa5f){const _0x506293=_0x287a48;try{if(!_0x4faa5f||!_0x4faa5f[_0x506293(0x25a)]||!_0x4faa5f['message'])return;const _0x31c6f5=_0x4faa5f[_0x506293(0x25a)][_0x506293(0x1c7)];if(typeof _0x31c6f5===_0x506293(0x269)&&_0x31c6f5[_0x506293(0x221)](_0x506293(0x286)))return;if(!_0x4faa5f['key'][_0x506293(0x1ec)])return;if(_0x4faa5f['key']['id']&&isOurSentId(_0x4faa5f['key']['id']))return;const _0xa41760=typeof _0x4faa5f[_0x506293(0x200)]===_0x506293(0x269)&&_0x4faa5f[_0x506293(0x200)]['trim']()[_0x506293(0x185)]?_0x4faa5f['text'][_0x506293(0x259)]():'',_0x59441=(getMessageTextFromCtx(_0x4faa5f)||'')[_0x506293(0x19e)]()[_0x506293(0x259)](),_0x279317=(_0xa41760||_0x59441||'')[_0x506293(0x182)](/\r?\n/)[0x8f1+0x57b+-0xe6c][_0x506293(0x259)]();if(!_0x279317)return;const _0x455621=/^antidelete\s+status(?:\s+(on|off|show))?$/i['exec'](_0x279317);if(!_0x455621)return;const _0x1f00b8=(_0x455621[0xbb7*0x3+-0xa*-0x53+0x22*-0x121]||_0x506293(0x2b4))[_0x506293(0x29b)+'e'](),_0x1eb575=getBotJid();if(!_0x1eb575){warn('['+name+(_0x506293(0x28a)+'e:\x20getBotJ'+_0x506293(0x1dc)+_0x506293(0x287)+_0x506293(0x1f2)));return;}if(_0x1f00b8===_0x506293(0x2b4)){const _0x444bc6=await isEnabled(),_0xc209ff=_0x506293(0x1bd)+'te\x20status:'+'\x20'+(_0x444bc6?'ON':_0x506293(0x230))+(_0x506293(0x24a)+_0x506293(0x261))+DATA_DIR,_0x3b4e44=await(botRef?.['sock']?.[_0x506293(0x274)+'e']?botRef[_0x506293(0x1bf)][_0x506293(0x274)+'e'](_0x1eb575,{'text':_0xc209ff}):botRef[_0x506293(0x274)+'e'](_0x1eb575,{'text':_0xc209ff}));trackSent(_0x3b4e44);return;}if(_0x1f00b8==='on'||_0x1f00b8===_0x506293(0x1a3)){const _0x135152=_0x1f00b8==='on'?'1':'0',_0x11e571=await setPref('enabled',_0x135152),_0x15cde7=_0x11e571?_0x506293(0x1bd)+'te\x20status\x20'+'set\x20to\x20'+_0x1f00b8[_0x506293(0x195)+'e']():_0x506293(0x29d)+_0x506293(0x19f)+_0x506293(0x1c6)+'tus',_0x5b6a8e=await(botRef?.[_0x506293(0x1bf)]?.[_0x506293(0x274)+'e']?botRef[_0x506293(0x1bf)]['sendMessag'+'e'](_0x1eb575,{'text':_0x15cde7}):botRef[_0x506293(0x274)+'e'](_0x1eb575,{'text':_0x15cde7}));trackSent(_0x5b6a8e);return;}}catch(_0x26b4b5){warn('['+name+(_0x506293(0x28a)+_0x506293(0x252))+(_0x26b4b5?.[_0x506293(0x204)]||_0x26b4b5));}}export async function initialize(_0x2702cc){const _0x45631b=_0x287a48;if(!_0x2702cc)throw new Error('status_rec'+_0x45631b(0x20d)+_0x45631b(0x272)+_0x45631b(0x1c5)+_0x45631b(0x217));botRef=_0x2702cc,ensureDataDir(),await ensureTables(),startManagedListener({'botRef':botRef,'eventName':_0x45631b(0x176)+_0x45631b(0x220),'handler':rawMessagesUpsertHandler,'moduleName':name}),cleanupInterval=setInterval(()=>sweepExpired()[_0x45631b(0x183)](()=>{}),DEFAULTS[_0x45631b(0x2ac)+_0x45631b(0x296)]);try{await sweepExpired();}catch(_0x6872d8){}info('['+name+(_0x45631b(0x1b0)+_0x45631b(0x205)+_0x45631b(0x227))+DATA_DIR+('\x20CLEANUP_M'+'S=')+DEFAULTS[_0x45631b(0x2ac)+'TERVAL_MS']+_0x45631b(0x2b2)+DEFAULTS[_0x45631b(0x1f0)+'DS']);}export async function cleanup(){const _0x4594d2=_0x287a48;try{stopManagedListener(name,_0x4594d2(0x176)+'psert');}catch(_0x27d63b){warn('['+name+(_0x4594d2(0x279)+_0x4594d2(0x228)+_0x4594d2(0x28c)+_0x4594d2(0x1e5))+(_0x27d63b?.[_0x4594d2(0x204)]||_0x27d63b));}try{cleanupInterval&&(clearInterval(cleanupInterval),cleanupInterval=null);}catch(_0x4913fe){}botRef=null;if(respondedMsgIds&&typeof respondedMsgIds[_0x4594d2(0x1a7)]===_0x4594d2(0x1ba))respondedMsgIds['clear']();_baileysHelpers=null;}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};