const _0x13288d=_0x5d59;(function(_0x237ffb,_0x3ca0c8){const _0x17931d=_0x5d59,_0x35f348=_0x237ffb();while(!![]){try{const _0x593dc3=parseInt(_0x17931d(0x2e0))/(-0x1fb2+-0xe*0x16f+0x33c5)+parseInt(_0x17931d(0x26b))/(0x24f1+-0x2395+-0x15a)*(parseInt(_0x17931d(0x293))/(-0x1*-0x1219+0x43*-0x39+-0x32b*0x1))+-parseInt(_0x17931d(0x1e3))/(0x8*0x119+-0x24ae+0x18d*0x12)+parseInt(_0x17931d(0x23e))/(0xcc0+0x5cf+-0x128a)+-parseInt(_0x17931d(0x25c))/(-0x40b*-0x7+-0x18bb+-0x38c)+parseInt(_0x17931d(0x216))/(0x25b9+0x23e3*0x1+0x45*-0x111)*(-parseInt(_0x17931d(0x1df))/(0x1053*0x1+-0x5*-0x74b+-0x1*0x34c2))+-parseInt(_0x17931d(0x238))/(0x25fb+-0x12a2+-0x6*0x338);if(_0x593dc3===_0x3ca0c8)break;else _0x35f348['push'](_0x35f348['shift']());}catch(_0x3f5f89){_0x35f348['push'](_0x35f348['shift']());}}}(_0x4835,-0x69f21+0x3df96+0x7*0x1360a));import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';function _0x4835(){const _0x246d98=['\x20(profilep','vname','size','onWhatsApp','aultsToCha','failed\x20for','ensureSche','getWelcome','ated_at\x20FR','function','comes\x20SET\x20','connection','caption','saved\x20welc','ated_at\x20=\x20','esent','using\x20defa','lts.','ssage,\x0a\x20\x20\x20','rticipants','MsgIdInDb\x20','onfig\x20appl','from','failed:\x20','gp:all\x20res','isInteger','ed\x20keys:\x20','onMessage\x20','subject','registered','MatchFromF','essage\x20=\x20e','tureUrl','msg','_size,\x0a\x20\x20\x20','c,\x20updated','filepic\x20IN','\x20error:\x20','luded.send','eck\x20failed','ailed.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','c,\x0a\x20\x20\x20\x20\x20\x20\x20','Deleted\x20we',').\x20It\x20will','ur\x20default','solution\x20f','our\x20defaul','toLowerCas','WHERE\x20grou','Hi\x20','WELCOME','\x20failed:\x20','send_profi','\x20item\x20fail','E\x20welcomes','delwlc','o\x20the\x20','sendMessag','sent\x20welco','ailed:\x20','wlc','.jpg','Failed\x20to\x20','stopped\x20ma','ponseMessa','getConnect','notify','text','wlc\x0a','split','bodyLines','ed_at\x20=\x20?\x20','Saved\x20welc','sock','INSERT\x20INT',',\x20using\x20fa','oUserJid','now','GROUP_SIZE',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','splice','c\x20INTEGER\x20','expiresAt','_at;','t\x20with\x20/se','?\x20WHERE\x20gr','figured.','invite','clear','image','add','oup_jid\x20=\x20','match','(s)\x20found\x20','come\x20messa','ilepic\x20off','setdefault','all','hotReloadC','lcome\x20for\x20','es\x20(\x0a\x20\x20\x20\x20\x20','T\x20NOT\x20NULL','has','AULT\x20conne','r\x20group-pa','slice','fallback\x20s','values','88090068@n','jid','getUniqueJ','16BywJGU','WelcomeBot','ction(s)\x20(','tener:\x20','1092764vUiCXZ','includes','ttonId','ALTER\x20TABL','No\x20welcome','ome\x20result','groupMetad','delete\x20pre','wId','singleSele','\x20found\x20for','\x20\x20\x20\x20\x20last_','lepic,\x20upd','\x20alias/jid','DEBOUNCE_M','r:\x20','lable\x20for\x20','ied.\x20Chang','ABLED','run','ata','led\x20for\x20','map','register\x20m','up-only,\x20a','last_size\x20','SELECT\x20mes','sage,\x20last','faults.\x20Se','\x22.\x20Use\x20gro','\x0a\x20\x20\x20\x20\x20\x20\x20\x20u','your\x20defau','size\x20=\x20exc','tdefault\x20o','lt\x20name\x20','ndler\x20erro','INTEGER\x20DE','set','boolean','ids','ts\x20are\x20con','ATE\x20TABLE\x20','rl\x20for\x20','s\x20WHERE\x20gr','off','\x20Welcome\x20t','IMARY\x20KEY,','me\x20to\x20','il.getUniq','FAULT\x200\x0a\x20\x20','last_size','177443rsTAJO','et\x20default','olution\x20fa','trim','resolveNam','welcome.in','fetchProfi','updateLast','join','groupId','profilepic','ROUP_MAX','s:\x0a','\x20in\x20','xtMessage','toString','group-part','up_jid\x20=\x20?','\x20\x20VALUES\x20(','rface\x20avai',':\x20\x22','name','imageMessa','vious\x20welc','_at)\x0a\x20\x20\x20\x20\x20','.update','tct.com/me','g_id,\x20send','Error\x20savi','exec','ed.updated','action','ting\x20for\x20','sendWelcom','1330632lXTPSk','_MS','eToDb\x20fail','ge>\x0a','No\x20target\x20','deleted\x20pr','2146810BZzaRq','M\x20welcomes','TEGER\x20DEFA','d,\x20message','s\x20a\x20full\x20J','UPDATE\x20SET','\x20ADD\x20COLUM','saveWelcom','?,\x20?,\x20?,\x20?','pdate','pdated_at\x20','ed\x20for\x20','ome\x20','onfig\x20regi','Metadata\x20f','set\x20with\x20/','llback\x20ima','no\x20send\x20su','ias\x20or\x20pas','resolve\x20yo','<your\x20mult','t\x20instance','N\x20send_pro','get','resolveDef','lepic','save\x20welco','Usage\x20(gro','ID.','p_jid\x20=\x20?','2196408WFmsqL','catch','number','\x20message\x20f','EXT\x20DEFAUL','stration\x20f','DEFAULT_EN','length','DEFAULT\x200,','iled:\x20','\x20missing\x20f','FLICT(grou','isArray','filepic\x20on','\x20include\x20a','181528IuvvlR','This\x20comma','nd\x20saves\x20t','\x27\x20from\x20','[welcome]\x20','message','\x20managed\x20l','anaged\x20lis','delete','naged\x20list','flushGroup','you!','d\x20=\x20?,\x20upd','changes','y\x20to\x20have\x20','\x20available','MEMBER:\x20\x20','dmin-only)','\x20\x20\x20\x20ON\x20CON','ctReply','replace','ic:\x20','essage\x20TEX','ler\x20error:','ion\x20failed','url','r\x20ensure\x20y','end\x20failed','omeFromDb\x20','ed:\x20','\x20unless\x20th','t_msg_id\x20T','t\x20a\x20defaul','listRespon','evious\x20wel','irstLine','\x20updated_a','i-line\x20wel','string','to\x20the\x20cur','24vukDqs','FAULT\x200,\x0a\x20','https://i-','last_msg_i','sanitizedF','push','ensured','t_msg_id,\x20','\x20to\x20add\x20al','allback\x20fa','ng\x20for\x20','p_jid)\x20DO\x20','xcluded.la','\x20\x20\x20group_j','rent\x20group','\x20NOT\x20save\x20','indings\x20er','gp:\x20all\x20re','extendedTe','ts_added','ome\x20for\x20','come\x20','ror:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','WHATSAPP_G','welcome','deleted\x20we','seMessage','buttonsRes','participan','come\x20resul','ge\x20for\x20','icipants.u','dia/','in\x20your\x20de','endsWith','failed\x20to\x20','initialize','We\x27re\x20happ','epic\x20=\x20exc','3.5.1','mentions','t\x20groupsUt','Welcome\x20to','istener\x20fo','e\x20per-targ','_profilepi','xcluded.me','s.\x0a','STS\x20welcom','fetchGroup','\x0a\x20\x20\x20\x20\x20\x20CRE','ueJids\x20not','\x20for\x20defau','deletion\x20o','videoMessa','key','e,\x20last_ms','_CACHE_TTL','ups\x20helper','tJids\x20fail','remoteJid','or\x20','\x20line\x20\x22pro','_size,\x20las','floor','Unknown\x20gp','conversati','profilePic','ULT\x200;',',\x20last_siz','id\x20TEXT\x20PR','normalizeT','selectedRo','deleteWelc','t\x20=\x20exclud','\x20first.','57814dAqliU','\x20fatal:\x20','=\x20?,\x20updat'];_0x4835=function(){return _0x246d98;};return _0x4835();}import{getDefault,getConnection}from'../utils/connection.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import*as _0x27d4d4 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name='welcome';export const version=_0x13288d(0x2bb);export const priority=0xb8b+-0x3*0x316+-0x1*0x1cf;export const configKeys=['WELCOME'];export const commands=[_0x13288d(0x320),_0x13288d(0x31b)];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'GROUP_SIZE_CACHE_TTL_MS':(0x21d9+0x217a+-0x21a7*0x2)*(-0x12b3+0x13*-0x13+0x28b*0x8)*(-0x1*0x917+0x269a+-0x199b),'WHATSAPP_GROUP_MAX':0x401,'DEBOUNCE_MS':0x7d0};let CFG={...DEFAULTS};const groupQueues=new Map(),groupTimers=new Map(),groupSizeCache=new Map(),profilePicCache=new Map(),PROFILE_PIC_TTL_MS=(-0x1850+0x24cd+-0xc78)*(0x1e3*-0x1+-0xb2c+0xd4b)*(-0x1*0x44c+0x9*-0x3fa+0x2bfe),DEDUPE_TTL_MS=(-0x133e+-0x1de5+0x3141)*(0xd89+0x2*0x3a1+-0x10e3),processedMessageKeys=new Map();function markProcessed(_0x374462){const _0x4409aa=_0x13288d;if(!_0x374462)return;if(processedMessageKeys[_0x4409aa(0x1d6)](_0x374462))try{clearTimeout(processedMessageKeys['get'](_0x374462));}catch(_0x4d127e){}const _0x3e99dc=setTimeout(()=>processedMessageKeys[_0x4409aa(0x273)](_0x374462),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x374462,_0x3e99dc);}function isProcessed(_0x563f7c){const _0x226b1f=_0x13288d;return _0x563f7c&&processedMessageKeys[_0x226b1f(0x1d6)](_0x563f7c);}async function ensureSchema(){const _0x3b4edf=_0x13288d;try{await db[_0x3b4edf(0x233)](_0x3b4edf(0x2c6)+_0x3b4edf(0x20c)+'IF\x20NOT\x20EXI'+_0x3b4edf(0x2c4)+_0x3b4edf(0x1d4)+_0x3b4edf(0x2a0)+_0x3b4edf(0x2da)+_0x3b4edf(0x211)+_0x3b4edf(0x2aa)+_0x3b4edf(0x281)+_0x3b4edf(0x1d5)+_0x3b4edf(0x1bf)+_0x3b4edf(0x1fc)+_0x3b4edf(0x207)+_0x3b4edf(0x294)+'\x20\x20\x20\x20\x20\x20\x20las'+_0x3b4edf(0x28a)+_0x3b4edf(0x260)+'T\x20NULL,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20send'+_0x3b4edf(0x2c1)+_0x3b4edf(0x1c1)+_0x3b4edf(0x264)+_0x3b4edf(0x201)+_0x3b4edf(0x248)+'INTEGER\x20DE'+_0x3b4edf(0x214)+'\x20\x20\x20\x20);\x0a\x20\x20\x20'+'\x20');try{await db['exec'](_0x3b4edf(0x1e6)+_0x3b4edf(0x31a)+_0x3b4edf(0x244)+_0x3b4edf(0x254)+_0x3b4edf(0x307)+_0x3b4edf(0x240)+_0x3b4edf(0x2d8));}catch(_0x5bdd51){}info('[welcome]\x20'+'DB\x20schema\x20'+_0x3b4edf(0x299));}catch(_0xd3132e){error(_0xd3132e,'[welcome]\x20'+_0x3b4edf(0x2e9)+'ma\x20failed');throw _0xd3132e;}}async function saveWelcomeToDb(_0x267bf0,_0x3c3cd1,_0x370498=-0x5a*-0x11+-0x7*-0x4c1+-0x2741*0x1,_0xe536f5=null,_0x192513=-0x1bc2+0xc3c+-0x7c3*-0x2){const _0x5ba534=_0x13288d;try{const _0x3411ad=Math[_0x5ba534(0x2d4)](Date['now']()/(0x2c5*0x9+0x5*-0x2e9+-0x12*0x5c));return await db[_0x5ba534(0x1f6)](_0x5ba534(0x1ba)+'O\x20welcomes'+'\x20(group_ji'+_0x5ba534(0x241)+_0x5ba534(0x2d9)+_0x5ba534(0x2cc)+_0x5ba534(0x231)+_0x5ba534(0x2c1)+_0x5ba534(0x306)+_0x5ba534(0x22e)+_0x5ba534(0x228)+_0x5ba534(0x246)+',\x20?,\x20?)\x0a\x20\x20'+_0x5ba534(0x27d)+_0x5ba534(0x267)+_0x5ba534(0x29e)+_0x5ba534(0x243)+_0x5ba534(0x2aa)+_0x5ba534(0x302)+_0x5ba534(0x2c2)+_0x5ba534(0x2f5)+_0x5ba534(0x1ee)+_0x5ba534(0x203)+'luded.last'+_0x5ba534(0x305)+_0x5ba534(0x1ee)+'msg_id\x20=\x20e'+_0x5ba534(0x29f)+'st_msg_id,'+_0x5ba534(0x30c)+'end_profil'+_0x5ba534(0x2ba)+_0x5ba534(0x309)+_0x5ba534(0x2c1)+_0x5ba534(0x30d)+_0x5ba534(0x28f)+_0x5ba534(0x2de)+_0x5ba534(0x234)+_0x5ba534(0x1c3),[_0x267bf0,String(_0x3c3cd1||''),Number(_0x370498||0x40f*0x1+-0x1*-0x1bf7+0x2*-0x1003),_0xe536f5||null,Number(_0x192513||0x2246+0x1*-0xa3d+0x7*-0x36f),_0x3411ad]),info(_0x5ba534(0x26f)+_0x5ba534(0x2f0)+_0x5ba534(0x2a7)+_0x267bf0+(_0x5ba534(0x2e3)+'ic=')+_0x192513+')'),!![];}catch(_0x48dfe9){return warn(_0x5ba534(0x26f)+_0x5ba534(0x245)+_0x5ba534(0x23a)+_0x5ba534(0x249)+_0x267bf0+':\x20'+(_0x48dfe9?.[_0x5ba534(0x270)]||_0x48dfe9)),![];}}async function deleteWelcomeFromDb(_0x2894c0){const _0x2cfbb2=_0x13288d;try{const _0x450a39=await db[_0x2cfbb2(0x1f6)]('DELETE\x20FRO'+_0x2cfbb2(0x23f)+'\x20WHERE\x20gro'+_0x2cfbb2(0x227),[_0x2894c0]);return info(_0x2cfbb2(0x26f)+_0x2cfbb2(0x2ad)+_0x2cfbb2(0x1d3)+_0x2894c0),_0x450a39?.[_0x2cfbb2(0x278)]||-0x145a+0xc5d*0x3+-0x5*0x359;}catch(_0x4691fa){return warn('[welcome]\x20'+_0x2cfbb2(0x2dd)+_0x2cfbb2(0x287)+_0x2cfbb2(0x2e8)+'\x20'+_0x2894c0+':\x20'+(_0x4691fa?.[_0x2cfbb2(0x270)]||_0x4691fa)),-0x2bd*-0x8+-0x3a9*-0x5+-0x2835;}}async function getWelcomeFromDb(_0x3fd495){const _0x4f029b=_0x13288d;try{const _0x84a1e8=await db[_0x4f029b(0x255)](_0x4f029b(0x1fd)+_0x4f029b(0x1fe)+_0x4f029b(0x2d3)+_0x4f029b(0x29a)+'send_profi'+_0x4f029b(0x1ef)+_0x4f029b(0x2eb)+'OM\x20welcome'+_0x4f029b(0x20e)+_0x4f029b(0x1cb)+'?',[_0x3fd495]);return _0x84a1e8||null;}catch(_0x1265e8){return warn(_0x4f029b(0x26f)+_0x4f029b(0x2ea)+'FromDb\x20fai'+_0x4f029b(0x1f8)+_0x3fd495+':\x20'+(_0x1265e8?.['message']||_0x1265e8)),null;}}async function updateLastMsgIdInDb(_0x3ccccc,_0x2275ee){const _0x4921f=_0x13288d;try{const _0x448f24=Math[_0x4921f(0x2d4)](Date[_0x4921f(0x1bd)]()/(-0x5*-0x395+-0xfff+0x1fe));return await db[_0x4921f(0x1f6)]('UPDATE\x20wel'+'comes\x20SET\x20'+'last_msg_i'+_0x4921f(0x277)+_0x4921f(0x2f1)+_0x4921f(0x1c5)+_0x4921f(0x1cb)+'?',[_0x2275ee||null,_0x448f24,_0x3ccccc]),!![];}catch(_0xe2b375){return warn(_0x4921f(0x26f)+_0x4921f(0x21d)+_0x4921f(0x2f7)+'failed\x20for'+'\x20'+_0x3ccccc+':\x20'+(_0xe2b375?.[_0x4921f(0x270)]||_0xe2b375)),![];}}function tryBuildSendApiFromBot(_0x2c69d0){const _0x4a5f83=_0x13288d;if(!_0x2c69d0)return null;if(typeof _0x2c69d0[_0x4a5f83(0x31d)+'e']===_0x4a5f83(0x2ec))return async(_0x37d793,_0x4705fe)=>_0x2c69d0[_0x4a5f83(0x31d)+'e'](_0x37d793,_0x4705fe);if(_0x2c69d0[_0x4a5f83(0x1b9)]&&typeof _0x2c69d0[_0x4a5f83(0x1b9)]['sendMessag'+'e']===_0x4a5f83(0x2ec))return async(_0x201d42,_0x52c4e5)=>_0x2c69d0['sock'][_0x4a5f83(0x31d)+'e'](_0x201d42,_0x52c4e5);return null;}function setupSendApi(_0x3e673e){botRef=_0x3e673e,sendApi=tryBuildSendApiFromBot(botRef);}async function sendApiOrFallback(_0x5ee476,_0x18cea2,_0x148cc2=[]){const _0x1d2efe=_0x13288d;try{if(!_0x5ee476||!_0x18cea2)return null;const _0xa3401d=typeof _0x18cea2===_0x1d2efe(0x291)?{'text':String(_0x18cea2)}:_0x18cea2;if(Array[_0x1d2efe(0x268)](_0x148cc2)&&_0x148cc2[_0x1d2efe(0x263)])_0xa3401d[_0x1d2efe(0x2bc)]=_0x148cc2;if(sendApi)try{const _0x266294=await sendApi(_0x5ee476,_0xa3401d);return _0x266294;}catch(_0x588089){return warn('[welcome]\x20'+'sendApi\x20fa'+'iled:\x20'+(_0x588089?.['message']||_0x588089)),null;}else try{if(botRef&&typeof botRef[_0x1d2efe(0x31d)+'e']===_0x1d2efe(0x2ec))return await botRef[_0x1d2efe(0x31d)+'e'](_0x5ee476,_0xa3401d);else return botRef&&botRef[_0x1d2efe(0x1b9)]&&typeof botRef[_0x1d2efe(0x1b9)][_0x1d2efe(0x31d)+'e']===_0x1d2efe(0x2ec)?await botRef[_0x1d2efe(0x1b9)][_0x1d2efe(0x31d)+'e'](_0x5ee476,_0xa3401d):(warn('[welcome]\x20'+_0x1d2efe(0x24f)+_0x1d2efe(0x229)+_0x1d2efe(0x1f3)+_0x5ee476),null);}catch(_0x1ef891){return warn(_0x1d2efe(0x26f)+_0x1d2efe(0x1da)+_0x1d2efe(0x286)+':\x20'+(_0x1ef891?.['message']||_0x1ef891)),null;}}catch(_0x5a96bb){return warn('[welcome]\x20'+'sendApiOrF'+_0x1d2efe(0x29c)+_0x1d2efe(0x265)+(_0x5a96bb?.[_0x1d2efe(0x270)]||_0x5a96bb)),null;}}function extractTextFromMessage(_0x8f8baf){const _0x46a537=_0x13288d;if(!_0x8f8baf||!_0x8f8baf['message'])return'';const _0x33a548=_0x8f8baf[_0x46a537(0x270)];if(_0x33a548[_0x46a537(0x2d6)+'on'])return _0x33a548[_0x46a537(0x2d6)+'on'];if(_0x33a548[_0x46a537(0x2a5)+_0x46a537(0x224)]?.[_0x46a537(0x327)])return _0x33a548[_0x46a537(0x2a5)+_0x46a537(0x224)][_0x46a537(0x327)];if(_0x33a548[_0x46a537(0x22c)+'ge']?.[_0x46a537(0x2ef)])return _0x33a548['imageMessa'+'ge'][_0x46a537(0x2ef)];if(_0x33a548[_0x46a537(0x2ca)+'ge']?.[_0x46a537(0x2ef)])return _0x33a548[_0x46a537(0x2ca)+'ge']['caption'];if(_0x33a548[_0x46a537(0x2af)+_0x46a537(0x324)+'ge']?.['selectedBu'+_0x46a537(0x1e5)])return _0x33a548[_0x46a537(0x2af)+_0x46a537(0x324)+'ge']['selectedBu'+'ttonId'];if(_0x33a548[_0x46a537(0x28c)+_0x46a537(0x2ae)]?.['singleSele'+_0x46a537(0x27e)]?.[_0x46a537(0x2dc)+_0x46a537(0x1eb)])return _0x33a548[_0x46a537(0x28c)+_0x46a537(0x2ae)][_0x46a537(0x1ec)+_0x46a537(0x27e)]['selectedRo'+_0x46a537(0x1eb)];return'';}async function resolveDefaultsToChatJids(_0x2559fd){const _0x17146b=_0x13288d;try{let _0x2ceae7;try{_0x2ceae7=await getDefault(_0x2559fd)[_0x17146b(0x25d)](()=>null);}catch(_0x3cef52){_0x2ceae7=null;}if(!_0x2ceae7||Array[_0x17146b(0x268)](_0x2ceae7)&&_0x2ceae7[_0x17146b(0x263)]===0x16d5+-0x155d+-0x8*0x2f)return[];const _0x49ef53=Array[_0x17146b(0x268)](_0x2ceae7)?_0x2ceae7:[_0x2ceae7],_0x4e9032=[];for(const _0x25450a of _0x49ef53){try{const _0x45ec1f=await getConnection(_0x25450a)[_0x17146b(0x25d)](()=>null);if(Array['isArray'](_0x45ec1f))_0x4e9032[_0x17146b(0x298)](..._0x45ec1f);else{if(_0x45ec1f)_0x4e9032['push'](String(_0x45ec1f));}}catch(_0x3742dc){warn(_0x17146b(0x26f)+_0x17146b(0x325)+_0x17146b(0x283)+_0x17146b(0x2c8)+_0x17146b(0x205)+_0x25450a+':\x20'+(_0x3742dc?.[_0x17146b(0x270)]||_0x3742dc));}}const _0x3b8b60=new Set(),_0x44f883=[];for(const _0x321bcc of _0x4e9032){const _0x565919=String(_0x321bcc||'')[_0x17146b(0x219)]();if(!_0x565919)continue;!_0x3b8b60[_0x17146b(0x1d6)](_0x565919)&&(_0x3b8b60[_0x17146b(0x1ca)](_0x565919),_0x44f883[_0x17146b(0x298)](_0x565919));}return _0x44f883;}catch(_0x2d2465){return warn(_0x17146b(0x26f)+_0x17146b(0x256)+_0x17146b(0x2e7)+_0x17146b(0x2cf)+_0x17146b(0x288)+(_0x2d2465?.['message']||_0x2d2465)),[];}}async function fetchGroupMetadata(_0x107c3e){const _0x12e9e9=_0x13288d;if(!botRef)return null;try{if(botRef[_0x12e9e9(0x1b9)]&&typeof botRef[_0x12e9e9(0x1b9)][_0x12e9e9(0x1e9)+'ata']===_0x12e9e9(0x2ec))return await botRef[_0x12e9e9(0x1b9)][_0x12e9e9(0x1e9)+_0x12e9e9(0x1f7)](_0x107c3e);if(typeof botRef[_0x12e9e9(0x1e9)+_0x12e9e9(0x1f7)]===_0x12e9e9(0x2ec))return await botRef['groupMetad'+_0x12e9e9(0x1f7)](_0x107c3e);return null;}catch(_0x5b2736){return warn(_0x12e9e9(0x26f)+_0x12e9e9(0x2c5)+_0x12e9e9(0x24c)+_0x12e9e9(0x31f)+(_0x5b2736?.[_0x12e9e9(0x270)]||_0x5b2736)),null;}}async function fetchProfilePictureUrl(_0x327ccc){const _0x5ba255=_0x13288d;if(!botRef||!_0x327ccc)return null;try{let _0xd62bcd=null;if(botRef[_0x5ba255(0x1b9)]&&typeof botRef[_0x5ba255(0x1b9)][_0x5ba255(0x2d7)+_0x5ba255(0x303)]===_0x5ba255(0x2ec))_0xd62bcd=await botRef[_0x5ba255(0x1b9)][_0x5ba255(0x2d7)+_0x5ba255(0x303)](_0x327ccc,_0x5ba255(0x1c9))[_0x5ba255(0x25d)](()=>null);else typeof botRef[_0x5ba255(0x2d7)+_0x5ba255(0x303)]===_0x5ba255(0x2ec)&&(_0xd62bcd=await botRef[_0x5ba255(0x2d7)+_0x5ba255(0x303)](_0x327ccc,_0x5ba255(0x1c9))['catch'](()=>null));return _0xd62bcd;}catch(_0x2638f6){return warn(_0x5ba255(0x26f)+_0x5ba255(0x21c)+'lePictureU'+_0x5ba255(0x20d)+_0x327ccc+_0x5ba255(0x317)+(_0x2638f6?.[_0x5ba255(0x270)]||_0x2638f6)),null;}}function getCachedProfilePic(_0x1e9526){const _0x4b738b=_0x13288d,_0x23fa89=profilePicCache[_0x4b738b(0x255)](_0x1e9526);if(!_0x23fa89)return null;if(Date['now']()>_0x23fa89[_0x4b738b(0x1c2)])return profilePicCache[_0x4b738b(0x273)](_0x1e9526),null;return _0x23fa89[_0x4b738b(0x284)];}function setCachedProfilePic(_0x4314cb,_0x403859){const _0x5df313=_0x13288d;if(!_0x4314cb)return;profilePicCache[_0x5df313(0x208)](_0x4314cb,{'url':_0x403859||null,'expiresAt':Date[_0x5df313(0x1bd)]()+PROFILE_PIC_TTL_MS});}function getCachedGroupSize(_0x26c6af){const _0x241a2e=_0x13288d,_0x49da01=groupSizeCache[_0x241a2e(0x255)](_0x26c6af);if(!_0x49da01)return null;if(Date[_0x241a2e(0x1bd)]()>_0x49da01[_0x241a2e(0x1c2)])return groupSizeCache[_0x241a2e(0x273)](_0x26c6af),null;return _0x49da01[_0x241a2e(0x2e5)];}function setCachedGroupSize(_0x1a62e8,_0x237c19){const _0x34fe12=_0x13288d;groupSizeCache['set'](_0x1a62e8,{'size':Number(_0x237c19||-0xe9*-0x18+0x1bc7+-0x319f),'expiresAt':Date[_0x34fe12(0x1bd)]()+(CFG[_0x34fe12(0x1be)+_0x34fe12(0x2cd)+'_MS']||DEFAULTS[_0x34fe12(0x1be)+_0x34fe12(0x2cd)+'_MS'])});}async function resolveDisplayName(_0x5d02cb){const _0xd005f8=_0x13288d;try{if(!botRef||!_0x5d02cb)return _0x5d02cb?.[_0xd005f8(0x329)]?.('@')?.[0x2*0xb72+0x593+-0x1c77]??_0x5d02cb;try{if(typeof botRef[_0xd005f8(0x2e6)]===_0xd005f8(0x2ec)){const _0x14e9ef=await botRef[_0xd005f8(0x2e6)](_0x5d02cb);if(Array[_0xd005f8(0x268)](_0x14e9ef)&&_0x14e9ef[_0xd005f8(0x263)]>0x383*0x2+0x873+-0xf79){const _0x235581=_0x14e9ef[0xe90+-0x8*-0x38f+-0x1cb*0x18];if(_0x235581&&(_0x235581[_0xd005f8(0x326)]||_0x235581[_0xd005f8(0x2e4)]||_0x235581['name']))return _0x235581[_0xd005f8(0x326)]||_0x235581[_0xd005f8(0x2e4)]||_0x235581[_0xd005f8(0x22b)];}}if(botRef['sock']&&typeof botRef[_0xd005f8(0x1b9)][_0xd005f8(0x2e6)]===_0xd005f8(0x2ec)){const _0x159bec=await botRef[_0xd005f8(0x1b9)]['onWhatsApp'](_0x5d02cb);if(Array[_0xd005f8(0x268)](_0x159bec)&&_0x159bec[_0xd005f8(0x263)]>0xe*-0x16f+0x23a7*0x1+-0xf95){const _0x3ad12f=_0x159bec[0x35*0x67+0x555+0x1aa8*-0x1];if(_0x3ad12f&&(_0x3ad12f['notify']||_0x3ad12f[_0xd005f8(0x2e4)]||_0x3ad12f[_0xd005f8(0x22b)]))return _0x3ad12f[_0xd005f8(0x326)]||_0x3ad12f[_0xd005f8(0x2e4)]||_0x3ad12f[_0xd005f8(0x22b)];}}}catch(_0x4fa2f1){}return String(_0x5d02cb)[_0xd005f8(0x329)]('@')[-0x1bbe+-0x80e+0x23cc]||_0x5d02cb;}catch(_0x4fc36b){return _0x5d02cb?.[_0xd005f8(0x329)]?.('@')?.[-0x42*-0x97+-0x248f+0x25f*-0x1]??_0x5d02cb;}}async function findStoredMatchFromFindings(_0x31fc81=[]){const _0x3125ed=_0x13288d;try{const _0x4e50e9=await listSudo();if(!Array[_0x3125ed(0x268)](_0x4e50e9)||_0x4e50e9['length']===-0x1*0x2b4+-0x4*0x843+-0x2*-0x11e0)return null;const _0x4481ed=new Set(_0x4e50e9[_0x3125ed(0x1f9)](String));for(const _0xae993e of _0x31fc81||[]){if(!_0xae993e||typeof _0xae993e[_0x3125ed(0x1dd)]!==_0x3125ed(0x291))continue;const _0x3abf86=normalizeToJid(_0xae993e['jid']);if(_0x3abf86&&_0x4481ed[_0x3125ed(0x1d6)](_0x3abf86))return _0x3abf86;if(_0x4481ed[_0x3125ed(0x1d6)](_0xae993e['jid']))return _0xae993e['jid'];const _0x5bdc6e=String(_0xae993e['jid'])[_0x3125ed(0x329)]('@')[0x3*-0xda+0xc1*0x1f+0x14d1*-0x1][_0x3125ed(0x329)](':')[-0x1*0x1c0c+0x2096+0x7*-0xa6];if(_0x5bdc6e)for(const _0x518305 of _0x4e50e9){const _0x46610c=String(_0x518305)[_0x3125ed(0x329)]('@')[-0x3fb+0x52*-0x9+0x6dd];if(_0x46610c&&_0x46610c===_0x5bdc6e)return _0x518305;}}return null;}catch(_0x361a05){return warn(_0x3125ed(0x26f)+'findStored'+_0x3125ed(0x301)+_0x3125ed(0x2a3)+_0x3125ed(0x2a9)+(_0x361a05?.[_0x3125ed(0x270)]||_0x361a05)),null;}}const WELCOME_MEDIA_BASE=_0x13288d(0x295)+_0x13288d(0x230)+_0x13288d(0x2b4),WELCOME_MAX=-0x1cf3+0x8*-0x4be+0x42ec;function pickRandomCardImage(){const _0x1d16e5=_0x13288d,_0x482088=Math[_0x1d16e5(0x2d4)](Math['random']()*WELCOME_MAX)+(-0x2a1+-0x2431+0x3*0xcf1);return WELCOME_MEDIA_BASE+_0x1d16e5(0x2ac)+_0x482088+_0x1d16e5(0x321);}async function sendWelcomeToMember(_0x528ebe,_0x1d2a0f){const _0x3d8e11=_0x13288d;try{const _0x2412e4=await getWelcomeFromDb(_0x528ebe);if(!_0x2412e4||!_0x2412e4[_0x3d8e11(0x270)])return![];let _0x5311ab=await fetchGroupMetadata(_0x528ebe),_0x1d13ef=_0x5311ab&&_0x5311ab[_0x3d8e11(0x2ff)]?_0x5311ab[_0x3d8e11(0x2ff)]:_0x528ebe,_0x38d509=getCachedGroupSize(_0x528ebe);if(!_0x38d509||_0x38d509<=0x6ce*0x5+0x7*-0x171+0x17ef*-0x1){if(_0x5311ab&&Array['isArray'](_0x5311ab[_0x3d8e11(0x2b0)+'ts']))_0x38d509=_0x5311ab['participan'+'ts'][_0x3d8e11(0x263)];else{if(_0x5311ab&&typeof _0x5311ab[_0x3d8e11(0x2e5)]===_0x3d8e11(0x25e))_0x38d509=_0x5311ab[_0x3d8e11(0x2e5)];else{_0x5311ab=_0x5311ab||await fetchGroupMetadata(_0x528ebe);if(_0x5311ab&&Array[_0x3d8e11(0x268)](_0x5311ab[_0x3d8e11(0x2b0)+'ts']))_0x38d509=_0x5311ab[_0x3d8e11(0x2b0)+'ts'][_0x3d8e11(0x263)];}}if(!_0x38d509||_0x38d509<=-0xc7d+-0x1097+0x1d14)_0x38d509=Number(_0x2412e4[_0x3d8e11(0x215)]||0xcd4+0xc63*0x1+-0x1937);else setCachedGroupSize(_0x528ebe,_0x38d509);}const _0x489b52=CFG[_0x3d8e11(0x2ab)+'ROUP_MAX']||DEFAULTS[_0x3d8e11(0x2ab)+_0x3d8e11(0x221)],_0x2e0aff=await resolveDisplayName(_0x1d2a0f),_0xfd4906='@'+String(_0x2e0aff)[_0x3d8e11(0x27f)](/\s+/g,'\x20'),_0x4da594=[];_0x4da594[_0x3d8e11(0x298)](_0x3d8e11(0x315)+_0xfd4906+(_0x3d8e11(0x210)+_0x3d8e11(0x31c))+_0x1d13ef),_0x4da594[_0x3d8e11(0x298)](String(_0x2412e4[_0x3d8e11(0x270)])[_0x3d8e11(0x219)]()),_0x4da594[_0x3d8e11(0x298)]('>\x20üë§YOU\x27RE\x20'+_0x3d8e11(0x27b)+_0x38d509+'/'+_0x489b52);const _0x54a429=_0x4da594[_0x3d8e11(0x21e)]('\x0a\x0a'),_0x4b11e5=[_0x1d2a0f],_0x4826d1=_0x2412e4['last_msg_i'+'d']||null,_0xb1776d=Number(_0x2412e4[_0x3d8e11(0x318)+'lepic']||0x60*0x60+-0x1*0x221+-0x21df)===0x20ad+-0xcf4+-0x13b8;let _0x5a127c=null;_0xb1776d&&(_0x5a127c=getCachedProfilePic(_0x1d2a0f),!_0x5a127c&&(_0x5a127c=await fetchProfilePictureUrl(_0x1d2a0f),setCachedProfilePic(_0x1d2a0f,_0x5a127c)));!_0x5a127c&&(_0x5a127c=pickRandomCardImage(),!_0xb1776d?info(_0x3d8e11(0x26f)+_0x3d8e11(0x220)+'\x20disabled\x20'+'for\x20'+_0x528ebe+(_0x3d8e11(0x1bb)+_0x3d8e11(0x24e)+_0x3d8e11(0x2b2))+_0x1d2a0f):info(_0x3d8e11(0x26f)+_0x3d8e11(0x220)+_0x3d8e11(0x266)+'or\x20'+_0x1d2a0f+(_0x3d8e11(0x1bb)+_0x3d8e11(0x24e)+'ge.')));const _0x519a0e={'title':_0x3d8e11(0x2be)+'\x20'+_0x1d13ef,'body':_0x3d8e11(0x2b9)+_0x3d8e11(0x279)+_0x3d8e11(0x276),'thumbnailUrl':_0x5a127c,'mediaType':0x1,'renderLargerThumbnail':!![]},_0x4d3c18=await sendApiOrFallback(_0x528ebe,{'text':_0x54a429,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'forwardedNewsletterMessageInfo':{'newsletterJid':'1203632853'+_0x3d8e11(0x1dc)+'ewsletter','newsletterName':_0x3d8e11(0x1e0),'serverMessageId':0x7b},'externalAdReply':_0x519a0e}},_0x4b11e5);let _0x59efe8=null;try{_0x4d3c18&&(_0x59efe8=_0x4d3c18?.[_0x3d8e11(0x2cb)]&&_0x4d3c18[_0x3d8e11(0x2cb)]['id']?_0x4d3c18[_0x3d8e11(0x2cb)]['id']:_0x4d3c18?.['message']&&_0x4d3c18[_0x3d8e11(0x270)]?.['id']?_0x4d3c18[_0x3d8e11(0x270)]['id']:_0x4d3c18?.['id']?_0x4d3c18['id']:null);}catch(_0x2d10f0){}if(_0x4826d1&&_0x4826d1!==_0x59efe8)try{if(botRef&&typeof botRef[_0x3d8e11(0x31d)+'e']==='function')try{await botRef[_0x3d8e11(0x31d)+'e'](_0x528ebe,{'delete':{'id':_0x4826d1,'remoteJid':_0x528ebe,'fromMe':!![]}}),info(_0x3d8e11(0x26f)+_0x3d8e11(0x23d)+_0x3d8e11(0x28d)+_0x3d8e11(0x2a8)+_0x4826d1+_0x3d8e11(0x223)+_0x528ebe);}catch(_0x214dcd){try{await botRef['sock']?.[_0x3d8e11(0x31d)+'e']?.(_0x528ebe,{'delete':{'id':_0x4826d1,'remoteJid':_0x528ebe,'fromMe':!![]}}),info(_0x3d8e11(0x26f)+_0x3d8e11(0x23d)+_0x3d8e11(0x28d)+'come\x20(sock'+')\x20'+_0x4826d1+'\x20in\x20'+_0x528ebe);}catch(_0x4c504e){warn(_0x3d8e11(0x26f)+'failed\x20to\x20'+_0x3d8e11(0x1ea)+_0x3d8e11(0x22d)+_0x3d8e11(0x24a)+_0x4826d1+'\x20in\x20'+_0x528ebe+':\x20'+(_0x4c504e?.[_0x3d8e11(0x270)]||_0x4c504e));}}}catch(_0x241675){warn(_0x3d8e11(0x26f)+_0x3d8e11(0x2c9)+'f\x20previous'+_0x3d8e11(0x25f)+_0x3d8e11(0x31f)+(_0x241675?.[_0x3d8e11(0x270)]||_0x241675));}try{_0x59efe8?await updateLastMsgIdInDb(_0x528ebe,_0x59efe8):await updateLastMsgIdInDb(_0x528ebe,null);}catch(_0x126cbb){}const _0x4ab163=Number(_0x2412e4[_0x3d8e11(0x215)]||-0x1*0x12af+-0xca0+0x5*0x643);if(_0x38d509&&_0x38d509!==_0x4ab163)try{await db[_0x3d8e11(0x1f6)]('UPDATE\x20wel'+_0x3d8e11(0x2ed)+'last_size\x20'+_0x3d8e11(0x2e2)+_0x3d8e11(0x1b7)+_0x3d8e11(0x314)+_0x3d8e11(0x25b),[_0x38d509,Math[_0x3d8e11(0x2d4)](Date[_0x3d8e11(0x1bd)]()/(-0x25e6+0x2438+0x41*0x16)),_0x528ebe]),setCachedGroupSize(_0x528ebe,_0x38d509);}catch(_0x1b0ec1){}return info(_0x3d8e11(0x26f)+_0x3d8e11(0x31e)+_0x3d8e11(0x212)+_0x1d2a0f+'\x20in\x20'+_0x528ebe),!![];}catch(_0x5440cf){return warn(_0x3d8e11(0x26f)+_0x3d8e11(0x237)+'eToMember\x20'+_0x3d8e11(0x2fa)+(_0x5440cf?.[_0x3d8e11(0x270)]||_0x5440cf)),![];}}function _0x5d59(_0x548c52,_0x21d191){const _0x14384f=_0x4835();return _0x5d59=function(_0x3dc68c,_0x246400){_0x3dc68c=_0x3dc68c-(0x2642*0x1+0x48*0xb+-0x27a3);let _0x2cf36f=_0x14384f[_0x3dc68c];return _0x2cf36f;},_0x5d59(_0x548c52,_0x21d191);}async function flushGroup(_0x4806da){const _0x3f8016=_0x13288d;try{const _0x281dc6=groupQueues[_0x3f8016(0x255)](_0x4806da);if(!_0x281dc6||_0x281dc6[_0x3f8016(0x2e5)]===-0x1*0x24d7+0x57*-0x7+0x2738){if(groupTimers['has'](_0x4806da)){try{clearTimeout(groupTimers[_0x3f8016(0x255)](_0x4806da));}catch(_0x3a1853){}groupTimers[_0x3f8016(0x273)](_0x4806da);}groupQueues[_0x3f8016(0x273)](_0x4806da);return;}const _0x57cd78=Array[_0x3f8016(0x2f9)](_0x281dc6);for(const _0x3c564c of _0x57cd78){try{await sendWelcomeToMember(_0x4806da,_0x3c564c)['catch'](()=>{});}catch(_0xad4722){warn(_0x3f8016(0x26f)+'flushGroup'+_0x3f8016(0x319)+_0x3f8016(0x288)+(_0xad4722?.[_0x3f8016(0x270)]||_0xad4722));}}}catch(_0x5e843a){warn(_0x3f8016(0x26f)+_0x3f8016(0x275)+_0x3f8016(0x308)+(_0x5e843a?.[_0x3f8016(0x270)]||_0x5e843a));}finally{if(groupTimers[_0x3f8016(0x1d6)](_0x4806da)){try{clearTimeout(groupTimers[_0x3f8016(0x255)](_0x4806da));}catch(_0xe4f9c3){}groupTimers['delete'](_0x4806da);}groupQueues[_0x3f8016(0x273)](_0x4806da);}}async function gpUpdateHandler(_0x1ae887){const _0x2b0a4a=_0x13288d;try{if(!_0x1ae887)return;const _0x361573=(_0x1ae887[_0x2b0a4a(0x235)]||_0x1ae887['type']||'')[_0x2b0a4a(0x225)]()[_0x2b0a4a(0x313)+'e']();if(_0x361573!==_0x2b0a4a(0x1ca)&&_0x361573!==_0x2b0a4a(0x1c7))return;const _0x39d8ec=_0x1ae887['id']||_0x1ae887[_0x2b0a4a(0x21f)]||_0x1ae887[_0x2b0a4a(0x1dd)]||_0x1ae887['groupJid'];if(!_0x39d8ec)return;const _0x591d51=Array['isArray'](_0x1ae887[_0x2b0a4a(0x2b0)+'ts'])?_0x1ae887[_0x2b0a4a(0x2b0)+'ts']:Array[_0x2b0a4a(0x268)](_0x1ae887[_0x2b0a4a(0x2b0)+_0x2b0a4a(0x2a6)])?_0x1ae887[_0x2b0a4a(0x2b0)+_0x2b0a4a(0x2a6)]:[];if(!_0x591d51||_0x591d51[_0x2b0a4a(0x263)]===-0xc7f*-0x1+-0x1ae6+0xe67)return;let _0x1d7a42=[];if(_0x591d51[_0x2b0a4a(0x263)]===-0x9a3+0xd6*0x14+-0x6*0x12e)_0x1d7a42=[_0x591d51[-0x2*0x61+0x149a+-0xfe*0x14]];else{const _0x1a5071=_0x591d51[_0x591d51[_0x2b0a4a(0x263)]-(0x1*0x259d+-0xdcb+-0x43*0x5b)];_0x1d7a42=[_0x1a5071];}if(!groupQueues[_0x2b0a4a(0x1d6)](_0x39d8ec))groupQueues[_0x2b0a4a(0x208)](_0x39d8ec,new Set());const _0x1e48ff=groupQueues[_0x2b0a4a(0x255)](_0x39d8ec);for(const _0x26c7e6 of _0x1d7a42)_0x1e48ff['add'](_0x26c7e6);if(groupTimers[_0x2b0a4a(0x1d6)](_0x39d8ec))try{clearTimeout(groupTimers['get'](_0x39d8ec));}catch(_0x249b06){}const _0x506fa1=Math['max'](-0xb8d*-0x3+0x1*0x243+0x1*-0x2486,Number(CFG[_0x2b0a4a(0x1f1)+'S']||DEFAULTS[_0x2b0a4a(0x1f1)+'S'])),_0x4331f6=setTimeout(()=>{const _0x521b2c=_0x2b0a4a;flushGroup(_0x39d8ec)[_0x521b2c(0x25d)](_0x2f27af=>warn(_0x521b2c(0x26f)+'flushGroup'+_0x521b2c(0x317)+(_0x2f27af?.[_0x521b2c(0x270)]||_0x2f27af)));},_0x506fa1);groupTimers[_0x2b0a4a(0x208)](_0x39d8ec,_0x4331f6);}catch(_0x101ec9){warn('[welcome]\x20'+'gpUpdateHa'+_0x2b0a4a(0x206)+_0x2b0a4a(0x1f2)+(_0x101ec9?.['message']||_0x101ec9));}}export async function initialize(_0x554c33){const _0x26f3c4=_0x13288d;if(!_0x554c33)throw new Error(_0x26f3c4(0x21b)+'itialize\x20r'+'equires\x20bo'+_0x26f3c4(0x253));botRef=_0x554c33,setupSendApi(_0x554c33);try{const _0x4023f7=getConfig()||{},_0x5a6496=_0x4023f7&&_0x4023f7[_0x26f3c4(0x316)]?_0x4023f7[_0x26f3c4(0x316)]:{};CFG[_0x26f3c4(0x262)+_0x26f3c4(0x1f5)]=typeof _0x5a6496[_0x26f3c4(0x262)+_0x26f3c4(0x1f5)]==='boolean'?_0x5a6496[_0x26f3c4(0x262)+_0x26f3c4(0x1f5)]:DEFAULTS['DEFAULT_EN'+_0x26f3c4(0x1f5)],CFG[_0x26f3c4(0x1be)+'_CACHE_TTL'+_0x26f3c4(0x239)]=Number['isInteger'](_0x5a6496[_0x26f3c4(0x1be)+_0x26f3c4(0x2cd)+_0x26f3c4(0x239)])?_0x5a6496['GROUP_SIZE'+_0x26f3c4(0x2cd)+_0x26f3c4(0x239)]:DEFAULTS[_0x26f3c4(0x1be)+_0x26f3c4(0x2cd)+_0x26f3c4(0x239)],CFG[_0x26f3c4(0x2ab)+_0x26f3c4(0x221)]=Number[_0x26f3c4(0x2fc)](_0x5a6496[_0x26f3c4(0x2ab)+_0x26f3c4(0x221)])?_0x5a6496[_0x26f3c4(0x2ab)+_0x26f3c4(0x221)]:DEFAULTS['WHATSAPP_G'+_0x26f3c4(0x221)],CFG[_0x26f3c4(0x1f1)+'S']=Number[_0x26f3c4(0x2fc)](_0x5a6496['DEBOUNCE_M'+'S'])?_0x5a6496[_0x26f3c4(0x1f1)+'S']:DEFAULTS[_0x26f3c4(0x1f1)+'S'];}catch(_0x8309b3){warn('[welcome]\x20'+'config\x20loa'+'d\x20failed,\x20'+_0x26f3c4(0x2f3)+'ults'),CFG={...DEFAULTS};}try{hotReloadConfig&&hotReloadConfig((_0x2818f3=[])=>{const _0x156c08=_0x26f3c4;try{const _0x4d9f21=getConfig()||{},_0x23d795=_0x4d9f21&&_0x4d9f21[_0x156c08(0x316)]?_0x4d9f21[_0x156c08(0x316)]:{};CFG[_0x156c08(0x262)+_0x156c08(0x1f5)]=typeof _0x23d795[_0x156c08(0x262)+_0x156c08(0x1f5)]===_0x156c08(0x209)?_0x23d795[_0x156c08(0x262)+_0x156c08(0x1f5)]:DEFAULTS[_0x156c08(0x262)+_0x156c08(0x1f5)],CFG['GROUP_SIZE'+_0x156c08(0x2cd)+'_MS']=Number[_0x156c08(0x2fc)](_0x23d795[_0x156c08(0x1be)+_0x156c08(0x2cd)+_0x156c08(0x239)])?_0x23d795['GROUP_SIZE'+_0x156c08(0x2cd)+_0x156c08(0x239)]:DEFAULTS[_0x156c08(0x1be)+'_CACHE_TTL'+'_MS'],CFG[_0x156c08(0x2ab)+_0x156c08(0x221)]=Number[_0x156c08(0x2fc)](_0x23d795[_0x156c08(0x2ab)+_0x156c08(0x221)])?_0x23d795[_0x156c08(0x2ab)+_0x156c08(0x221)]:DEFAULTS[_0x156c08(0x2ab)+_0x156c08(0x221)],CFG[_0x156c08(0x1f1)+'S']=Number[_0x156c08(0x2fc)](_0x23d795[_0x156c08(0x1f1)+'S'])?_0x23d795['DEBOUNCE_M'+'S']:DEFAULTS[_0x156c08(0x1f1)+'S'],info(_0x156c08(0x26f)+_0x156c08(0x1d2)+_0x156c08(0x2f8)+_0x156c08(0x1f4)+_0x156c08(0x2fd)+(_0x2818f3||[])[_0x156c08(0x21e)](',\x20'));}catch(_0x343a8e){warn(_0x156c08(0x26f)+_0x156c08(0x1d2)+'onfig\x20hand'+_0x156c08(0x282)+'\x20'+(_0x343a8e?.[_0x156c08(0x270)]||_0x343a8e));}});}catch(_0x12847d){warn(_0x26f3c4(0x26f)+_0x26f3c4(0x1d2)+_0x26f3c4(0x24b)+_0x26f3c4(0x261)+_0x26f3c4(0x31f)+(_0x12847d?.[_0x26f3c4(0x270)]||_0x12847d));}try{await ensureSchema();try{startManagedListener({'botRef':botRef,'eventName':_0x26f3c4(0x226)+_0x26f3c4(0x2b3)+_0x26f3c4(0x247),'handler':gpUpdateHandler,'moduleName':name}),info(_0x26f3c4(0x26f)+_0x26f3c4(0x300)+_0x26f3c4(0x271)+_0x26f3c4(0x2bf)+_0x26f3c4(0x1d8)+_0x26f3c4(0x2f6)+_0x26f3c4(0x22f));}catch(_0xc13136){warn(_0x26f3c4(0x26f)+_0x26f3c4(0x2b7)+_0x26f3c4(0x1fa)+_0x26f3c4(0x272)+_0x26f3c4(0x1e2)+(_0xc13136?.[_0x26f3c4(0x270)]||_0xc13136));}info('[welcome]\x20'+_0x26f3c4(0x2b8)+'d');}catch(_0xf5173e){error(_0xf5173e,_0x26f3c4(0x26f)+_0x26f3c4(0x2b8)+_0x26f3c4(0x2e1)+(_0xf5173e?.[_0x26f3c4(0x270)]||_0xf5173e));throw _0xf5173e;}}function extractGpFromText(_0x4688ac){const _0x5e4eb5=_0x13288d;if(!_0x4688ac)return null;const _0x578895=_0x4688ac[_0x5e4eb5(0x329)](/\r?\n/)[_0x5e4eb5(0x1f9)](_0x472d91=>_0x472d91[_0x5e4eb5(0x27f)](/\r/g,''));if(!_0x578895[_0x5e4eb5(0x263)])return null;let _0x43fa68=(_0x578895[-0xba6*0x1+-0x177c+-0x3*-0xbb6]||'')[_0x5e4eb5(0x219)](),_0x1a6641=_0x578895[_0x5e4eb5(0x1d9)](0x8b*-0x3b+-0x1289+-0x499*-0xb);const _0xe76456=_0x43fa68['match'](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);if(_0xe76456){const _0x1862fc=(_0xe76456[0x1*0xa07+-0x1926+0xf21]||'')['trim']();return{'gp':_0x1862fc,'sanitizedFirstLine':(_0xe76456[0x1e18+-0x6*0x18a+0x119*-0x13]||'')['trim'](),'bodyLines':_0x1a6641};}let _0x58ca19=-(-0x1b2d+-0x1a17*0x1+0x3545);for(let _0x37fce3=_0x1a6641[_0x5e4eb5(0x263)]-(0x94d*-0x4+0x15ba+-0xf7b*-0x1);_0x37fce3>=-0x188d+-0xe*-0x161+-0x1*-0x53f;_0x37fce3--){if(String(_0x1a6641[_0x37fce3]||'')['trim']()['length']>0x1547*-0x1+0x3*0x537+0x5a2){_0x58ca19=_0x37fce3;break;}}if(_0x58ca19>=-0x3*-0x8ae+-0x8c7*0x3+0x4b){const _0x1de37d=String(_0x1a6641[_0x58ca19]||'')[_0x5e4eb5(0x219)](),_0xd06fc4=_0x1de37d[_0x5e4eb5(0x1cc)](/^gp[:\s]*([^\s,]+)\s*$/i);if(_0xd06fc4){const _0xc7adf6=(_0xd06fc4[0x12f0+0x1dc7+-0x30b6]||'')[_0x5e4eb5(0x219)]();return _0x1a6641[_0x5e4eb5(0x1c0)](_0x58ca19,0x1*0x2175+-0x35b*0x4+-0x1408),{'gp':_0xc7adf6,'sanitizedFirstLine':_0x43fa68,'bodyLines':_0x1a6641};}}return{'gp':null,'sanitizedFirstLine':_0x43fa68,'bodyLines':_0x1a6641};}export async function onMessage(_0x31d5cd){const _0x99b76d=_0x13288d;try{if(!_0x31d5cd||!_0x31d5cd[_0x99b76d(0x2cb)]||!_0x31d5cd['message'])return;const _0x59663b=String(_0x31d5cd['key'][_0x99b76d(0x2d0)]||'')+'::'+String(_0x31d5cd[_0x99b76d(0x2cb)]['id']||_0x31d5cd[_0x99b76d(0x2cb)][_0x99b76d(0x2b0)+'t']||'');if(isProcessed(_0x59663b))return;markProcessed(_0x59663b);const _0x4dd7f3=String(extractTextFromMessage(_0x31d5cd)||'');if(!_0x4dd7f3[_0x99b76d(0x219)]())return;let _0x579adf='',_0x580d93=![];if(_0x31d5cd['isCommand']){const _0x4f571e=(_0x4dd7f3['trim']()[_0x99b76d(0x329)](/\s+/)[-0x1*-0xa64+-0x2d8+-0x3c6*0x2]||'')[_0x99b76d(0x313)+'e']();commands[_0x99b76d(0x1e4)](_0x4f571e)&&(_0x579adf=_0x4f571e,_0x580d93=!![]);}else{const _0x3f9aa7=(_0x4dd7f3['split'](/\r?\n/)[-0x7f*-0x43+0x1*-0x1cf+-0x1f6e]||'')[_0x99b76d(0x219)](),_0x136235=(_0x3f9aa7[_0x99b76d(0x329)](/\s+/)[-0x537+0x2527+-0x1ff0]||'')[_0x99b76d(0x313)+'e']();commands['includes'](_0x136235)&&(_0x579adf=_0x136235,_0x580d93=!![]);}if(!_0x580d93)return;const _0x53e5e7=_0x31d5cd['key']['remoteJid'],_0x30b25c=typeof _0x53e5e7===_0x99b76d(0x291)&&_0x53e5e7[_0x99b76d(0x2b6)]('@g.us');if(!_0x30b25c)return;let _0xc01160=![];try{_0xc01160=await isadmin(botRef,_0x31d5cd);}catch(_0x110409){warn(_0x99b76d(0x26f)+'isadmin\x20ch'+_0x99b76d(0x30a)),_0xc01160=![];}if(!_0xc01160)return;const _0xd021b6=_0x31d5cd[_0x99b76d(0x2cb)]?.[_0x99b76d(0x2b0)+'t']||_0x31d5cd[_0x99b76d(0x2cb)]?.['from']||_0x31d5cd[_0x99b76d(0x2cb)]?.[_0x99b76d(0x2d0)]||'',_0x57251a=String(_0xd021b6||'')['split']('@')[-0xb*0x350+-0x1c1*-0x13+0x31d],_0x2555c3=_0x53e5e7;info('[welcome]\x20'+'command\x20\x27'+_0x579adf+_0x99b76d(0x26e)+_0xd021b6+_0x99b76d(0x223)+_0x53e5e7);const _0x4a5dab=extractGpFromText(_0x4dd7f3),_0x362b4b=_0x4a5dab&&_0x4a5dab[_0x99b76d(0x297)+_0x99b76d(0x28e)]?_0x4a5dab[_0x99b76d(0x297)+'irstLine']:_0x4dd7f3[_0x99b76d(0x329)](/\r?\n/)[-0x4*0x692+0x1220+0x828]||'',_0x176ad2=_0x4a5dab&&_0x4a5dab[_0x99b76d(0x32a)]?_0x4a5dab[_0x99b76d(0x32a)]:_0x4dd7f3['split'](/\r?\n/)['slice'](0xe16+-0xf1*0x1+0x349*-0x4),_0x38871e=_0x4a5dab&&_0x4a5dab['gp']?_0x4a5dab['gp']:null,_0x28d355=[],_0x5c2b3c=[],_0x139910=_0x362b4b[_0x99b76d(0x27f)](new RegExp('^'+_0x579adf+'\x5cb','i'),'')['trim']();if(_0x139910)_0x28d355['push'](_0x139910);_0x28d355[_0x99b76d(0x298)](..._0x176ad2);const _0x7a5dcb=[];for(const _0x26caf3 of _0x28d355){const _0x121b82=_0x26caf3[_0x99b76d(0x219)]()['match'](/^profilepic\s+(on|off)$/i);if(_0x121b82){_0x5c2b3c[_0x99b76d(0x298)](_0x121b82[-0x1251*-0x1+-0x1b95+-0x945*-0x1]['toLowerCas'+'e']());continue;}_0x7a5dcb[_0x99b76d(0x298)](_0x26caf3);}const _0x5a3b36=_0x7a5dcb['join']('\x0a')['trim']();let _0x24956f=null;if(_0x5c2b3c[_0x99b76d(0x263)]>0xa*-0x12b+-0x11a1*0x1+0x29*0xb7){const _0x5e1d30=_0x5c2b3c[_0x5c2b3c[_0x99b76d(0x263)]-(-0xa*-0x1c9+-0x55a+-0x1*0xc7f)];_0x24956f=_0x5e1d30==='on'?-0xb*0x1f9+-0x1*-0x12d3+0x2e1:-0x1fb3+-0x20c6*0x1+0x4079;}if(_0x579adf==='wlc'){if(!_0x5a3b36){await sendApiOrFallback(_0x2555c3,_0x99b76d(0x259)+_0x99b76d(0x1fb)+_0x99b76d(0x27c)+':\x0a'+_0x99b76d(0x328)+(_0x99b76d(0x252)+_0x99b76d(0x290)+_0x99b76d(0x1ce)+_0x99b76d(0x23b))+('Optionally'+_0x99b76d(0x26a)+_0x99b76d(0x2d2)+_0x99b76d(0x269)+'\x22\x20or\x20\x22prof'+_0x99b76d(0x1cf)+'\x22\x20to\x20toggl'+_0x99b76d(0x2c0)+_0x99b76d(0x217)+_0x99b76d(0x2c3))+(_0x99b76d(0x26c)+_0x99b76d(0x26d)+'o\x20your\x20DEF'+_0x99b76d(0x1d7)+_0x99b76d(0x1e1)+_0x99b76d(0x24d)+_0x99b76d(0x1d0)+_0x99b76d(0x30f)+_0x99b76d(0x2a2)+_0x99b76d(0x292)+_0x99b76d(0x2a1)+_0x99b76d(0x289)+'at\x20group\x20i'+'s\x20part\x20of\x20'+_0x99b76d(0x202)+_0x99b76d(0x2f4)));return;}let _0x2c29b0=[];if(_0x38871e){const _0x30c14a=_0x38871e[_0x99b76d(0x219)]();if(_0x30c14a['toLowerCas'+'e']()===_0x99b76d(0x1d1))try{if(typeof _0x27d4d4[_0x99b76d(0x1de)+_0x99b76d(0x20a)]===_0x99b76d(0x2ec))_0x2c29b0=await _0x27d4d4[_0x99b76d(0x1de)+_0x99b76d(0x20a)]();else{await sendApiOrFallback(_0x2555c3,'gp:\x20all\x20re'+'quested\x20bu'+_0x99b76d(0x2bd)+'il.getUniq'+'ueJids\x20not'+_0x99b76d(0x27a)+'.');return;}}catch(_0x3487ed){warn(_0x99b76d(0x26f)+_0x99b76d(0x2fb)+'olution\x20fa'+_0x99b76d(0x265)+(_0x3487ed?.[_0x99b76d(0x270)]||_0x3487ed)),await sendApiOrFallback(_0x2555c3,_0x99b76d(0x2a4)+_0x99b76d(0x311)+_0x99b76d(0x30b));return;}else{const _0x264c74=await _0x27d4d4[_0x99b76d(0x21a)+'e']?.(_0x30c14a)[_0x99b76d(0x25d)](()=>null);if(_0x264c74)_0x2c29b0=[_0x264c74];else{if(_0x30c14a[_0x99b76d(0x1e4)]('@'))_0x2c29b0=[_0x27d4d4['normalizeT'+_0x99b76d(0x1bc)]?.(_0x30c14a)||_0x30c14a];else{await sendApiOrFallback(_0x2555c3,_0x99b76d(0x2d5)+'\x20alias/jid'+_0x99b76d(0x22a)+_0x30c14a+(_0x99b76d(0x200)+_0x99b76d(0x2ce)+_0x99b76d(0x29b)+_0x99b76d(0x250)+_0x99b76d(0x242)+_0x99b76d(0x25a)));return;}}}}else{const _0x220389=await resolveDefaultsToChatJids(_0x57251a);if(!_0x220389||_0x220389[_0x99b76d(0x263)]===0x12fd+0x209b+-0x3f8*0xd){await sendApiOrFallback(_0x2555c3,'Could\x20not\x20'+_0x99b76d(0x251)+_0x99b76d(0x310)+'\x20connectio'+'n(s).\x20Use\x20'+'setdefault'+_0x99b76d(0x2df));return;}_0x2c29b0=_0x220389;}const _0x1a13a6=[];for(const _0x384890 of _0x2c29b0){try{let _0x2d29ff=await fetchGroupMetadata(_0x384890),_0x4633dd=null;if(_0x2d29ff&&Array['isArray'](_0x2d29ff['participan'+'ts']))_0x4633dd=_0x2d29ff[_0x99b76d(0x2b0)+'ts']['length'];else{if(_0x2d29ff&&typeof _0x2d29ff[_0x99b76d(0x2e5)]===_0x99b76d(0x25e))_0x4633dd=_0x2d29ff[_0x99b76d(0x2e5)];}const _0x2dd58c=await getWelcomeFromDb(_0x384890),_0x3038=_0x2dd58c?Number(_0x2dd58c[_0x99b76d(0x215)]||0x4e7+0xd7c+-0x1263):0x1a1a*0x1+0xaa*-0x11+-0x9e*0x18,_0x44a579=_0x4633dd&&_0x4633dd>-0x1745+0x1*0x18a+0x15bb?_0x4633dd:_0x3038,_0x38f66e=_0x2dd58c?Number(_0x2dd58c[_0x99b76d(0x318)+_0x99b76d(0x257)]||-0x10*-0x7d+-0xfa3*-0x1+0x45*-0x57):0x1*0x301+0x41*-0x61+0x2*0xad0,_0x5dec51=_0x24956f===null?_0x38f66e:_0x24956f,_0x52236a=await saveWelcomeToDb(_0x384890,_0x5a3b36,_0x44a579,_0x2dd58c&&_0x2dd58c[_0x99b76d(0x296)+'d']?_0x2dd58c[_0x99b76d(0x296)+'d']:null,_0x5dec51);if(_0x52236a){if(_0x44a579&&_0x44a579>0x184*-0x10+-0x5*-0x751+-0xc55)setCachedGroupSize(_0x384890,_0x44a579);_0x1a13a6[_0x99b76d(0x298)]({'ok':!![],'msg':_0x99b76d(0x1b8)+_0x99b76d(0x2a7)+_0x384890+(_0x99b76d(0x2e3)+_0x99b76d(0x280))+(_0x5dec51?'on':_0x99b76d(0x20f))+')'});}else _0x1a13a6['push']({'ok':![],'msg':_0x99b76d(0x322)+_0x99b76d(0x258)+'me\x20for\x20'+_0x384890});}catch(_0x5ef027){warn('[welcome]\x20'+'saving\x20for'+'\x20'+_0x384890+_0x99b76d(0x317)+(_0x5ef027?.['message']||_0x5ef027)),_0x1a13a6[_0x99b76d(0x298)]({'ok':![],'msg':_0x99b76d(0x232)+_0x99b76d(0x29d)+_0x384890+':\x20'+(_0x5ef027?.[_0x99b76d(0x270)]||_0x5ef027)});}}const _0x8da899=_0x1a13a6[_0x99b76d(0x1f9)](_0x21c5e7=>(_0x21c5e7['ok']?'‚úÖ\x20':'‚ùå\x20')+_0x21c5e7[_0x99b76d(0x304)]);await sendApiOrFallback(_0x2555c3,_0x99b76d(0x1b8)+_0x99b76d(0x1e8)+_0x99b76d(0x222)+_0x8da899[_0x99b76d(0x21e)]('\x0a'));return;}if(_0x579adf===_0x99b76d(0x31b)){let _0x5e3d8a=[];if(_0x38871e){const _0x3783c0=_0x38871e['trim']();if(_0x3783c0['toLowerCas'+'e']()===_0x99b76d(0x1d1))try{if(typeof _0x27d4d4['getUniqueJ'+_0x99b76d(0x20a)]==='function')_0x5e3d8a=await _0x27d4d4[_0x99b76d(0x1de)+_0x99b76d(0x20a)]();else{await sendApiOrFallback(_0x2555c3,_0x99b76d(0x2a4)+'quested\x20bu'+'t\x20groupsUt'+_0x99b76d(0x213)+_0x99b76d(0x2c7)+'\x20available'+'.');return;}}catch(_0x3b4aaf){warn(_0x99b76d(0x26f)+_0x99b76d(0x2fb)+_0x99b76d(0x218)+_0x99b76d(0x265)+(_0x3b4aaf?.[_0x99b76d(0x270)]||_0x3b4aaf)),await sendApiOrFallback(_0x2555c3,_0x99b76d(0x2a4)+_0x99b76d(0x311)+_0x99b76d(0x30b));return;}else{const _0x48ba40=await _0x27d4d4['resolveNam'+'e']?.(_0x3783c0)['catch'](()=>null);if(_0x48ba40)_0x5e3d8a=[_0x48ba40];else{if(_0x3783c0[_0x99b76d(0x1e4)]('@'))_0x5e3d8a=[_0x27d4d4[_0x99b76d(0x2db)+'oUserJid']?.(_0x3783c0)||_0x3783c0];else{await sendApiOrFallback(_0x2555c3,'Unknown\x20gp'+_0x99b76d(0x1f0)+':\x20\x22'+_0x3783c0+'\x22.');return;}}}}else{const _0xf3fd47=await resolveDefaultsToChatJids(_0x57251a);if(!_0xf3fd47||_0xf3fd47['length']===-0x187a+-0xb*-0x259+-0x17*0xf){await sendApiOrFallback(_0x2555c3,_0x99b76d(0x23c)+_0x99b76d(0x2ee)+_0x99b76d(0x1cd)+_0x99b76d(0x2b5)+_0x99b76d(0x1ff)+_0x99b76d(0x28b)+_0x99b76d(0x1c4)+_0x99b76d(0x204)+_0x99b76d(0x285)+_0x99b76d(0x312)+_0x99b76d(0x20b)+_0x99b76d(0x1c6));return;}_0x5e3d8a=_0xf3fd47;}const _0x209720=[];for(const _0x285176 of _0x5e3d8a){try{const _0xd58572=await deleteWelcomeFromDb(_0x285176);_0xd58572?(groupSizeCache[_0x99b76d(0x273)](_0x285176),_0x209720[_0x99b76d(0x298)]({'ok':!![],'msg':_0x99b76d(0x30e)+'lcome\x20for\x20'+_0x285176})):_0x209720['push']({'ok':![],'msg':_0x99b76d(0x1e7)+_0x99b76d(0x1ed)+'\x20'+_0x285176});}catch(_0x2229ed){warn('[welcome]\x20'+'deleting\x20f'+_0x99b76d(0x2d1)+_0x285176+_0x99b76d(0x317)+(_0x2229ed?.[_0x99b76d(0x270)]||_0x2229ed)),_0x209720['push']({'ok':![],'msg':'Error\x20dele'+_0x99b76d(0x236)+_0x285176+':\x20'+(_0x2229ed?.['message']||_0x2229ed)});}}const _0x292e08=_0x209720[_0x99b76d(0x1f9)](_0xf6ddbd=>(_0xf6ddbd['ok']?'‚úÖ\x20':'‚ùå\x20')+_0xf6ddbd[_0x99b76d(0x304)]);await sendApiOrFallback(_0x2555c3,'Delete\x20wel'+_0x99b76d(0x2b1)+'ts:\x0a'+_0x292e08[_0x99b76d(0x21e)]('\x0a'));return;}return;}catch(_0x3e588e){error(_0x3e588e,'[welcome]\x20'+_0x99b76d(0x2fe)+'error:\x20'+(_0x3e588e?.['message']||_0x3e588e));}}export async function cleanup(){const _0x40d7fc=_0x13288d;try{for(const _0x586188 of groupTimers[_0x40d7fc(0x1db)]())try{clearTimeout(_0x586188);}catch(_0x4322b8){}groupTimers[_0x40d7fc(0x1c8)](),groupQueues[_0x40d7fc(0x1c8)](),groupSizeCache[_0x40d7fc(0x1c8)]();try{stopManagedListener(name,_0x40d7fc(0x226)+_0x40d7fc(0x2b3)+_0x40d7fc(0x247));}catch(_0x39a046){}info('[welcome]\x20'+_0x40d7fc(0x323)+_0x40d7fc(0x274)+'ener\x20if\x20pr'+_0x40d7fc(0x2f2));for(const _0x34cb84 of processedMessageKeys['values']())try{clearTimeout(_0x34cb84);}catch(_0x13c13d){}processedMessageKeys['clear'](),profilePicCache[_0x40d7fc(0x1c8)]();}catch(_0x21116f){warn(_0x40d7fc(0x26f)+'cleanup\x20er'+'ror:\x20'+(_0x21116f?.[_0x40d7fc(0x270)]||_0x21116f));}finally{botRef=null,sendApi=null,info(_0x40d7fc(0x26f)+'cleaned\x20up');}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};