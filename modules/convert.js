const _0x248410=_0x45e0;(function(_0x51ad8a,_0x50577c){const _0x5a6097=_0x45e0,_0x3732dc=_0x51ad8a();while(!![]){try{const _0x5e0d21=-parseInt(_0x5a6097(0x76))/(0x4b*0x13+-0x1*-0xe2a+-0x9dd*0x2)+parseInt(_0x5a6097(0x8b))/(0xc*0x2e6+0x270a+-0x49d0)*(-parseInt(_0x5a6097(0xd5))/(0x1f*0x4a+0x1*-0xdff+0x1*0x50c))+parseInt(_0x5a6097(0x71))/(0xf1*0xb+-0xa01+-0x56)+-parseInt(_0x5a6097(0xcb))/(-0x59*0x36+0xff2+0x2d9)*(parseInt(_0x5a6097(0x79))/(0x4d1+-0x2*-0xfa5+-0x2415))+parseInt(_0x5a6097(0xdf))/(-0x1b8c+-0x20a1+0x3c34)*(parseInt(_0x5a6097(0xe8))/(0x42c+0x1e*-0x14b+0x2*0x1153))+parseInt(_0x5a6097(0xac))/(0xa*0x61+0x72e*-0x1+0x36d)+-parseInt(_0x5a6097(0xc0))/(0x5a8*-0x4+-0xa4b*0x1+-0x1*-0x20f5)*(-parseInt(_0x5a6097(0x91))/(-0x210a+-0x4*-0x13f+0x1c19));if(_0x5e0d21===_0x50577c)break;else _0x3732dc['push'](_0x3732dc['shift']());}catch(_0x3dff34){_0x3732dc['push'](_0x3732dc['shift']());}}}(_0x5b26,0x1acc6*0x6+-0x517b4+0x2bc85));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x248410(0xbd)+'rt';function _0x45e0(_0x273cda,_0x1c747e){const _0x4c3325=_0x5b26();return _0x45e0=function(_0x508dc5,_0x3ce34a){_0x508dc5=_0x508dc5-(0x1*-0x595+-0x61d+0xf*0xcf);let _0x1a0425=_0x4c3325[_0x508dc5];return _0x1a0425;},_0x45e0(_0x273cda,_0x1c747e);}export const version=_0x248410(0x7e);export const priority=0x1aed+0xad1+-0x25b4;export const commands=[_0x248410(0x9e),_0x248410(0x94)];let botInstance=null,respondedMsgIds=new Set(),_mediaDeps=null;function _0x5b26(){const _0x49a31b=['remoteJid','128k','path',']\x20failed\x20t','cut_','ut\x20it.','o\x20MP3...','filter','2997357ywOmaW','ncies','ptt','eply\x20to\x20an','setStartTi',']\x20tomp3\x20er','ðŸ“¥\x20Converti','\x20and\x20use:\x0a','`.cutmp3\x20-','you\x20replie','3745rwhFuo','d\x20to\x20a\x20val','format.\x20Re','key','join','ile\x20or\x20voi','\x20audio\x20fil','rror','save','13088fnuRUX','concat','push','split','voice\x20note','edMatch\x20er','message','ntentFromM','contextInf','255292TVwRlg','downloadCo','ror:\x20','quotedMess','e\x20error','375018xPkjqC','essage','audioCodec','1306998raNOuY','.mp4','ia\x20depende','text','error','1.1.1','sendMessag','end','pendencies','map','unlink','catch',']\x20findStor','to\x20MP3.','g\x20group\x20',']\x20cutmp3\x20e','readFile','has','2RTNdoN','age','now','Make\x20sure\x20','video\x20to\x20c','ds>`\x0a','9447933wIDRWT','`.cutmp3\x20<','audio/mpeg','cutmp3','audioMessa','libmp3lame','o\x20load\x20med','string','your\x20','@g.us','\x20note\x20to\x20c','in_','condsToRem','tomp3','clear','writeFile','promises','ath','extendedTe','setFfmpegP','videoMessa','default','on\x20failed:','s>`\x0a','.ogg',']\x20initiali','bot','2683485HxOXuG','length','âœ‚ï¸\x20Cutting\x20','nce\x20missin','add','startSecon',']:\x20ignorin','o\x20trim\x20the','e\x20or\x20voice','âŒ\x20Failed\x20t','fromMe','jid','setDuratio','audio','â„¹ï¸\x20Invalid\x20','ce\x20note.','ffprobe','mediaconve','replace','audioBitra','10ebwvhd','âŒ\x20Conversi','.mp3','trim','ng\x20video\x20t','endsWith','zed.','â„¹ï¸\x20Please\x20r','includes','delete','ply\x20to\x20a\x20','5MssUUm','isBuffer'];_0x5b26=function(){return _0x49a31b;};return _0x5b26();}async function getMediaDependencies(){const _0x4afdca=_0x248410;if(_mediaDeps)return _mediaDeps;try{const _0x22560b=await import('@whiskeysockets/baileys'),_0x326cd7=await import('fluent-ffmpeg'),_0x11d106=_0x326cd7[_0x4afdca(0xa6)],_0x13a999=(await import('@ffmpeg-installer/ffmpeg'))[_0x4afdca(0xcf)],_0x3ac546=(await import('fs'))[_0x4afdca(0xa1)],_0x2989c2=(await import('os'))[_0x4afdca(0xa6)],_0x3fed94=(await import('path'))[_0x4afdca(0xa6)];return _0x11d106[_0x4afdca(0xa4)+_0x4afdca(0xa2)](_0x13a999),_mediaDeps={'downloadContentFromMessage':_0x22560b[_0x4afdca(0x72)+_0x4afdca(0x6f)+_0x4afdca(0x77)],'ffmpeg':_0x11d106,'fs':_0x3ac546,'os':_0x2989c2,'path':_0x3fed94},info('['+name+(']\x20media\x20de'+_0x4afdca(0x81)+'\x20loaded.')),_mediaDeps;}catch(_0x38b02d){error(_0x38b02d,'['+name+(_0x4afdca(0xd0)+_0x4afdca(0x97)+_0x4afdca(0x7b)+_0x4afdca(0xd6)));throw _0x38b02d;}}async function streamToBuffer(_0x5952eb){const _0x4b0954=_0x248410,_0x2da44c=[];for await(const _0x190761 of _0x5952eb){_0x2da44c[_0x4b0954(0xea)](Buffer[_0x4b0954(0xcc)](_0x190761)?_0x190761:Buffer['from'](_0x190761));}return Buffer[_0x4b0954(0xe9)](_0x2da44c);}const getQuotedMessage=_0x1af295=>{const _0x16c8ad=_0x248410;return _0x1af295[_0x16c8ad(0xee)]?.[_0x16c8ad(0xa3)+'xtMessage']?.[_0x16c8ad(0x70)+'o']?.[_0x16c8ad(0x74)+_0x16c8ad(0x8c)]||_0x1af295['quoted']||null;};async function findStoredMatchFromFindings(_0x5984e4=[]){const _0x1e0fb2=_0x248410;try{const _0x4cc52f=await listSudo(),_0x44d06c=new Set(_0x4cc52f[_0x1e0fb2(0x82)](String));for(const _0x20d5b5 of _0x5984e4){if(!_0x20d5b5?.['jid']||typeof _0x20d5b5[_0x1e0fb2(0xb7)]!==_0x1e0fb2(0x98))continue;const _0x1e91ff=normalizeToJid(_0x20d5b5[_0x1e0fb2(0xb7)]);if(_0x1e91ff&&_0x44d06c[_0x1e0fb2(0x8a)](_0x1e91ff))return _0x1e91ff;if(_0x44d06c[_0x1e0fb2(0x8a)](_0x20d5b5[_0x1e0fb2(0xb7)]))return _0x20d5b5[_0x1e0fb2(0xb7)];}return null;}catch(_0x1e78d3){return warn('['+name+(_0x1e0fb2(0x85)+_0x1e0fb2(0xed)+_0x1e0fb2(0x73))+(_0x1e78d3?.[_0x1e0fb2(0xee)]||_0x1e78d3)),null;}}export async function initialize(_0x559e87){const _0x49637e=_0x248410;botInstance=_0x559e87,info('['+name+(_0x49637e(0xaa)+_0x49637e(0xc6)));}export async function cleanup(){const _0x2e0ac2=_0x248410;botInstance=null,respondedMsgIds[_0x2e0ac2(0x9f)](),info('['+name+(']\x20cleaned\x20'+'up'));}export async function onMessage(_0x4c0626){const _0x4e1f6f=_0x248410;try{if(!_0x4c0626?.[_0x4e1f6f(0xe2)]||!_0x4c0626['isCommand'])return;const _0xfa7f41=_0x4c0626[_0x4e1f6f(0xe2)]['id'];if(_0xfa7f41&&respondedMsgIds[_0x4e1f6f(0x8a)](_0xfa7f41))return;_0xfa7f41&&(respondedMsgIds[_0x4e1f6f(0xb0)](_0xfa7f41),setTimeout(()=>respondedMsgIds[_0x4e1f6f(0xc9)](_0xfa7f41),-0xa3ec+-0x6b*-0x7+-0x1*-0x1162f));const _0x2037ed=(_0x4c0626[_0x4e1f6f(0x7c)]||'')['trim'](),[_0x480c11,..._0x19935b]=_0x2037ed[_0x4e1f6f(0xeb)](/\s+/),_0x1e9688=_0x480c11['toLowerCas'+'e']();if(!commands[_0x4e1f6f(0xc8)](_0x1e9688))return;const _0x1924db=_0x4c0626[_0x4e1f6f(0xcd)]||_0x4c0626['key'][_0x4e1f6f(0xcd)]||'';if(_0x1924db[_0x4e1f6f(0xc5)](_0x4e1f6f(0x9a))){info('['+name+(_0x4e1f6f(0xb2)+_0x4e1f6f(0x87))+_0x1924db);return;}if(!botInstance){botInstance=_0x4c0626[_0x4e1f6f(0xab)]||_0x4c0626['client']||null;if(!botInstance){warn('['+name+(']\x20botInsta'+_0x4e1f6f(0xaf)+'g.'));return;}}const _0x30a6e1=getBotJid();let _0x164af5=_0x30a6e1;if(!_0x4c0626[_0x4e1f6f(0xe2)][_0x4e1f6f(0xb6)]){const _0x4fbd60=await isSudo(botInstance,_0x4c0626)['catch'](()=>![]);if(!_0x4fbd60)return;const {findings:_0x1a1b65}=userJidFromCtx(_0x4c0626),_0x1adc21=await findStoredMatchFromFindings(_0x1a1b65);if(!_0x1adc21)return;_0x164af5=_0x1adc21;}switch(_0x1e9688){case _0x4e1f6f(0x9e):await handleVideoToMp3(_0x164af5,_0x19935b[_0x4e1f6f(0xe3)]('\x20'),_0x4c0626);break;case'cutmp3':await handleCutMp3(_0x164af5,_0x19935b,_0x4c0626);break;}}catch(_0x37330a){error(_0x37330a,'['+name+(']\x20onMessag'+_0x4e1f6f(0x75)));}}async function handleVideoToMp3(_0x139f72,_0x297a1a,_0x463c3e){const _0x545b6b=_0x248410,_0xafdc9a=getQuotedMessage(_0x463c3e);if(!_0xafdc9a?.['videoMessa'+'ge'])return botInstance[_0x545b6b(0x7f)+'e'](_0x139f72,{'text':_0x545b6b(0xc7)+'eply\x20to\x20a\x20'+_0x545b6b(0x8f)+'onvert\x20it\x20'+_0x545b6b(0x86)},{'quoted':_0x463c3e['ms']});const _0xd25ac5=(_0x297a1a||'audio_'+Date[_0x545b6b(0x8d)]())[_0x545b6b(0xbe)](/[^a-z0-9\s-]/gi,'')[_0x545b6b(0xc3)]()+_0x545b6b(0xc2);try{await botInstance[_0x545b6b(0x7f)+'e'](_0x139f72,{'text':_0x545b6b(0xdb)+_0x545b6b(0xc4)+_0x545b6b(0xd3)},{'quoted':_0x463c3e['ms']});const {downloadContentFromMessage:_0x316aaf,ffmpeg:_0x70cd8d,fs:_0xf540cc,os:_0x1cc1fc,path:_0x2480db}=await getMediaDependencies(),_0x5d9386=await _0x316aaf(_0xafdc9a[_0x545b6b(0xa5)+'ge'],'video'),_0x3e252e=await streamToBuffer(_0x5d9386),_0x2f14e0=_0x2480db[_0x545b6b(0xe3)](_0x1cc1fc['tmpdir'](),_0x545b6b(0x9c)+Date[_0x545b6b(0x8d)]()+_0x545b6b(0x7a)),_0x7c1b76=_0x2480db[_0x545b6b(0xe3)](_0x1cc1fc['tmpdir'](),_0xd25ac5);await _0xf540cc['writeFile'](_0x2f14e0,_0x3e252e),await new Promise((_0x1c36b3,_0x199f6d)=>{const _0xbedcdc=_0x545b6b;_0x70cd8d(_0x2f14e0)['noVideo']()['audioCodec'](_0xbedcdc(0x96))['audioBitra'+'te']('128k')[_0xbedcdc(0xe7)](_0x7c1b76)['on'](_0xbedcdc(0x80),_0x1c36b3)['on']('error',_0x3a026d=>_0x199f6d(_0x3a026d));});const _0x2287b9=await _0xf540cc[_0x545b6b(0x89)](_0x7c1b76);await botInstance['sendMessag'+'e'](_0x139f72,{'audio':_0x2287b9,'mimetype':_0x545b6b(0x93),'fileName':_0xd25ac5},{'quoted':_0x463c3e['ms']}),await _0xf540cc['unlink'](_0x2f14e0)[_0x545b6b(0x84)](()=>{}),await _0xf540cc[_0x545b6b(0x83)](_0x7c1b76)[_0x545b6b(0x84)](()=>{});}catch(_0x16eee0){error(_0x16eee0,'['+name+(_0x545b6b(0xda)+'ror')),await botInstance[_0x545b6b(0x7f)+'e'](_0x139f72,{'text':_0x545b6b(0xc1)+_0x545b6b(0xa7)+'\x20'+_0x16eee0[_0x545b6b(0xee)]},{'quoted':_0x463c3e['ms']});}}async function handleCutMp3(_0x15cc05,_0x473d71,_0x86d5c1){const _0x2dc0dd=_0x248410,_0x3f9aed=getQuotedMessage(_0x86d5c1);if(!_0x3f9aed?.[_0x2dc0dd(0x95)+'ge'])return botInstance['sendMessag'+'e'](_0x15cc05,{'text':_0x2dc0dd(0xc7)+_0x2dc0dd(0xd8)+_0x2dc0dd(0xe5)+_0x2dc0dd(0xb4)+_0x2dc0dd(0x9b)+_0x2dc0dd(0xd2)},{'quoted':_0x86d5c1['ms']});const _0x2ed29d=_0x3f9aed[_0x2dc0dd(0x95)+'ge'][_0x2dc0dd(0xd7)]===!![],_0x5c7531=_0x2ed29d?_0x2dc0dd(0xec):_0x2dc0dd(0xb9),_0x1ef79d=_0x473d71[_0x2dc0dd(0x82)](_0xfd85e0=>parseFloat(_0xfd85e0))[_0x2dc0dd(0xd4)](_0x3f8c30=>!isNaN(_0x3f8c30)),_0x1808be=_0x473d71[_0x2dc0dd(0xd4)](_0x369b5a=>isNaN(parseFloat(_0x369b5a)))[_0x2dc0dd(0xe3)]('\x20')[_0x2dc0dd(0xc3)](),_0x2df2c8=(_0x1808be||_0x2dc0dd(0xd1)+Date[_0x2dc0dd(0x8d)]())['replace'](/[^a-z0-9\s-]/gi,'')[_0x2dc0dd(0xc3)]()+'.mp3';if(_0x1ef79d[_0x2dc0dd(0xad)]===-0x1*0x1cd1+0x1*0x8c8+-0xdf*-0x17||_0x1ef79d[_0x2dc0dd(0xad)]>0x1c26+-0x2616+0x9f2)return botInstance['sendMessag'+'e'](_0x15cc05,{'text':_0x2dc0dd(0xba)+_0x2dc0dd(0xe1)+_0x2dc0dd(0xca)+_0x5c7531+_0x2dc0dd(0xdc)+(_0x2dc0dd(0x92)+'startSecon'+_0x2dc0dd(0x90))+(_0x2dc0dd(0xdd)+'<endSecond'+_0x2dc0dd(0xa8))+(_0x2dc0dd(0x92)+_0x2dc0dd(0xb1)+'ds>\x20<endSe'+_0x2dc0dd(0x9d)+'ove>`')},{'quoted':_0x86d5c1['ms']});try{await botInstance[_0x2dc0dd(0x7f)+'e'](_0x15cc05,{'text':_0x2dc0dd(0xae)+_0x2dc0dd(0x99)+_0x5c7531+'...'},{'quoted':_0x86d5c1['ms']});const {downloadContentFromMessage:_0x4901ea,ffmpeg:_0x436703,fs:_0x33a71b,os:_0x246e70,path:_0x45915e}=await getMediaDependencies(),_0x30470e=await _0x4901ea(_0x3f9aed['audioMessa'+'ge'],_0x2dc0dd(0xb9)),_0x32f748=await streamToBuffer(_0x30470e),_0x4f9506=_0x2ed29d?_0x2dc0dd(0xa9):_0x2dc0dd(0xc2),_0x55d00d=_0x45915e[_0x2dc0dd(0xe3)](_0x246e70['tmpdir'](),_0x2dc0dd(0x9c)+Date[_0x2dc0dd(0x8d)]()+_0x4f9506),_0x554993=_0x45915e[_0x2dc0dd(0xe3)](_0x246e70['tmpdir'](),_0x2df2c8);await _0x33a71b[_0x2dc0dd(0xa0)](_0x55d00d,_0x32f748);let _0x20d851=-0x5b0+-0x1b05*-0x1+-0x1555;await new Promise((_0xbbb99c,_0x5a432b)=>{const _0x2a4eff=_0x2dc0dd;_0x436703[_0x2a4eff(0xbc)](_0x55d00d,(_0x4e7c5a,_0xc66920)=>{if(_0x4e7c5a)return _0x5a432b(_0x4e7c5a);_0x20d851=_0xc66920['format']['duration'],_0xbbb99c();});});const _0xd51d26=_0x436703(_0x55d00d)['noVideo']();if(_0x1ef79d[_0x2dc0dd(0xad)]===0xa4d+0x161a+-0x2066){const _0x37c0be=_0x1ef79d[0x15b0+0x9*-0x7a+-0x1166];if(_0x37c0be>-0x1fbe+-0xbec*-0x1+-0x13d2*-0x1)_0xd51d26['setStartTi'+'me'](_0x37c0be);else _0xd51d26[_0x2dc0dd(0xb8)+'n'](_0x20d851+_0x37c0be);}else{const [_0x2d3b63,_0xa56b61]=_0x1ef79d,_0x2fe014=_0x20d851-_0xa56b61;_0xd51d26[_0x2dc0dd(0xd9)+'me'](_0x2d3b63)['setDuratio'+'n'](_0x2fe014-_0x2d3b63);}await new Promise((_0x751b6b,_0x16695c)=>{const _0x504614=_0x2dc0dd;_0xd51d26[_0x504614(0x78)](_0x504614(0x96))[_0x504614(0xbf)+'te'](_0x504614(0xce))[_0x504614(0xe7)](_0x554993)['on'](_0x504614(0x80),_0x751b6b)['on'](_0x504614(0x7d),_0xf29b22=>_0x16695c(_0xf29b22));});const _0x1b5910=await _0x33a71b['readFile'](_0x554993);await botInstance[_0x2dc0dd(0x7f)+'e'](_0x15cc05,{'audio':_0x1b5910,'mimetype':_0x2dc0dd(0x93),'fileName':_0x2df2c8},{'quoted':_0x86d5c1['ms']}),await _0x33a71b[_0x2dc0dd(0x83)](_0x55d00d)['catch'](()=>{}),await _0x33a71b[_0x2dc0dd(0x83)](_0x554993)[_0x2dc0dd(0x84)](()=>{});}catch(_0x3af7f3){error(_0x3af7f3,'['+name+(_0x2dc0dd(0x88)+_0x2dc0dd(0xe6))),await botInstance[_0x2dc0dd(0x7f)+'e'](_0x15cc05,{'text':_0x2dc0dd(0xb5)+_0x2dc0dd(0xb3)+'\x20'+_0x5c7531+':\x20'+_0x3af7f3['message']+'\x0a'+(_0x2dc0dd(0x8e)+_0x2dc0dd(0xde)+_0x2dc0dd(0xe0)+'id\x20audio\x20f'+_0x2dc0dd(0xe4)+_0x2dc0dd(0xbb))},{'quoted':_0x86d5c1['ms']});}}