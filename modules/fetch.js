const _0x8af8e5=_0x2b36;function _0x17a2(){const _0x8f7d32=['g\x20(PM-only','fromMe','ipping.','hing:\x20','@g.us','remoteJid','>\x20>\x20*BMW\x20M','slice','t\x20determin','\x20public\x20UR','e\x20final\x20de','Content\x20to','rror','searchPara','get','mFindings\x20','headers','arrayBuffe','error:\x20','Usage:\x20fet','bot','stringify','toLowerCas','13303647OwQupP','from','o\x20large:\x20','\x20command).','unknown','4993292bJgtPK','parse','rror:\x20','https://','nt\x20from\x20','test','\x20fetch\x20err','URL\x20with\x20h','clear','isCommand','trim','isArray','zed.','\x20in\x20group\x20',':\x20replied\x20','endsWith','\x20handler\x20e','Start\x20the\x20','5947295aTnOSE','key','jid','string','proceed.','sendMessag','toString','startsWith','length','status','client','has','g;\x20cannot\x20','L\x20and\x20retu','\x20cleaned\x20u','1120336gZxDIk','search',':\x20findStor','1645218oeUBTm','3838746zyrVLt',':\x20initiali','content-ty','statusText','nce\x20missin','628992tkAwxu','rns\x20image/',':\x20botInsta','\x20cleanup\x20e','\x20â€”\x20ignorin','chatId;\x20sk','message','fetch','origin','with\x20conte','Error\x20fetc','/document.','ch\x20<url>\x0aF'];_0x17a2=function(){return _0x8f7d32;};return _0x17a2();}(function(_0x28fc8a,_0x19b05a){const _0x4e46ef=_0x2b36,_0xa9a855=_0x28fc8a();while(!![]){try{const _0x517a68=-parseInt(_0x4e46ef(0x160))/(-0x1cb2*-0x1+-0x784+0x3*-0x70f)+parseInt(_0x4e46ef(0x169))/(-0x7a9+-0x2433+-0x8c6*-0x5)+parseInt(_0x4e46ef(0x164))/(-0x116d*-0x1+-0x1a27+0x8bd)+parseInt(_0x4e46ef(0x13f))/(0x58a+-0x1175+0xd*0xeb)+parseInt(_0x4e46ef(0x151))/(0x1f76+-0x26bb+0x1*0x74a)+-parseInt(_0x4e46ef(0x163))/(0x3*0x3a0+0x23e0+-0x2eba*0x1)+-parseInt(_0x4e46ef(0x13a))/(0x5bd+0x215a+0xa*-0x3e8);if(_0x517a68===_0x19b05a)break;else _0xa9a855['push'](_0xa9a855['shift']());}catch(_0x5ecb8a){_0xa9a855['push'](_0xa9a855['shift']());}}}(_0x17a2,-0x20*0x9a2e+0x829*-0xbf+0x249a77*0x1));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x8af8e5(0x170);export const version='1.0.2';export const priority=-0x2*-0x1f7+-0x1839+0x1455;function _0x2b36(_0x141266,_0x5b2042){const _0x2f9a64=_0x17a2();return _0x2b36=function(_0x1db949,_0x347c99){_0x1db949=_0x1db949-(0x1b0f+-0x15df+-0x40d*0x1);let _0x121f81=_0x2f9a64[_0x1db949];return _0x121f81;},_0x2b36(_0x141266,_0x5b2042);}let botInstance=null,respondedMsgIds=new Set();async function findStoredMatchFromFindings(_0x50c202=[]){const _0x54cc4e=_0x8af8e5;try{if(!Array[_0x54cc4e(0x14a)](_0x50c202)||_0x50c202[_0x54cc4e(0x159)]===-0x21f+-0x46e+-0xd*-0x81)return null;const _0x376cd8=await listSudo();if(!Array[_0x54cc4e(0x14a)](_0x376cd8)||_0x376cd8[_0x54cc4e(0x159)]===0x1f53+0x4d+-0x1fa0)return null;const _0x22e5f6=new Set(_0x376cd8['map'](_0x4b72ff=>String(_0x4b72ff)));for(const _0x956fcc of _0x50c202){if(!_0x956fcc?.['jid']||typeof _0x956fcc[_0x54cc4e(0x153)]!==_0x54cc4e(0x154))continue;const _0x45ab62=normalizeToJid(_0x956fcc[_0x54cc4e(0x153)]);if(_0x45ab62&&_0x22e5f6[_0x54cc4e(0x15c)](_0x45ab62))return _0x45ab62;if(_0x22e5f6[_0x54cc4e(0x15c)](_0x956fcc[_0x54cc4e(0x153)]))return _0x956fcc[_0x54cc4e(0x153)];}return null;}catch(_0x4456c4){return warn(name+(_0x54cc4e(0x162)+'edMatchFro'+_0x54cc4e(0x132)+_0x54cc4e(0x135))+(_0x4456c4?.[_0x54cc4e(0x16f)]||_0x4456c4)),null;}}export async function initialize(_0x33f9ba){const _0x27586c=_0x8af8e5;botInstance=_0x33f9ba,info(name+(_0x27586c(0x165)+_0x27586c(0x14b)));}export async function onMessage(_0x1bd842){const _0x462e77=_0x8af8e5;try{if(!_0x1bd842||!_0x1bd842[_0x462e77(0x152)])return;const _0x29043e=_0x1bd842[_0x462e77(0x152)]['id'];if(_0x29043e&&respondedMsgIds[_0x462e77(0x15c)](_0x29043e))return;if(!_0x1bd842[_0x462e77(0x148)])return;const _0x4c9eaf=(_0x1bd842['text']||'')[_0x462e77(0x149)]();if(!_0x4c9eaf[_0x462e77(0x139)+'e']()[_0x462e77(0x158)]('fetch'))return;if(_0x29043e)respondedMsgIds['add'](_0x29043e);const _0x5540c4=_0x4c9eaf[_0x462e77(0x159)]>0x1*-0xa16+0x632*0x1+0x5b*0xb?_0x4c9eaf[_0x462e77(0x12a)](-0x1*0x10b2+-0x1976*-0x1+0x8bf*-0x1)[_0x462e77(0x149)]():'',_0x4d5659=_0x1bd842[_0x462e77(0x128)]||_0x1bd842['key'][_0x462e77(0x128)]||_0x462e77(0x13e);if(_0x4d5659===_0x462e77(0x13e)){warn(name+(':\x20unknown\x20'+_0x462e77(0x16e)+_0x462e77(0x125)));return;}const _0x1ee031=_0x4d5659[_0x462e77(0x14e)](_0x462e77(0x127));if(_0x1ee031){info(name+(':\x20received'+_0x462e77(0x14c))+_0x4d5659+(_0x462e77(0x16d)+_0x462e77(0x123)+_0x462e77(0x13d)));return;}if(!botInstance){botInstance=_0x1bd842[_0x462e77(0x137)]||_0x1bd842[_0x462e77(0x15b)]||null;if(!botInstance){warn(name+(_0x462e77(0x16b)+_0x462e77(0x168)+_0x462e77(0x15d)+_0x462e77(0x155)));return;}}const _0x355a89=getBotJid();let _0x2dda99=_0x355a89;const _0x196dc3=Boolean(_0x1bd842[_0x462e77(0x152)][_0x462e77(0x124)]);if(!_0x196dc3){const _0x560160=await isSudo(botInstance,_0x1bd842)['catch'](()=>![]);if(!_0x560160)return;const {findings:_0x575b13}=userJidFromCtx(_0x1bd842),_0x22cac7=await findStoredMatchFromFindings(_0x575b13);if(!_0x22cac7)return;_0x2dda99=_0x22cac7;}if(!_0x2dda99){warn(name+(':\x20Could\x20no'+_0x462e77(0x12b)+_0x462e77(0x12d)+'stination\x20'+'for\x20messag'+'e.'));return;}if(!_0x5540c4){await botInstance['sendMessag'+'e'](_0x2dda99,{'text':_0x462e77(0x136)+_0x462e77(0x175)+'etches\x20any'+_0x462e77(0x12c)+_0x462e77(0x15e)+_0x462e77(0x16a)+'video/text'+_0x462e77(0x174)});return;}if(!/^https?:\/\//['test'](_0x5540c4)){await botInstance[_0x462e77(0x156)+'e'](_0x2dda99,{'text':_0x462e77(0x150)+_0x462e77(0x146)+'ttp://\x20or\x20'+_0x462e77(0x142)});return;}try{const _0x4214d7=new URL(_0x5540c4),_0x101b23=''+_0x4214d7[_0x462e77(0x171)]+_0x4214d7['pathname']+(_0x4214d7[_0x462e77(0x161)]?'?'+_0x4214d7[_0x462e77(0x130)+'ms']['toString']():''),_0x212e2e=await fetch(_0x101b23);if(!_0x212e2e['ok']){await botInstance[_0x462e77(0x156)+'e'](_0x2dda99,{'text':'Fetch\x20fail'+'ed:\x20'+_0x212e2e[_0x462e77(0x15a)]+'\x20'+_0x212e2e[_0x462e77(0x167)]});return;}const _0x270184=_0x212e2e[_0x462e77(0x133)]['get']('content-le'+'ngth');if(_0x270184&&parseInt(_0x270184)>-0x5e2d8a5+0xbebe445*-0x1+0x1612*0x1170d){await botInstance['sendMessag'+'e'](_0x2dda99,{'text':_0x462e77(0x12e)+_0x462e77(0x13c)+_0x270184});return;}const _0x1e9a7c=_0x212e2e['headers'][_0x462e77(0x131)](_0x462e77(0x166)+'pe')||'',_0x5f0529=Buffer[_0x462e77(0x13b)](await _0x212e2e[_0x462e77(0x134)+'r']());if(/^image\//[_0x462e77(0x144)](_0x1e9a7c))await botInstance[_0x462e77(0x156)+'e'](_0x2dda99,{'image':{'url':_0x101b23},'caption':_0x462e77(0x129)+'D*'},{'quoted':_0x1bd842['ms']});else{if(/^video\//[_0x462e77(0x144)](_0x1e9a7c))await botInstance[_0x462e77(0x156)+'e'](_0x2dda99,{'video':{'url':_0x101b23},'caption':_0x462e77(0x129)+'D*'},{'quoted':_0x1bd842['ms']});else{if(/text|json/['test'](_0x1e9a7c)){let _0x4eacbb;try{const _0x29811e=JSON[_0x462e77(0x140)](_0x5f0529);_0x4eacbb=JSON[_0x462e77(0x138)](_0x29811e,null,0x6b+-0x1*0x1dc3+-0x1a*-0x121);}catch{_0x4eacbb=_0x5f0529[_0x462e77(0x157)]();}await botInstance[_0x462e77(0x156)+'e'](_0x2dda99,{'text':_0x4eacbb[_0x462e77(0x12a)](0x3*-0x8fa+0x1dd*0x9+0xa29,-0x1*0x2834+-0x4f*0xf9+-0x3*-0x3409)});}else await botInstance[_0x462e77(0x156)+'e'](_0x2dda99,{'document':{'url':_0x101b23},'caption':_0x462e77(0x129)+'D*'},{'quoted':_0x1bd842['ms']});}}info(name+(_0x462e77(0x14d)+_0x462e77(0x172)+_0x462e77(0x143))+_0x101b23+'\x20to\x20'+_0x2dda99);}catch(_0x2f4255){error(_0x2f4255,name+(_0x462e77(0x145)+'or')),await botInstance[_0x462e77(0x156)+'e'](_0x2dda99,{'text':_0x462e77(0x173)+_0x462e77(0x126)+_0x2f4255[_0x462e77(0x16f)]});}if(respondedMsgIds['size']>-0x20e9+-0x1d8e+-0x3*-0x1b55){const _0x551c5a=Array[_0x462e77(0x13b)](respondedMsgIds);respondedMsgIds=new Set(_0x551c5a[_0x462e77(0x12a)](-(-0x10c5+-0x1afb+0x3778)));}}catch(_0xfab554){error(_0xfab554,name+(_0x462e77(0x14f)+_0x462e77(0x12f)));}}export async function cleanup(){const _0x51ed75=_0x8af8e5;try{botInstance=null,respondedMsgIds[_0x51ed75(0x147)](),info(name+(_0x51ed75(0x15f)+'p'));}catch(_0x3b0ebd){warn(name+(_0x51ed75(0x16c)+_0x51ed75(0x141))+(_0x3b0ebd?.[_0x51ed75(0x16f)]||_0x3b0ebd));}}