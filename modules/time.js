const _0x3e2745=_0x4f7f;(function(_0x2b903e,_0x383c52){const _0x17d9a9=_0x4f7f,_0x3c7376=_0x2b903e();while(!![]){try{const _0x23451f=-parseInt(_0x17d9a9(0x160))/(-0x3*0x31+-0x29*-0x43+-0xa27)*(-parseInt(_0x17d9a9(0x16f))/(-0x7d+0x14*-0x16+0x237))+parseInt(_0x17d9a9(0x14e))/(0x209f+0x1*0x2159+-0x41f5)*(parseInt(_0x17d9a9(0x158))/(-0x1d71+-0x1cb8+0x119*0x35))+-parseInt(_0x17d9a9(0x12e))/(0x19a8+-0x324+-0x167f)*(-parseInt(_0x17d9a9(0x142))/(0x22c6*-0x1+-0x17c2*0x1+0xbb6*0x5))+parseInt(_0x17d9a9(0x10c))/(-0x1745+-0xfd+0x1849)+parseInt(_0x17d9a9(0x159))/(-0x1ccb+0x1439*-0x1+-0x1886*-0x2)*(parseInt(_0x17d9a9(0x10f))/(-0x1253+-0x3*-0x1dd+0xcc5))+-parseInt(_0x17d9a9(0x127))/(-0x3*0x281+-0x8c2*-0x4+-0x1*0x1b7b)+parseInt(_0x17d9a9(0x170))/(0x18a7+-0x5*0xdf+-0x1441)*(-parseInt(_0x17d9a9(0x157))/(0x1501+0x2396+-0x388b));if(_0x23451f===_0x383c52)break;else _0x3c7376['push'](_0x3c7376['shift']());}catch(_0x44244c){_0x3c7376['push'](_0x3c7376['shift']());}}}(_0x15ab,0x53d*-0xdf+-0xc4a7f+0x179dcd));import{readFileSync}from'fs';import{join}from'path';import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid,getBotJidRaw}from'../utils/bot-state.js';function _0x15ab(){const _0xde6d14=['â•â•âŠ·\x0a\x0a(.)','clear','ipping.','atting\x20tim','jid','r:\x20','ry\x20name\x20(e','â•â•â•âŠ·\x0aâ”‚\x20ðŸ“\x20','zed.',':\x20timezone','mFindings\x20','gistration','isArray','ndler\x20erro',':\x20findStor','2007490fdZRxO','dConfig\x20ha','zoneName','tyle\x20reply',':\x20received',':\x20botInsta','\x20an\x20IANA\x20t','835995CtyHZG','e/London\x22)','TIMEZONE_N','don`','\x20handler\x20e','has','with\x20time\x20','replace','parse','ck\x20failed:','ppings\x20suc','for\x20','a/Nairobi\x22','isCommand','imezone\x20(e','_bot','\x20or\x20\x22Europ','g;\x20cannot\x20','Invalid\x20ti','\x20to\x20know\x20i','12cLxgIu','string',',\x20sentTo=','.g.\x20\x22Afric','NFD','w_York','data','fromMe','remoteJid','dConfig\x20re','Enter\x20the\x20','now','1830603VIhbWD','ings:\x20','\x20failed:\x20','o\x20load\x20tim','slice','(or\x20IANA\x20t','rror:\x20',':\x20Sudo\x20che','country_ti','1236ljbnlh','4Ymbqwv','952QHtbtt','America/Ne','\x20confident','\x20send\x20PM-s','sendMessag','CONDS','proceed.','1sDiwOA',':\x20refreshC','toLocaleSt','cwd','\x20set\x20to\x20','findings',':\x20Loaded\x20t','message',':\x20unknown\x20','\x20cleaned\x20u','bot','ezone.\x0aPle','rror',':\x20initiali','error:\x20','857966oOLkDb','250426bGUpmx','AME',',\x20botJidRa','utf8','\x20â€”\x20ignorin','client','length','text','\x20â€¢\x20a\x20count','mezone','nce\x20missin','(e.g.\x20\x22Nai','robi','ot\x20availab','time','isValid','cessfully','function','\x0aâ”‚\x20ðŸ•’\x20','\x0aâ”‚\x20âŒš\x20Zone:','toLowerCas','name\x20of\x20th','setZone','Europe/Lon','â•­â”€â\x20time\x20â','city_map','ring','Africa/Nai','\x20(origin=','major\x20city','time.json','size',':\x20hotReloa','don','\x20cleanup\x20e','5328267LfHCYr','\x22),\x0a\x20â€¢\x20a\x20m','unknown','64593swvfzn','toISO','map','ED_WITH_SE','ajor\x20city\x20','edMatchFro','ezone\x20mapp','key','trim'];_0x15ab=function(){return _0xde6d14;};return _0x15ab();}export const name=_0x3e2745(0x17e);export const version='1.1.0';export const priority=-0x892+-0x2593+-0x233*-0x15;function _0x4f7f(_0x44d8ed,_0x20309f){const _0x39ed56=_0x15ab();return _0x4f7f=function(_0x253a6e,_0x1d4809){_0x253a6e=_0x253a6e-(-0x820+0xb84*-0x2+-0x29*-0xc9);let _0xdffe11=_0x39ed56[_0x253a6e];return _0xdffe11;},_0x4f7f(_0x44d8ed,_0x20309f);}let botInstance=null,respondedMsgIds=new Set(),DEFAULT_TIMEZONE=_0x3e2745(0x18b)+_0x3e2745(0x17c);const timeDataPath=join(process[_0x3e2745(0x163)](),_0x3e2745(0x148),'time',_0x3e2745(0x18e));let COUNTRY_TIMEZONES={},CITY_MAP={};try{const timeData=JSON[_0x3e2745(0x136)](readFileSync(timeDataPath,_0x3e2745(0x173)));COUNTRY_TIMEZONES=timeData[_0x3e2745(0x156)+'mezones']||{},CITY_MAP=timeData[_0x3e2745(0x189)]||{},info(name+(_0x3e2745(0x166)+'imezone\x20ma'+_0x3e2745(0x138)+_0x3e2745(0x180)));}catch(_0x1a5c34){warn(name+(':\x20Failed\x20t'+_0x3e2745(0x151)+_0x3e2745(0x115)+_0x3e2745(0x14f))+_0x1a5c34['message']),COUNTRY_TIMEZONES={'kenya':_0x3e2745(0x18b)+'robi','uk':_0x3e2745(0x187)+_0x3e2745(0x10a),'usa':_0x3e2745(0x15a)+_0x3e2745(0x147)},CITY_MAP={'nairobi':'Africa/Nai'+_0x3e2745(0x17c),'london':_0x3e2745(0x187)+_0x3e2745(0x10a),'new\x20york':_0x3e2745(0x15a)+_0x3e2745(0x147)};}function refreshConfig(){const _0x40815a=_0x3e2745;try{const _0x2983ef=typeof getConfig===_0x40815a(0x181)?getConfig()||{}:{};DEFAULT_TIMEZONE=_0x2983ef['TIMEZONE']||_0x2983ef[_0x40815a(0x130)+_0x40815a(0x171)]||DEFAULT_TIMEZONE,info(name+(_0x40815a(0x121)+_0x40815a(0x164))+DEFAULT_TIMEZONE);}catch(_0x4040f8){warn(name+(_0x40815a(0x161)+'onfig\x20erro'+_0x40815a(0x11d))+(_0x4040f8?.['message']||_0x4040f8));}}try{typeof hotReloadConfig===_0x3e2745(0x181)&&hotReloadConfig(()=>{const _0x388c9a=_0x3e2745;try{refreshConfig();}catch(_0x1ef552){warn(name+(_0x388c9a(0x109)+_0x388c9a(0x128)+_0x388c9a(0x125)+'r:\x20')+(_0x1ef552?.[_0x388c9a(0x167)]||_0x1ef552));}});}catch(_0x494f69){warn(name+(_0x3e2745(0x109)+_0x3e2745(0x14b)+_0x3e2745(0x123)+_0x3e2745(0x150))+(_0x494f69?.[_0x3e2745(0x167)]||_0x494f69));}refreshConfig();function normalizeKey(_0x3e10ce){const _0x5ede47=_0x3e2745;if(!_0x3e10ce||typeof _0x3e10ce!==_0x5ede47(0x143))return'';let _0x1f6596=_0x3e10ce['toLowerCas'+'e']()[_0x5ede47(0x117)]();return _0x1f6596=_0x1f6596['normalize'](_0x5ede47(0x146))[_0x5ede47(0x135)](/\p{Diacritic}/gu,''),_0x1f6596=_0x1f6596[_0x5ede47(0x135)](/[._/\\-]+/g,'\x20'),_0x1f6596=_0x1f6596[_0x5ede47(0x135)](/\s+/g,'\x20')[_0x5ede47(0x117)](),_0x1f6596;}function formatTimestampForZone(_0x2d2bb1){const _0x2b1a21=_0x3e2745;try{const _0x5aa0d3=DateTime[_0x2b1a21(0x14d)]()[_0x2b1a21(0x186)](_0x2d2bb1);if(!_0x5aa0d3[_0x2b1a21(0x17f)])return{'human':_0x2b1a21(0x140)+_0x2b1a21(0x179),'iso':null,'zoneName':_0x2d2bb1};return{'human':_0x5aa0d3[_0x2b1a21(0x162)+_0x2b1a21(0x18a)](DateTime['DATETIME_M'+_0x2b1a21(0x112)+_0x2b1a21(0x15e)]),'iso':_0x5aa0d3[_0x2b1a21(0x110)](),'zoneName':_0x5aa0d3[_0x2b1a21(0x129)]};}catch(_0x826ac8){return{'human':'Error\x20form'+_0x2b1a21(0x11b)+'e','iso':null,'zoneName':_0x2d2bb1};}}function buildBoxForTime(_0x2709c6,_0x2ec091,_0x27804a){const _0x3bd232=_0x3e2745;return _0x3bd232(0x188)+_0x3bd232(0x11f)+_0x2709c6+_0x3bd232(0x182)+_0x2ec091+(_0x3bd232(0x183)+'\x20')+_0x27804a+('\x0aâ•°â•â•â•â•â•â•â•â•'+_0x3bd232(0x118));}export async function initialize(_0x191b75){const _0x50124a=_0x3e2745;botInstance=_0x191b75,info(name+(_0x50124a(0x16d)+_0x50124a(0x120))),refreshConfig();}async function findStoredMatchFromFindings(_0x4fd282=[]){const _0x1e88c9=_0x3e2745;try{if(!Array[_0x1e88c9(0x124)](_0x4fd282)||_0x4fd282[_0x1e88c9(0x176)]===-0x1f78+-0x1237*-0x1+0xd41)return null;const _0x315d43=await listSudo();if(!Array[_0x1e88c9(0x124)](_0x315d43)||_0x315d43[_0x1e88c9(0x176)]===0x3d2+0xa89+0x31*-0x4b)return null;const _0x38707a=new Set(_0x315d43[_0x1e88c9(0x111)](_0x147ea0=>String(_0x147ea0)));for(const _0x302bc1 of _0x4fd282){if(!_0x302bc1||!_0x302bc1[_0x1e88c9(0x11c)]||typeof _0x302bc1[_0x1e88c9(0x11c)]!=='string')continue;try{const _0x498b60=normalizeToJid(_0x302bc1[_0x1e88c9(0x11c)]);if(_0x498b60&&_0x38707a['has'](_0x498b60))return _0x498b60;if(_0x38707a[_0x1e88c9(0x133)](_0x302bc1[_0x1e88c9(0x11c)]))return _0x302bc1['jid'];}catch(_0x4fc096){}}return null;}catch(_0x565a6f){return warn(name+(_0x1e88c9(0x126)+_0x1e88c9(0x114)+_0x1e88c9(0x122)+_0x1e88c9(0x16e))+(_0x565a6f?.[_0x1e88c9(0x167)]||_0x565a6f)),null;}}export async function onMessage(_0x28d1e7){const _0x593476=_0x3e2745;try{if(!_0x28d1e7||!_0x28d1e7['key'])return;const _0x36ab38=_0x28d1e7[_0x593476(0x116)]?.['id'];if(_0x36ab38&&respondedMsgIds[_0x593476(0x133)](_0x36ab38))return;if(!_0x28d1e7[_0x593476(0x13b)])return;const _0x2ca90d=(_0x28d1e7[_0x593476(0x177)]||'')[_0x593476(0x117)]();if(!_0x2ca90d)return;const _0x44db62=_0x2ca90d[_0x593476(0x184)+'e']();if(!_0x44db62['startsWith']('time'))return;const _0x2e227c=_0x44db62===_0x593476(0x17e)?'':_0x2ca90d[_0x593476(0x135)](/^time\s+/i,'')[_0x593476(0x117)]();if(_0x36ab38)respondedMsgIds['add'](_0x36ab38);const _0x50fc70=_0x28d1e7['remoteJid']||_0x28d1e7[_0x593476(0x116)]?.[_0x593476(0x14a)]||_0x593476(0x10e);if(_0x50fc70===_0x593476(0x10e)){warn(name+(_0x593476(0x168)+'chatId;\x20sk'+_0x593476(0x11a)));return;}const _0x1bd54c=String(_0x50fc70)['endsWith']('@g.us');if(_0x1bd54c){info(name+(_0x593476(0x12b)+'\x20in\x20group\x20')+_0x50fc70+(_0x593476(0x174)+'g\x20(PM-only'+'\x20command).'));return;}if(!botInstance){botInstance=_0x28d1e7[_0x593476(0x16a)]||_0x28d1e7[_0x593476(0x175)]||_0x28d1e7[_0x593476(0x13d)]||null;if(!botInstance){warn(name+(_0x593476(0x12c)+_0x593476(0x17a)+_0x593476(0x13f)+_0x593476(0x15f)));return;}}const _0x57a73e=getBotJid(),_0x422064=getBotJidRaw();if(!_0x57a73e){warn(name+(':\x20botJid\x20n'+_0x593476(0x17d)+'le;\x20cannot'+_0x593476(0x15c)+_0x593476(0x12a)+'.'));return;}let _0x573af5=_0x57a73e;const _0x3d5312=Boolean(_0x28d1e7['key']?.[_0x593476(0x149)]);if(!_0x3d5312)try{const _0x56b986=await isSudo(botInstance,_0x28d1e7);if(_0x56b986){const _0x464874=userJidFromCtx(_0x28d1e7),_0x125cce=await findStoredMatchFromFindings(_0x464874[_0x593476(0x165)]);if(_0x125cce)_0x573af5=_0x125cce;else return;}else return;}catch(_0x3ffd93){warn(name+(_0x593476(0x155)+_0x593476(0x137)+'\x20')+_0x3ffd93['message']);return;}if(!_0x2e227c){await botInstance['sendMessag'+'e'](_0x573af5,{'text':_0x593476(0x14c)+_0x593476(0x185)+'e\x20country\x20'+_0x593476(0x153)+'imezone\x20/\x20'+_0x593476(0x18d)+')\x20you\x20want'+_0x593476(0x141)+'ts\x20time\x20an'+'d\x20date.\x0a\x0aE'+'xample:\x20`t'+'ime\x20Kenya`'+'\x20or\x20`time\x20'+_0x593476(0x187)+_0x593476(0x131)});return;}let _0x24a11f=null;const _0x43bffa=normalizeKey(_0x2e227c);if(COUNTRY_TIMEZONES[_0x43bffa])_0x24a11f=COUNTRY_TIMEZONES[_0x43bffa];if(!_0x24a11f){const _0x49c750=_0x43bffa[_0x593476(0x135)](/\s+/g,'\x20');if(CITY_MAP[_0x49c750])_0x24a11f=CITY_MAP[_0x49c750];}if(!_0x24a11f)try{const _0x1d9b91=_0x2e227c[_0x593476(0x117)](),_0x3e0b44=DateTime[_0x593476(0x14d)]()[_0x593476(0x186)](_0x1d9b91);if(_0x3e0b44&&_0x3e0b44[_0x593476(0x17f)])_0x24a11f=_0x1d9b91;}catch(_0x43b99a){}if(!_0x24a11f){await botInstance[_0x593476(0x15d)+'e'](_0x573af5,{'text':'I\x20couldn\x27t'+_0x593476(0x15b)+'ly\x20resolve'+'\x20\x22'+_0x2e227c+('\x22\x20to\x20a\x20tim'+_0x593476(0x16b)+'ase\x20provid'+'e\x20either:\x0a'+_0x593476(0x178)+_0x593476(0x11e)+'.g.\x20\x22Kenya'+_0x593476(0x10d)+_0x593476(0x113)+_0x593476(0x17b)+'robi\x22),\x0a\x20â€¢'+_0x593476(0x12d)+_0x593476(0x13c)+_0x593476(0x145)+_0x593476(0x13a)+_0x593476(0x13e)+_0x593476(0x12f)+'.')});return;}const _0x4e2c3a=formatTimestampForZone(_0x24a11f),_0x4c77df=_0x2e227c+'\x20('+_0x24a11f+')',_0x1e5e75=buildBoxForTime(_0x4c77df,_0x4e2c3a['human'],_0x4e2c3a[_0x593476(0x129)]);await botInstance['sendMessag'+'e'](_0x573af5,{'text':_0x1e5e75}),info(name+(':\x20replied\x20'+_0x593476(0x134)+_0x593476(0x139))+_0x24a11f+_0x593476(0x18c)+_0x50fc70+_0x593476(0x144)+_0x573af5+(_0x593476(0x172)+'w=')+_0x422064+')');if(respondedMsgIds[_0x593476(0x18f)]>0x471+-0x1d00+0x2c17){const _0x28c686=Array['from'](respondedMsgIds);respondedMsgIds=new Set(_0x28c686[_0x593476(0x152)](-(-0x844+0x121e+0x1de)));}}catch(_0x29b0fc){error(_0x29b0fc,name+(_0x593476(0x132)+_0x593476(0x16c)));}}export async function cleanup(){const _0x1b89b6=_0x3e2745;try{botInstance=null,respondedMsgIds[_0x1b89b6(0x119)]&&respondedMsgIds[_0x1b89b6(0x119)](),info(name+(_0x1b89b6(0x169)+'p'));}catch(_0x1a9318){warn(name+(_0x1b89b6(0x10b)+_0x1b89b6(0x154))+(_0x1a9318?.[_0x1b89b6(0x167)]||_0x1a9318));}}